(function(W,K){typeof exports=="object"&&typeof module!="undefined"?K(exports):typeof define=="function"&&define.amd?define(["exports"],K):(W=typeof globalThis!="undefined"?globalThis:W||self,K(W.LD={}))})(this,function(W){"use strict";var gk=Object.defineProperty,yk=Object.defineProperties;var bk=Object.getOwnPropertyDescriptors;var Uo=Object.getOwnPropertySymbols;var nv=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable;var Ku=(W,K)=>(K=Symbol[W])?K:Symbol.for("Symbol."+W),vk=W=>{throw TypeError(W)};var zu=(W,K,he)=>K in W?gk(W,K,{enumerable:!0,configurable:!0,writable:!0,value:he}):W[K]=he,S=(W,K)=>{for(var he in K||(K={}))nv.call(K,he)&&zu(W,he,K[he]);if(Uo)for(var he of Uo(K))iv.call(K,he)&&zu(W,he,K[he]);return W},P=(W,K)=>yk(W,bk(K));var He=(W,K)=>{var he={};for(var Te in W)nv.call(W,Te)&&K.indexOf(Te)<0&&(he[Te]=W[Te]);if(W!=null&&Uo)for(var Te of Uo(W))K.indexOf(Te)<0&&iv.call(W,Te)&&(he[Te]=W[Te]);return he};var v=(W,K,he)=>zu(W,typeof K!="symbol"?K+"":K,he);var J=(W,K,he)=>new Promise((Te,qe)=>{var Xe=et=>{try{or(he.next(et))}catch(ar){qe(ar)}},Ot=et=>{try{or(he.throw(et))}catch(ar){qe(ar)}},or=et=>et.done?Te(et.value):Promise.resolve(et.value).then(Xe,Ot);or((he=he.apply(W,K)).next())}),Sk=function(W,K){this[0]=W,this[1]=K};var ju=W=>{var K=W[Ku("asyncIterator")],he=!1,Te,qe={};return K==null?(K=W[Ku("iterator")](),Te=Xe=>qe[Xe]=Ot=>K[Xe](Ot)):(K=K.call(W),Te=Xe=>qe[Xe]=Ot=>{if(he){if(he=!1,Xe==="throw")throw Ot;return Ot}return he=!0,{done:!1,value:new Sk(new Promise(or=>{var et=K[Xe](Ot);et instanceof Object||vk("Object expected"),or(et)}),1)}}),qe[Ku("iterator")]=()=>qe,Te("next"),"throw"in K?Te("throw"):qe.throw=Xe=>{throw Xe},"return"in K&&Te("return"),qe};function K(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const he={key:"_sid"},Te="rrweb/sequential-id@1",qe=r=>{const e=he;let t=0;return{name:Te,eventProcessor(n){return Object.assign(n,{[e.key]:++t}),n},options:e}};function Xe(r,e){if(!!!r)throw new Error(e)}function Ot(r){return typeof r=="object"&&r!==null}function or(r,e){if(!!!r)throw new Error("Unexpected invariant triggered.")}const et=/\r\n|[\n\r]/g;function ar(r,e){let t=0,n=1;for(const i of r.body.matchAll(et)){if(typeof i.index=="number"||or(!1),i.index>=e)break;t=i.index+i[0].length,n+=1}return{line:n,column:e+1-t}}function dv(r){return Qu(r.source,ar(r.source,r.start))}function Qu(r,e){const t=r.locationOffset.column-1,n="".padStart(t)+r.body,i=e.line-1,s=r.locationOffset.line-1,o=e.line+s,l=e.line===1?t:0,a=e.column+l,c=`${r.name}:${o}:${a}
`,u=n.split(/\r\n|[\n\r]/g),d=u[i];if(d.length>120){const h=Math.floor(a/80),f=a%80,m=[];for(let p=0;p<d.length;p+=80)m.push(d.slice(p,p+80));return c+$u([[`${o} |`,m[0]],...m.slice(1,h+1).map(p=>["|",p]),["|","^".padStart(f)],["|",m[h+1]]])}return c+$u([[`${o-1} |`,u[i-1]],[`${o} |`,d],["|","^".padStart(a)],[`${o+1} |`,u[i+1]]])}function $u(r){const e=r.filter(([n,i])=>i!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(t)+(i?" "+i:"")).join(`
`)}function hv(r){const e=r[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:r[1],positions:r[2],path:r[3],originalError:r[4],extensions:r[5]}:e}class Fo extends Error{constructor(e,...t){var n,i,s;const{nodes:o,source:l,positions:a,path:c,originalError:u,extensions:d}=hv(t);super(e),this.name="GraphQLError",this.path=c!=null?c:void 0,this.originalError=u!=null?u:void 0,this.nodes=qu(Array.isArray(o)?o:o?[o]:void 0);const h=qu((n=this.nodes)===null||n===void 0?void 0:n.map(m=>m.loc).filter(m=>m!=null));this.source=l!=null?l:h==null||(i=h[0])===null||i===void 0?void 0:i.source,this.positions=a!=null?a:h==null?void 0:h.map(m=>m.start),this.locations=a&&l?a.map(m=>ar(l,m)):h==null?void 0:h.map(m=>ar(m.source,m.start));const f=Ot(u==null?void 0:u.extensions)?u==null?void 0:u.extensions:void 0;this.extensions=(s=d!=null?d:f)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Fo):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+dv(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Qu(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function qu(r){return r===void 0||r.length===0?void 0:r}function we(r,e,t){return new Fo(`Syntax Error: ${t}`,{source:r,positions:[e]})}class fv{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class ed{constructor(e,t,n,i,s,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const td={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},pv=new Set(Object.keys(td));function rd(r){const e=r==null?void 0:r.kind;return typeof e=="string"&&pv.has(e)}var Gr;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(Gr||(Gr={}));var Do;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Do||(Do={}));var F;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(F||(F={}));function Yo(r){return r===9||r===32}function pn(r){return r>=48&&r<=57}function nd(r){return r>=97&&r<=122||r>=65&&r<=90}function id(r){return nd(r)||r===95}function mv(r){return nd(r)||pn(r)||r===95}function gv(r){var e;let t=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<r.length;++o){var s;const l=r[o],a=yv(l);a!==l.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&a<t&&(t=a))}return r.map((o,l)=>l===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function yv(r){let e=0;for(;e<r.length&&Yo(r.charCodeAt(e));)++e;return e}function bv(r,e){const t=r.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(f=>f.length===0||Yo(f.charCodeAt(0))),o=t.endsWith('\\"""'),l=r.endsWith('"')&&!o,a=r.endsWith("\\"),c=l||a,u=!i||r.length>70||c||s||o;let d="";const h=i&&Yo(r.charCodeAt(0));return(u&&!h||s)&&(d+=`
`),d+=t,(u||c)&&(d+=`
`),'"""'+d+'"""'}var I;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(I||(I={}));class vv{constructor(e){const t=new ed(I.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==I.EOF)do if(e.next)e=e.next;else{const t=_v(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===I.COMMENT);return e}}function Sv(r){return r===I.BANG||r===I.DOLLAR||r===I.AMP||r===I.PAREN_L||r===I.PAREN_R||r===I.SPREAD||r===I.COLON||r===I.EQUALS||r===I.AT||r===I.BRACKET_L||r===I.BRACKET_R||r===I.BRACE_L||r===I.PIPE||r===I.BRACE_R}function Vr(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function Li(r,e){return sd(r.charCodeAt(e))&&od(r.charCodeAt(e+1))}function sd(r){return r>=55296&&r<=56319}function od(r){return r>=56320&&r<=57343}function lr(r,e){const t=r.source.body.codePointAt(e);if(t===void 0)return I.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function _e(r,e,t,n,i){const s=r.line,o=1+t-r.lineStart;return new ed(e,t,n,s,o,i)}function _v(r,e){const t=r.source.body,n=t.length;let i=e;for(;i<n;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++r.line,r.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++r.line,r.lineStart=i;continue;case 35:return Tv(r,i);case 33:return _e(r,I.BANG,i,i+1);case 36:return _e(r,I.DOLLAR,i,i+1);case 38:return _e(r,I.AMP,i,i+1);case 40:return _e(r,I.PAREN_L,i,i+1);case 41:return _e(r,I.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return _e(r,I.SPREAD,i,i+3);break;case 58:return _e(r,I.COLON,i,i+1);case 61:return _e(r,I.EQUALS,i,i+1);case 64:return _e(r,I.AT,i,i+1);case 91:return _e(r,I.BRACKET_L,i,i+1);case 93:return _e(r,I.BRACKET_R,i,i+1);case 123:return _e(r,I.BRACE_L,i,i+1);case 124:return _e(r,I.PIPE,i,i+1);case 125:return _e(r,I.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?Lv(r,i):wv(r,i)}if(pn(s)||s===45)return Ev(r,i,s);if(id(s))return Ov(r,i);throw we(r.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Vr(s)||Li(t,i)?`Unexpected character: ${lr(r,i)}.`:`Invalid character: ${lr(r,i)}.`)}return _e(r,I.EOF,n,n)}function Tv(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(s===10||s===13)break;if(Vr(s))++i;else if(Li(t,i))i+=2;else break}return _e(r,I.COMMENT,e,i,t.slice(e+1,i))}function Ev(r,e,t){const n=r.source.body;let i=e,s=t,o=!1;if(s===45&&(s=n.charCodeAt(++i)),s===48){if(s=n.charCodeAt(++i),pn(s))throw we(r.source,i,`Invalid number, unexpected digit after 0: ${lr(r,i)}.`)}else i=Jo(r,i,s),s=n.charCodeAt(i);if(s===46&&(o=!0,s=n.charCodeAt(++i),i=Jo(r,i,s),s=n.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=n.charCodeAt(++i),(s===43||s===45)&&(s=n.charCodeAt(++i)),i=Jo(r,i,s),s=n.charCodeAt(i)),s===46||id(s))throw we(r.source,i,`Invalid number, expected digit but got: ${lr(r,i)}.`);return _e(r,o?I.FLOAT:I.INT,e,i,n.slice(e,i))}function Jo(r,e,t){if(!pn(t))throw we(r.source,e,`Invalid number, expected digit but got: ${lr(r,e)}.`);const n=r.source.body;let i=e+1;for(;pn(n.charCodeAt(i));)++i;return i}function wv(r,e){const t=r.source.body,n=t.length;let i=e+1,s=i,o="";for(;i<n;){const l=t.charCodeAt(i);if(l===34)return o+=t.slice(s,i),_e(r,I.STRING,e,i+1,o);if(l===92){o+=t.slice(s,i);const a=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?Rv(r,i):Iv(r,i):Cv(r,i);o+=a.value,i+=a.size,s=i;continue}if(l===10||l===13)break;if(Vr(l))++i;else if(Li(t,i))i+=2;else throw we(r.source,i,`Invalid character within String: ${lr(r,i)}.`)}throw we(r.source,i,"Unterminated string.")}function Rv(r,e){const t=r.source.body;let n=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(s===125){if(i<5||!Vr(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|mn(s),n<0)break}throw we(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function Iv(r,e){const t=r.source.body,n=ad(t,e+2);if(Vr(n))return{value:String.fromCodePoint(n),size:6};if(sd(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=ad(t,e+8);if(od(i))return{value:String.fromCodePoint(n,i),size:12}}throw we(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function ad(r,e){return mn(r.charCodeAt(e))<<12|mn(r.charCodeAt(e+1))<<8|mn(r.charCodeAt(e+2))<<4|mn(r.charCodeAt(e+3))}function mn(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function Cv(r,e){const t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw we(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function Lv(r,e){const t=r.source.body,n=t.length;let i=r.lineStart,s=e+3,o=s,l="";const a=[];for(;s<n;){const c=t.charCodeAt(s);if(c===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){l+=t.slice(o,s),a.push(l);const u=_e(r,I.BLOCK_STRING,e,s+3,gv(a).join(`
`));return r.line+=a.length-1,r.lineStart=i,u}if(c===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){l+=t.slice(o,s),o=s+1,s+=4;continue}if(c===10||c===13){l+=t.slice(o,s),a.push(l),c===13&&t.charCodeAt(s+1)===10?s+=2:++s,l="",o=s,i=s;continue}if(Vr(c))++s;else if(Li(t,s))s+=2;else throw we(r.source,s,`Invalid character within String: ${lr(r,s)}.`)}throw we(r.source,s,"Unterminated string.")}function Ov(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(mv(s))++i;else break}return _e(r,I.NAME,e,i,t.slice(e,i))}const Zv=10,ld=2;function Ho(r){return Oi(r,[])}function Oi(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return Nv(r,e);default:return String(r)}}function Nv(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";const t=[...e,r];if(Gv(r)){const n=r.toJSON();if(n!==r)return typeof n=="string"?n:Oi(n,t)}else if(Array.isArray(r))return xv(r,t);return Vv(r,t)}function Gv(r){return typeof r.toJSON=="function"}function Vv(r,e){const t=Object.entries(r);return t.length===0?"{}":e.length>ld?"["+Xv(r)+"]":"{ "+t.map(([i,s])=>i+": "+Oi(s,e)).join(", ")+" }"}function xv(r,e){if(r.length===0)return"[]";if(e.length>ld)return"[Array]";const t=Math.min(Zv,r.length),n=r.length-t,i=[];for(let s=0;s<t;++s)i.push(Oi(r[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function Xv(r){const e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){const t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const kv=globalThis.process&&process.env.NODE_ENV==="production"?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var n;const i=t.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(i===s){const o=Ho(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class cd{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Xe(!1,`Body must be a string. Received: ${Ho(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Xe(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Xe(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Wv(r){return kv(r,cd)}function Bo(r,e){const t=new Av(r,e),n=t.parseDocument();return Object.defineProperty(n,"tokenCount",{enumerable:!1,value:t.tokenCount}),n}class Av{constructor(e,t={}){const n=Wv(e)?e:new cd(e);this._lexer=new vv(n),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(I.NAME);return this.node(e,{kind:F.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:F.DOCUMENT,definitions:this.many(I.SOF,this.parseDefinition,I.EOF)})}parseDefinition(){if(this.peek(I.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===I.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw we(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(I.BRACE_L))return this.node(e,{kind:F.OPERATION_DEFINITION,operation:Gr.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(I.NAME)&&(n=this.parseName()),this.node(e,{kind:F.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(I.NAME);switch(e.value){case"query":return Gr.QUERY;case"mutation":return Gr.MUTATION;case"subscription":return Gr.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(I.PAREN_L,this.parseVariableDefinition,I.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:F.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(I.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(I.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(I.DOLLAR),this.node(e,{kind:F.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:F.SELECTION_SET,selections:this.many(I.BRACE_L,this.parseSelection,I.BRACE_R)})}parseSelection(){return this.peek(I.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(I.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:F.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(I.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(I.PAREN_L,t,I.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(I.COLON),this.node(t,{kind:F.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(I.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(I.NAME)?this.node(e,{kind:F.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:F.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:F.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:F.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case I.BRACKET_L:return this.parseList(e);case I.BRACE_L:return this.parseObject(e);case I.INT:return this.advanceLexer(),this.node(t,{kind:F.INT,value:t.value});case I.FLOAT:return this.advanceLexer(),this.node(t,{kind:F.FLOAT,value:t.value});case I.STRING:case I.BLOCK_STRING:return this.parseStringLiteral();case I.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:F.BOOLEAN,value:!0});case"false":return this.node(t,{kind:F.BOOLEAN,value:!1});case"null":return this.node(t,{kind:F.NULL});default:return this.node(t,{kind:F.ENUM,value:t.value})}case I.DOLLAR:if(e)if(this.expectToken(I.DOLLAR),this._lexer.token.kind===I.NAME){const n=this._lexer.token.value;throw we(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:F.STRING,value:e.value,block:e.kind===I.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:F.LIST,values:this.any(I.BRACKET_L,t,I.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:F.OBJECT,fields:this.any(I.BRACE_L,t,I.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(I.COLON),this.node(t,{kind:F.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(I.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(I.AT),this.node(t,{kind:F.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(I.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(I.BRACKET_R),t=this.node(e,{kind:F.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(I.BANG)?this.node(e,{kind:F.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:F.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(I.STRING)||this.peek(I.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(I.BRACE_L,this.parseOperationTypeDefinition,I.BRACE_R);return this.node(e,{kind:F.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(I.COLON);const n=this.parseNamedType();return this.node(e,{kind:F.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:F.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:F.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(I.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(I.BRACE_L,this.parseFieldDefinition,I.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(I.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:F.FIELD_DEFINITION,description:t,name:n,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(I.PAREN_L,this.parseInputValueDef,I.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(I.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(I.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:F.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:F.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:F.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(I.EQUALS)?this.delimitedMany(I.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:F.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(I.BRACE_L,this.parseEnumValueDefinition,I.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:F.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw we(this._lexer.source,this._lexer.token.start,`${Zi(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:F.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(I.BRACE_L,this.parseInputValueDef,I.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===I.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(I.BRACE_L,this.parseOperationTypeDefinition,I.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:F.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:F.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:F.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:F.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:F.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:F.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:F.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(I.AT);const n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:F.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(I.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Do,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new fv(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw we(this._lexer.source,t.start,`Expected ${ud(e)}, found ${Zi(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===I.NAME&&t.value===e)this.advanceLexer();else throw we(this._lexer.source,t.start,`Expected "${e}", found ${Zi(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===I.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e!=null?e:this._lexer.token;return we(this._lexer.source,t.start,`Unexpected ${Zi(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,t,n){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==I.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw we(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Zi(r){const e=r.value;return ud(r.kind)+(e!=null?` "${e}"`:"")}function ud(r){return Sv(r)?`"${r}"`:r}function Pv(r){return`"${r.replace(Mv,Uv)}"`}const Mv=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Uv(r){return Fv[r.charCodeAt(0)]}const Fv=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Dv=Object.freeze({});function Yv(r,e,t=td){const n=new Map;for(const y of Object.values(F))n.set(y,Jv(e,y));let i,s=Array.isArray(r),o=[r],l=-1,a=[],c=r,u,d;const h=[],f=[];do{l++;const y=l===o.length,T=y&&a.length!==0;if(y){if(u=f.length===0?void 0:h[h.length-1],c=d,d=f.pop(),T)if(s){c=c.slice();let C=0;for(const[R,N]of a){const V=R-C;N===null?(c.splice(V,1),C++):c[V]=N}}else{c=S({},c);for(const[C,R]of a)c[C]=R}l=i.index,o=i.keys,a=i.edits,s=i.inArray,i=i.prev}else if(d){if(u=s?l:o[l],c=d[u],c==null)continue;h.push(u)}let E;if(!Array.isArray(c)){var m,p;rd(c)||Xe(!1,`Invalid AST Node: ${Ho(c)}.`);const C=y?(m=n.get(c.kind))===null||m===void 0?void 0:m.leave:(p=n.get(c.kind))===null||p===void 0?void 0:p.enter;if(E=C==null?void 0:C.call(e,c,u,d,h,f),E===Dv)break;if(E===!1){if(!y){h.pop();continue}}else if(E!==void 0&&(a.push([u,E]),!y))if(rd(E))c=E;else{h.pop();continue}}if(E===void 0&&T&&a.push([u,c]),y)h.pop();else{var g;i={inArray:s,index:l,keys:o,edits:a,prev:i},s=Array.isArray(c),o=s?c:(g=t[c.kind])!==null&&g!==void 0?g:[],l=-1,a=[],d&&f.push(d),d=c}}while(i!==void 0);return a.length!==0?a[a.length-1][1]:r}function Jv(r,e){const t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function Ko(r){return Yv(r,Bv)}const Hv=80,Bv={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>X(r.definitions,`

`)},OperationDefinition:{leave(r){const e=q("(",X(r.variableDefinitions,", "),")"),t=X([r.operation,X([r.name,e]),X(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:n})=>r+": "+e+q(" = ",t)+q(" ",X(n," "))},SelectionSet:{leave:({selections:r})=>dt(r)},Field:{leave({alias:r,name:e,arguments:t,directives:n,selectionSet:i}){const s=q("",r,": ")+e;let o=s+q("(",X(t,", "),")");return o.length>Hv&&(o=s+q(`(
`,Ni(X(t,`
`)),`
)`)),X([o,X(n," "),i]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+q(" ",X(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>X(["...",q("on ",r),X(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:i})=>`fragment ${r}${q("(",X(t,", "),")")} on ${e} ${q("",X(n," ")," ")}`+i},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?bv(r):Pv(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+X(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+X(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+q("(",X(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>q("",r,`
`)+X(["schema",X(e," "),dt(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>q("",r,`
`)+X(["scalar",e,X(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>q("",r,`
`)+X(["type",e,q("implements ",X(t," & ")),X(n," "),dt(i)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:n,directives:i})=>q("",r,`
`)+e+(dd(t)?q(`(
`,Ni(X(t,`
`)),`
)`):q("(",X(t,", "),")"))+": "+n+q(" ",X(i," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:n,directives:i})=>q("",r,`
`)+X([e+": "+t,q("= ",n),X(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>q("",r,`
`)+X(["interface",e,q("implements ",X(t," & ")),X(n," "),dt(i)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:n})=>q("",r,`
`)+X(["union",e,X(t," "),q("= ",X(n," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:n})=>q("",r,`
`)+X(["enum",e,X(t," "),dt(n)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>q("",r,`
`)+X([e,X(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:n})=>q("",r,`
`)+X(["input",e,X(t," "),dt(n)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:n,locations:i})=>q("",r,`
`)+"directive @"+e+(dd(t)?q(`(
`,Ni(X(t,`
`)),`
)`):q("(",X(t,", "),")"))+(n?" repeatable":"")+" on "+X(i," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>X(["extend schema",X(r," "),dt(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>X(["extend scalar",r,X(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>X(["extend type",r,q("implements ",X(e," & ")),X(t," "),dt(n)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>X(["extend interface",r,q("implements ",X(e," & ")),X(t," "),dt(n)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>X(["extend union",r,X(e," "),q("= ",X(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>X(["extend enum",r,X(e," "),dt(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>X(["extend input",r,X(e," "),dt(t)]," ")}};function X(r,e=""){var t;return(t=r==null?void 0:r.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function dt(r){return q(`{
`,Ni(X(r,`
`)),`
}`)}function q(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Ni(r){return q("  ",r.replace(/\n/g,`
  `))}function dd(r){var e;return(e=r==null?void 0:r.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const zo=JSON,Kv=r=>r.toUpperCase(),zv=r=>{const e={};return r.forEach((t,n)=>{e[n]=t}),e},jv=(r,e,t)=>r.document?r:{document:r,variables:e,requestHeaders:t,signal:void 0},Qv=(r,e,t)=>r.query?r:{query:r,variables:e,requestHeaders:t,signal:void 0},$v=(r,e)=>r.documents?r:{documents:r,requestHeaders:e,signal:void 0},hd=r=>{var n,i;let e;const t=r.definitions.filter(s=>s.kind==="OperationDefinition");return t.length===1&&(e=(i=(n=t[0])==null?void 0:n.name)==null?void 0:i.value),e},jo=r=>{if(typeof r=="string"){let t;try{const n=Bo(r);t=hd(n)}catch(n){}return{query:r,operationName:t}}const e=hd(r);return{query:Ko(r),operationName:e}};class xr extends Error{constructor(e,t){const n=`${xr.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`;super(n),Object.setPrototypeOf(this,xr.prototype),this.response=e,this.request=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xr)}static extractMessage(e){var t,n,i;return(i=(n=(t=e.errors)==null?void 0:t[0])==null?void 0:n.message)!=null?i:`GraphQL Error (Code: ${e.status})`}}var Qo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Gi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $o={exports:{}};(function(r,e){var t=typeof self!="undefined"?self:Qo,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(b){return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function a(b){return b&&DataView.prototype.isPrototypeOf(b)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(b){return b&&c.indexOf(Object.prototype.toString.call(b))>-1};function d(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function h(b){return typeof b!="string"&&(b=String(b)),b}function f(b){var _={next:function(){var x=b.shift();return{done:x===void 0,value:x}}};return l.iterable&&(_[Symbol.iterator]=function(){return _}),_}function m(b){this.map={},b instanceof m?b.forEach(function(_,x){this.append(x,_)},this):Array.isArray(b)?b.forEach(function(_){this.append(_[0],_[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(_){this.append(_,b[_])},this)}m.prototype.append=function(b,_){b=d(b),_=h(_);var x=this.map[b];this.map[b]=x?x+", "+_:_},m.prototype.delete=function(b){delete this.map[d(b)]},m.prototype.get=function(b){return b=d(b),this.has(b)?this.map[b]:null},m.prototype.has=function(b){return this.map.hasOwnProperty(d(b))},m.prototype.set=function(b,_){this.map[d(b)]=h(_)},m.prototype.forEach=function(b,_){for(var x in this.map)this.map.hasOwnProperty(x)&&b.call(_,this.map[x],x,this)},m.prototype.keys=function(){var b=[];return this.forEach(function(_,x){b.push(x)}),f(b)},m.prototype.values=function(){var b=[];return this.forEach(function(_){b.push(_)}),f(b)},m.prototype.entries=function(){var b=[];return this.forEach(function(_,x){b.push([x,_])}),f(b)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function p(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function g(b){return new Promise(function(_,x){b.onload=function(){_(b.result)},b.onerror=function(){x(b.error)}})}function y(b){var _=new FileReader,x=g(_);return _.readAsArrayBuffer(b),x}function T(b){var _=new FileReader,x=g(_);return _.readAsText(b),x}function E(b){for(var _=new Uint8Array(b),x=new Array(_.length),U=0;U<_.length;U++)x[U]=String.fromCharCode(_[U]);return x.join("")}function C(b){if(b.slice)return b.slice(0);var _=new Uint8Array(b.byteLength);return _.set(new Uint8Array(b)),_.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:l.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:l.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():l.arrayBuffer&&l.blob&&a(b)?(this._bodyArrayBuffer=C(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||u(b))?this._bodyArrayBuffer=C(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var b=p(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var b=p(this);if(b)return b;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(b){var _=b.toUpperCase();return N.indexOf(_)>-1?_:b}function Z(b,_){_=_||{};var x=_.body;if(b instanceof Z){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,_.headers||(this.headers=new m(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!x&&b._bodyInit!=null&&(x=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new m(_.headers)),this.method=V(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(x)}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})};function w(b){var _=new FormData;return b.trim().split("&").forEach(function(x){if(x){var U=x.split("="),D=U.shift().replace(/\+/g," "),M=U.join("=").replace(/\+/g," ");_.append(decodeURIComponent(D),decodeURIComponent(M))}}),_}function L(b){var _=new m,x=b.replace(/\r?\n[\t ]+/g," ");return x.split(/\r?\n/).forEach(function(U){var D=U.split(":"),M=D.shift().trim();if(M){var Y=D.join(":").trim();_.append(M,Y)}}),_}R.call(Z.prototype);function k(b,_){_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in _?_.statusText:"OK",this.headers=new m(_.headers),this.url=_.url||"",this._initBody(b)}R.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},k.error=function(){var b=new k(null,{status:0,statusText:""});return b.type="error",b};var A=[301,302,303,307,308];k.redirect=function(b,_){if(A.indexOf(_)===-1)throw new RangeError("Invalid status code");return new k(null,{status:_,headers:{location:b}})},o.DOMException=s.DOMException;try{new o.DOMException}catch(b){o.DOMException=function(_,x){this.message=_,this.name=x;var U=Error(_);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(b,_){return new Promise(function(x,U){var D=new Z(b,_);if(D.signal&&D.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function Y(){M.abort()}M.onload=function(){var ne={status:M.status,statusText:M.statusText,headers:L(M.getAllResponseHeaders()||"")};ne.url="responseURL"in M?M.responseURL:ne.headers.get("X-Request-URL");var Le="response"in M?M.response:M.responseText;x(new k(Le,ne))},M.onerror=function(){U(new TypeError("Network request failed"))},M.ontimeout=function(){U(new TypeError("Network request failed"))},M.onabort=function(){U(new o.DOMException("Aborted","AbortError"))},M.open(D.method,D.url,!0),D.credentials==="include"?M.withCredentials=!0:D.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&l.blob&&(M.responseType="blob"),D.headers.forEach(function(ne,Le){M.setRequestHeader(Le,ne)}),D.signal&&(D.signal.addEventListener("abort",Y),M.onreadystatechange=function(){M.readyState===4&&D.signal.removeEventListener("abort",Y)}),M.send(typeof D._bodyInit=="undefined"?null:D._bodyInit)})}return $.polyfill=!0,s.fetch||(s.fetch=$,s.Headers=m,s.Request=Z,s.Response=k),o.Headers=m,o.Request=Z,o.Response=k,o.fetch=$,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})($o,$o.exports);var Vi=$o.exports;const xi=Gi(Vi),qv=K({__proto__:null,default:xi},[Vi]),Xr=r=>{let e={};return r&&(typeof Headers!="undefined"&&r instanceof Headers||qv&&Vi.Headers&&r instanceof Vi.Headers?e=zv(r):Array.isArray(r)?r.forEach(([t,n])=>{t&&n!==void 0&&(e[t]=n)}):e=r),e},fd=r=>r.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),e0=r=>{if(!Array.isArray(r.query)){const n=r,i=[`query=${encodeURIComponent(fd(n.query))}`];return r.variables&&i.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&i.push(`operationName=${encodeURIComponent(n.operationName)}`),i.join("&")}if(typeof r.variables!="undefined"&&!Array.isArray(r.variables))throw new Error("Cannot create query with given variable type, array expected");const e=r,t=r.query.reduce((n,i,s)=>(n.push({query:fd(i),variables:e.variables?e.jsonSerializer.stringify(e.variables[s]):void 0}),n),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},t0=r=>e=>J(this,null,function*(){var p;const{url:t,query:n,variables:i,operationName:s,fetch:o,fetchOptions:l,middleware:a}=e,c=S({},e.headers);let u="",d;r==="POST"?(d=r0(n,i,s,l.jsonSerializer),typeof d=="string"&&(c["Content-Type"]="application/json")):u=e0({query:n,variables:i,operationName:s,jsonSerializer:(p=l.jsonSerializer)!=null?p:zo});const h=S({method:r,headers:c,body:d},l);let f=t,m=h;if(a){const g=yield Promise.resolve(a(P(S({},h),{url:t,operationName:s,variables:i}))),{url:T}=g,E=He(g,["url"]);f=T,m=E}return u&&(f=`${f}?${u}`),yield o(f,m)});class qo{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=(...n)=>J(this,null,function*(){const[i,s,o]=n,l=Qv(i,s,o),g=this.requestConfig,{headers:a,fetch:c=xi,method:u="POST",requestMiddleware:d,responseMiddleware:h}=g,f=He(g,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:m}=this;l.signal!==void 0&&(f.signal=l.signal);const{operationName:p}=jo(l.query);return ea({url:m,query:l.query,variables:l.variables,headers:S(S({},Xr(ta(a))),Xr(l.requestHeaders)),operationName:p,fetch:c,method:u,fetchOptions:f,middleware:d}).then(y=>(h&&h(y),y)).catch(y=>{throw h&&h(y),y})})}request(e,...t){return J(this,null,function*(){const[n,i]=t,s=jv(e,n,i),p=this.requestConfig,{headers:o,fetch:l=xi,method:a="POST",requestMiddleware:c,responseMiddleware:u}=p,d=He(p,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:h}=this;s.signal!==void 0&&(d.signal=s.signal);const{query:f,operationName:m}=jo(s.document);return ea({url:h,query:f,variables:s.variables,headers:S(S({},Xr(ta(o))),Xr(s.requestHeaders)),operationName:m,fetch:l,method:a,fetchOptions:d,middleware:c}).then(g=>(u&&u(g),g.data)).catch(g=>{throw u&&u(g),g})})}batchRequests(e,t){var c;const n=$v(e,t),a=this.requestConfig,{headers:i}=a,s=He(a,["headers"]);n.signal!==void 0&&(s.signal=n.signal);const o=n.documents.map(({document:u})=>jo(u).query),l=n.documents.map(({variables:u})=>u);return ea({url:this.url,query:o,variables:l,headers:S(S({},Xr(ta(i))),Xr(n.requestHeaders)),operationName:void 0,fetch:(c=this.requestConfig.fetch)!=null?c:xi,method:this.requestConfig.method||"POST",fetchOptions:s,middleware:this.requestConfig.requestMiddleware}).then(u=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u.data)).catch(u=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:n}=this.requestConfig;return n?n[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const ea=r=>J(this,null,function*(){var u,d;const{query:e,variables:t,fetchOptions:n}=r,i=t0(Kv((u=r.method)!=null?u:"post")),s=Array.isArray(r.query),o=yield i(r),l=yield n0(o,(d=n.jsonSerializer)!=null?d:zo),a=Array.isArray(l)?!l.some(({data:f})=>!f):!!l.data,c=Array.isArray(l)||!l.errors||Array.isArray(l.errors)&&!l.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(o.ok&&c&&a){const h=(Array.isArray(l),l),{errors:f}=h,m=He(h,["errors"]),p=n.errorPolicy==="ignore"?m:l;return P(S({},s?{data:p}:p),{headers:o.headers,status:o.status})}else{const f=typeof l=="string"?{error:l}:l;throw new xr(P(S({},f),{status:o.status,headers:o.headers}),{query:e,variables:t})}}),r0=(r,e,t,n)=>{const i=n!=null?n:zo;if(!Array.isArray(r))return i.stringify({query:r,variables:e,operationName:t});if(typeof e!="undefined"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");const s=r.reduce((o,l,a)=>(o.push({query:l,variables:e?e[a]:void 0}),o),[]);return i.stringify(s)},n0=(r,e)=>J(this,null,function*(){let t;return r.headers.forEach((n,i)=>{i.toLowerCase()==="content-type"&&(t=n)}),t&&(t.toLowerCase().startsWith("application/json")||t.toLowerCase().startsWith("application/graphql+json")||t.toLowerCase().startsWith("application/graphql-response+json"))?e.parse(yield r.text()):r.text()}),ta=r=>typeof r=="function"?r():r;var ra={exports:{}};(function(r,e){e=r.exports=t,e.getSerialize=n;function t(i,s,o,l){return JSON.stringify(i,n(s,l),o)}function n(i,s){var o=[],l=[];return s==null&&(s=function(a,c){return o[0]===c?"[Circular ~]":"[Circular ~."+l.slice(0,o.indexOf(c)).join(".")+"]"}),function(a,c){if(o.length>0){var u=o.indexOf(this);~u?o.splice(u+1):o.push(this),~u?l.splice(u,1/0,a):l.push(a),~o.indexOf(c)&&(c=s.call(this,a,c))}else o.push(c);return i==null?c:i.call(this,a,c)}}})(ra,ra.exports);var i0=ra.exports;const ht=Gi(i0);var s0=Object.defineProperty,o0=(r,e,t)=>e in r?s0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e,t)=>o0(r,typeof e!="symbol"?e+"":e,t),pd,a0=Object.defineProperty,l0=(r,e,t)=>e in r?a0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,md=(r,e,t)=>l0(r,typeof e!="symbol"?e+"":e,t),Ee=(r=>(r[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment",r))(Ee||{});const gd={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},yd={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Xi={},c0=()=>!!globalThis.Zone;function na(r){if(Xi[r])return Xi[r];const e=globalThis[r],t=e.prototype,n=r in gd?gd[r]:void 0,i=!!(n&&n.every(l=>{var a,c;return!!((c=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&c.toString().includes("[native code]"))})),s=r in yd?yd[r]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!c0())return Xi[r]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const c=a[r].prototype;return document.body.removeChild(l),c?Xi[r]=c:t}catch(l){return t}}const ia={};function Yt(r,e,t){var n;const i=`${r}.${String(t)}`;if(ia[i])return ia[i].call(e);const s=na(r),o=(n=Object.getOwnPropertyDescriptor(s,t))==null?void 0:n.get;return o?(ia[i]=o,o.call(e)):e[t]}const sa={};function bd(r,e,t){const n=`${r}.${String(t)}`;if(sa[n])return sa[n].bind(e);const s=na(r)[t];return typeof s!="function"?e[t]:(sa[n]=s,s.bind(e))}function u0(r){return Yt("Node",r,"childNodes")}function d0(r){return Yt("Node",r,"parentNode")}function h0(r){return Yt("Node",r,"parentElement")}function f0(r){return Yt("Node",r,"textContent")}function p0(r,e){return bd("Node",r,"contains")(e)}function m0(r){return bd("Node",r,"getRootNode")()}function g0(r){return!r||!("host"in r)?null:Yt("ShadowRoot",r,"host")}function y0(r){return r.styleSheets}function b0(r){return!r||!("shadowRoot"in r)?null:Yt("Element",r,"shadowRoot")}function v0(r,e){return Yt("Element",r,"querySelector")(e)}function S0(r,e){return Yt("Element",r,"querySelectorAll")(e)}function _0(){return na("MutationObserver").constructor}function T0(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}const Oe={childNodes:u0,parentNode:d0,parentElement:h0,textContent:f0,contains:p0,getRootNode:m0,host:g0,styleSheets:y0,shadowRoot:b0,querySelector:v0,querySelectorAll:S0,mutationObserver:_0,patch:T0};function vd(r){return r.nodeType===r.ELEMENT_NODE}function gn(r){const e=r&&"host"in r&&"mode"in r&&Oe.host(r)||null;return!!(e&&"shadowRoot"in e&&Oe.shadowRoot(e)===r)}function yn(r){return Object.prototype.toString.call(r)==="[object ShadowRoot]"}function E0(r){return r.includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r}function w0(r){const{cssText:e}=r;if(e.split('"').length<3)return e;const t=["@import",`url(${JSON.stringify(r.href)})`];return r.layerName===""?t.push("layer"):r.layerName&&t.push(`layer(${r.layerName})`),r.supportsText&&t.push(`supports(${r.supportsText})`),r.media.length&&t.push(r.media.mediaText),t.join(" ")+";"}function oa(r){try{const e=r.rules||r.cssRules;if(!e)return null;let t=r.href;!t&&r.ownerNode&&r.ownerNode.ownerDocument&&(t=r.ownerNode.ownerDocument.location.href);const n=Array.from(e,i=>Sd(i,t)).join("");return E0(n)}catch(e){return null}}function Sd(r,e){if(I0(r)){let t;try{t=oa(r.styleSheet)||w0(r)}catch(n){t=r.cssText}return r.styleSheet.href?Ai(t,r.styleSheet.href):t}else{let t=r.cssText;return C0(r)&&r.selectorText.includes(":")&&(t=R0(t)),e?Ai(t,e):t}}function R0(r){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return r.replace(e,"$1\\$2")}function I0(r){return"styleSheet"in r}function C0(r){return"selectorText"in r}class _d{constructor(){md(this,"idNodeMap",new Map),md(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const n=(t=this.getMeta(e))==null?void 0:t.id;return n!=null?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function L0(){return new _d}function ki({element:r,maskInputOptions:e,tagName:t,type:n,value:i,overwriteRecord:s,maskInputFn:o}){let l=i||"";return Rd({maskInputOptions:e,tagName:t,type:n,overwriteRecord:s})&&(o?l=o(l,r):l="*".repeat(l.length)),l}function kr(r){return r.toLowerCase()}const Td="__rrweb_original__";function O0(r){const e=r.getContext("2d");if(!e)return!0;const t=50;for(let n=0;n<r.width;n+=t)for(let i=0;i<r.height;i+=t){const s=e.getImageData,o=Td in s?s[Td]:s;if(new Uint32Array(o.call(e,n,i,Math.min(t,r.width-n),Math.min(t,r.height-i)).data.buffer).some(a=>a!==0))return!1}return!0}function Wi(r){const e=r.type;return r.hasAttribute("data-rr-is-password")?"password":e?kr(e):null}function Ed(r,e){var s;let t;try{t=new URL(r,window.location.href)}catch(o){return null}const n=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(n);return(s=i==null?void 0:i[1])!=null?s:null}function Z0(r){let e="";return r.indexOf("//")>-1?e=r.split("/").slice(0,3).join("/"):e=r.split("/")[0],e=e.split("?")[0],e}const N0=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,G0=/^(?:[a-z+]+:)?\/\//i,V0=/^www\..*/i,x0=/^(data:)([^,]*),(.*)/i;function Ai(r,e){return(r||"").replace(N0,(t,n,i,s,o,l)=>{const a=i||o||l,c=n||s||"";if(!a)return t;if(G0.test(a)||V0.test(a))return`url(${c}${a}${c})`;if(x0.test(a))return`url(${c}${a}${c})`;if(a[0]==="/")return`url(${c}${Z0(e)+a}${c})`;const u=e.split("/"),d=a.split("/");u.pop();for(const h of d)h!=="."&&(h===".."?u.pop():u.push(h));return`url(${c}${u.join("/")}${c})`})}function Pi(r,e=!1){return e?r.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):r.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function X0(r,e,t=!1){const n=Array.from(e.childNodes),i=[];let s=0;if(n.length>1&&r&&typeof r=="string"){let o=Pi(r,t);const l=o.length/r.length;for(let a=1;a<n.length;a++)if(n[a].textContent&&typeof n[a].textContent=="string"){const c=Pi(n[a].textContent,t),u=100;let d=3;for(;d<c.length&&(c[d].match(/[a-zA-Z0-9]/)||c.indexOf(c.substring(0,d),1)!==-1);d++);for(;d<c.length;d++){let h=c.substring(0,d),f=o.split(h),m=-1;if(f.length===2)m=f[0].length;else if(f.length>2&&f[0]===""&&n[a-1].textContent!=="")m=o.indexOf(h,1);else if(f.length===1){if(h=h.substring(0,h.length-1),f=o.split(h),f.length<=1)return i.push(r),i;d=u+1}else d===c.length-1&&(m=o.indexOf(h));if(f.length>=2&&d>u){const p=n[a-1].textContent;if(p&&typeof p=="string"){const g=Pi(p).length;m=o.indexOf(h,g)}m===-1&&(m=f[0].length)}if(m!==-1){let p=Math.floor(m/l);for(;p>0&&p<r.length;){if(s+=1,s>50*n.length)return i.push(r),i;const g=Pi(r.substring(0,p),t);if(g.length===m){i.push(r.substring(0,p)),r=r.substring(p),o=o.substring(m);break}else g.length<m?p+=Math.max(1,Math.floor((m-g.length)/l)):p-=Math.max(1,Math.floor((g.length-m)*l))}break}}}}return i.push(r),i}function k0(r,e){return X0(r,e).join("/* rr_split */")}function aa(r){return r=r.replace(/[^ -~]+/g,""),r=(r==null?void 0:r.split(" ").map(e=>Math.random().toString(20).substring(2,e.length)).join(" "))||"",r}function la(r){return r==="img"||r==="video"||r==="audio"||r==="source"}const W0=new RegExp(/[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*/),A0=new RegExp(/[0-9]{9,16}/),P0=new RegExp(/[0-9]{3}-?[0-9]{2}-?[0-9]{4}/),M0=new RegExp(/[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}/),U0=new RegExp(/[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}/),F0=new RegExp(/[0-9]{1,5}.?[0-9]{0,3}\s[a-zA-Z]{2,30}\s[a-zA-Z]{2,15}/),D0=new RegExp(/(?:[0-9]{1,3}.){3}[0-9]{1,3}/),Y0=[W0,A0,P0,M0,U0,F0,D0];function wd(r){return r?Y0.some(e=>e.test(r)):!1}const Rd=({maskInputOptions:r,tagName:e,type:t,overwriteRecord:n})=>{const i=t&&t.toLowerCase();return n!=="true"&&(!!r[e.toLowerCase()]||!!(i&&r[i]))};let J0=1;const H0=new RegExp("[^a-z0-9-_:]"),bn=-2;function Id(){return J0++}function B0(r){if(r instanceof HTMLFormElement)return"form";const e=kr(r.tagName);return H0.test(e)?"div":e}let Wr,Cd;const K0=/^[^ \t\n\r\u000c]+/,z0=/^[, \t\n\r\u000c]+/;function j0(r,e){if(e.trim()==="")return e;let t=0;function n(s){let o;const l=s.exec(e.substring(t));return l?(o=l[0],t+=o.length,o):""}const i=[];for(;n(z0),!(t>=e.length);){let s=n(K0);if(s.slice(-1)===",")s=Ar(r,s.substring(0,s.length-1)),i.push(s);else{let o="";s=Ar(r,s);let l=!1;for(;;){const a=e.charAt(t);if(a===""){i.push((s+o).trim());break}else if(l)a===")"&&(l=!1);else if(a===","){t+=1,i.push((s+o).trim());break}else a==="("&&(l=!0);o+=a,t+=1}}}return i.join(", ")}const Ld=new WeakMap;function Ar(r,e){return!e||e.trim()===""?e:ca(r,e)}function Q0(r){return!!(r.tagName==="svg"||r.ownerSVGElement)}function ca(r,e){let t=Ld.get(r);if(t||(t=r.createElement("a"),Ld.set(r,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}function Od(r,e,t,n){return n&&(t==="src"||t==="href"&&!(e==="use"&&n[0]==="#")||t==="xlink:href"&&n[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?Ar(r,n):t==="srcset"?j0(r,n):t==="style"?Ai(n,ca(r)):e==="object"&&t==="data"?Ar(r,n):n)}function Zd(r,e,t){return(r==="video"||r==="audio")&&e==="autoplay"}function Nd(r,e,t){try{if(typeof e=="string"){if(r.classList.contains(e))return!0}else for(let n=r.classList.length;n--;){const i=r.classList[n];if(e.test(i))return!0}if(t)return r.matches(t)}catch(n){}return!1}function Mi(r,e,t){if(!r)return!1;if(r.nodeType!==r.ELEMENT_NODE)return t?Mi(Oe.parentNode(r),e,t):!1;for(let n=r.classList.length;n--;){const i=r.classList[n];if(e.test(i))return!0}return t?Mi(Oe.parentNode(r),e,t):!1}function Gd(r,e,t,n){let i;if(vd(r)){if(i=r,!Oe.childNodes(i).length)return!1}else{if(Oe.parentElement(r)===null)return!1;i=Oe.parentElement(r)}try{if(typeof e=="string"){if(n){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(Mi(i,e,n))return!0;if(t){if(n){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch(s){}return!1}function $0(r,e,t){const n=r.contentWindow;if(!n)return;let i=!1,s;try{s=n.document.readyState}catch(l){return}if(s!=="complete"){const l=setTimeout(()=>{i||(e(),i=!0)},t);r.addEventListener("load",()=>{clearTimeout(l),i=!0,e()});return}const o="about:blank";if(n.location.href!==o||r.src===o||r.src==="")return setTimeout(e,0),r.addEventListener("load",e);r.addEventListener("load",e)}function q0(r,e,t){let n=!1,i;try{i=r.sheet}catch(o){return}if(i)return;const s=setTimeout(()=>{n||(e(),n=!0)},t);r.addEventListener("load",()=>{clearTimeout(s),n=!0,e()})}function eS(r,e){const{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:o,inlineStylesheet:l,maskInputOptions:a={},maskTextClass:c,maskTextFn:u,maskInputFn:d,dataURLOptions:h={},inlineImages:f,inlineVideos:m,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y=!1,cssCaptured:T=!1,privacySetting:E}=e,C=tS(t,n);switch(r.nodeType){case r.DOCUMENT_NODE:return r.compatMode!=="CSS1Compat"?{type:Ee.Document,childNodes:[],compatMode:r.compatMode}:{type:Ee.Document,childNodes:[]};case r.DOCUMENT_TYPE_NODE:return{type:Ee.DocumentType,name:r.name,publicId:r.publicId,systemId:r.systemId,rootId:C};case r.ELEMENT_NODE:return nS(r,{doc:t,blockClass:i,blockSelector:s,inlineStylesheet:l,maskInputOptions:a,maskInputFn:d,maskTextClass:c,dataURLOptions:h,inlineImages:f,inlineVideos:m,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y,privacySetting:E,rootId:C});case r.TEXT_NODE:return rS(r,{doc:t,needsMask:o,maskTextFn:u,privacySetting:E,rootId:C,cssCaptured:T});case r.CDATA_SECTION_NODE:return{type:Ee.CDATA,textContent:"",rootId:C};case r.COMMENT_NODE:return{type:Ee.Comment,textContent:Oe.textContent(r)||"",rootId:C};default:return!1}}function tS(r,e){if(!e.hasNode(r))return;const t=e.getId(r);return t===1?void 0:t}function rS(r,e){var t;const{needsMask:n,maskTextFn:i,privacySetting:s,rootId:o,cssCaptured:l}=e,a=Oe.parentNode(r),c=a&&a.tagName;let u="";const d=c==="STYLE"?!0:void 0,h=c==="SCRIPT"?!0:void 0;h?u="SCRIPT_PLACEHOLDER":l||(u=Oe.textContent(r),d&&u&&(u=Ai(u,ca(e.doc)))),!d&&!h&&u&&n&&(u=i?i(u,Oe.parentElement(r)):u.replace(/[\S]/g,"*"));const f=s==="strict",m=(t=r.parentElement)==null?void 0:t.getAttribute("data-hl-record"),p=s==="default"&&wd(u);return(f||p)&&!m&&c&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(c)&&u&&(u=aa(u)),{type:Ee.Text,textContent:u||"",rootId:o}}function nS(r,e){const{doc:t,blockClass:n,blockSelector:i,inlineStylesheet:s,maskInputOptions:o={},maskInputFn:l,maskTextClass:a,dataURLOptions:c={},inlineImages:u,inlineVideos:d,recordCanvas:h,keepIframeSrcFn:f,newlyAddedElement:m=!1,privacySetting:p,rootId:g}=e;let y=Nd(r,n,i);const T=Nd(r,a,null),E=p==="strict";let C=B0(r),R={};const N=r.attributes.length;for(let w=0;w<N;w++){const L=r.attributes[w];Zd(C,L.name)||(R[L.name]=Od(t,C,kr(L.name),L.value))}if(C==="link"&&s){const w=Array.from(t.styleSheets).find(k=>k.href===r.href);let L=null;w&&(L=oa(w)),L&&(delete R.rel,delete R.href,R._cssText=L)}if(C==="style"&&r.sheet){let w=oa(r.sheet);w&&(r.childNodes.length>1&&(w=k0(w,r)),R._cssText=w)}if(C==="input"||C==="textarea"||C==="select"){const w=r.value,L=r.checked;R.type!=="radio"&&R.type!=="checkbox"&&R.type!=="submit"&&R.type!=="button"&&w?R.value=ki({element:r,type:Wi(r),tagName:C,value:w,overwriteRecord:r.getAttribute("data-hl-record"),maskInputOptions:o,maskInputFn:l}):L&&(R.checked=L)}if(C==="option"&&(r.selected&&!o.select?R.selected=!0:delete R.selected),C==="dialog"&&r.open&&(R.rr_open_mode=r.matches("dialog:modal")?"modal":"non-modal"),C==="canvas"&&h){if(r.__context==="2d")O0(r);else if(!("__context"in r)){const w=r.toDataURL(c.type,c.quality),L=t.createElement("canvas");L.width=r.width,L.height=r.height;const k=L.toDataURL(c.type,c.quality);w!==k&&(R.rr_dataURL=w)}}if(C==="img"&&u&&!y&&!T&&!E){Wr||(Wr=t.createElement("canvas"),Cd=Wr.getContext("2d"));const w=r,L=w.currentSrc||w.getAttribute("src")||"<unknown-src>",k=w.crossOrigin,A=()=>{w.removeEventListener("load",A);try{Wr.width=w.naturalWidth,Wr.height=w.naturalHeight,Cd.drawImage(w,0,0),R.rr_dataURL=Wr.toDataURL(c.type,c.quality)}catch($){if(w.crossOrigin!=="anonymous"){w.crossOrigin="anonymous",w.complete&&w.naturalWidth!==0?A():w.addEventListener("load",A);return}else console.warn(`Cannot inline img src=${L}! Error: ${$}`)}w.crossOrigin==="anonymous"&&(k?R.crossOrigin=k:w.removeAttribute("crossorigin"))};w.complete&&w.naturalWidth!==0?A():w.addEventListener("load",A)}if(C==="audio"||C==="video"){const w=R;w.rr_mediaState=r.paused?"paused":"played",w.rr_mediaCurrentTime=r.currentTime,w.rr_mediaPlaybackRate=r.playbackRate,w.rr_mediaMuted=r.muted,w.rr_mediaLoop=r.loop,w.rr_mediaVolume=r.volume}if(m||(r.scrollLeft&&(R.rr_scrollLeft=r.scrollLeft),r.scrollTop&&(R.rr_scrollTop=r.scrollTop)),y||T||E&&la(C)){const{width:w,height:L}=r.getBoundingClientRect();R={class:R.class,rr_width:`${w}px`,rr_height:`${L}px`}}E&&la(C)&&(y=!0),C==="iframe"&&!f(R.src)&&(r.contentDocument||(R.rr_src=R.src),delete R.src);let V;try{customElements.get(C)&&(V=!0)}catch(w){}const Z=w=>{const{width:L,height:k}=w.getBoundingClientRect();R={width:L,height:k,rr_width:`${L}px`,rr_height:`${k}px`,rr_inlined_video:!0,class:R.class,style:R.style},C="canvas";const A=t.createElement("canvas");A.width=r.width,A.height=r.height,R.rr_dataURL=A.toDataURL(c.type,c.quality)};if(C==="video"){const w=r;u&&(w.src===""||w.src.indexOf("blob:")!==-1)&&Z(w),d&&w.src!==""&&w.src.indexOf("blob:")===-1&&Z(w)}return{type:Ee.Element,tagName:C,attributes:R,childNodes:[],isSVG:Q0(r)||void 0,needBlock:y,needMask:T,rootId:g,isCustom:V}}function pe(r){return r==null?"":r.toLowerCase()}function iS(r,e){if(e.comment&&r.type===Ee.Comment)return!0;if(r.type===Ee.Element){if(e.script&&(r.tagName==="script"||r.tagName==="link"&&(r.attributes.rel==="preload"&&r.attributes.as==="script"||r.attributes.rel==="modulepreload")||r.tagName==="link"&&r.attributes.rel==="prefetch"&&typeof r.attributes.href=="string"&&Ed(r.attributes.href)==="js"))return!0;if(e.headFavicon&&(r.tagName==="link"&&r.attributes.rel==="shortcut icon"||r.tagName==="meta"&&(pe(r.attributes.name).match(/^msapplication-tile(image|color)$/)||pe(r.attributes.name)==="application-name"||pe(r.attributes.rel)==="icon"||pe(r.attributes.rel)==="apple-touch-icon"||pe(r.attributes.rel)==="shortcut icon")))return!0;if(r.tagName==="meta"){if(e.headMetaDescKeywords&&pe(r.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(pe(r.attributes.property).match(/^(og|twitter|fb):/)||pe(r.attributes.name).match(/^(og|twitter):/)||pe(r.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(pe(r.attributes.name)==="robots"||pe(r.attributes.name)==="googlebot"||pe(r.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&r.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(pe(r.attributes.name)==="author"||pe(r.attributes.name)==="generator"||pe(r.attributes.name)==="framework"||pe(r.attributes.name)==="publisher"||pe(r.attributes.name)==="progid"||pe(r.attributes.property).match(/^article:/)||pe(r.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(pe(r.attributes.name)==="google-site-verification"||pe(r.attributes.name)==="yandex-verification"||pe(r.attributes.name)==="csrf-token"||pe(r.attributes.name)==="p:domain_verify"||pe(r.attributes.name)==="verify-v1"||pe(r.attributes.name)==="verification"||pe(r.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Pr(r,e){const{doc:t,mirror:n,blockClass:i,blockSelector:s,maskTextClass:o,maskTextSelector:l,skipChild:a=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m={},inlineImages:p=!1,inlineVideos:g=!1,recordCanvas:y=!1,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:C=5e3,onStylesheetLoad:R,stylesheetLoadTimeout:N=5e3,keepIframeSrcFn:V=()=>!1,newlyAddedElement:Z=!1,cssCaptured:w=!1,privacySetting:L}=e;let{needsMask:k}=e,{preserveWhiteSpace:A=!0}=e;k||(k=Gd(r,o,l,k===void 0));const $=eS(r,{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:k,inlineStylesheet:c,maskInputOptions:u,maskTextClass:o,maskTextFn:d,maskInputFn:h,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,keepIframeSrcFn:V,newlyAddedElement:Z,cssCaptured:w,privacySetting:L});if(!$)return console.warn(r,"not serialized"),null;let b;n.hasNode(r)?b=n.getId(r):iS($,f)||!A&&$.type===Ee.Text&&!$.textContent.replace(/^\s+|\s+$/gm,"").length?b=bn:b=Id();const _=Object.assign($,{id:b});if(n.add(r,_),b===bn)return null;T&&T(r);let x=!a,U=L,D=L==="strict";if(_.type===Ee.Element){if(x=x&&!_.needBlock,D||(D=!!_.needBlock||!!_.needMask),U=D?"strict":U,D&&la(_.tagName)){const ne=r.cloneNode();ne.src="",n.add(ne,_)}delete _.needBlock,delete _.needMask;const Y=Oe.shadowRoot(r);Y&&yn(Y)&&(_.isShadowHost=!0)}if((_.type===Ee.Document||_.type===Ee.Element)&&x){f.headWhitespace&&_.type===Ee.Element&&_.tagName==="head"&&(A=!1);const Y={doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:k,maskTextClass:o,maskTextSelector:l,skipChild:a,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:A,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:C,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,cssCaptured:!1,privacySetting:U};if(!(_.type===Ee.Element&&_.tagName==="textarea"&&_.attributes.value!==void 0)){_.type===Ee.Element&&_.attributes._cssText!==void 0&&typeof _.attributes._cssText=="string"&&(Y.cssCaptured=!0);for(const Le of Array.from(Oe.childNodes(r))){const Je=Pr(Le,Y);Je&&_.childNodes.push(Je)}}let ne=null;if(vd(r)&&(ne=Oe.shadowRoot(r)))for(const Le of Array.from(Oe.childNodes(ne))){const Je=Pr(Le,Y);Je&&(yn(ne)&&(Je.isShadow=!0),_.childNodes.push(Je))}}const M=Oe.parentNode(r);return M&&gn(M)&&yn(M)&&(_.isShadow=!0),_.type===Ee.Element&&_.tagName==="iframe"&&$0(r,()=>{const Y=r.contentDocument;if(Y&&E){const ne=Pr(Y,{doc:Y,mirror:n,blockClass:i,blockSelector:s,needsMask:k,maskTextClass:o,maskTextSelector:l,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:A,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:C,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,privacySetting:L});ne&&E(r,ne)}},C),_.type===Ee.Element&&_.tagName==="link"&&typeof _.attributes.rel=="string"&&(_.attributes.rel==="stylesheet"||_.attributes.rel==="preload"&&typeof _.attributes.href=="string"&&Ed(_.attributes.href)==="css")&&q0(r,()=>{if(R){const Y=Pr(r,{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:k,maskTextClass:o,maskTextSelector:l,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:A,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:C,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,privacySetting:L});Y&&R(r,Y)}},N),_}function sS(r,e){const{mirror:t=new _d,blockClass:n="highlight-block",blockSelector:i=null,maskTextClass:s="highlight-mask",maskTextSelector:o=null,inlineStylesheet:l=!0,inlineImages:a=!1,inlineVideos:c=!1,recordCanvas:u=!1,maskAllInputs:d=!1,maskTextFn:h,maskInputFn:f,slimDOM:m=!1,dataURLOptions:p,preserveWhiteSpace:g,onSerialize:y,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:C,stylesheetLoadTimeout:R,keepIframeSrcFn:N=()=>!1,privacySetting:V="default"}=e||{};return Pr(r,{doc:r,mirror:t,blockClass:n,blockSelector:i,maskTextClass:s,maskTextSelector:o,skipChild:!1,inlineStylesheet:l,maskInputOptions:d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d===!1?{password:!0}:d,maskTextFn:h,maskInputFn:f,slimDOMOptions:m||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:m==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:m||{},dataURLOptions:p,inlineImages:a,inlineVideos:c,recordCanvas:u,preserveWhiteSpace:g,onSerialize:y,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:C,stylesheetLoadTimeout:R,keepIframeSrcFn:N,newlyAddedElement:!1,privacySetting:V})}function oS(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ua={exports:{}},z=String,Vd=function(){return{isColorSupported:!1,reset:z,bold:z,dim:z,italic:z,underline:z,inverse:z,hidden:z,strikethrough:z,black:z,red:z,green:z,yellow:z,blue:z,magenta:z,cyan:z,white:z,gray:z,bgBlack:z,bgRed:z,bgGreen:z,bgYellow:z,bgBlue:z,bgMagenta:z,bgCyan:z,bgWhite:z,blackBright:z,redBright:z,greenBright:z,yellowBright:z,blueBright:z,magentaBright:z,cyanBright:z,whiteBright:z,bgBlackBright:z,bgRedBright:z,bgGreenBright:z,bgYellowBright:z,bgBlueBright:z,bgMagentaBright:z,bgCyanBright:z,bgWhiteBright:z}};ua.exports=Vd(),ua.exports.createColors=Vd;var aS=ua.exports;const ft=oS(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let xd=aS,Xd=ft,da=class sv extends Error{constructor(e,t,n,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t!="undefined"&&typeof n!="undefined"&&(typeof t=="number"?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,sv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=xd.isColorSupported);let n=u=>u,i=u=>u,s=u=>u;if(e){let{bold:u,gray:d,red:h}=xd.createColors(!0);i=f=>u(h(f)),n=f=>d(f),Xd&&(s=f=>Xd(f))}let o=t.split(/\r?\n/),l=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),c=String(a).length;return o.slice(l,a).map((u,d)=>{let h=l+1+d,f=" "+(" "+h).slice(-c)+" | ";if(h===this.line){if(u.length>160){let p=20,g=Math.max(0,this.column-p),y=Math.max(this.column+p,this.endColumn+p),T=u.slice(g,y),E=n(f.replace(/\d/g," "))+u.slice(0,Math.min(this.column-1,p-1)).replace(/[^\t]/g," ");return i(">")+n(f)+s(T)+`
 `+E+i("^")}let m=n(f.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(f)+s(u)+`
 `+m+i("^")}return" "+n(f)+s(u)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var ha=da;da.default=da;const kd={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function lS(r){return r[0].toUpperCase()+r.slice(1)}let fa=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+i+s,e)}}beforeAfter(e,t){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):t==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)n+=o}return n}block(e,t){let n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,n){let i;if(n||(n=t),t&&(i=e.raws[t],typeof i!="undefined"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return kd[n];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[n]!="undefined")return o.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let l="raw"+lS(n);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i!="undefined")return!1})}return typeof i=="undefined"&&(i=kd[n]),o.rawCache[n]=i,i}rawBeforeClose(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after!="undefined")return t=n.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(n=>{if(n.type!=="decl"&&(t=n.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before!="undefined")return t=n.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(n=>{if(typeof n.raws.between!="undefined")return t=n.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(t=n.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before!="undefined"){let s=n.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(t=n.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Wd=fa;fa.default=fa;let cS=Wd;function pa(r,e){new cS(e).stringify(r)}var Ui=pa;pa.default=pa;var vn={};vn.isClean=Symbol("isClean"),vn.my=Symbol("my");let uS=ha,dS=Wd,hS=Ui,{isClean:Sn,my:fS}=vn;function ma(r,e){let t=new r.constructor;for(let n in r){if(!Object.prototype.hasOwnProperty.call(r,n)||n==="proxyCache")continue;let i=r[n],s=typeof i;n==="parent"&&s==="object"?e&&(t[n]=e):n==="source"?t[n]=i:Array.isArray(i)?t[n]=i.map(o=>ma(o,t)):(s==="object"&&i!==null&&(i=ma(i)),t[n]=i)}return t}function Zt(r,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,n=1,i=0;for(let s=0;s<r.length;s++){if(n===e.line&&t===e.column){i=s;break}r[s]===`
`?(t=1,n+=1):t+=1}return i}let ga=class{get proxyOf(){return this}constructor(e={}){this.raws={},this[Sn]=!1,this[fS]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let n of e[t])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=ma(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new uS(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[Sn]=!0}markDirty(){if(this[Sn]){this[Sn]=!1;let e=this;for(;e=e.parent;)e[Sn]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,s=n.slice(Zt(n,this.source.start),Zt(n,this.source.end)).indexOf(e.word);s!==-1&&(t=this.positionInside(s))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,i="document"in this.source.input?this.source.input.document:this.source.input.css,s=Zt(i,this.source.start),o=s+e;for(let l=s;l<o;l++)i[l]===`
`?(t=1,n+=1):t+=1;return{column:t,line:n,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,n={column:this.source.start.column,line:this.source.start.line,offset:Zt(t,this.source.start)},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:Zt(t,this.source.end)+1}:{column:n.column+1,line:n.line,offset:n.offset+1};if(e.word){let o=t.slice(Zt(t,this.source.start),Zt(t,this.source.end)).indexOf(e.word);o!==-1&&(n=this.positionInside(o),i=this.positionInside(o+e.word.length))}else e.start?n={column:e.start.column,line:e.start.line,offset:Zt(t,e.start)}:e.index&&(n=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line,offset:Zt(t,e.end)}:typeof e.endIndex=="number"?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<n.line||i.line===n.line&&i.column<=n.column)&&(i={column:n.column+1,line:n.line,offset:n.offset+1}),{end:i,start:n}}raw(e,t){return new dS().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let n={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))n[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)n[o]=l.toJSON(null,t);else if(o==="source"){if(l==null)continue;let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),n[o]={end:l.end,inputId:a,start:l.start}}else n[o]=l}return i&&(n.inputs=[...t.keys()].map(o=>o.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=hS){e.stringify&&(e=e.stringify);let t="";return e(this,n=>{t+=n}),t}warn(e,t,n={}){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(t,i)}};var Fi=ga;ga.default=ga;let pS=Fi,ya=class extends pS{constructor(e){super(e),this.type="comment"}};var Di=ya;ya.default=ya;let mS=Fi,ba=class extends mS{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=P(S({},e),{value:String(e.value)})),super(e),this.type="decl"}};var Yi=ba;ba.default=ba;let Ad=Di,Pd=Yi,gS=Fi,{isClean:Md,my:Ud}=vn,va,Fd,Dd,Sa;function Yd(r){return r.map(e=>(e.nodes&&(e.nodes=Yd(e.nodes)),delete e.source,e))}function Jd(r){if(r[Md]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Jd(e)}let Nt=class ov extends gS{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let n=this.normalize(t,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...n)=>e[t](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?n=>e[t]((i,...s)=>n(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(n=>n.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],n<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let n=this.index(e),i=n===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let l of s)this.proxyOf.nodes.splice(n,0,l);let o;for(let l in this.indexes)o=this.indexes[l],n<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Yd(Fd(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Pd(e)]}else if(e.selector||e.selectors)e=[new Sa(e)];else if(e.name)e=[new va(e)];else if(e.text)e=[new Ad(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Ud]||ov.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Md]&&Jd(i),i.raws||(i.raws={}),typeof i.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let n=this.normalize(t,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="atrule")return t(n,i)}))}walkComments(e){return this.walk((t,n)=>{if(t.type==="comment")return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="decl")return t(n,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="rule")return t(n,i)}))}};Nt.registerParse=r=>{Fd=r},Nt.registerRule=r=>{Sa=r},Nt.registerAtRule=r=>{va=r},Nt.registerRoot=r=>{Dd=r};var cr=Nt;Nt.default=Nt,Nt.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,va.prototype):r.type==="rule"?Object.setPrototypeOf(r,Sa.prototype):r.type==="decl"?Object.setPrototypeOf(r,Pd.prototype):r.type==="comment"?Object.setPrototypeOf(r,Ad.prototype):r.type==="root"&&Object.setPrototypeOf(r,Dd.prototype),r[Ud]=!0,r.nodes&&r.nodes.forEach(e=>{Nt.rebuild(e)})};let Hd=cr,Ji=class extends Hd{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var _a=Ji;Ji.default=Ji,Hd.registerAtRule(Ji);let yS=cr,Bd,Kd,_n=class extends yS{constructor(e){super(S({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Bd(new Kd,this,e).stringify()}};_n.registerLazyResult=r=>{Bd=r},_n.registerProcessor=r=>{Kd=r};var Ta=_n;_n.default=_n;let bS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var vS={nanoid:(r=21)=>{let e="",t=r|0;for(;t--;)e+=bS[Math.random()*64|0];return e}};let{existsSync:SS,readFileSync:_S}=ft,{dirname:Ea,join:TS}=ft,{SourceMapConsumer:zd,SourceMapGenerator:jd}=ft;function ES(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}let wa=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Ea(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new zd(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,o=e.match(i)||e.match(s);if(o)return decodeURIComponent(e.substr(o[0].length));let l=e.match(t)||e.match(n);if(l)return ES(e.substr(l[0].length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=Ea(e),SS(e))return this.mapFile=e,_S(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let n=t(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(t instanceof zd)return jd.fromSourceMap(t).toString();if(t instanceof jd)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=TS(Ea(e),n)),this.loadFile(n)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Qd=wa;wa.default=wa;let{nanoid:wS}=vS,{isAbsolute:Ra,resolve:Ia}=ft,{SourceMapConsumer:RS,SourceMapGenerator:IS}=ft,{fileURLToPath:$d,pathToFileURL:Hi}=ft,qd=ha,CS=Qd,Ca=ft,La=Symbol("lineToIndexCache"),LS=!!(RS&&IS),eh=!!(Ia&&Ra);function th(r){if(r[La])return r[La];let e=r.css.split(`
`),t=new Array(e.length),n=0;for(let i=0,s=e.length;i<s;i++)t[i]=n,n+=e[i].length+1;return r[La]=t,t}let Bi=class{get from(){return this.file||this.id}constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!eh||/^\w+:\/\//.test(t.from)||Ra(t.from)?this.file=t.from:this.file=Ia(t.from)),eh&&LS){let n=new CS(this.css,t);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+wS(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,i={}){let s,o,l,a,c;if(t&&typeof t=="object"){let d=t,h=n;if(typeof d.offset=="number"){a=d.offset;let f=this.fromOffset(a);t=f.line,n=f.col}else t=d.line,n=d.column,a=this.fromLineAndColumn(t,n);if(typeof h.offset=="number"){l=h.offset;let f=this.fromOffset(l);o=f.line,s=f.col}else o=h.line,s=h.column,l=this.fromLineAndColumn(h.line,h.column)}else if(n)a=this.fromLineAndColumn(t,n);else{a=t;let d=this.fromOffset(a);t=d.line,n=d.col}let u=this.origin(t,n,o,s);return u?c=new qd(e,u.endLine===void 0?u.line:{column:u.column,line:u.line},u.endLine===void 0?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,i.plugin):c=new qd(e,o===void 0?t:{column:n,line:t},o===void 0?n:{column:s,line:o},this.css,this.file,i.plugin),c.input={column:n,endColumn:s,endLine:o,endOffset:l,line:t,offset:a,source:this.css},this.file&&(Hi&&(c.input.url=Hi(this.file).toString()),c.input.file=this.file),c}fromLineAndColumn(e,t){return th(this)[e-1]+t-1}fromOffset(e){let t=th(this),n=t[t.length-1],i=0;if(e>=n)i=t.length-1;else{let s=t.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<t[o])s=o-1;else if(e>=t[o+1])i=o+1;else{i=o;break}}return{col:e-t[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Ia(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof n=="number"&&(l=s.originalPositionFor({column:i,line:n}));let a;Ra(o.source)?a=Hi(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||Hi(this.map.mapFile));let c={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if($d)c.file=$d(a);else throw new Error("file: protocol is not available in this PostCSS build");let u=s.sourceContentFor(o.source);return u&&(c.source=u),c}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=S({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};var Ki=Bi;Bi.default=Bi,Ca&&Ca.registerInput&&Ca.registerInput(Bi);let rh=cr,nh,ih,Mr=class extends rh{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let i=super.normalize(e);if(t){if(n==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let n=this.index(e);return!t&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new nh(new ih,this,e).stringify()}};Mr.registerLazyResult=r=>{nh=r},Mr.registerProcessor=r=>{ih=r};var Tn=Mr;Mr.default=Mr,rh.registerRoot(Mr);let En={comma(r){return En.split(r,[","],!0)},space(r){let e=[" ",`
`,"	"];return En.split(r,e)},split(r,e,t){let n=[],i="",s=!1,o=0,l=!1,a="",c=!1;for(let u of r)c?c=!1:u==="\\"?c=!0:l?u===a&&(l=!1):u==='"'||u==="'"?(l=!0,a=u):u==="("?o+=1:u===")"?o>0&&(o-=1):o===0&&e.includes(u)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=u;return(t||i!=="")&&n.push(i.trim()),n}};var sh=En;En.default=En;let oh=cr,OS=sh,zi=class extends oh{get selectors(){return OS.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};var Oa=zi;zi.default=zi,oh.registerRule(zi);let ZS=_a,NS=Di,GS=Yi,VS=Ki,xS=Qd,XS=Tn,kS=Oa;function wn(r,e){if(Array.isArray(r))return r.map(o=>wn(o));let i=r,{inputs:t}=i,n=He(i,["inputs"]);if(t){e=[];for(let o of t){let l=P(S({},o),{__proto__:VS.prototype});l.map&&(l.map=P(S({},l.map),{__proto__:xS.prototype})),e.push(l)}}if(n.nodes&&(n.nodes=r.nodes.map(o=>wn(o,e))),n.source){let s=n.source,{inputId:o}=s,l=He(s,["inputId"]);n.source=l,o!=null&&(n.source.input=e[o])}if(n.type==="root")return new XS(n);if(n.type==="decl")return new GS(n);if(n.type==="rule")return new kS(n);if(n.type==="comment")return new NS(n);if(n.type==="atrule")return new ZS(n);throw new Error("Unknown node type: "+r.type)}var WS=wn;wn.default=wn;let{dirname:ji,relative:ah,resolve:lh,sep:ch}=ft,{SourceMapConsumer:uh,SourceMapGenerator:Qi}=ft,{pathToFileURL:dh}=ft,AS=Ki,PS=!!(uh&&Qi),MS=!!(ji&&lh&&ah&&ch);var hh=class{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||ji(e.file),i;this.mapOpts.sourcesContent===!1?(i=new uh(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),MS&&PS&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Qi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,n="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,c)=>{if(this.css+=l,a&&c!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=l.match(/\n/g),o?(e+=o.length,s=l.lastIndexOf(`
`),t=l.length-s):t+=l.length,a&&c!=="start"){let u=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==u.last||u.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?ji(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=ji(lh(n,this.mapOpts.annotation)));let i=ah(n,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new AS(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(dh){let n=dh(e).toString();return this.memoizedFileURLs.set(e,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;ch==="\\"&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};const Za=39,fh=34,$i=92,ph=47,qi=10,Rn=32,es=12,ts=9,rs=13,US=91,FS=93,DS=40,YS=41,JS=123,HS=125,BS=59,KS=42,zS=58,jS=64,ns=/[\t\n\f\r "#'()/;[\\\]{}]/g,is=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,QS=/.[\r\n"'(/\\]/,mh=/[\da-f]/i;var $S=function(e,t={}){let n=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,c,u,d,h,f,m,p=n.length,g=0,y=[],T=[];function E(){return g}function C(Z){throw e.error("Unclosed "+Z,g)}function R(){return T.length===0&&g>=p}function N(Z){if(T.length)return T.pop();if(g>=p)return;let w=Z?Z.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case qi:case Rn:case ts:case rs:case es:{a=g;do a+=1,s=n.charCodeAt(a);while(s===Rn||s===qi||s===ts||s===rs||s===es);u=["space",n.slice(g,a)],g=a-1;break}case US:case FS:case JS:case HS:case zS:case BS:case YS:{let L=String.fromCharCode(s);u=[L,L,g];break}case DS:{if(m=y.length?y.pop()[1]:"",f=n.charCodeAt(g+1),m==="url"&&f!==Za&&f!==fh&&f!==Rn&&f!==qi&&f!==ts&&f!==es&&f!==rs){a=g;do{if(d=!1,a=n.indexOf(")",a+1),a===-1)if(i||w){a=g;break}else C("bracket");for(h=a;n.charCodeAt(h-1)===$i;)h-=1,d=!d}while(d);u=["brackets",n.slice(g,a+1),g,a],g=a}else a=n.indexOf(")",g+1),o=n.slice(g,a+1),a===-1||QS.test(o)?u=["(","(",g]:(u=["brackets",o,g,a],g=a);break}case Za:case fh:{c=s===Za?"'":'"',a=g;do{if(d=!1,a=n.indexOf(c,a+1),a===-1)if(i||w){a=g+1;break}else C("string");for(h=a;n.charCodeAt(h-1)===$i;)h-=1,d=!d}while(d);u=["string",n.slice(g,a+1),g,a],g=a;break}case jS:{ns.lastIndex=g+1,ns.test(n),ns.lastIndex===0?a=n.length-1:a=ns.lastIndex-2,u=["at-word",n.slice(g,a+1),g,a],g=a;break}case $i:{for(a=g,l=!0;n.charCodeAt(a+1)===$i;)a+=1,l=!l;if(s=n.charCodeAt(a+1),l&&s!==ph&&s!==Rn&&s!==qi&&s!==ts&&s!==rs&&s!==es&&(a+=1,mh.test(n.charAt(a)))){for(;mh.test(n.charAt(a+1));)a+=1;n.charCodeAt(a+1)===Rn&&(a+=1)}u=["word",n.slice(g,a+1),g,a],g=a;break}default:{s===ph&&n.charCodeAt(g+1)===KS?(a=n.indexOf("*/",g+2)+1,a===0&&(i||w?a=n.length:C("comment")),u=["comment",n.slice(g,a+1),g,a],g=a):(is.lastIndex=g+1,is.test(n),is.lastIndex===0?a=n.length-1:a=is.lastIndex-2,u=["word",n.slice(g,a+1),g,a],y.push(u),g=a);break}}return g++,u}function V(Z){T.push(Z)}return{back:V,endOfFile:R,nextToken:N,position:E}};let qS=_a,e_=Di,t_=Yi,r_=Tn,gh=Oa,n_=$S;const yh={empty:!0,space:!0};function i_(r){for(let e=r.length-1;e>=0;e--){let t=r[e],n=t[3]||t[2];if(n)return n}}var s_=class{constructor(e){this.input=e,this.root=new r_,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new qS;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,i,s,o=!1,l=!1,a=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){l=!0;break}else if(n==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let n=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,n,i,s;for(let[o,l]of e.entries()){if(i=l,s=i[0],s==="("&&(t+=1),s===")"&&(t-=1),t===0&&s===":")if(!n)this.doubleColon(i);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=i}return!1}comment(e){let t=new e_;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=n_(this.input)}decl(e,t){let n=new t_;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||i_(e)),n.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let c=e[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(s=e[c],s[1].toLowerCase()==="!important"){n.important=!0;let u=this.stringFrom(e,c);u=this.spacesFromEnd(e)+u,u!==" !important"&&(n.raws.important=u);break}else if(s[1].toLowerCase()==="important"){let u=e.slice(0),d="";for(let h=c;h>0;h--){let f=u[h][0];if(d.trim().startsWith("!")&&f!=="space")break;d=u.pop()[1]+d}d.trim().startsWith("!")&&(n.important=!0,n.raws.important=d,e=u)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new gh;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,n=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],c=e;for(;c;){if(n=c[0],a.push(c),n==="("||n==="[")s||(s=c),o.push(n==="("?")":"]");else if(l&&i&&n==="{")s||(s=c),o.push("}");else if(o.length===0)if(n===";")if(i){this.decl(a,l);return}else break;else if(n==="{"){this.rule(a);return}else if(n==="}"){this.tokenizer.back(a.pop()),t=!0;break}else n===":"&&(i=!0);else n===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(c=a[a.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,i){let s,o,l=n.length,a="",c=!0,u,d;for(let h=0;h<l;h+=1)s=n[h],o=s[0],o==="space"&&h===l-1&&!i?c=!1:o==="comment"?(d=n[h-1]?n[h-1][0]:"empty",u=n[h+1]?n[h+1][0]:"empty",!yh[d]&&!yh[u]?a.slice(-1)===","?c=!1:a+=s[1]:c=!1):a+=s[1];if(!c){let h=n.reduce((f,m)=>f+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new gh;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],t==="space");)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let o_=cr,a_=Ki,l_=s_;function ss(r,e){let t=new a_(r,e),n=new l_(t);try{n.parse()}catch(i){throw process.env.NODE_ENV!=="production"&&i.name==="CssSyntaxError"&&e&&e.from&&(/\.scss$/i.test(e.from)?i.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(e.from)?i.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(e.from)&&(i.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),i}return n.root}var Na=ss;ss.default=ss,o_.registerParse(ss);let Ga=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let n=t.node.rangeBy(t);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var bh=Ga;Ga.default=Ga;let c_=bh,Va=class{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new c_(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}};var xa=Va;Va.default=Va;let vh={};var Sh=function(e){vh[e]||(vh[e]=!0,typeof console!="undefined"&&console.warn&&console.warn(e))};let u_=cr,d_=Ta,h_=hh,f_=Na,_h=xa,p_=Tn,m_=Ui,{isClean:vt,my:g_}=vn,y_=Sh;const b_={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},v_={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},S_={Once:!0,postcssPlugin:!0,prepare:!0},Ur=0;function In(r){return typeof r=="object"&&typeof r.then=="function"}function Th(r){let e=!1,t=b_[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,Ur,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,Ur,t+"Exit"]:[t,t+"Exit"]}function Eh(r){let e;return r.type==="document"?e=["Document",Ur,"DocumentExit"]:r.type==="root"?e=["Root",Ur,"RootExit"]:e=Th(r),{eventIndex:0,events:e,iterator:0,node:r,visitorIndex:0,visitors:[]}}function Xa(r){return r[vt]=!1,r.nodes&&r.nodes.forEach(e=>Xa(e)),r}let ka={},Fr=class av{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,t,n){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=Xa(t);else if(t instanceof av||t instanceof _h)i=Xa(t.root),t.map&&(typeof n.map=="undefined"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let s=f_;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(t,n)}catch(o){this.processed=!0,this.error=o}i&&!i[g_]&&u_.rebuild(i)}this.result=new _h(e,i,n),this.helpers=P(S({},ka),{postcss:ka,result:this.result}),this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?S(S({},s),s.prepare(this.result)):s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin)e.plugin=n.postcssPlugin,e.setMessage();else if(n.postcssVersion&&process.env.NODE_ENV!=="production"){let i=n.postcssPlugin,s=n.postcssVersion,o=this.result.processor.version,l=s.split("."),a=o.split(".");(l[0]!==a[0]||parseInt(l[1])>parseInt(a[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+i+" uses "+s+". Perhaps this is the source of the error below.")}}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let n in t){if(!v_[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!S_[n])if(typeof t[n]=="object")for(let i in t[n])i==="*"?e(t,n,t[n][i]):e(t,n+"-"+i.toLowerCase(),t[n][i]);else typeof t[n]=="function"&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return J(this,null,function*(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(In(n))try{yield n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[vt];){e[vt]=!0;let t=[Eh(e)];for(;t.length>0;){let n=this.visitTick(t);if(In(n))try{yield n}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));yield Promise.all(i)}else yield n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()})}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return In(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=m_;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new h_(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(In(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[vt];)e[vt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this.opts||y_("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(In(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(n.toProxy(),this.helpers)}catch(a){throw this.handleError(a,n)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!l[vt]){l[vt]=!0,e.push(Eh(l));return}t.iterator=0,delete n.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===Ur){n.nodes&&n.nodes.length&&(n[vt]=!0,t.iterator=n.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[vt]=!0;let t=Th(e);for(let n of t)if(n===Ur)e.nodes&&e.each(i=>{i[vt]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}};Fr.registerPostcss=r=>{ka=r};var wh=Fr;Fr.default=Fr,p_.registerLazyResult(Fr),d_.registerLazyResult(Fr);let __=hh,T_=Na;const E_=xa;let w_=Ui,R_=Sh,Wa=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=T_;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let i,s=w_;this.result=new E_(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new __(s,i,this._opts,t);if(l.isMap()){let[a,c]=l.generate();a&&(this.result.css=a),c&&(this.result.map=c)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this._opts||R_("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};var I_=Wa;Wa.default=Wa;let C_=Ta,L_=wh,O_=I_,Z_=Tn,Cn=class{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)t.push(n);else if(typeof n=="function")t.push(n);else if(typeof n=="object"&&(n.parse||n.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(n+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new O_(this,e,t):new L_(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var N_=Cn;Cn.default=Cn,Z_.registerProcessor(Cn),C_.registerProcessor(Cn);let Rh=_a,Ih=Di,G_=cr,V_=ha,Ch=Yi,Lh=Ta,x_=WS,X_=Ki,k_=wh,W_=sh,A_=Fi,P_=Na,Aa=N_,M_=xa,Oh=Tn,Zh=Oa,U_=Ui,F_=bh;function ue(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new Aa(r)}ue.plugin=function(e,t){let n=!1;function i(...o){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Aa().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return ue([i(a)]).process(o,l)},i},ue.stringify=U_,ue.parse=P_,ue.fromJSON=x_,ue.list=W_,ue.comment=r=>new Ih(r),ue.atRule=r=>new Rh(r),ue.decl=r=>new Ch(r),ue.rule=r=>new Zh(r),ue.root=r=>new Oh(r),ue.document=r=>new Lh(r),ue.CssSyntaxError=V_,ue.Declaration=Ch,ue.Container=G_,ue.Processor=Aa,ue.Document=Lh,ue.Comment=Ih,ue.Warning=F_,ue.AtRule=Rh,ue.Result=M_,ue.Input=X_,ue.Rule=Zh,ue.Root=Oh,ue.Node=A_,k_.registerPostcss(ue),ue.default=ue;var D_=Object.defineProperty,Y_=(r,e,t)=>e in r?D_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tt=(r,e,t)=>Y_(r,typeof e!="symbol"?e+"":e,t);function J_(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Pa={exports:{}},j=String,Nh=function(){return{isColorSupported:!1,reset:j,bold:j,dim:j,italic:j,underline:j,inverse:j,hidden:j,strikethrough:j,black:j,red:j,green:j,yellow:j,blue:j,magenta:j,cyan:j,white:j,gray:j,bgBlack:j,bgRed:j,bgGreen:j,bgYellow:j,bgBlue:j,bgMagenta:j,bgCyan:j,bgWhite:j,blackBright:j,redBright:j,greenBright:j,yellowBright:j,blueBright:j,magentaBright:j,cyanBright:j,whiteBright:j,bgBlackBright:j,bgRedBright:j,bgGreenBright:j,bgYellowBright:j,bgBlueBright:j,bgMagentaBright:j,bgCyanBright:j,bgWhiteBright:j}};Pa.exports=Nh(),Pa.exports.createColors=Nh;var H_=Pa.exports;const pt=J_(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Gh=H_,Vh=pt,Ma=class lv extends Error{constructor(e,t,n,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t!="undefined"&&typeof n!="undefined"&&(typeof t=="number"?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,lv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Gh.isColorSupported);let n=u=>u,i=u=>u,s=u=>u;if(e){let{bold:u,gray:d,red:h}=Gh.createColors(!0);i=f=>u(h(f)),n=f=>d(f),Vh&&(s=f=>Vh(f))}let o=t.split(/\r?\n/),l=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),c=String(a).length;return o.slice(l,a).map((u,d)=>{let h=l+1+d,f=" "+(" "+h).slice(-c)+" | ";if(h===this.line){if(u.length>160){let p=20,g=Math.max(0,this.column-p),y=Math.max(this.column+p,this.endColumn+p),T=u.slice(g,y),E=n(f.replace(/\d/g," "))+u.slice(0,Math.min(this.column-1,p-1)).replace(/[^\t]/g," ");return i(">")+n(f)+s(T)+`
 `+E+i("^")}let m=n(f.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(f)+s(u)+`
 `+m+i("^")}return" "+n(f)+s(u)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Ua=Ma;Ma.default=Ma;const xh={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function B_(r){return r[0].toUpperCase()+r.slice(1)}let Fa=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+i+s,e)}}beforeAfter(e,t){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):t==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)n+=o}return n}block(e,t){let n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,n){let i;if(n||(n=t),t&&(i=e.raws[t],typeof i!="undefined"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return xh[n];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[n]!="undefined")return o.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let l="raw"+B_(n);this[l]?i=this[l](o,e):o.walk(a=>{if(i=a.raws[t],typeof i!="undefined")return!1})}return typeof i=="undefined"&&(i=xh[n]),o.rawCache[n]=i,i}rawBeforeClose(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after!="undefined")return t=n.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(n=>{if(n.type!=="decl"&&(t=n.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before!="undefined")return t=n.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(n=>{if(typeof n.raws.between!="undefined")return t=n.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(t=n.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before!="undefined"){let s=n.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(t=n.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Xh=Fa;Fa.default=Fa;let K_=Xh;function Da(r,e){new K_(e).stringify(r)}var os=Da;Da.default=Da;var Ln={};Ln.isClean=Symbol("isClean"),Ln.my=Symbol("my");let z_=Ua,j_=Xh,Q_=os,{isClean:On,my:$_}=Ln;function Ya(r,e){let t=new r.constructor;for(let n in r){if(!Object.prototype.hasOwnProperty.call(r,n)||n==="proxyCache")continue;let i=r[n],s=typeof i;n==="parent"&&s==="object"?e&&(t[n]=e):n==="source"?t[n]=i:Array.isArray(i)?t[n]=i.map(o=>Ya(o,t)):(s==="object"&&i!==null&&(i=Ya(i)),t[n]=i)}return t}function Gt(r,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,n=1,i=0;for(let s=0;s<r.length;s++){if(n===e.line&&t===e.column){i=s;break}r[s]===`
`?(t=1,n+=1):t+=1}return i}let Ja=class{get proxyOf(){return this}constructor(e={}){this.raws={},this[On]=!1,this[$_]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let n of e[t])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Ya(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new z_(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[On]=!0}markDirty(){if(this[On]){this[On]=!1;let e=this;for(;e=e.parent;)e[On]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,s=n.slice(Gt(n,this.source.start),Gt(n,this.source.end)).indexOf(e.word);s!==-1&&(t=this.positionInside(s))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,i="document"in this.source.input?this.source.input.document:this.source.input.css,s=Gt(i,this.source.start),o=s+e;for(let l=s;l<o;l++)i[l]===`
`?(t=1,n+=1):t+=1;return{column:t,line:n,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,n={column:this.source.start.column,line:this.source.start.line,offset:Gt(t,this.source.start)},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:Gt(t,this.source.end)+1}:{column:n.column+1,line:n.line,offset:n.offset+1};if(e.word){let o=t.slice(Gt(t,this.source.start),Gt(t,this.source.end)).indexOf(e.word);o!==-1&&(n=this.positionInside(o),i=this.positionInside(o+e.word.length))}else e.start?n={column:e.start.column,line:e.start.line,offset:Gt(t,e.start)}:e.index&&(n=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line,offset:Gt(t,e.end)}:typeof e.endIndex=="number"?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<n.line||i.line===n.line&&i.column<=n.column)&&(i={column:n.column+1,line:n.line,offset:n.offset+1}),{end:i,start:n}}raw(e,t){return new j_().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let n={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))n[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)n[o]=l.toJSON(null,t);else if(o==="source"){if(l==null)continue;let a=t.get(l.input);a==null&&(a=s,t.set(l.input,s),s++),n[o]={end:l.end,inputId:a,start:l.start}}else n[o]=l}return i&&(n.inputs=[...t.keys()].map(o=>o.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Q_){e.stringify&&(e=e.stringify);let t="";return e(this,n=>{t+=n}),t}warn(e,t,n={}){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(t,i)}};var as=Ja;Ja.default=Ja;let q_=as,Ha=class extends q_{constructor(e){super(e),this.type="comment"}};var ls=Ha;Ha.default=Ha;let eT=as,Ba=class extends eT{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=P(S({},e),{value:String(e.value)})),super(e),this.type="decl"}};var cs=Ba;Ba.default=Ba;let kh=ls,Wh=cs,tT=as,{isClean:Ah,my:Ph}=Ln,Ka,Mh,Uh,za;function Fh(r){return r.map(e=>(e.nodes&&(e.nodes=Fh(e.nodes)),delete e.source,e))}function Dh(r){if(r[Ah]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Dh(e)}let Vt=class cv extends tT{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let n=this.normalize(t,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...n)=>e[t](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?n=>e[t]((i,...s)=>n(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(n=>n.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],n<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let n=this.index(e),i=n===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let l of s)this.proxyOf.nodes.splice(n,0,l);let o;for(let l in this.indexes)o=this.indexes[l],n<=o&&(this.indexes[l]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Fh(Mh(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Wh(e)]}else if(e.selector||e.selectors)e=[new za(e)];else if(e.name)e=[new Ka(e)];else if(e.text)e=[new kh(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Ph]||cv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Ah]&&Dh(i),i.raws||(i.raws={}),typeof i.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let n=this.normalize(t,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="atrule")return t(n,i)}))}walkComments(e){return this.walk((t,n)=>{if(t.type==="comment")return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="decl")return t(n,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="rule")return t(n,i)}))}};Vt.registerParse=r=>{Mh=r},Vt.registerRule=r=>{za=r},Vt.registerAtRule=r=>{Ka=r},Vt.registerRoot=r=>{Uh=r};var ur=Vt;Vt.default=Vt,Vt.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,Ka.prototype):r.type==="rule"?Object.setPrototypeOf(r,za.prototype):r.type==="decl"?Object.setPrototypeOf(r,Wh.prototype):r.type==="comment"?Object.setPrototypeOf(r,kh.prototype):r.type==="root"&&Object.setPrototypeOf(r,Uh.prototype),r[Ph]=!0,r.nodes&&r.nodes.forEach(e=>{Vt.rebuild(e)})};let Yh=ur,us=class extends Yh{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var ja=us;us.default=us,Yh.registerAtRule(us);let rT=ur,Jh,Hh,Zn=class extends rT{constructor(e){super(S({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Jh(new Hh,this,e).stringify()}};Zn.registerLazyResult=r=>{Jh=r},Zn.registerProcessor=r=>{Hh=r};var Qa=Zn;Zn.default=Zn;let nT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var iT={nanoid:(r=21)=>{let e="",t=r|0;for(;t--;)e+=nT[Math.random()*64|0];return e}};let{existsSync:sT,readFileSync:oT}=pt,{dirname:$a,join:aT}=pt,{SourceMapConsumer:Bh,SourceMapGenerator:Kh}=pt;function lT(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}let qa=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=$a(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Bh(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,o=e.match(i)||e.match(s);if(o)return decodeURIComponent(e.substr(o[0].length));let l=e.match(t)||e.match(n);if(l)return lT(e.substr(l[0].length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=$a(e),sT(e))return this.mapFile=e,oT(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let n=t(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(t instanceof Bh)return Kh.fromSourceMap(t).toString();if(t instanceof Kh)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=aT($a(e),n)),this.loadFile(n)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var zh=qa;qa.default=qa;let{nanoid:cT}=iT,{isAbsolute:el,resolve:tl}=pt,{SourceMapConsumer:uT,SourceMapGenerator:dT}=pt,{fileURLToPath:jh,pathToFileURL:ds}=pt,Qh=Ua,hT=zh,rl=pt,nl=Symbol("lineToIndexCache"),fT=!!(uT&&dT),$h=!!(tl&&el);function qh(r){if(r[nl])return r[nl];let e=r.css.split(`
`),t=new Array(e.length),n=0;for(let i=0,s=e.length;i<s;i++)t[i]=n,n+=e[i].length+1;return r[nl]=t,t}let hs=class{get from(){return this.file||this.id}constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!$h||/^\w+:\/\//.test(t.from)||el(t.from)?this.file=t.from:this.file=tl(t.from)),$h&&fT){let n=new hT(this.css,t);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+cT(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,i={}){let s,o,l,a,c;if(t&&typeof t=="object"){let d=t,h=n;if(typeof d.offset=="number"){a=d.offset;let f=this.fromOffset(a);t=f.line,n=f.col}else t=d.line,n=d.column,a=this.fromLineAndColumn(t,n);if(typeof h.offset=="number"){l=h.offset;let f=this.fromOffset(l);o=f.line,s=f.col}else o=h.line,s=h.column,l=this.fromLineAndColumn(h.line,h.column)}else if(n)a=this.fromLineAndColumn(t,n);else{a=t;let d=this.fromOffset(a);t=d.line,n=d.col}let u=this.origin(t,n,o,s);return u?c=new Qh(e,u.endLine===void 0?u.line:{column:u.column,line:u.line},u.endLine===void 0?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,i.plugin):c=new Qh(e,o===void 0?t:{column:n,line:t},o===void 0?n:{column:s,line:o},this.css,this.file,i.plugin),c.input={column:n,endColumn:s,endLine:o,endOffset:l,line:t,offset:a,source:this.css},this.file&&(ds&&(c.input.url=ds(this.file).toString()),c.input.file=this.file),c}fromLineAndColumn(e,t){return qh(this)[e-1]+t-1}fromOffset(e){let t=qh(this),n=t[t.length-1],i=0;if(e>=n)i=t.length-1;else{let s=t.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<t[o])s=o-1;else if(e>=t[o+1])i=o+1;else{i=o;break}}return{col:e-t[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:tl(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof n=="number"&&(l=s.originalPositionFor({column:i,line:n}));let a;el(o.source)?a=ds(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||ds(this.map.mapFile));let c={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(jh)c.file=jh(a);else throw new Error("file: protocol is not available in this PostCSS build");let u=s.sourceContentFor(o.source);return u&&(c.source=u),c}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=S({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};var fs=hs;hs.default=hs,rl&&rl.registerInput&&rl.registerInput(hs);let ef=ur,tf,rf,Dr=class extends ef{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let i=super.normalize(e);if(t){if(n==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let n=this.index(e);return!t&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new tf(new rf,this,e).stringify()}};Dr.registerLazyResult=r=>{tf=r},Dr.registerProcessor=r=>{rf=r};var Nn=Dr;Dr.default=Dr,ef.registerRoot(Dr);let Gn={comma(r){return Gn.split(r,[","],!0)},space(r){let e=[" ",`
`,"	"];return Gn.split(r,e)},split(r,e,t){let n=[],i="",s=!1,o=0,l=!1,a="",c=!1;for(let u of r)c?c=!1:u==="\\"?c=!0:l?u===a&&(l=!1):u==='"'||u==="'"?(l=!0,a=u):u==="("?o+=1:u===")"?o>0&&(o-=1):o===0&&e.includes(u)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=u;return(t||i!=="")&&n.push(i.trim()),n}};var nf=Gn;Gn.default=Gn;let sf=ur,pT=nf,ps=class extends sf{get selectors(){return pT.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};var il=ps;ps.default=ps,sf.registerRule(ps);let mT=ja,gT=ls,yT=cs,bT=fs,vT=zh,ST=Nn,_T=il;function Vn(r,e){if(Array.isArray(r))return r.map(o=>Vn(o));let i=r,{inputs:t}=i,n=He(i,["inputs"]);if(t){e=[];for(let o of t){let l=P(S({},o),{__proto__:bT.prototype});l.map&&(l.map=P(S({},l.map),{__proto__:vT.prototype})),e.push(l)}}if(n.nodes&&(n.nodes=r.nodes.map(o=>Vn(o,e))),n.source){let s=n.source,{inputId:o}=s,l=He(s,["inputId"]);n.source=l,o!=null&&(n.source.input=e[o])}if(n.type==="root")return new ST(n);if(n.type==="decl")return new yT(n);if(n.type==="rule")return new _T(n);if(n.type==="comment")return new gT(n);if(n.type==="atrule")return new mT(n);throw new Error("Unknown node type: "+r.type)}var TT=Vn;Vn.default=Vn;let{dirname:ms,relative:of,resolve:af,sep:lf}=pt,{SourceMapConsumer:cf,SourceMapGenerator:gs}=pt,{pathToFileURL:uf}=pt,ET=fs,wT=!!(cf&&gs),RT=!!(ms&&af&&of&&lf);var df=class{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||ms(e.file),i;this.mapOpts.sourcesContent===!1?(i=new cf(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),RT&&wT&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=gs.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new gs({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new gs({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,n="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(l,a,c)=>{if(this.css+=l,a&&c!=="end"&&(i.generated.line=e,i.generated.column=t-1,a.source&&a.source.start?(i.source=this.sourcePath(a),i.original.line=a.source.start.line,i.original.column=a.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=l.match(/\n/g),o?(e+=o.length,s=l.lastIndexOf(`
`),t=l.length-s):t+=l.length,a&&c!=="start"){let u=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==u.last||u.raws.semicolon)&&(a.source&&a.source.end?(i.source=this.sourcePath(a),i.original.line=a.source.end.line,i.original.column=a.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?ms(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=ms(af(n,this.mapOpts.annotation)));let i=of(n,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new ET(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(uf){let n=uf(e).toString();return this.memoizedFileURLs.set(e,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;lf==="\\"&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};const sl=39,hf=34,ys=92,ff=47,bs=10,xn=32,vs=12,Ss=9,_s=13,IT=91,CT=93,LT=40,OT=41,ZT=123,NT=125,GT=59,VT=42,xT=58,XT=64,Ts=/[\t\n\f\r "#'()/;[\\\]{}]/g,Es=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,kT=/.[\r\n"'(/\\]/,pf=/[\da-f]/i;var WT=function(e,t={}){let n=e.css.valueOf(),i=t.ignoreErrors,s,o,l,a,c,u,d,h,f,m,p=n.length,g=0,y=[],T=[];function E(){return g}function C(Z){throw e.error("Unclosed "+Z,g)}function R(){return T.length===0&&g>=p}function N(Z){if(T.length)return T.pop();if(g>=p)return;let w=Z?Z.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case bs:case xn:case Ss:case _s:case vs:{a=g;do a+=1,s=n.charCodeAt(a);while(s===xn||s===bs||s===Ss||s===_s||s===vs);u=["space",n.slice(g,a)],g=a-1;break}case IT:case CT:case ZT:case NT:case xT:case GT:case OT:{let L=String.fromCharCode(s);u=[L,L,g];break}case LT:{if(m=y.length?y.pop()[1]:"",f=n.charCodeAt(g+1),m==="url"&&f!==sl&&f!==hf&&f!==xn&&f!==bs&&f!==Ss&&f!==vs&&f!==_s){a=g;do{if(d=!1,a=n.indexOf(")",a+1),a===-1)if(i||w){a=g;break}else C("bracket");for(h=a;n.charCodeAt(h-1)===ys;)h-=1,d=!d}while(d);u=["brackets",n.slice(g,a+1),g,a],g=a}else a=n.indexOf(")",g+1),o=n.slice(g,a+1),a===-1||kT.test(o)?u=["(","(",g]:(u=["brackets",o,g,a],g=a);break}case sl:case hf:{c=s===sl?"'":'"',a=g;do{if(d=!1,a=n.indexOf(c,a+1),a===-1)if(i||w){a=g+1;break}else C("string");for(h=a;n.charCodeAt(h-1)===ys;)h-=1,d=!d}while(d);u=["string",n.slice(g,a+1),g,a],g=a;break}case XT:{Ts.lastIndex=g+1,Ts.test(n),Ts.lastIndex===0?a=n.length-1:a=Ts.lastIndex-2,u=["at-word",n.slice(g,a+1),g,a],g=a;break}case ys:{for(a=g,l=!0;n.charCodeAt(a+1)===ys;)a+=1,l=!l;if(s=n.charCodeAt(a+1),l&&s!==ff&&s!==xn&&s!==bs&&s!==Ss&&s!==_s&&s!==vs&&(a+=1,pf.test(n.charAt(a)))){for(;pf.test(n.charAt(a+1));)a+=1;n.charCodeAt(a+1)===xn&&(a+=1)}u=["word",n.slice(g,a+1),g,a],g=a;break}default:{s===ff&&n.charCodeAt(g+1)===VT?(a=n.indexOf("*/",g+2)+1,a===0&&(i||w?a=n.length:C("comment")),u=["comment",n.slice(g,a+1),g,a],g=a):(Es.lastIndex=g+1,Es.test(n),Es.lastIndex===0?a=n.length-1:a=Es.lastIndex-2,u=["word",n.slice(g,a+1),g,a],y.push(u),g=a);break}}return g++,u}function V(Z){T.push(Z)}return{back:V,endOfFile:R,nextToken:N,position:E}};let AT=ja,PT=ls,MT=cs,UT=Nn,mf=il,FT=WT;const gf={empty:!0,space:!0};function DT(r){for(let e=r.length-1;e>=0;e--){let t=r[e],n=t[3]||t[2];if(n)return n}}var YT=class{constructor(e){this.input=e,this.root=new UT,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new AT;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,i,s,o=!1,l=!1,a=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){l=!0;break}else if(n==="}"){if(a.length>0){for(s=a.length-1,i=a[s];i&&i[0]==="space";)i=a[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let n=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,n,i,s;for(let[o,l]of e.entries()){if(i=l,s=i[0],s==="("&&(t+=1),s===")"&&(t-=1),t===0&&s===":")if(!n)this.doubleColon(i);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=i}return!1}comment(e){let t=new PT;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=FT(this.input)}decl(e,t){let n=new MT;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||DT(e)),n.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let c=e[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(s=e[c],s[1].toLowerCase()==="!important"){n.important=!0;let u=this.stringFrom(e,c);u=this.spacesFromEnd(e)+u,u!==" !important"&&(n.raws.important=u);break}else if(s[1].toLowerCase()==="important"){let u=e.slice(0),d="";for(let h=c;h>0;h--){let f=u[h][0];if(d.trim().startsWith("!")&&f!=="space")break;d=u.pop()[1]+d}d.trim().startsWith("!")&&(n.important=!0,n.raws.important=d,e=u)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new mf;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,n=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),a=[],c=e;for(;c;){if(n=c[0],a.push(c),n==="("||n==="[")s||(s=c),o.push(n==="("?")":"]");else if(l&&i&&n==="{")s||(s=c),o.push("}");else if(o.length===0)if(n===";")if(i){this.decl(a,l);return}else break;else if(n==="{"){this.rule(a);return}else if(n==="}"){this.tokenizer.back(a.pop()),t=!0;break}else n===":"&&(i=!0);else n===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;a.length&&(c=a[a.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,i){let s,o,l=n.length,a="",c=!0,u,d;for(let h=0;h<l;h+=1)s=n[h],o=s[0],o==="space"&&h===l-1&&!i?c=!1:o==="comment"?(d=n[h-1]?n[h-1][0]:"empty",u=n[h+1]?n[h+1][0]:"empty",!gf[d]&&!gf[u]?a.slice(-1)===","?c=!1:a+=s[1]:c=!1):a+=s[1];if(!c){let h=n.reduce((f,m)=>f+m[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new mf;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],t==="space");)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let JT=ur,HT=fs,BT=YT;function ws(r,e){let t=new HT(r,e),n=new BT(t);try{n.parse()}catch(i){throw process.env.NODE_ENV!=="production"&&i.name==="CssSyntaxError"&&e&&e.from&&(/\.scss$/i.test(e.from)?i.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(e.from)?i.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(e.from)&&(i.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),i}return n.root}var ol=ws;ws.default=ws,JT.registerParse(ws);let al=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let n=t.node.rangeBy(t);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var yf=al;al.default=al;let KT=yf,ll=class{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new KT(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}};var cl=ll;ll.default=ll;let bf={};var vf=function(e){bf[e]||(bf[e]=!0,typeof console!="undefined"&&console.warn&&console.warn(e))};let zT=ur,jT=Qa,QT=df,$T=ol,Sf=cl,qT=Nn,eE=os,{isClean:St,my:tE}=Ln,rE=vf;const nE={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},iE={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},sE={Once:!0,postcssPlugin:!0,prepare:!0},Yr=0;function Xn(r){return typeof r=="object"&&typeof r.then=="function"}function _f(r){let e=!1,t=nE[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,Yr,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,Yr,t+"Exit"]:[t,t+"Exit"]}function Tf(r){let e;return r.type==="document"?e=["Document",Yr,"DocumentExit"]:r.type==="root"?e=["Root",Yr,"RootExit"]:e=_f(r),{eventIndex:0,events:e,iterator:0,node:r,visitorIndex:0,visitors:[]}}function ul(r){return r[St]=!1,r.nodes&&r.nodes.forEach(e=>ul(e)),r}let dl={},Jr=class uv{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,t,n){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=ul(t);else if(t instanceof uv||t instanceof Sf)i=ul(t.root),t.map&&(typeof n.map=="undefined"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let s=$T;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(t,n)}catch(o){this.processed=!0,this.error=o}i&&!i[tE]&&zT.rebuild(i)}this.result=new Sf(e,i,n),this.helpers=P(S({},dl),{postcss:dl,result:this.result}),this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?S(S({},s),s.prepare(this.result)):s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin)e.plugin=n.postcssPlugin,e.setMessage();else if(n.postcssVersion&&process.env.NODE_ENV!=="production"){let i=n.postcssPlugin,s=n.postcssVersion,o=this.result.processor.version,l=s.split("."),a=o.split(".");(l[0]!==a[0]||parseInt(l[1])>parseInt(a[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+i+" uses "+s+". Perhaps this is the source of the error below.")}}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let n in t){if(!iE[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!sE[n])if(typeof t[n]=="object")for(let i in t[n])i==="*"?e(t,n,t[n][i]):e(t,n+"-"+i.toLowerCase(),t[n][i]);else typeof t[n]=="function"&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return J(this,null,function*(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(Xn(n))try{yield n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[St];){e[St]=!0;let t=[Tf(e)];for(;t.length>0;){let n=this.visitTick(t);if(Xn(n))try{yield n}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));yield Promise.all(i)}else yield n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()})}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return Xn(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=eE;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new QT(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Xn(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[St];)e[St]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this.opts||rE("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Xn(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(n.toProxy(),this.helpers)}catch(a){throw this.handleError(a,n)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!l[St]){l[St]=!0,e.push(Tf(l));return}t.iterator=0,delete n.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===Yr){n.nodes&&n.nodes.length&&(n[St]=!0,t.iterator=n.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[St]=!0;let t=_f(e);for(let n of t)if(n===Yr)e.nodes&&e.each(i=>{i[St]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}};Jr.registerPostcss=r=>{dl=r};var Ef=Jr;Jr.default=Jr,qT.registerLazyResult(Jr),jT.registerLazyResult(Jr);let oE=df,aE=ol;const lE=cl;let cE=os,uE=vf,hl=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=aE;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let i,s=cE;this.result=new lE(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new oE(s,i,this._opts,t);if(l.isMap()){let[a,c]=l.generate();a&&(this.result.css=a),c&&(this.result.map=c)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this._opts||uE("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};var dE=hl;hl.default=hl;let hE=Qa,fE=Ef,pE=dE,mE=Nn,kn=class{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)t.push(n);else if(typeof n=="function")t.push(n);else if(typeof n=="object"&&(n.parse||n.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(n+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new pE(this,e,t):new fE(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var gE=kn;kn.default=kn,mE.registerProcessor(kn),hE.registerProcessor(kn);let wf=ja,Rf=ls,yE=ur,bE=Ua,If=cs,Cf=Qa,vE=TT,SE=fs,_E=Ef,TE=nf,EE=as,wE=ol,fl=gE,RE=cl,Lf=Nn,Of=il,IE=os,CE=yf;function de(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new fl(r)}de.plugin=function(e,t){let n=!1;function i(...o){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new fl().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,a){return de([i(a)]).process(o,l)},i},de.stringify=IE,de.parse=wE,de.fromJSON=vE,de.list=TE,de.comment=r=>new Rf(r),de.atRule=r=>new wf(r),de.decl=r=>new If(r),de.rule=r=>new Of(r),de.root=r=>new Lf(r),de.document=r=>new Cf(r),de.CssSyntaxError=bE,de.Declaration=If,de.Container=yE,de.Processor=fl,de.Document=Cf,de.Comment=Rf,de.Warning=CE,de.AtRule=wf,de.Result=RE,de.Input=SE,de.Rule=Of,de.Root=Lf,de.Node=EE,_E.registerPostcss(de),de.default=de;class pl{constructor(...e){tt(this,"parentElement",null),tt(this,"parentNode",null),tt(this,"ownerDocument"),tt(this,"firstChild",null),tt(this,"lastChild",null),tt(this,"previousSibling",null),tt(this,"nextSibling",null),tt(this,"ELEMENT_NODE",1),tt(this,"TEXT_NODE",3),tt(this,"nodeType"),tt(this,"nodeName"),tt(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof pl){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const Zf={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Nf={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Rs={},LE=()=>!!globalThis.Zone;function ml(r){if(Rs[r])return Rs[r];const e=globalThis[r],t=e.prototype,n=r in Zf?Zf[r]:void 0,i=!!(n&&n.every(l=>{var a,c;return!!((c=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&c.toString().includes("[native code]"))})),s=r in Nf?Nf[r]:void 0,o=!!(s&&s.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(i&&o&&!LE())return Rs[r]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const c=a[r].prototype;return document.body.removeChild(l),c?Rs[r]=c:t}catch(l){return t}}const gl={};function Jt(r,e,t){var n;const i=`${r}.${String(t)}`;if(gl[i])return gl[i].call(e);const s=ml(r),o=(n=Object.getOwnPropertyDescriptor(s,t))==null?void 0:n.get;return o?(gl[i]=o,o.call(e)):e[t]}const yl={};function Gf(r,e,t){const n=`${r}.${String(t)}`;if(yl[n])return yl[n].bind(e);const s=ml(r)[t];return typeof s!="function"?e[t]:(yl[n]=s,s.bind(e))}function OE(r){return Jt("Node",r,"childNodes")}function ZE(r){return Jt("Node",r,"parentNode")}function NE(r){return Jt("Node",r,"parentElement")}function GE(r){return Jt("Node",r,"textContent")}function VE(r,e){return Gf("Node",r,"contains")(e)}function xE(r){return Gf("Node",r,"getRootNode")()}function XE(r){return!r||!("host"in r)?null:Jt("ShadowRoot",r,"host")}function kE(r){return r.styleSheets}function WE(r){return!r||!("shadowRoot"in r)?null:Jt("Element",r,"shadowRoot")}function AE(r,e){return Jt("Element",r,"querySelector")(e)}function PE(r,e){return Jt("Element",r,"querySelectorAll")(e)}function Vf(){return ml("MutationObserver").constructor}function dr(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}const ee={childNodes:OE,parentNode:ZE,parentElement:NE,textContent:GE,contains:VE,getRootNode:xE,host:XE,styleSheets:kE,shadowRoot:WE,querySelector:AE,querySelectorAll:PE,mutationObserver:Vf,patch:dr};function ke(r,e,t=document){const n={capture:!0};return t.addEventListener(r,e,n),()=>t.removeEventListener(r,e,n)}const Hr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let xf={map:{},getId(){return console.error(Hr),-1},getNode(){return console.error(Hr),null},removeNodeFromMap(){console.error(Hr)},has(){return console.error(Hr),!1},reset(){console.error(Hr)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(xf=new Proxy(xf,{get(r,e,t){return e==="map"&&console.error(Hr),Reflect.get(r,e,t)}}));function Wn(r,e,t={}){let n=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const l=e-(o-i),a=this;l<=0||l>e?(n&&(clearTimeout(n),n=null),i=o,r.apply(a,s)):!n&&t.trailing!==!1&&(n=setTimeout(()=>{i=t.leading===!1?0:Date.now(),n=null,r.apply(a,s)},l))}}function Is(r,e,t,n,i=window){const s=i.Object.getOwnPropertyDescriptor(r,e);return i.Object.defineProperty(r,e,n?t:{set(o){setTimeout(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>Is(r,e,s||{},!0)}let Cs=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Cs=()=>new Date().getTime());function Xf(r){var e,t,n,i;const s=r.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:r.pageXOffset!==void 0?r.pageXOffset:s.documentElement.scrollLeft||(s==null?void 0:s.body)&&((e=ee.parentElement(s.body))==null?void 0:e.scrollLeft)||((t=s==null?void 0:s.body)==null?void 0:t.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:r.pageYOffset!==void 0?r.pageYOffset:(s==null?void 0:s.documentElement.scrollTop)||(s==null?void 0:s.body)&&((n=ee.parentElement(s.body))==null?void 0:n.scrollTop)||((i=s==null?void 0:s.body)==null?void 0:i.scrollTop)||0}}function kf(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Wf(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Af(r){return r?r.nodeType===r.ELEMENT_NODE?r:ee.parentElement(r):null}const ME=r=>{try{if(r instanceof HTMLElement)return r.tagName==="CANVAS"}catch(e){return!1}return!1};function Ze(r,e,t,n){if(!r)return!1;const i=Af(r);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||n&&i.closest("."+e)!==null)return!0}else if(Mi(i,e,n))return!0}catch(s){}return!!(t&&(i.matches(t)||n&&i.closest(t)!==null))}function UE(r,e){return e.getId(r)!==-1}function bl(r,e,t){return r.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(r)===bn}function Pf(r,e){if(gn(r))return!1;const t=e.getId(r);if(!e.has(t))return!0;const n=ee.parentNode(r);return n&&n.nodeType===r.DOCUMENT_NODE?!1:n?Pf(n,e):!0}function vl(r){return!!r.changedTouches}function FE(r=window){"NodeList"in r&&!r.NodeList.prototype.forEach&&(r.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in r&&!r.DOMTokenList.prototype.forEach&&(r.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function Mf(r,e){return!!(r.nodeName==="IFRAME"&&e.getMeta(r))}function Uf(r,e){return!!(r.nodeName==="LINK"&&r.nodeType===r.ELEMENT_NODE&&r.getAttribute&&r.getAttribute("rel")==="stylesheet"&&e.getMeta(r))}function Sl(r){return r?r instanceof pl&&"shadowRoot"in r?!!r.shadowRoot:!!ee.shadowRoot(r):!1}class DE{constructor(){O(this,"id",1),O(this,"styleIDMap",new WeakMap),O(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!=null?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return t===void 0?n=this.id++:n=t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ff(r){var e;let t=null;return"getRootNode"in r&&((e=ee.getRootNode(r))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ee.host(ee.getRootNode(r))&&(t=ee.host(ee.getRootNode(r))),t}function YE(r){let e=r,t;for(;t=Ff(e);)e=t;return e}function JE(r){const e=r.ownerDocument;if(!e)return!1;const t=YE(r);return ee.contains(e,t)}function Df(r){const e=r.ownerDocument;return e?ee.contains(e,r)||JE(r):!1}var se=(r=>(r[r.DomContentLoaded=0]="DomContentLoaded",r[r.Load=1]="Load",r[r.FullSnapshot=2]="FullSnapshot",r[r.IncrementalSnapshot=3]="IncrementalSnapshot",r[r.Meta=4]="Meta",r[r.Custom=5]="Custom",r[r.Plugin=6]="Plugin",r))(se||{}),te=(r=>(r[r.Mutation=0]="Mutation",r[r.MouseMove=1]="MouseMove",r[r.MouseInteraction=2]="MouseInteraction",r[r.Scroll=3]="Scroll",r[r.ViewportResize=4]="ViewportResize",r[r.Input=5]="Input",r[r.TouchMove=6]="TouchMove",r[r.MediaInteraction=7]="MediaInteraction",r[r.StyleSheetRule=8]="StyleSheetRule",r[r.CanvasMutation=9]="CanvasMutation",r[r.Font=10]="Font",r[r.Log=11]="Log",r[r.Drag=12]="Drag",r[r.StyleDeclaration=13]="StyleDeclaration",r[r.Selection=14]="Selection",r[r.AdoptedStyleSheet=15]="AdoptedStyleSheet",r[r.CustomElement=16]="CustomElement",r))(te||{}),Be=(r=>(r[r.MouseUp=0]="MouseUp",r[r.MouseDown=1]="MouseDown",r[r.Click=2]="Click",r[r.ContextMenu=3]="ContextMenu",r[r.DblClick=4]="DblClick",r[r.Focus=5]="Focus",r[r.Blur=6]="Blur",r[r.TouchStart=7]="TouchStart",r[r.TouchMove_Departed=8]="TouchMove_Departed",r[r.TouchEnd=9]="TouchEnd",r[r.TouchCancel=10]="TouchCancel",r))(Be||{}),Ht=(r=>(r[r.Mouse=0]="Mouse",r[r.Pen=1]="Pen",r[r.Touch=2]="Touch",r))(Ht||{}),Br=(r=>(r[r["2D"]=0]="2D",r[r.WebGL=1]="WebGL",r[r.WebGL2=2]="WebGL2",r))(Br||{}),Kr=(r=>(r[r.Play=0]="Play",r[r.Pause=1]="Pause",r[r.Seeked=2]="Seeked",r[r.VolumeChange=3]="VolumeChange",r[r.RateChange=4]="RateChange",r))(Kr||{}),Yf=(r=>(r[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment",r))(Yf||{});function Jf(r){return"__ln"in r}class HE{constructor(){O(this,"length",0),O(this,"head",null),O(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(t==null?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Jf(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Jf(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Hf=(r,e)=>`${r}@${e}`;class BE{constructor(){O(this,"frozen",!1),O(this,"locked",!1),O(this,"texts",[]),O(this,"attributes",[]),O(this,"attributeMap",new WeakMap),O(this,"removes",[]),O(this,"mapRemoves",[]),O(this,"movedMap",{}),O(this,"addedSet",new Set),O(this,"movedSet",new Set),O(this,"droppedSet",new Set),O(this,"removesSubTreeCache",new Set),O(this,"mutationCb"),O(this,"blockClass"),O(this,"blockSelector"),O(this,"maskTextClass"),O(this,"maskTextSelector"),O(this,"inlineStylesheet"),O(this,"maskInputOptions"),O(this,"maskTextFn"),O(this,"maskInputFn"),O(this,"keepIframeSrcFn"),O(this,"recordCanvas"),O(this,"inlineImages"),O(this,"inlineVideos"),O(this,"privacySetting"),O(this,"slimDOMOptions"),O(this,"dataURLOptions"),O(this,"doc"),O(this,"mirror"),O(this,"iframeManager"),O(this,"stylesheetManager"),O(this,"shadowDomManager"),O(this,"canvasManager"),O(this,"processedNodeManager"),O(this,"unattachedDoc"),O(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),O(this,"emit",()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new HE,i=a=>{let c=a,u=bn;for(;u===bn;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},s=a=>{const c=ee.parentNode(a);if(!c||!Df(a))return;let u=!1;if(a.nodeType===Node.TEXT_NODE){const m=c.tagName;if(m==="TEXTAREA")return;m==="STYLE"&&this.addedSet.has(c)&&(u=!0)}const d=gn(c)?this.mirror.getId(Ff(a)):this.mirror.getId(c),h=i(a);if(d===-1||h===-1)return n.addNode(a);const f=Pr(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,privacySetting:this.privacySetting,onSerialize:m=>{Mf(m,this.mirror)&&this.iframeManager.addIframe(m),Uf(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),Sl(a)&&this.shadowDomManager.addShadowRoot(ee.shadowRoot(a),this.doc)},onIframeLoad:(m,p)=>{this.iframeManager.attachIframe(m,p),this.shadowDomManager.observeAttachShadow(m)},onStylesheetLoad:(m,p)=>{this.stylesheetManager.attachLinkElement(m,p)},cssCaptured:u});f&&(e.push({parentId:d,nextId:h,node:f}),t.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)Bf(this.removesSubTreeCache,a)&&!this.movedSet.has(ee.parentNode(a))||s(a);for(const a of this.addedSet)!Kf(this.droppedSet,a)&&!Bf(this.removesSubTreeCache,a)||Kf(this.movedSet,a)?s(a):this.droppedSet.add(a);let o=null;for(;n.length;){let a=null;if(o){const c=this.mirror.getId(ee.parentNode(o.value)),u=i(o.value);c!==-1&&u!==-1&&(a=o)}if(!a){let c=n.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(ee.parentNode(u.value));if(i(u.value)===-1)continue;if(d!==-1){a=u;break}else{const f=u.value,m=ee.parentNode(f);if(m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const p=ee.host(m);if(this.mirror.getId(p)!==-1){a=u;break}}}}}}if(!a){for(;n.head;)n.removeNode(n.head.value);break}o=a.previous,n.removeNode(a.value),s(a.value)}const l={texts:this.texts.map(a=>{var c,u;const d=a.node,h=ee.parentNode(d);h&&h.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(h);let f=a.value;const m=this.privacySetting==="strict",p=this.privacySetting==="default"&&wd(f),g=(u=(c=a.node)==null?void 0:c.parentElement)==null?void 0:u.getAttribute("data-hl-record");return(m||p)&&!g&&f&&(f=aa(f)),{id:this.mirror.getId(d),value:f}}).filter(a=>!t.has(a.id)).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>{const{attributes:c}=a;if(typeof c.style=="string"){const u=JSON.stringify(a.styleDiff),d=JSON.stringify(a._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=a.styleDiff)}return{id:this.mirror.getId(a.node),attributes:c}}).filter(a=>!t.has(a.id)).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:e};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(l))}),O(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));const n=Array.from(ee.childNodes(e),i=>ee.textContent(i)||"").join("");t.attributes.value=ki({overwriteRecord:null,element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:Wi(e),value:n,maskInputFn:this.maskInputFn})}),O(this,"processMutation",e=>{if(!bl(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=ee.textContent(e.target);!Ze(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Gd(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,Af(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,i=e.target.getAttribute(n);if(n==="value"){const o=Wi(t);i=ki({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:o,value:i,overwriteRecord:t.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(Ze(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)n="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),n==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Zd(t.tagName,n)){if(e.target.tagName==="INPUT"){const l=e.target;if(l.type==="password"){s.attributes.value="*".repeat(l.value.length);break}}if(s.attributes[n]=Od(this.doc,kr(t.tagName),kr(n),i),n==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(a){this.unattachedDoc=this.doc}const l=this.unattachedDoc.createElement("span");e.oldValue&&l.setAttribute("style",e.oldValue);for(const a of Array.from(t.style)){const c=t.style.getPropertyValue(a),u=t.style.getPropertyPriority(a);c!==l.style.getPropertyValue(a)||u!==l.style.getPropertyPriority(a)?u===""?s.styleDiff[a]=c:s.styleDiff[a]=[c,u]:s._unchangedStyles[a]=[c,u]}for(const a of Array.from(l.style))t.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}else n==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal")}break}case"childList":{if(Ze(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),i=gn(e.target)?this.mirror.getId(ee.host(e.target)):this.mirror.getId(e.target);Ze(e.target,this.blockClass,this.blockSelector,!1)||bl(t,this.mirror,this.slimDOMOptions)||!UE(t,this.mirror)||(this.addedSet.has(t)?(_l(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&n===-1||Pf(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Hf(n,i)]?_l(this.movedSet,t):(this.removes.push({parentId:i,id:n,isShadow:gn(e.target)&&yn(e.target)?!0:void 0}),KE(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),O(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(bl(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&n!==-1&&(this.movedMap[Hf(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Ze(e,this.blockClass,this.blockSelector,!1)||(ee.childNodes(e).forEach(n=>this.genAdds(n)),Sl(e)&&ee.childNodes(ee.shadowRoot(e)).forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","inlineVideos","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function _l(r,e){r.delete(e),ee.childNodes(e).forEach(t=>_l(r,t))}function KE(r,e){const t=[r];for(;t.length;){const n=t.pop();e.has(n)||(e.add(n),ee.childNodes(n).forEach(i=>t.push(i)))}}function Bf(r,e,t){return r.size===0?!1:zE(r,e)}function zE(r,e,t){const n=ee.parentNode(e);return n?r.has(n):!1}function Kf(r,e){return r.size===0?!1:zf(r,e)}function zf(r,e){const t=ee.parentNode(e);return t?r.has(t)?!0:zf(r,t):!1}let An;function jE(r){An=r}function QE(){An=void 0}const ie=r=>An?(...t)=>{try{return r(...t)}catch(n){if(An&&An(n)===!0)return;throw n}}:r,hr=[];function Pn(r){try{if("composedPath"in r){const e=r.composedPath();if(e.length)return e[0]}else if("path"in r&&r.path.length)return r.path[0]}catch(e){}return r&&r.target}function jf(r,e){const t=new BE;hr.push(t),t.init(r);const n=new(Vf())(ie(t.processMutations.bind(t)));return n.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function $E({mousemoveCb:r,sampling:e,doc:t,mirror:n}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],l;const a=Wn(ie(d=>{const h=Date.now()-l;r(o.map(f=>(f.timeOffset-=h,f)),d),o=[],l=null}),s),c=ie(Wn(ie(d=>{const h=Pn(d),{clientX:f,clientY:m}=vl(d)?d.changedTouches[0]:d;l||(l=Cs()),o.push({x:f,y:m,id:n.getId(h),timeOffset:Cs()-l}),a(typeof DragEvent!="undefined"&&d instanceof DragEvent?te.Drag:d instanceof MouseEvent?te.MouseMove:te.TouchMove)}),i,{trailing:!1})),u=[ke("mousemove",c,t),ke("touchmove",c,t),ke("drag",c,t)];return ie(()=>{u.forEach(d=>d())})}function qE({mouseInteractionCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};const o=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,l=[];let a=null;const c=u=>d=>{const h=Pn(d);if(Ze(h,n,i,!0)||ME(h))return;let f=null,m=u;if("pointerType"in d){switch(d.pointerType){case"mouse":f=Ht.Mouse;break;case"touch":f=Ht.Touch;break;case"pen":f=Ht.Pen;break}f===Ht.Touch&&(Be[u]===Be.MouseDown?m="TouchStart":Be[u]===Be.MouseUp&&(m="TouchEnd"))}else vl(d)&&(f=Ht.Touch);f!==null?(a=f,(m.startsWith("Touch")&&f===Ht.Touch||m.startsWith("Mouse")&&f===Ht.Mouse)&&(f=null)):Be[u]===Be.Click&&(f=a,a=null);const p=vl(d)?d.changedTouches[0]:d;if(!p)return;const g=t.getId(h),{clientX:y,clientY:T}=p;ie(r)(S({type:Be[m],id:g,x:y,y:T},f!==null&&{pointerType:f}))};return Object.keys(Be).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&o[u]!==!1).forEach(u=>{let d=kr(u);const h=c(u);if(window.PointerEvent)switch(Be[u]){case Be.MouseDown:case Be.MouseUp:d=d.replace("mouse","pointer");break;case Be.TouchStart:case Be.TouchEnd:return}l.push(ke(d,h,e))}),ie(()=>{l.forEach(u=>u())})}function Qf({scrollCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,sampling:s}){const o=ie(Wn(ie(l=>{const a=Pn(l);if(!a||Ze(a,n,i,!0))return;const c=t.getId(a);if(a===e&&e.defaultView){const u=Xf(e.defaultView);r({id:c,x:u.left,y:u.top})}else r({id:c,x:a.scrollLeft,y:a.scrollTop})}),s.scroll||100));return ke("scroll",o,e)}function ew({viewportResizeCb:r},{win:e}){let t=-1,n=-1;const i=ie(Wn(ie(()=>{const s=kf(),o=Wf();(t!==s||n!==o)&&(r({width:Number(o),height:Number(s)}),t=s,n=o)}),200));return ke("resize",i,e)}const tw=["INPUT","TEXTAREA","SELECT"],$f=new WeakMap;function rw({inputCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,ignoreClass:s,ignoreSelector:o,maskInputOptions:l,maskInputFn:a,sampling:c,userTriggeredOnInput:u}){function d(T){let E=Pn(T);const C=T.isTrusted,R=E&&E.tagName;if(E&&R==="OPTION"&&(E=ee.parentElement(E)),!E||!R||tw.indexOf(R)<0||Ze(E,n,i,!0)||E.classList.contains(s)||o&&E.matches(o))return;let N=E.value,V=!1;const Z=Wi(E)||"",w=E.getAttribute("data-hl-record");Z==="radio"||Z==="checkbox"?V=E.checked:Rd({maskInputOptions:l,type:Z,tagName:R,overwriteRecord:w})&&(N=ki({element:E,maskInputOptions:l,tagName:R,type:Z,value:N,overwriteRecord:w,maskInputFn:a})),h(E,u?{text:N,isChecked:V,userTriggered:C}:{text:N,isChecked:V});const L=E.name;Z==="radio"&&L&&V&&e.querySelectorAll(`input[type="radio"][name="${L}"]`).forEach(k=>{if(k!==E){const A=k.value;h(k,u?{text:A,isChecked:!V,userTriggered:!1}:{text:A,isChecked:!V})}})}function h(T,E){const C=$f.get(T);if(!C||C.text!==E.text||C.isChecked!==E.isChecked){$f.set(T,E);const R=t.getId(T);ie(r)(P(S({},E),{id:R}))}}const m=(c.input==="last"?["change"]:["input","change"]).map(T=>ke(T,ie(d),e)),p=e.defaultView;if(!p)return()=>{m.forEach(T=>T())};const g=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value"),y=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&m.push(...y.map(T=>Is(T[0],T[1],{set(){ie(d)({target:this,isTrusted:!1})}},!1,p))),ie(()=>{m.forEach(T=>T())})}function Ls(r){const e=[];function t(n,i){if(Os("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Os("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Os("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Os("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const o=Array.from(n.parentRule.cssRules).indexOf(n);i.unshift(o)}else if(n.parentStyleSheet){const o=Array.from(n.parentStyleSheet.cssRules).indexOf(n);i.unshift(o)}return i}return t(r,e)}function Bt(r,e,t){let n,i;return r?(r.ownerNode?n=e.getId(r.ownerNode):i=t.getId(r),{styleId:i,id:n}):{}}function nw({styleSheetRuleCb:r,mirror:e,stylesheetManager:t},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const i=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:ie((u,d,h)=>{const[f,m]=h,{id:p,styleId:g}=Bt(d,e,t.styleMirror);return(p&&p!==-1||g&&g!==-1)&&r({id:p,styleId:g,adds:[{rule:f,index:m}]}),u.apply(d,h)})}),n.CSSStyleSheet.prototype.addRule=function(u,d,h=this.cssRules.length){const f=`${u} { ${d} }`;return n.CSSStyleSheet.prototype.insertRule.apply(this,[f,h])};const s=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ie((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Bt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,removes:[{index:f}]}),u.apply(d,h)})}),n.CSSStyleSheet.prototype.removeRule=function(u){return n.CSSStyleSheet.prototype.deleteRule.apply(this,[u])};let o;n.CSSStyleSheet.prototype.replace&&(o=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:ie((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Bt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,replace:f}),u.apply(d,h)})}));let l;n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ie((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Bt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,replaceSync:f}),u.apply(d,h)})}));const a={};Zs("CSSGroupingRule")?a.CSSGroupingRule=n.CSSGroupingRule:(Zs("CSSMediaRule")&&(a.CSSMediaRule=n.CSSMediaRule),Zs("CSSConditionRule")&&(a.CSSConditionRule=n.CSSConditionRule),Zs("CSSSupportsRule")&&(a.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(a).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:ie((h,f,m)=>{const[p,g]=m,{id:y,styleId:T}=Bt(f.parentStyleSheet,e,t.styleMirror);return(y&&y!==-1||T&&T!==-1)&&r({id:y,styleId:T,adds:[{rule:p,index:[...Ls(f),g||0]}]}),h.apply(f,m)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:ie((h,f,m)=>{const[p]=m,{id:g,styleId:y}=Bt(f.parentStyleSheet,e,t.styleMirror);return(g&&g!==-1||y&&y!==-1)&&r({id:g,styleId:y,removes:[{index:[...Ls(f),p]}]}),h.apply(f,m)})})}),ie(()=>{n.CSSStyleSheet.prototype.insertRule=i,n.CSSStyleSheet.prototype.deleteRule=s,o&&(n.CSSStyleSheet.prototype.replace=o),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(a).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function qf({mirror:r,stylesheetManager:e},t){var n,i,s;let o=null;t.nodeName==="#document"?o=r.getId(t):o=r.getId(ee.host(t));const l=t.nodeName==="#document"?(n=t.defaultView)==null?void 0:n.Document:(s=(i=t.ownerDocument)==null?void 0:i.defaultView)==null?void 0:s.ShadowRoot,a=l!=null&&l.prototype?Object.getOwnPropertyDescriptor(l==null?void 0:l.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!l||!a?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var c;return(c=a.get)==null?void 0:c.call(this)},set(c){var u;const d=(u=a.set)==null?void 0:u.call(this,c);if(o!==null&&o!==-1)try{e.adoptStyleSheets(c,o)}catch(h){}return d}}),ie(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))}function iw({styleDeclarationCb:r,mirror:e,ignoreCSSAttributes:t,stylesheetManager:n},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ie((l,a,c)=>{var u;const[d,h,f]=c;if(t.has(d))return s.apply(a,[d,h,f]);const{id:m,styleId:p}=Bt((u=a.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,set:{property:d,value:h,priority:f},index:Ls(a.parentRule)}),l.apply(a,c)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ie((l,a,c)=>{var u;const[d]=c;if(t.has(d))return o.apply(a,[d]);const{id:h,styleId:f}=Bt((u=a.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||f&&f!==-1)&&r({id:h,styleId:f,remove:{property:d},index:Ls(a.parentRule)}),l.apply(a,c)})}),ie(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function sw({mediaInteractionCb:r,blockClass:e,blockSelector:t,mirror:n,sampling:i,doc:s}){const o=ie(a=>Wn(ie(c=>{const u=Pn(c);if(!u||Ze(u,e,t,!0))return;const{currentTime:d,volume:h,muted:f,playbackRate:m,loop:p}=u;r({type:a,id:n.getId(u),currentTime:d,volume:h,muted:f,playbackRate:m,loop:p})}),i.media||500)),l=[ke("play",o(Kr.Play),s),ke("pause",o(Kr.Pause),s),ke("seeked",o(Kr.Seeked),s),ke("volumechange",o(Kr.VolumeChange),s),ke("ratechange",o(Kr.RateChange),s)];return ie(()=>{l.forEach(a=>a())})}function ow({fontCb:r,doc:e}){const t=e.defaultView;if(!t)return()=>{};const n=[],i=new WeakMap,s=t.FontFace;t.FontFace=function(a,c,u){const d=new s(a,c,u);return i.set(d,{family:a,buffer:typeof c!="string",descriptors:u,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=dr(e.fonts,"add",function(l){return function(a){return setTimeout(ie(()=>{const c=i.get(a);c&&(r(c),i.delete(a))}),0),l.apply(this,[a])}});return n.push(()=>{t.FontFace=s}),n.push(o),ie(()=>{n.forEach(l=>l())})}function aw(r){const{doc:e,mirror:t,blockClass:n,blockSelector:i,selectionCb:s}=r;let o=!0;const l=ie(()=>{const a=e.getSelection();if(!a||o&&(a!=null&&a.isCollapsed))return;o=a.isCollapsed||!1;const c=[],u=a.rangeCount||0;for(let d=0;d<u;d++){const h=a.getRangeAt(d),{startContainer:f,startOffset:m,endContainer:p,endOffset:g}=h;Ze(f,n,i,!0)||Ze(p,n,i,!0)||c.push({start:t.getId(f),startOffset:m,end:t.getId(p),endOffset:g})}s({ranges:c})});return l(),ke("selectionchange",l)}function lw({doc:r,customElementCb:e}){const t=r.defaultView;return!t||!t.customElements?()=>{}:dr(t.customElements,"define",function(i){return function(s,o,l){try{e({define:{name:s}})}catch(a){console.warn(`Custom element callback failed for ${s}`)}return i.apply(this,[s,o,l])}})}function cw(r,e){const{mutationCb:t,mousemoveCb:n,mouseInteractionCb:i,scrollCb:s,viewportResizeCb:o,inputCb:l,mediaInteractionCb:a,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:f,customElementCb:m}=r;r.mutationCb=(...p)=>{e.mutation&&e.mutation(...p),t(...p)},r.mousemoveCb=(...p)=>{e.mousemove&&e.mousemove(...p),n(...p)},r.mouseInteractionCb=(...p)=>{e.mouseInteraction&&e.mouseInteraction(...p),i(...p)},r.scrollCb=(...p)=>{e.scroll&&e.scroll(...p),s(...p)},r.viewportResizeCb=(...p)=>{e.viewportResize&&e.viewportResize(...p),o(...p)},r.inputCb=(...p)=>{e.input&&e.input(...p),l(...p)},r.mediaInteractionCb=(...p)=>{e.mediaInteaction&&e.mediaInteaction(...p),a(...p)},r.styleSheetRuleCb=(...p)=>{e.styleSheetRule&&e.styleSheetRule(...p),c(...p)},r.styleDeclarationCb=(...p)=>{e.styleDeclaration&&e.styleDeclaration(...p),u(...p)},r.canvasMutationCb=(...p)=>{e.canvasMutation&&e.canvasMutation(...p),d(...p)},r.fontCb=(...p)=>{e.font&&e.font(...p),h(...p)},r.selectionCb=(...p)=>{e.selection&&e.selection(...p),f(...p)},r.customElementCb=(...p)=>{e.customElement&&e.customElement(...p),m(...p)}}function uw(r,e={}){const t=r.doc.defaultView;if(!t)return()=>{};cw(r,e);let n;r.recordDOM&&(n=jf(r,r.doc));const i=$E(r),s=qE(r),o=Qf(r),l=ew(r,{win:t}),a=rw(r),c=sw(r);let u=()=>{},d=()=>{},h=()=>{},f=()=>{};r.recordDOM&&(u=nw(r,{win:t}),d=qf(r,r.doc),h=iw(r,{win:t}),r.collectFonts&&(f=ow(r)));const m=aw(r),p=lw(r),g=[];for(const y of r.plugins)g.push(y.observer(y.callback,t,y.options));return ie(()=>{hr.forEach(y=>y.reset()),n==null||n.disconnect(),i(),s(),o(),l(),a(),c(),u(),d(),h(),f(),m(),p(),g.forEach(y=>y())})}function Os(r){return typeof window[r]!="undefined"}function Zs(r){return!!(typeof window[r]!="undefined"&&window[r].prototype&&"insertRule"in window[r].prototype&&"deleteRule"in window[r].prototype)}class ep{constructor(e){O(this,"iframeIdToRemoteIdMap",new WeakMap),O(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,i){const s=n||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let l=s.get(t);return l||(l=this.generateIdFn(),s.set(t,l),o.set(l,t)),l}getIds(e,t){const n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(s=>this.getId(e,s,n,i))}getRemoteId(e,t,n){const i=n||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const s=i.get(t);return s||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class dw{constructor(e){O(this,"iframes",new WeakMap),O(this,"crossOriginIframeMap",new WeakMap),O(this,"crossOriginIframeMirror",new ep(Id)),O(this,"crossOriginIframeStyleMirror"),O(this,"crossOriginIframeRootIdMap",new WeakMap),O(this,"mirror"),O(this,"mutationCb"),O(this,"wrappedEmit"),O(this,"loadListener"),O(this,"stylesheetManager"),O(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ep(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((n=e.contentWindow)==null||n.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin)return;const n=e.source;if(!n)return;const i=this.crossOriginIframeMap.get(n);if(!i)return;const s=this.transformCrossOriginEvent(i,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case se.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:se.IncrementalSnapshot,data:{source:te.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case se.Meta:case se.Load:case se.DomContentLoaded:return!1;case se.Plugin:return t;case se.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case se.IncrementalSnapshot:switch(t.data.source){case te.Mutation:return t.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(i.node,s)}),t.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),t.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),t.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case te.Drag:case te.TouchMove:case te.MouseMove:return t.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case te.ViewportResize:return!1;case te.MediaInteraction:case te.MouseInteraction:case te.Scroll:case te.CanvasMutation:case te.Input:return this.replaceIds(t.data,e,["id"]),t;case te.StyleSheetRule:case te.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case te.Font:return t;case te.Selection:return t.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),t;case te.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(n=t.data.styles)==null||n.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),t}}return!1}replace(e,t,n,i){for(const s of i)!Array.isArray(t[s])&&typeof t[s]!="number"||(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,t)})}patchRootIdOnNode(e,t){e.type!==Yf.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,t)})}}class hw{constructor(e){O(this,"shadowDoms",new WeakSet),O(this,"mutationCb"),O(this,"scrollCb"),O(this,"bypassOptions"),O(this,"mirror"),O(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!yn(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=jf(P(S({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Qf(P(S({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ee.host(e))),this.restoreHandlers.push(qf({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(dr(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s),l=ee.shadowRoot(this);return l&&Df(this)&&n.addShadowRoot(l,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fw=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Ns=0;Ns<zr.length;Ns++)fw[zr.charCodeAt(Ns)]=Ns;var pw=function(r){var e=new Uint8Array(r),t,n=e.length,i="";for(t=0;t<n;t+=3)i+=zr[e[t]>>2],i+=zr[(e[t]&3)<<4|e[t+1]>>4],i+=zr[(e[t+1]&15)<<2|e[t+2]>>6],i+=zr[e[t+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};const tp=new Map;function mw(r,e){let t=tp.get(r);return t||(t=new Map,tp.set(r,t)),t.has(e)||t.set(e,[]),t.get(e)}const rp=(r,e,t)=>{if(!r||!(ip(r,e)||typeof r=="object"))return;const n=r.constructor.name,i=mw(t,n);let s=i.indexOf(r);return s===-1&&(s=i.length,i.push(r)),s};function Gs(r,e,t){if(r instanceof Array)return r.map(n=>Gs(n,e,t));if(r===null)return r;if(r instanceof Float32Array||r instanceof Float64Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Int8Array||r instanceof Uint8ClampedArray)return{rr_type:r.constructor.name,args:[Object.values(r)]};if(r instanceof ArrayBuffer){const n=r.constructor.name,i=pw(r);return{rr_type:n,base64:i}}else{if(r instanceof DataView)return{rr_type:r.constructor.name,args:[Gs(r.buffer,e,t),r.byteOffset,r.byteLength]};if(r instanceof HTMLImageElement){const n=r.constructor.name,{src:i}=r;return{rr_type:n,src:i}}else if(r instanceof HTMLCanvasElement){const n="HTMLImageElement",i=r.toDataURL();return{rr_type:n,src:i}}else{if(r instanceof ImageData)return{rr_type:r.constructor.name,args:[Gs(r.data,e,t),r.width,r.height]};if(ip(r,e)||typeof r=="object"){const n=r.constructor.name,i=rp(r,e,t);return{rr_type:n,index:i}}}}return r}const np=(r,e,t)=>r.map(n=>Gs(n,e,t)),ip=(r,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>r instanceof e[i]);function gw(r,e,t,n){const i=[],s=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const o of s)try{if(typeof e.CanvasRenderingContext2D.prototype[o]!="function")continue;const l=dr(e.CanvasRenderingContext2D.prototype,o,function(a){return function(...c){return Ze(this.canvas,t,n,!0)||setTimeout(()=>{const u=np(c,e,this);r(this.canvas,{type:Br["2D"],property:o,args:u})},0),a.apply(this,c)}});i.push(l)}catch(l){const a=Is(e.CanvasRenderingContext2D.prototype,o,{set(c){r(this.canvas,{type:Br["2D"],property:o,args:[c],setter:!0})}});i.push(a)}return()=>{i.forEach(o=>o())}}function yw(r){return r==="experimental-webgl"?"webgl":r}function sp(r,e,t,n){const i=[];try{const s=dr(r.HTMLCanvasElement.prototype,"getContext",function(o){return function(l,...a){if(!Ze(this,e,t,!0)){const c=yw(l);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(a[0]&&typeof a[0]=="object"){const u=a[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return o.apply(this,[l,...a])}});i.push(s)}catch(s){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function op(r,e,t,n,i,s){const o=[],l=Object.getOwnPropertyNames(r);for(const a of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if(typeof r[a]!="function")continue;const c=dr(r,a,function(u){return function(...d){const h=u.apply(this,d);if(rp(h,s,this),"tagName"in this.canvas&&!Ze(this.canvas,n,i,!0)){const f=np(d,s,this),m={type:e,property:a,args:f};t(this.canvas,m)}return h}});o.push(c)}catch(c){const u=Is(r,a,{set(d){t(this.canvas,{type:e,property:a,args:[d],setter:!0})}});o.push(u)}return o}function bw(r,e,t,n){const i=[];return i.push(...op(e.WebGLRenderingContext.prototype,Br.WebGL,r,t,n,e)),typeof e.WebGL2RenderingContext!="undefined"&&i.push(...op(e.WebGL2RenderingContext.prototype,Br.WebGL2,r,t,n,e)),()=>{i.forEach(s=>s())}}const ap="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIGxldCBsb2dEZWJ1ZyA9IGZhbHNlOwogIGNvbnN0IGRlYnVnID0gKC4uLmFyZ3MpID0+IHsKICAgIGlmIChsb2dEZWJ1ZykgewogICAgICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpOwogICAgfQogIH07CiAgd29ya2VyLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsKICAgIGxvZ0RlYnVnID0gISFlLmRhdGEubG9nRGVidWc7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGR4LCBkeSwgZHcsIGRoLCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOwogICAgICBjb25zdCB0cmFuc3BhcmVudEJhc2U2NCA9IGdldFRyYW5zcGFyZW50QmxvYkZvcigKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgZGF0YVVSTE9wdGlvbnMKICAgICAgKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgY29uc3QgY3R4ID0gb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgYml0bWFwLmNsb3NlKCk7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgYXdhaXQgdHJhbnNwYXJlbnRCYXNlNjQgPT09IGJhc2U2NCkgewogICAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBpcyB0cmFuc3BhcmVudCIsIHsKICAgICAgICAgIGlkLAogICAgICAgICAgYmFzZTY0CiAgICAgICAgfSk7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgc3RhdHVzOiAidHJhbnNwYXJlbnQiIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpIHsKICAgICAgICBkZWJ1ZygiW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgaXMgdW5jaGFuZ2VkIiwgewogICAgICAgICAgaWQsCiAgICAgICAgICBiYXNlNjQKICAgICAgICB9KTsKICAgICAgfQogICAgICBjb25zdCBtc2cgPSB7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGR4LAogICAgICAgIGR5LAogICAgICAgIGR3LAogICAgICAgIGRoCiAgICAgIH07CiAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBwcm9jZXNzZWQiLCBtc2cpOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBubyBvZmZzY3JlZW5jYW52YXMgc3VwcG9ydCIsIHsKICAgICAgICBpZDogZS5kYXRhLmlkCiAgICAgIH0pOwogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCwgc3RhdHVzOiAidW5zdXBwb3J0ZWQiIH0pOwogICAgfQogIH07Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYWdlLWJpdG1hcC1kYXRhLXVybC13b3JrZXItRHd0SzhBMHouanMubWFwCg==",vw=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),lp=typeof self!="undefined"&&self.Blob&&new Blob([vw(ap)],{type:"text/javascript;charset=utf-8"});function Sw(r){let e;try{if(e=lp&&(self.URL||self.webkitURL).createObjectURL(lp),!e)throw"";const t=new Worker(e,{name:r==null?void 0:r.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch(t){return new Worker("data:text/javascript;base64,"+ap,{name:r==null?void 0:r.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}class _w{constructor(e){O(this,"pendingCanvasMutations",new Map),O(this,"rafStamps",{latestId:0,invokeId:null}),O(this,"mirror"),O(this,"logger"),O(this,"worker"),O(this,"snapshotInProgressMap",new Map),O(this,"lastSnapshotTime",new Map),O(this,"options"),O(this,"mutationCb"),O(this,"resetObservers"),O(this,"frozen",!1),O(this,"locked",!1),O(this,"processMutation",(d,h)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(h)});const{sampling:t,win:n,blockClass:i,blockSelector:s,recordCanvas:o,recordLocalVideos:l,recordRemoteVideos:a,initialSnapshotDelay:c,dataURLOptions:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.logger=e.logger,this.worker=new Sw,this.worker.onmessage=d=>{const{id:h}=d.data;if(this.snapshotInProgressMap.set(h,!1),!("base64"in d.data)){this.debug(null,"canvas worker received empty message",{id:h,data:d.data,status:d.data.status});return}const{base64:f,type:m,dx:p,dy:g,dw:y,dh:T}=d.data,E={id:h,type:Br["2D"],commands:[{property:"clearRect",args:[p,g,y,T]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:f}],type:m}]},p,g,y,T]}]};this.debug(null,"canvas worker recording mutation",E),this.mutationCb(E)},this.options=e,o&&t==="all"?(this.debug(null,"initializing canvas mutation observer",{sampling:t}),this.initCanvasMutationObserver(n,i,s)):o&&typeof t=="number"&&(this.debug(null,"initializing canvas fps observer",{sampling:t}),this.initCanvasFPSObserver(l,a,t,n,i,s,{initialSnapshotDelay:c,dataURLOptions:u},e.resizeFactor,e.maxSnapshotDimension))}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}debug(e,...t){if(!this.logger)return;const n=this.mirror.getId(e);let i="[highlight-canvas-manager]";e&&(i=`[highlight-canvas] [id:${n}]`,e.tagName.toLowerCase()==="canvas"&&(i+=` [ctx:${e.__context}]`)),this.logger.debug(i,e,...t)}snapshot(e){return J(this,null,function*(){var t;const n=this.mirror.getId(e);if(this.snapshotInProgressMap.get(n)){this.debug(e,"snapshotting already in progress for",n);return}const i=1e3/(typeof this.options.samplingManual=="number"?this.options.samplingManual:1),s=this.lastSnapshotTime.get(n);if(!(s&&new Date().getTime()-s<i)){if(this.debug(e,"starting snapshotting"),e.width===0||e.height===0){this.debug(e,"not yet ready",{width:e.width,height:e.height});return}this.lastSnapshotTime.set(n,new Date().getTime()),this.snapshotInProgressMap.set(n,!0);try{if(this.options.clearWebGLBuffer!==!1&&["webgl","webgl2"].includes(e.__context)){const u=e.getContext(e.__context);((t=u==null?void 0:u.getContextAttributes())==null?void 0:t.preserveDrawingBuffer)===!1&&(u.clear(u.COLOR_BUFFER_BIT),this.debug(e,"cleared webgl canvas to load it into memory",{attributes:u==null?void 0:u.getContextAttributes()}))}if(e.width===0||e.height===0){this.debug(e,"not yet ready",{width:e.width,height:e.height});return}let o=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const u=Math.max(e.width,e.height);o=Math.min(o,this.options.maxSnapshotDimension/u)}const l=e.width*o,a=e.height*o,c=yield createImageBitmap(e,{resizeWidth:l,resizeHeight:a});this.debug(e,"created image bitmap",{width:c.width,height:c.height}),this.worker.postMessage({id:n,bitmap:c,width:l,height:a,dx:0,dy:0,dw:e.width,dh:e.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[c]),this.debug(e,"sent message")}catch(o){this.debug(e,"failed to snapshot",o)}finally{this.snapshotInProgressMap.set(n,!1)}}})}initCanvasFPSObserver(e,t,n,i,s,o,l,a,c){const u=sp(i,s,o,!0),d=1e3/n;let h=0,f;const m=new Map,p=(E,C)=>{const R=[];E.querySelectorAll(C).forEach(Z=>R.push(Z));const N=document.createNodeIterator(E,Node.ELEMENT_NODE);let V;for(;V=N.nextNode();)V!=null&&V.shadowRoot&&R.push(...p(V.shadowRoot,C));return R},g=E=>{const C=[];return p(i.document,"canvas").forEach(R=>{if(!Ze(R,s,o,!0)){this.debug(R,"discovered canvas"),C.push(R);const N=this.mirror.getId(R);m.has(N)||m.set(N,E)}}),C},y=E=>{const C=[];return(e||t)&&p(i.document,"video").forEach(R=>{if(!(!t&&R.src!==""&&R.src.indexOf("blob:")===-1)&&!(!e&&(R.src===""||R.src.indexOf("blob:")!==-1))&&!Ze(R,s,o,!0)){C.push(R);const N=this.mirror.getId(R);m.has(N)||m.set(N,E)}}),C},T=E=>J(this,null,function*(){if(h&&E-h<d){f=requestAnimationFrame(T);return}h=E;const C=N=>{const V=this.mirror.getId(N),Z=m.get(V),w=!l.initialSnapshotDelay||E-Z>l.initialSnapshotDelay;return this.debug(N,{delay:l.initialSnapshotDelay,delta:E-Z,hadLoadingTime:w}),w},R=[];R.push(...g(E).filter(C).map(N=>this.snapshot(N))),R.push(...y(E).filter(C).map(N=>J(this,null,function*(){this.debug(N,"starting video snapshotting");const V=this.mirror.getId(N);if(this.snapshotInProgressMap.get(V)){this.debug(N,"video snapshotting already in progress for",V);return}this.snapshotInProgressMap.set(V,!0);try{const{width:Z,height:w}=N.getBoundingClientRect(),{actualWidth:L,actualHeight:k}={actualWidth:N.videoWidth,actualHeight:N.videoHeight},A=Math.max(L,k);if(A===0){this.debug(N,"not yet ready",{width:N.width,height:N.height,actualWidth:L,actualHeight:k,boxWidth:Z,boxHeight:w});return}let $=a||1;c&&($=Math.min($,c/A));const b=L*$,_=k*$,x=yield createImageBitmap(N,{resizeWidth:b,resizeHeight:_}),U=Math.max(Z,w)/A,D=L*U,M=k*U,Y=(Z-D)/2,ne=(w-M)/2;this.debug(N,"created image bitmap",{actualWidth:L,actualHeight:k,boxWidth:Z,boxHeight:w,outputWidth:D,outputHeight:M,resizeWidth:b,resizeHeight:_,scale:$,outputScale:U,offsetX:Y,offsetY:ne}),this.worker.postMessage({id:V,bitmap:x,width:b,height:_,dx:Y,dy:ne,dw:D,dh:M,dataURLOptions:l.dataURLOptions,logDebug:!!this.logger},[x]),this.debug(N,"send message")}catch(Z){this.debug(N,"failed to snapshot",Z)}finally{this.snapshotInProgressMap.set(V,!1)}}))),yield Promise.all(R).catch(console.error),f=requestAnimationFrame(T)});f=requestAnimationFrame(T),this.resetObservers=()=>{u(),f&&cancelAnimationFrame(f)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=sp(e,t,n,!1),s=gw(this.processMutation.bind(this),e,t,n),o=bw(this.processMutation.bind(this),e,t,n);this.resetObservers=()=>{i(),s(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||t===-1)return;const i=n.map(o=>{const c=o,{type:l}=c;return He(c,["type"])}),{type:s}=n[0];this.mutationCb({id:t,type:s,commands:i}),this.pendingCanvasMutations.delete(e)}}class Tw{constructor(e){O(this,"trackedLinkElements",new WeakSet),O(this,"mutationCb"),O(this,"adoptedStyleSheetCb"),O(this,"styleMirror",new DE),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const n={id:t,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(l,a)=>({rule:Sd(l,s.href),index:a}))})),n.styleIds.push(o)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Ew{constructor(){O(this,"nodeMap",new WeakMap),O(this,"active",!1)}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(i=>i!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let ge,Vs,Mn,xs=!1;try{if(Array.from([1],r=>r*2)[0]!==2){const r=document.createElement("iframe");document.body.appendChild(r),Array.from=((pd=r.contentWindow)==null?void 0:pd.Array.from)||Array.from,document.body.removeChild(r)}}catch(r){console.debug("Unable to override Array.from",r)}const mt=L0();function rt(r={}){var e,t,n,i,s,o,l,a;const{emit:c,checkoutEveryNms:u,checkoutEveryNth:d,blockClass:h="highlight-block",blockSelector:f=null,ignoreClass:m="highlight-ignore",ignoreSelector:p=null,maskTextClass:g="highlight-mask",maskTextSelector:y=null,inlineStylesheet:T=!0,maskAllInputs:E,maskInputOptions:C,slimDOMOptions:R,maskInputFn:N,maskTextFn:V=aa,hooks:Z,packFn:w,sampling:L={},mousemoveWait:k,recordDOM:A=!0,recordCanvas:$=!1,recordCrossOriginIframes:b=!1,recordAfter:_=r.recordAfter==="DOMContentLoaded"?r.recordAfter:"load",userTriggeredOnInput:x=!1,collectFonts:U=!1,inlineImages:D=!1,inlineVideos:M=!1,plugins:Y,keepIframeSrcFn:ne=()=>!1,privacySetting:Le="default",ignoreCSSAttributes:Je=new Set([]),errorHandler:ut,logger:Ie}=r,yt=S(S({},r.dataURLOptions),(t=(e=r.sampling)==null?void 0:e.canvas)==null?void 0:t.dataURLOptions);jE(ut);const Or=b?window.parent===window:!0;let Dt=!1;if(!Or)try{window.parent.document&&(Dt=!1)}catch(le){Dt=!0}if(Or&&!c)throw new Error("emit function is required");if(!Or&&!Dt)return()=>{};k!==void 0&&L.mousemove===void 0&&(L.mousemove=k),mt.reset();const Ii=E===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:C!==void 0?C:{password:!0},dn=R===!0||R==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:R==="all",headMetaDescKeywords:R==="all",headTitleMutations:R==="all"}:R||{};FE();let Ci,hn=0;const fn=le=>{for(const bt of Y||[])bt.eventProcessor&&(le=bt.eventProcessor(le));return w&&!Dt&&(le=w(le)),le};ge=(le,bt)=>{var be;const ve=le;if(ve.timestamp=Cs(),(be=hr[0])!=null&&be.isFrozen()&&ve.type!==se.FullSnapshot&&!(ve.type===se.IncrementalSnapshot&&ve.data.source===te.Mutation)&&hr.forEach(Lt=>Lt.unfreeze()),Or)c==null||c(fn(ve),bt);else if(Dt){const Lt={type:"rrweb",event:fn(ve),origin:window.location.origin,isCheckout:bt};window.parent.postMessage(Lt,"*")}if(ve.type===se.FullSnapshot)Ci=ve,hn=0;else if(ve.type===se.IncrementalSnapshot){if(ve.data.source===te.Mutation&&ve.data.isAttachIframe)return;hn++;const Lt=d&&hn>=d,fe=u&&ve.timestamp-Ci.timestamp>u;(Lt||fe)&&Vs(!0)}};const sr=le=>{ge({type:se.IncrementalSnapshot,data:S({source:te.Mutation},le)})},tv=le=>ge({type:se.IncrementalSnapshot,data:S({source:te.Scroll},le)}),rv=le=>ge({type:se.IncrementalSnapshot,data:S({source:te.CanvasMutation},le)}),mk=le=>ge({type:se.IncrementalSnapshot,data:S({source:te.AdoptedStyleSheet},le)}),Zr=new Tw({mutationCb:sr,adoptedStyleSheetCb:mk}),Nr=new dw({mirror:mt,mutationCb:sr,stylesheetManager:Zr,recordCrossOriginIframes:b,wrappedEmit:ge});for(const le of Y||[])le.getMirror&&le.getMirror({nodeMirror:mt,crossOriginIframeMirror:Nr.crossOriginIframeMirror,crossOriginIframeStyleMirror:Nr.crossOriginIframeStyleMirror});const Hu=new Ew;Mn=new _w({recordCanvas:$,recordLocalVideos:D,recordRemoteVideos:M,mutationCb:rv,win:window,blockClass:h,blockSelector:f,mirror:mt,sampling:(n=L==null?void 0:L.canvas)==null?void 0:n.fps,samplingManual:(i=L==null?void 0:L.canvas)==null?void 0:i.fpsManual,clearWebGLBuffer:(s=L==null?void 0:L.canvas)==null?void 0:s.clearWebGLBuffer,initialSnapshotDelay:(o=L==null?void 0:L.canvas)==null?void 0:o.initialSnapshotDelay,dataURLOptions:yt,resizeFactor:(l=L==null?void 0:L.canvas)==null?void 0:l.resizeFactor,maxSnapshotDimension:(a=L==null?void 0:L.canvas)==null?void 0:a.maxSnapshotDimension,logger:Ie});const Mo=new hw({mutationCb:sr,scrollCb:tv,bypassOptions:{blockClass:h,blockSelector:f,maskTextClass:g,maskTextSelector:y,inlineStylesheet:T,maskInputOptions:Ii,dataURLOptions:yt,maskTextFn:V,maskInputFn:N,recordCanvas:$,inlineImages:D,inlineVideos:M,privacySetting:Le,sampling:L,slimDOMOptions:dn,iframeManager:Nr,stylesheetManager:Zr,canvasManager:Mn,keepIframeSrcFn:ne,processedNodeManager:Hu},mirror:mt});Vs=(le=!1)=>{if(!A)return;ge({type:se.Meta,data:{href:window.location.href,width:Wf(),height:kf()}},le),Zr.reset(),Mo.init(),hr.forEach(be=>be.lock());const bt=sS(document,{mirror:mt,blockClass:h,blockSelector:f,maskTextClass:g,maskTextSelector:y,inlineStylesheet:T,maskAllInputs:Ii,maskTextFn:V,maskInputFn:N,slimDOM:dn,dataURLOptions:yt,recordCanvas:$,inlineImages:D,inlineVideos:M,privacySetting:Le,onSerialize:be=>{Mf(be,mt)&&Nr.addIframe(be),Uf(be,mt)&&Zr.trackLinkElement(be),Sl(be)&&Mo.addShadowRoot(ee.shadowRoot(be),document)},onIframeLoad:(be,ve)=>{Nr.attachIframe(be,ve),Mo.observeAttachShadow(be)},onStylesheetLoad:(be,ve)=>{Zr.attachLinkElement(be,ve)},keepIframeSrcFn:ne});if(!bt)return console.warn("Failed to snapshot the document");ge({type:se.FullSnapshot,data:{node:bt,initialOffset:Xf(window)}},le),hr.forEach(be=>be.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Zr.adoptStyleSheets(document.adoptedStyleSheets,mt.getId(document))};try{const le=[],bt=ve=>{var Lt;return ie(uw)({mutationCb:sr,mousemoveCb:(fe,Bu)=>ge({type:se.IncrementalSnapshot,data:{source:Bu,positions:fe}}),mouseInteractionCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.MouseInteraction},fe)}),scrollCb:tv,viewportResizeCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.ViewportResize},fe)}),inputCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.Input},fe)}),mediaInteractionCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.MediaInteraction},fe)}),styleSheetRuleCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.StyleSheetRule},fe)}),styleDeclarationCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.StyleDeclaration},fe)}),canvasMutationCb:rv,fontCb:fe=>ge({type:se.IncrementalSnapshot,data:S({source:te.Font},fe)}),selectionCb:fe=>{ge({type:se.IncrementalSnapshot,data:S({source:te.Selection},fe)})},customElementCb:fe=>{ge({type:se.IncrementalSnapshot,data:S({source:te.CustomElement},fe)})},blockClass:h,ignoreClass:m,ignoreSelector:p,maskTextClass:g,maskTextSelector:y,maskInputOptions:Ii,inlineStylesheet:T,sampling:L,recordDOM:A,recordCanvas:$,inlineImages:D,inlineVideos:M,userTriggeredOnInput:x,collectFonts:U,doc:ve,maskInputFn:N,maskTextFn:V,keepIframeSrcFn:ne,blockSelector:f,slimDOMOptions:dn,dataURLOptions:yt,mirror:mt,iframeManager:Nr,stylesheetManager:Zr,shadowDomManager:Mo,processedNodeManager:Hu,canvasManager:Mn,ignoreCSSAttributes:Je,privacySetting:Le,plugins:((Lt=Y==null?void 0:Y.filter(fe=>fe.observer))==null?void 0:Lt.map(fe=>({observer:fe.observer,options:fe.options,callback:Bu=>ge({type:se.Plugin,data:{plugin:fe.name,payload:Bu}})})))||[]},Z)};Nr.addLoadListener(ve=>{try{le.push(bt(ve.contentDocument))}catch(Lt){console.warn(Lt)}});const be=()=>{Vs(),le.push(bt(document)),xs=!0};return document.readyState==="interactive"||document.readyState==="complete"?be():(le.push(ke("DOMContentLoaded",()=>{ge({type:se.DomContentLoaded,data:{}}),_==="DOMContentLoaded"&&be()})),le.push(ke("load",()=>{ge({type:se.Load,data:{}}),_==="load"&&be()},window))),()=>{le.forEach(ve=>ve()),Hu.destroy(),xs=!1,QE()}}catch(le){console.warn(le)}}rt.addCustomEvent=(r,e)=>{xs&&ge({type:se.Custom,data:{tag:r,payload:e}})},rt.freezePage=()=>{hr.forEach(r=>r.freeze())},rt.takeFullSnapshot=r=>{if(!xs)throw new Error("please take full snapshot after start recording");Vs(r)},rt.snapshotCanvas=r=>J(this,null,function*(){if(!Mn)throw new Error("canvas manager is not initialized");yield Mn.snapshot(r)}),rt.mirror=mt;var cp;(function(r){r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped"})(cp||(cp={}));const{addCustomEvent:Xs}=rt;var ks=function(){return ks=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ks.apply(this,arguments)},Ws=new Map,Tl=new Map,up=!0,As=!1;function dp(r){return r.replace(/[\s,]+/g," ").trim()}function ww(r){return dp(r.source.body.substring(r.start,r.end))}function Rw(r){var e=new Set,t=[];return r.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var i=n.name.value,s=ww(n.loc),o=Tl.get(i);o&&!o.has(s)?up&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||Tl.set(i,o=new Set),o.add(s),e.has(s)||(e.add(s),t.push(n))}else t.push(n)}),ks(ks({},r),{definitions:t})}function Iw(r){var e=new Set(r.definitions);e.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(i){var s=n[i];s&&typeof s=="object"&&e.add(s)})});var t=r.loc;return t&&(delete t.startToken,delete t.endToken),r}function Cw(r){var e=dp(r);if(!Ws.has(e)){var t=Bo(r,{experimentalFragmentVariables:As,allowLegacyFragmentVariables:As});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Ws.set(e,Iw(Rw(t)))}return Ws.get(e)}function We(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof r=="string"&&(r=[r]);var n=r[0];return e.forEach(function(i,s){i&&i.kind==="Document"?n+=i.loc.source.body:n+=i,n+=r[s+1]}),Cw(n)}function Lw(){Ws.clear(),Tl.clear()}function Ow(){up=!1}function Zw(){As=!0}function Nw(){As=!1}var Un={gql:We,resetCaches:Lw,disableFragmentWarnings:Ow,enableExperimentalFragmentVariables:Zw,disableExperimentalFragmentVariables:Nw};(function(r){r.gql=Un.gql,r.resetCaches=Un.resetCaches,r.disableFragmentWarnings=Un.disableFragmentWarnings,r.enableExperimentalFragmentVariables=Un.enableExperimentalFragmentVariables,r.disableExperimentalFragmentVariables=Un.disableExperimentalFragmentVariables})(We||(We={})),We.default=We;const hp=We`
	fragment MatchParts on MatchConfig {
		regexValue
		matchValue
	}
`,Gw=We`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,El=We`
	mutation PushSessionEvents(
		$session_secure_id: String!
		$payload_id: Int64ID!
		$data: String!
	) {
		pushSessionEvents(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,Vw=We`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,xw=We`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,Xw=We`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,kw=We`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,Ww=We`
	mutation initializeSession(
		$session_secure_id: String!
		$session_key: String
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			session_key: $session_key
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
			sampling {
				spans {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					events {
						name {
							...MatchParts
						}
						attributes {
							key {
								...MatchParts
							}
							attribute {
								...MatchParts
							}
						}
					}
					samplingRatio
				}
				logs {
					message {
						...MatchParts
					}
					severityText {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					samplingRatio
				}
			}
		}
	}
	${hp}
`,Aw=We`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,Pw=We`
	query GetSamplingConfig($organization_verbose_id: String!) {
		sampling(organization_verbose_id: $organization_verbose_id) {
			spans {
				name {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				events {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
				}
				samplingRatio
			}
			logs {
				message {
					...MatchParts
				}
				severityText {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				samplingRatio
			}
		}
	}
	${hp}
`,Mw=(r,e,t,n)=>r();function wl(r,e=Mw){return{PushPayload(t,n){return e(i=>r.request(Gw,t,S(S({},n),i)),"PushPayload","mutation",t)},PushSessionEvents(t,n){return e(i=>r.request(El,t,S(S({},n),i)),"PushSessionEvents","mutation",t)},identifySession(t,n){return e(i=>r.request(Vw,t,S(S({},n),i)),"identifySession","mutation",t)},addSessionProperties(t,n){return e(i=>r.request(xw,t,S(S({},n),i)),"addSessionProperties","mutation",t)},pushMetrics(t,n){return e(i=>r.request(Xw,t,S(S({},n),i)),"pushMetrics","mutation",t)},addSessionFeedback(t,n){return e(i=>r.request(kw,t,S(S({},n),i)),"addSessionFeedback","mutation",t)},initializeSession(t,n){return e(i=>r.request(Ww,t,S(S({},n),i)),"initializeSession","mutation",t)},Ignore(t,n){return e(i=>r.request(Aw,t,S(S({},n),i)),"Ignore","query",t)},GetSamplingConfig(t,n){return e(i=>r.request(Pw,t,S(S({},n),i)),"GetSamplingConfig","query",t)}}}const Rl=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var je=(r=>(r.DeviceMemory="DeviceMemory",r.ViewportHeight="ViewportHeight",r.ViewportWidth="ViewportWidth",r.ScreenHeight="ScreenHeight",r.ScreenWidth="ScreenWidth",r.ViewportArea="ViewportArea",r))(je||{}),ye=(r=>(r.Device="Device",r.WebVital="WebVital",r.Performance="Performance",r.Frontend="Frontend",r.Backend="Backend",r))(ye||{});function Uw(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}function Fw(r){if(!r||!r.outerHTML)return"";let e="";for(;r.parentElement;){let t=r.localName;if(!t)break;t=t.toLowerCase();let n=r.parentElement,i=[];if(n.children&&n.children.length>0)for(let s=0;s<n.children.length;s++){let o=n.children[s];o.localName&&o.localName.toLowerCase&&o.localName.toLowerCase()===t&&i.push(o)}i.length>1&&(t+=":eq("+i.indexOf(r)+")"),e=t+(e?">"+e:""),r=n}return e}function Il(r){return Object.prototype.toString.call(r)==="[object Object]"}function fp(r,e){if(e===0)return!0;const t=Object.keys(r);for(const n of t)if(Il(r[n])&&fp(r[n],e-1))return!0;return!1}function Cl(r,e){const t={numOfKeysLimit:50,depthOfLimit:4};Object.assign(t,e);const n=[],i=[];return JSON.stringify(r,function(l,a){if(n.length>0){const c=n.indexOf(this);~c?n.splice(c+1):n.push(this),~c?i.splice(c,1/0,l):i.push(l),~n.indexOf(a)&&(n[0]===a?a="[Circular ~]":a="[Circular ~."+i.slice(0,n.indexOf(a)).join(".")+"]")}else n.push(a);if(a==null)return a;if(s(a))return o(a);if(a instanceof Event){const c={};for(const u in a){const d=a[u];Array.isArray(d)?c[u]=Fw(d.length?d[0]:null):c[u]=d}return c}else{if(a instanceof Node)return a instanceof HTMLElement?a?a.outerHTML:"":a.nodeName;if(a instanceof Error)return a.name+": "+a.message}return a});function s(l){return Il(l)&&Object.keys(l).length>t.numOfKeysLimit||typeof l=="function"?!0:l instanceof Event&&l.isTrusted===!1?Object.keys(l).length===1:!!(Il(l)&&fp(l,t.depthOfLimit))}function o(l){let a=l.toString();return t.stringLengthLimit&&a.length>t.stringLengthLimit&&(a=`${a.slice(0,t.stringLengthLimit)}...`),a}}function Dw(){var r=document.createElement("canvas");return r.getContext&&r.getContext("2d")?r.toDataURL("image/webp").indexOf("data:image/webp")==0:!1}function pp(){return Dw()?{type:"image/webp",quality:.9}:{type:"image/jpeg",quality:.6}}function mp(r){return typeof r=="number"&&!isNaN(r)&&isFinite(r)}var gp={exports:{}},Ll={exports:{}},yp;function Yw(){return yp||(yp=1,function(r,e){(function(t,n){r.exports=n()})(Qo,function(){function t(p){return!isNaN(parseFloat(p))&&isFinite(p)}function n(p){return p.charAt(0).toUpperCase()+p.substring(1)}function i(p){return function(){return this[p]}}var s=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],l=["fileName","functionName","source"],a=["args"],c=["evalOrigin"],u=s.concat(o,l,a,c);function d(p){if(p)for(var g=0;g<u.length;g++)p[u[g]]!==void 0&&this["set"+n(u[g])](p[u[g]])}d.prototype={getArgs:function(){return this.args},setArgs:function(p){if(Object.prototype.toString.call(p)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=p},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(p){if(p instanceof d)this.evalOrigin=p;else if(p instanceof Object)this.evalOrigin=new d(p);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var p=this.getFileName()||"",g=this.getLineNumber()||"",y=this.getColumnNumber()||"",T=this.getFunctionName()||"";return this.getIsEval()?p?"[eval] ("+p+":"+g+":"+y+")":"[eval]:"+g+":"+y:T?T+" ("+p+":"+g+":"+y+")":p+":"+g+":"+y}},d.fromString=function(g){var y=g.indexOf("("),T=g.lastIndexOf(")"),E=g.substring(0,y),C=g.substring(y+1,T).split(","),R=g.substring(T+1);if(R.indexOf("@")===0)var N=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(R,""),V=N[1],Z=N[2],w=N[3];return new d({functionName:E,args:C||void 0,fileName:V,lineNumber:Z||void 0,columnNumber:w||void 0})};for(var h=0;h<s.length;h++)d.prototype["get"+n(s[h])]=i(s[h]),d.prototype["set"+n(s[h])]=function(p){return function(g){this[p]=!!g}}(s[h]);for(var f=0;f<o.length;f++)d.prototype["get"+n(o[f])]=i(o[f]),d.prototype["set"+n(o[f])]=function(p){return function(g){if(!t(g))throw new TypeError(p+" must be a Number");this[p]=Number(g)}}(o[f]);for(var m=0;m<l.length;m++)d.prototype["get"+n(l[m])]=i(l[m]),d.prototype["set"+n(l[m])]=function(p){return function(g){this[p]=String(g)}}(l[m]);return d})}(Ll)),Ll.exports}(function(r,e){(function(t,n){r.exports=n(Yw())})(Qo,function(n){var i=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return{parse:function(a){if(typeof a.stacktrace!="undefined"||typeof a["opera#sourceloc"]!="undefined")return this.parseOpera(a);if(a.stack&&a.stack.match(s))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=c.exec(a.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(a){var c=a.stack.split(`
`).filter(function(u){return!!u.match(s)},this);return c.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var d=u.replace(/^\s+/,"").replace(/\(eval code/g,"("),h=d.match(/ (\((.+):(\d+):(\d+)\)$)/);d=h?d.replace(h[0],""):d;var f=d.split(/\s+/).slice(1),m=this.extractLocation(h?h[1]:f.pop()),p=f.join(" ")||void 0,g=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new n({functionName:p,fileName:g,lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseFFOrSafari:function(a){var c=a.stack.split(`
`).filter(function(u){return!u.match(o)},this);return c.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new n({functionName:u});var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,h=u.match(d),f=h&&h[1]?h[1]:void 0,m=this.extractLocation(u.replace(d,""));return new n({functionName:f,fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf(`
`)>-1&&a.message.split(`
`).length>a.stacktrace.split(`
`).length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,u=a.message.split(`
`),d=[],h=2,f=u.length;h<f;h+=2){var m=c.exec(u[h]);m&&d.push(new n({fileName:m[2],lineNumber:m[1],source:u[h]}))}return d},parseOpera10:function(a){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=a.stacktrace.split(`
`),d=[],h=0,f=u.length;h<f;h+=2){var m=c.exec(u[h]);m&&d.push(new n({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:u[h]}))}return d},parseOpera11:function(a){var c=a.stack.split(`
`).filter(function(u){return!!u.match(i)&&!u.match(/^Error created at/)},this);return c.map(function(u){var d=u.split("@"),h=this.extractLocation(d.pop()),f=d.shift()||"",m=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,p;f.match(/\(([^)]*)\)/)&&(p=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var g=p===void 0||p==="[arguments not available]"?void 0:p.split(",");return new n({functionName:m,args:g,fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:u})},this)}}})})(gp);var Jw=gp.exports;const bp=Gi(Jw);function Fn(r){try{return bp.parse(r)}catch(e){try{return bp.parse(new Error)}catch(t){return console.warn("Highlight Warning: failed to parse error",{originalError:e,secondaryError:t}),[]}}}const vp={level:[...Rl],logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}};function Sp(r,e){const t=e.logger;if(!t)return()=>{};let n;typeof t=="string"?n=window[t]:n=t;const i=[];if(e.level.includes("error")&&window){const o=l=>{const{message:a,error:c}=l;let u=[];c&&(u=Fn(c));const d=[Cl(a,e.stringifyOptions)];r({type:"Error",trace:u,time:Date.now(),value:d})};window.addEventListener("error",o),i.push(()=>{window&&window.removeEventListener("error",o)})}for(const o of e.level)i.push(s(n,o));return()=>{i.forEach(o=>o())};function s(o,l){return o[l]?Uw(o,l,a=>(...c)=>{a.apply(this,c);try{r(_p(l,e,...c))}catch(u){a("highlight logger error:",u,...c)}}):()=>{}}}function _p(r,e,...t){const n=Fn(new Error),i=e.serializeConsoleAttributes?t.map(s=>typeof s=="object"?Cl(s,e.stringifyOptions):s):t.filter(s=>typeof s!="object").map(s=>`${s}`);return{type:r,trace:n,value:i,attributes:Cl(t.filter(s=>typeof s=="object").reduce((s,o)=>S(S({},s),o),{}),e.stringifyOptions),time:Date.now()}}const Hw={start:0,end:3},Bw={start:4,end:5},Ol={start:6,end:7},Zl={start:8,end:8},Kw={start:9,end:9},zw={start:10,end:15};function jw(){if(crypto&&crypto.getRandomValues){const e=new Uint8Array(16);return crypto.getRandomValues(e),[...e.values()]}const r=[];for(let e=0;e<16;e+=1)r.push(Math.floor(Math.random()*256));return r}function jr(r,e){let t="";for(let n=e.start;n<=e.end;n+=1)t+=r[n].toString(16).padStart(2,"0");return t}function Qw(r){return r[Zl.start]=(r[Zl.start]|128)&191,r[Ol.start]=r[Ol.start]&15|64,`${jr(r,Hw)}-${jr(r,Bw)}-${jr(r,Ol)}-${jr(r,Zl)}${jr(r,Kw)}-${jr(r,zw)}`}function $w(){const r=jw();return Qw(r)}function Ps(){return typeof crypto!="undefined"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():$w()}function Nl(r,e,t,n){var a,c,u,d;let i=n!=null?n:e,s=Fn(i),o={};e instanceof Error&&(e=e.message,e.cause&&(o={"exception.cause":e.cause}));const l=qw(s);r({error:i,event:ht(e),type:"window.onerror",url:window.location.href,source:t!=null?t:"",lineNumber:(a=l[0])!=null&&a.lineNumber?(c=l[0])==null?void 0:c.lineNumber:0,columnNumber:(u=l[0])!=null&&u.columnNumber?(d=l[0])==null?void 0:d.columnNumber:0,stackTrace:l,timestamp:new Date().toISOString(),payload:o?ht(o):void 0,id:Ps()})}const Tp=(r,{enablePromisePatch:e})=>{if(typeof window=="undefined")return()=>{};const t=window.onerror=(o,l,a,c,u)=>{Nl(r,o,l,u)},n=window.onunhandledrejection=o=>{if(o.reason){const l=o.promise;l.getStack?Nl(r,o.reason,o.type,l.getStack()):Nl(r,o.reason,o.type)}},i=window.Promise,s=class extends i{constructor(a){super(a);v(this,"promiseCreationError");this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const a=typeof window.Zone=="undefined";return e&&a}};return s.shouldPatch()&&(window.Promise=s),()=>{window.Promise=i,window.onunhandledrejection=n,window.onerror=t}},qw=r=>{var t,n;if(r.length===0)return r;const e=r[0];return(t=e.fileName)!=null&&t.includes("highlight.run")||(n=e.fileName)!=null&&n.includes("highlight.io")||e.functionName==="new highlightPromise"?r.slice(1):r},Gl=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],Vl=["websocket error",'\\"ResizeObserver loop'];var eR=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},fr="1.9.0",Ep=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function tR(r){var e=new Set([r]),t=new Set,n=r.match(Ep);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(a){return a===r};function s(l){return t.add(l),!1}function o(l){return e.add(l),!0}return function(a){if(e.has(a))return!0;if(t.has(a))return!1;var c=a.match(Ep);if(!c)return s(a);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?s(a):i.major===0?i.minor===u.minor&&i.patch<=u.patch?o(a):s(a):i.minor<=u.minor?o(a):s(a)}}var rR=tR(fr),nR=fr.split(".")[0],Dn=Symbol.for("opentelemetry.js.api."+nR),Yn=eR;function Jn(r,e,t,n){var i;n===void 0&&(n=!1);var s=Yn[Dn]=(i=Yn[Dn])!==null&&i!==void 0?i:{version:fr};if(!n&&s[r]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(o.stack||o.message),!1}if(s.version!==fr){var o=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+r+" does not match previously registered API v"+fr);return t.error(o.stack||o.message),!1}return s[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+fr+"."),!0}function pr(r){var e,t,n=(e=Yn[Dn])===null||e===void 0?void 0:e.version;if(!(!n||!rR(n)))return(t=Yn[Dn])===null||t===void 0?void 0:t[r]}function Hn(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+fr+".");var t=Yn[Dn];t&&delete t[r]}var iR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},sR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},oR=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("verbose",this._namespace,e)},r}();function Bn(r,e,t){var n=pr("diag");if(n)return t.unshift(e),n[r].apply(n,sR([],iR(t),!1))}var ce;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(ce||(ce={}));function aR(r,e){r<ce.NONE?r=ce.NONE:r>ce.ALL&&(r=ce.ALL),e=e||{};function t(n,i){var s=e[n];return typeof s=="function"&&r>=i?s.bind(e):function(){}}return{error:t("error",ce.ERROR),warn:t("warn",ce.WARN),info:t("info",ce.INFO),debug:t("debug",ce.DEBUG),verbose:t("verbose",ce.VERBOSE)}}var lR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},cR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},uR="diag",_t=function(){function r(){function e(i){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var l=pr("diag");if(l)return l[i].apply(l,cR([],lR(s),!1))}}var t=this,n=function(i,s){var o,l,a;if(s===void 0&&(s={logLevel:ce.INFO}),i===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof s=="number"&&(s={logLevel:s});var u=pr("diag"),d=aR((l=s.logLevel)!==null&&l!==void 0?l:ce.INFO,i);if(u&&!s.suppressOverrideMessage){var h=(a=new Error().stack)!==null&&a!==void 0?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return Jn("diag",d,t,!0)};t.setLogger=n,t.disable=function(){Hn(uR,t)},t.createComponentLogger=function(i){return new oR(i)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}(),dR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},hR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fR=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=dR(e,2),n=t[0],i=t[1];return[n,i]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=new r(this._entries);try{for(var o=hR(n),l=o.next();!l.done;l=o.next()){var a=l.value;s._entries.delete(a)}}catch(c){e={error:c}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return s},r.prototype.clear=function(){return new r},r}(),pR=Symbol("BaggageEntryMetadata"),mR=_t.instance();function gR(r){return r===void 0&&(r={}),new fR(new Map(Object.entries(r)))}function wp(r){return typeof r!="string"&&(mR.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:pR,toString:function(){return r}}}function Kn(r){return Symbol.for(r)}var yR=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,i){var s=new r(t._currentContext);return s._currentContext.set(n,i),s},t.deleteValue=function(n){var i=new r(t._currentContext);return i._currentContext.delete(n),i}}return r}(),mr=new yR,gr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bR=function(){function r(){}return r.prototype.createGauge=function(e,t){return CR},r.prototype.createHistogram=function(e,t){return LR},r.prototype.createCounter=function(e,t){return IR},r.prototype.createUpDownCounter=function(e,t){return OR},r.prototype.createObservableGauge=function(e,t){return NR},r.prototype.createObservableCounter=function(e,t){return ZR},r.prototype.createObservableUpDownCounter=function(e,t){return GR},r.prototype.addBatchObservableCallback=function(e,t){},r.prototype.removeBatchObservableCallback=function(e){},r}(),Ms=function(){function r(){}return r}(),vR=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Ms),SR=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Ms),_R=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(Ms),TR=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(Ms),xl=function(){function r(){}return r.prototype.addCallback=function(e){},r.prototype.removeCallback=function(e){},r}(),ER=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xl),wR=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xl),RR=function(r){gr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(xl),Rp=new bR,IR=new vR,CR=new _R,LR=new TR,OR=new SR,ZR=new ER,NR=new wR,GR=new RR;function VR(){return Rp}var Kt;(function(r){r[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"})(Kt||(Kt={}));var xR={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}},XR={set:function(r,e,t){r!=null&&(r[e]=t)}},kR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},WR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},AR=function(){function r(){}return r.prototype.active=function(){return mr},r.prototype.with=function(e,t,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return t.call.apply(t,WR([n],kR(i),!1))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}(),PR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},MR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Xl="context",UR=new AR,Us=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return Jn(Xl,e,_t.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,MR([e,t,n],PR(s),!1))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return pr(Xl)||UR},r.prototype.disable=function(){this._getContextManager().disable(),Hn(Xl,_t.instance())},r}(),Tt;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(Tt||(Tt={}));var Ip="0000000000000000",Cp="00000000000000000000000000000000",Lp={traceId:Cp,spanId:Ip,traceFlags:Tt.NONE},zn=function(){function r(e){e===void 0&&(e=Lp),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.addLink=function(e){return this},r.prototype.addLinks=function(e){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}(),kl=Kn("OpenTelemetry Context Key SPAN");function Wl(r){return r.getValue(kl)||void 0}function FR(){return Wl(Us.getInstance().active())}function Al(r,e){return r.setValue(kl,e)}function DR(r){return r.deleteValue(kl)}function YR(r,e){return Al(r,new zn(e))}function Op(r){var e;return(e=Wl(r))===null||e===void 0?void 0:e.spanContext()}var JR=/^([0-9a-f]{32})$/i,HR=/^[0-9a-f]{16}$/i;function Zp(r){return JR.test(r)&&r!==Cp}function BR(r){return HR.test(r)&&r!==Ip}function jn(r){return Zp(r.traceId)&&BR(r.spanId)}function KR(r){return new zn(r)}var Pl=Us.getInstance(),Np=function(){function r(){}return r.prototype.startSpan=function(e,t,n){n===void 0&&(n=Pl.active());var i=!!(t!=null&&t.root);if(i)return new zn;var s=n&&Op(n);return zR(s)&&jn(s)?new zn(s):new zn},r.prototype.startActiveSpan=function(e,t,n,i){var s,o,l;if(!(arguments.length<2)){arguments.length===2?l=t:arguments.length===3?(s=t,l=n):(s=t,o=n,l=i);var a=o!=null?o:Pl.active(),c=this.startSpan(e,s,a),u=Al(a,c);return Pl.with(u,l,void 0,c)}},r}();function zR(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}var jR=new Np,QR=function(){function r(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):jR},r}(),$R=function(){function r(){}return r.prototype.getTracer=function(e,t,n){return new Np},r}(),qR=new $R,Gp=function(){function r(){}return r.prototype.getTracer=function(e,t,n){var i;return(i=this.getDelegateTracer(e,t,n))!==null&&i!==void 0?i:new QR(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:qR},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,t,n)},r}(),Fs;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Fs||(Fs={}));var Qn;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(Qn||(Qn={}));var Ds;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(Ds||(Ds={}));var re=Us.getInstance(),G=_t.instance(),eI=function(){function r(){}return r.prototype.getMeter=function(e,t,n){return Rp},r}(),tI=new eI,Ml="metrics",rI=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalMeterProvider=function(e){return Jn(Ml,e,_t.instance())},r.prototype.getMeterProvider=function(){return pr(Ml)||tI},r.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},r.prototype.disable=function(){Hn(Ml,_t.instance())},r}(),Ke=rI.getInstance(),nI=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}(),Ul=Kn("OpenTelemetry Baggage Key");function Vp(r){return r.getValue(Ul)||void 0}function iI(){return Vp(Us.getInstance().active())}function sI(r,e){return r.setValue(Ul,e)}function oI(r){return r.deleteValue(Ul)}var Fl="propagation",aI=new nI,lI=function(){function r(){this.createBaggage=gR,this.getBaggage=Vp,this.getActiveBaggage=iI,this.setBaggage=sI,this.deleteBaggage=oI}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return Jn(Fl,e,_t.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=XR),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=xR),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){Hn(Fl,_t.instance())},r.prototype._getGlobalPropagator=function(){return pr(Fl)||aI},r}(),Ae=lI.getInstance(),Dl="trace",cI=function(){function r(){this._proxyTracerProvider=new Gp,this.wrapSpanContext=KR,this.isSpanContextValid=jn,this.deleteSpan=DR,this.getSpan=Wl,this.getActiveSpan=FR,this.getSpanContext=Op,this.setSpan=Al,this.setSpanContext=YR}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=Jn(Dl,this._proxyTracerProvider,_t.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return pr(Dl)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){Hn(Dl,_t.instance()),this._proxyTracerProvider=new Gp},r}(),oe=cI.getInstance(),uI=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function xp(r){return r.getValue(uI)===!0}var dI="=",Yl=";",Jl=",",Hl="baggage",hI=180,fI=4096,pI=8192,mI=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function gI(r){return r.reduce(function(e,t){var n=""+e+(e!==""?Jl:"")+t;return n.length>pI?e:n},"")}function yI(r){return r.getAllEntries().map(function(e){var t=mI(e,2),n=t[0],i=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(s+=Yl+i.metadata.toString()),s})}function bI(r){var e=r.split(Yl);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(dI);if(!(n<=0)){var i=decodeURIComponent(t.substring(0,n).trim()),s=decodeURIComponent(t.substring(n+1).trim()),o;return e.length>0&&(o=wp(e.join(Yl))),{key:i,value:s,metadata:o}}}}}var vI=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=Ae.getBaggage(e);if(!(!i||xp(e))){var s=yI(i).filter(function(l){return l.length<=fI}).slice(0,hI),o=gI(s);o.length>0&&n.set(t,Hl,o)}},r.prototype.extract=function(e,t,n){var i=n.get(t,Hl),s=Array.isArray(i)?i.join(Jl):i;if(!s)return e;var o={};if(s.length===0)return e;var l=s.split(Jl);return l.forEach(function(a){var c=bI(a);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0?e:Ae.setBaggage(e,Ae.createBaggage(o))},r.prototype.fields=function(){return[Hl]},r}(),Bl;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(Bl||(Bl={}));var SI=",",_I=["OTEL_SDK_DISABLED"];function TI(r){return _I.indexOf(r)>-1}var EI=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function wI(r){return EI.indexOf(r)>-1}var RI=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function II(r){return RI.indexOf(r)>-1}var Kl=1/0,zl=128,CI=128,LI=128,Xp={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ce.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Kl,OTEL_ATTRIBUTE_COUNT_LIMIT:zl,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Kl,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:zl,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Kl,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:zl,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:CI,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:LI,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Bl.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function OI(r,e,t){if(typeof t[r]!="undefined"){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function ZI(r,e,t,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof t[r]!="undefined"){var s=Number(t[r]);isNaN(s)||(s<n?e[r]=n:s>i?e[r]=i:e[r]=s)}}function NI(r,e,t,n){n===void 0&&(n=SI);var i=t[r];typeof i=="string"&&(e[r]=i.split(n).map(function(s){return s.trim()}))}var GI={ALL:ce.ALL,VERBOSE:ce.VERBOSE,DEBUG:ce.DEBUG,INFO:ce.INFO,WARN:ce.WARN,ERROR:ce.ERROR,NONE:ce.NONE};function VI(r,e,t){var n=t[r];if(typeof n=="string"){var i=GI[n.toUpperCase()];i!=null&&(e[r]=i)}}function xI(r){var e={};for(var t in Xp){var n=t;switch(n){case"OTEL_LOG_LEVEL":VI(n,e,r);break;default:if(TI(n))OI(n,e,r);else if(wI(n))ZI(n,e,r);else if(II(n))NI(n,e,r);else{var i=r[n];typeof i!="undefined"&&i!==null&&(e[n]=String(i))}}}return e}var XI=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function kI(){var r=xI(XI);return Object.assign({},Xp,r)}var jl=performance,WI=9,AI=6,PI=Math.pow(10,AI),kp=Math.pow(10,WI);function Wp(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*PI);return[t,n]}function MI(){var r=jl.timeOrigin;if(typeof r!="number"){var e=jl;r=e.timing&&e.timing.fetchStart}return r}function UI(r){var e=Wp(MI()),t=Wp(jl.now());return FI(e,t)}function FI(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=kp&&(t[1]-=kp,t[0]+=1),t}var Pe;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(Pe||(Pe={}));var DI=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YI=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return r.prototype.inject=function(e,t,n){var i,s;try{for(var o=DI(this._propagators),l=o.next();!l.done;l=o.next()){var a=l.value;try{a.inject(e,t,n)}catch(c){G.warn("Failed to inject with "+a.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(i,s){try{return s.extract(i,t,n)}catch(o){G.warn("Failed to extract with "+s.constructor.name+". Err: "+o.message)}return i},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),Ql="[_0-9a-z-*/]",JI="[a-z]"+Ql+"{0,255}",HI="[a-z0-9]"+Ql+"{0,240}@[a-z]"+Ql+"{0,13}",BI=new RegExp("^(?:"+JI+"|"+HI+")$"),KI=/^[ -~]{0,255}[!-~]$/,zI=/,|=/;function jI(r){return BI.test(r)}function QI(r){return KI.test(r)&&!zI.test(r)}var Ap=32,$I=512,Pp=",",Mp="=",qI=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+Mp+e.get(n)),t},[]).join(Pp)},r.prototype._parse=function(e){e.length>$I||(this._internalState=e.split(Pp).reverse().reduce(function(t,n){var i=n.trim(),s=i.indexOf(Mp);if(s!==-1){var o=i.slice(0,s),l=i.slice(s+1,n.length);jI(o)&&QI(l)&&t.set(o,l)}return t},new Map),this._internalState.size>Ap&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Ap))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),$l="traceparent",ql="tracestate",eC="00",tC="(?!ff)[\\da-f]{2}",rC="(?![0]{32})[\\da-f]{32}",nC="(?![0]{16})[\\da-f]{16}",iC="[\\da-f]{2}",sC=new RegExp("^\\s?("+tC+")-("+rC+")-("+nC+")-("+iC+")(-.*)?\\s?$");function oC(r){var e=sC.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var aC=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=oe.getSpanContext(e);if(!(!i||xp(e)||!jn(i))){var s=eC+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||Tt.NONE).toString(16);n.set(t,$l,s),i.traceState&&n.set(t,ql,i.traceState.serialize())}},r.prototype.extract=function(e,t,n){var i=n.get(t,$l);if(!i)return e;var s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;var o=oC(s);if(!o)return e;o.isRemote=!0;var l=n.get(t,ql);if(l){var a=Array.isArray(l)?l.join(","):l;o.traceState=new qI(typeof a=="string"?a:void 0)}return oe.setSpanContext(e,o)},r.prototype.fields=function(){return[$l,ql]},r}(),lC="[object Object]",cC="[object Null]",uC="[object Undefined]",dC=Function.prototype,Up=dC.toString,hC=Up.call(Object),fC=pC(Object.getPrototypeOf,Object),Fp=Object.prototype,Dp=Fp.hasOwnProperty,yr=Symbol?Symbol.toStringTag:void 0,Yp=Fp.toString;function pC(r,e){return function(t){return r(e(t))}}function Jp(r){if(!mC(r)||gC(r)!==lC)return!1;var e=fC(r);if(e===null)return!0;var t=Dp.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Up.call(t)===hC}function mC(r){return r!=null&&typeof r=="object"}function gC(r){return r==null?r===void 0?uC:cC:yr&&yr in Object(r)?yC(r):bC(r)}function yC(r){var e=Dp.call(r,yr),t=r[yr],n=!1;try{r[yr]=void 0,n=!0}catch(s){}var i=Yp.call(r);return n&&(e?r[yr]=t:delete r[yr]),i}function bC(r){return Yp.call(r)}var vC=20;function SC(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=Hp(t,r.shift(),0,n);return t}function ec(r){return Ys(r)?r.slice():r}function Hp(r,e,t,n){t===void 0&&(t=0);var i;if(!(t>vC)){if(t++,Js(r)||Js(e)||Kp(e))i=ec(e);else if(Ys(r)){if(i=r.slice(),Ys(e))for(var s=0,o=e.length;s<o;s++)i.push(ec(e[s]));else if($n(e))for(var l=Object.keys(e),s=0,o=l.length;s<o;s++){var a=l[s];i[a]=ec(e[a])}}else if($n(r))if($n(e)){if(!_C(r,e))return e;i=Object.assign({},r);for(var l=Object.keys(e),s=0,o=l.length;s<o;s++){var a=l[s],c=e[a];if(Js(c))typeof c=="undefined"?delete i[a]:i[a]=c;else{var u=i[a],d=c;if(Bp(r,a,n)||Bp(e,a,n))delete i[a];else{if($n(u)&&$n(d)){var h=n.get(u)||[],f=n.get(d)||[];h.push({obj:r,key:a}),f.push({obj:e,key:a}),n.set(u,h),n.set(d,f)}i[a]=Hp(i[a],c,t,n)}}}}else i=e;return i}}function Bp(r,e,t){for(var n=t.get(r[e])||[],i=0,s=n.length;i<s;i++){var o=n[i];if(o.key===e&&o.obj===r)return!0}return!1}function Ys(r){return Array.isArray(r)}function Kp(r){return typeof r=="function"}function $n(r){return!Js(r)&&!Ys(r)&&!Kp(r)&&typeof r=="object"}function Js(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="undefined"||r instanceof Date||r instanceof RegExp||r===null}function _C(r,e){return!(!Jp(r)||!Jp(e))}var zp=function(){function r(){}return r.prototype.emit=function(e){},r}(),TC=new zp,EC=function(){function r(){}return r.prototype.getLogger=function(e,t,n){return new zp},r}(),jp=new EC,wC=function(){function r(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return r.prototype.emit=function(e){this._getLogger().emit(e)},r.prototype._getLogger=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):TC},r}(),Qp=function(){function r(){}return r.prototype.getLogger=function(e,t,n){var i;return(i=this.getDelegateLogger(e,t,n))!==null&&i!==void 0?i:new wC(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:jp},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateLogger=function(e,t,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getLogger(e,t,n)},r}(),RC=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Hs=Symbol.for("io.opentelemetry.js.api.logs"),qn=RC;function IC(r,e,t){return function(n){return n===r?e:t}}var $p=1,CC=function(){function r(){this._proxyLoggerProvider=new Qp}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalLoggerProvider=function(e){return qn[Hs]?this.getLoggerProvider():(qn[Hs]=IC($p,e,jp),this._proxyLoggerProvider.setDelegate(e),e)},r.prototype.getLoggerProvider=function(){var e,t;return(t=(e=qn[Hs])===null||e===void 0?void 0:e.call(qn,$p))!==null&&t!==void 0?t:this._proxyLoggerProvider},r.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},r.prototype.disable=function(){delete qn[Hs],this._proxyLoggerProvider=new Qp},r}(),ei=CC.getInstance();function LC(r,e,t,n){for(var i=0,s=r.length;i<s;i++){var o=r[i];e&&o.setTracerProvider(e),t&&o.setMeterProvider(t),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable()}}function OC(r){r.forEach(function(e){return e.disable()})}function ZC(r){var e,t,n=r.tracerProvider||oe.getTracerProvider(),i=r.meterProvider||Ke.getMeterProvider(),s=r.loggerProvider||ei.getLoggerProvider(),o=(t=(e=r.instrumentations)===null||e===void 0?void 0:e.flat())!==null&&t!==void 0?t:[];return LC(o,n,i,s),function(){OC(o)}}function tc(r){return typeof r=="function"}var Me=console.error.bind(console);function ti(r,e,t){var n=!!r[e]&&r.propertyIsEnumerable(e);Object.defineProperty(r,e,{configurable:!0,enumerable:n,writable:!0,value:t})}function ri(r){r&&r.logger&&(tc(r.logger)?Me=r.logger:Me("new logger isn't a function, not replacing"))}function qp(r,e,t){if(!r||!r[e]){Me("no original function "+e+" to wrap");return}if(!t){Me("no wrapper function"),Me(new Error().stack);return}if(!tc(r[e])||!tc(t)){Me("original object and wrapper must be functions");return}var n=r[e],i=t(n,e);return ti(i,"__original",n),ti(i,"__unwrap",function(){r[e]===i&&ti(r,e,n)}),ti(i,"__wrapped",!0),ti(r,e,i),i}function NC(r,e,t){if(r)Array.isArray(r)||(r=[r]);else{Me("must provide one or more modules to patch"),Me(new Error().stack);return}if(!(e&&Array.isArray(e))){Me("must provide one or more functions to wrap on modules");return}r.forEach(function(n){e.forEach(function(i){qp(n,i,t)})})}function em(r,e){if(!r||!r[e]){Me("no function to unwrap."),Me(new Error().stack);return}if(!r[e].__unwrap)Me("no original to unwrap to -- has "+e+" already been unwrapped?");else return r[e].__unwrap()}function GC(r,e){if(r)Array.isArray(r)||(r=[r]);else{Me("must provide one or more modules to patch"),Me(new Error().stack);return}if(!(e&&Array.isArray(e))){Me("must provide one or more functions to unwrap on modules");return}r.forEach(function(t){e.forEach(function(n){em(t,n)})})}ri.wrap=qp,ri.massWrap=NC,ri.unwrap=em,ri.massUnwrap=GC;var Ne=ri,rc=function(){return rc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},rc.apply(this,arguments)},VC=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ne.wrap,this._unwrap=Ne.unwrap,this._massWrap=Ne.massWrap,this._massUnwrap=Ne.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=Ke.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=rc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),xC=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),XC=function(r){xC(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(VC);function Ue(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Bs=performance,kC="traceparent",tm=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function WC(r){return r.setValue(tm,!0)}function nc(r){return r.getValue(tm)===!0}var AC="=",ic=";",sc=",",oc="baggage",PC=180,MC=4096,UC=8192,FC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function DC(r){return r.reduce(function(e,t){var n=""+e+(e!==""?sc:"")+t;return n.length>UC?e:n},"")}function YC(r){return r.getAllEntries().map(function(e){var t=FC(e,2),n=t[0],i=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(s+=ic+i.metadata.toString()),s})}function JC(r){var e=r.split(ic);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(AC);if(!(n<=0)){var i=decodeURIComponent(t.substring(0,n).trim()),s=decodeURIComponent(t.substring(n+1).trim()),o;return e.length>0&&(o=wp(e.join(ic))),{key:i,value:s,metadata:o}}}}}var HC=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=Ae.getBaggage(e);if(!(!i||nc(e))){var s=YC(i).filter(function(l){return l.length<=MC}).slice(0,PC),o=DC(s);o.length>0&&n.set(t,oc,o)}},r.prototype.extract=function(e,t,n){var i=n.get(t,oc),s=Array.isArray(i)?i.join(sc):i;if(!s)return e;var o={};if(s.length===0)return e;var l=s.split(sc);return l.forEach(function(a){var c=JC(a);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0?e:Ae.setBaggage(e,Ae.createBaggage(o))},r.prototype.fields=function(){return[oc]},r}(),rm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Ks(r){var e,t,n={};if(typeof r!="object"||r==null)return n;try{for(var i=rm(Object.entries(r)),s=i.next();!s.done;s=i.next()){var o=BC(s.value,2),l=o[0],a=o[1];if(!KC(l)){G.warn("Invalid attribute key: "+l);continue}if(!nm(a)){G.warn("Invalid attribute value set for key: "+l);continue}Array.isArray(a)?n[l]=a.slice():n[l]=a}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function KC(r){return typeof r=="string"&&r.length>0}function nm(r){return r==null?!0:Array.isArray(r)?zC(r):im(r)}function zC(r){var e,t,n;try{for(var i=rm(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(o!=null){if(!n){if(im(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0}function im(r){switch(typeof r){case"number":case"boolean":case"string":return!0}return!1}function jC(){return function(r){G.error(QC(r))}}function QC(r){return typeof r=="string"?r:JSON.stringify($C(r))}function $C(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var i=t[n];i&&(e[n]=String(i))}}),t=Object.getPrototypeOf(t);return e}var qC=jC();function Qr(r){try{qC(r)}catch(e){}}var Et;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(Et||(Et={}));var eL=",",tL=["OTEL_SDK_DISABLED"];function rL(r){return tL.indexOf(r)>-1}var nL=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function iL(r){return nL.indexOf(r)>-1}var sL=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function oL(r){return sL.indexOf(r)>-1}var zs=1/0,js=128,aL=128,lL=128,sm={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ce.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_ATTRIBUTE_COUNT_LIMIT:js,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:js,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:js,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:aL,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:lL,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Et.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function cL(r,e,t){if(typeof t[r]!="undefined"){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function uL(r,e,t,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof t[r]!="undefined"){var s=Number(t[r]);isNaN(s)||(s<n?e[r]=n:s>i?e[r]=i:e[r]=s)}}function dL(r,e,t,n){n===void 0&&(n=eL);var i=t[r];typeof i=="string"&&(e[r]=i.split(n).map(function(s){return s.trim()}))}var hL={ALL:ce.ALL,VERBOSE:ce.VERBOSE,DEBUG:ce.DEBUG,INFO:ce.INFO,WARN:ce.WARN,ERROR:ce.ERROR,NONE:ce.NONE};function fL(r,e,t){var n=t[r];if(typeof n=="string"){var i=hL[n.toUpperCase()];i!=null&&(e[r]=i)}}function om(r){var e={};for(var t in sm){var n=t;switch(n){case"OTEL_LOG_LEVEL":fL(n,e,r);break;default:if(rL(n))cL(n,e,r);else if(iL(n))uL(n,e,r);else if(oL(n))dL(n,e,r);else{var i=r[n];typeof i!="undefined"&&i!==null&&(e[n]=String(i))}}}return e}var am=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function ni(){var r=om(am);return Object.assign({},sm,r)}function pL(){return om(am)}var $r=performance,mL="exception.type",gL="exception.message",yL="exception.stacktrace",bL="http.response_content_length",vL="http.response_content_length_uncompressed",ac=mL,lc=gL,SL=yL,_L=bL,TL=vL,EL=9,wL=6,RL=Math.pow(10,wL),Qs=Math.pow(10,EL);function zt(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*RL);return[t,n]}function cc(){var r=$r.timeOrigin;if(typeof r!="number"){var e=$r;r=e.timing&&e.timing.fetchStart}return r}function lm(r){var e=zt(cc()),t=zt(typeof r=="number"?r:$r.now());return um(e,t)}function ii(r){if(uc(r))return r;if(typeof r=="number")return r<cc()?lm(r):zt(r);if(r instanceof Date)return zt(r.getTime());throw TypeError("Invalid input type")}function IL(r,e){var t=e[0]-r[0],n=e[1]-r[1];return n<0&&(t-=1,n+=Qs),[t,n]}function jt(r){return r[0]*Qs+r[1]}function uc(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function cm(r){return uc(r)||typeof r=="number"||r instanceof Date}function um(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Qs&&(t[1]-=Qs,t[0]+=1),t}var dc;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(dc||(dc={}));var CL=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LL=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return r.prototype.inject=function(e,t,n){var i,s;try{for(var o=CL(this._propagators),l=o.next();!l.done;l=o.next()){var a=l.value;try{a.inject(e,t,n)}catch(c){G.warn("Failed to inject with "+a.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(i,s){try{return s.extract(i,t,n)}catch(o){G.warn("Failed to extract with "+s.constructor.name+". Err: "+o.message)}return i},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),hc="[_0-9a-z-*/]",OL="[a-z]"+hc+"{0,255}",ZL="[a-z0-9]"+hc+"{0,240}@[a-z]"+hc+"{0,13}",NL=new RegExp("^(?:"+OL+"|"+ZL+")$"),GL=/^[ -~]{0,255}[!-~]$/,VL=/,|=/;function xL(r){return NL.test(r)}function XL(r){return GL.test(r)&&!VL.test(r)}var dm=32,kL=512,hm=",",fm="=",WL=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+fm+e.get(n)),t},[]).join(hm)},r.prototype._parse=function(e){e.length>kL||(this._internalState=e.split(hm).reverse().reduce(function(t,n){var i=n.trim(),s=i.indexOf(fm);if(s!==-1){var o=i.slice(0,s),l=i.slice(s+1,n.length);xL(o)&&XL(l)&&t.set(o,l)}return t},new Map),this._internalState.size>dm&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,dm))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),fc="traceparent",pc="tracestate",AL="00",PL="(?!ff)[\\da-f]{2}",ML="(?![0]{32})[\\da-f]{32}",UL="(?![0]{16})[\\da-f]{16}",FL="[\\da-f]{2}",DL=new RegExp("^\\s?("+PL+")-("+ML+")-("+UL+")-("+FL+")(-.*)?\\s?$");function YL(r){var e=DL.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var JL=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=oe.getSpanContext(e);if(!(!i||nc(e)||!jn(i))){var s=AL+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||Tt.NONE).toString(16);n.set(t,fc,s),i.traceState&&n.set(t,pc,i.traceState.serialize())}},r.prototype.extract=function(e,t,n){var i=n.get(t,fc);if(!i)return e;var s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;var o=YL(s);if(!o)return e;o.isRemote=!0;var l=n.get(t,pc);if(l){var a=Array.isArray(l)?l.join(","):l;o.traceState=new WL(typeof a=="string"?a:void 0)}return oe.setSpanContext(e,o)},r.prototype.fields=function(){return[fc,pc]},r}(),HL="[object Object]",BL="[object Null]",KL="[object Undefined]",zL=Function.prototype,pm=zL.toString,jL=pm.call(Object),QL=$L(Object.getPrototypeOf,Object),mm=Object.prototype,gm=mm.hasOwnProperty,br=Symbol?Symbol.toStringTag:void 0,ym=mm.toString;function $L(r,e){return function(t){return r(e(t))}}function bm(r){if(!qL(r)||eO(r)!==HL)return!1;var e=QL(r);if(e===null)return!0;var t=gm.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&pm.call(t)===jL}function qL(r){return r!=null&&typeof r=="object"}function eO(r){return r==null?r===void 0?KL:BL:br&&br in Object(r)?tO(r):rO(r)}function tO(r){var e=gm.call(r,br),t=r[br],n=!1;try{r[br]=void 0,n=!0}catch(s){}var i=ym.call(r);return n&&(e?r[br]=t:delete r[br]),i}function rO(r){return ym.call(r)}var nO=20;function iO(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=vm(t,r.shift(),0,n);return t}function mc(r){return $s(r)?r.slice():r}function vm(r,e,t,n){t===void 0&&(t=0);var i;if(!(t>nO)){if(t++,qs(r)||qs(e)||_m(e))i=mc(e);else if($s(r)){if(i=r.slice(),$s(e))for(var s=0,o=e.length;s<o;s++)i.push(mc(e[s]));else if(si(e))for(var l=Object.keys(e),s=0,o=l.length;s<o;s++){var a=l[s];i[a]=mc(e[a])}}else if(si(r))if(si(e)){if(!sO(r,e))return e;i=Object.assign({},r);for(var l=Object.keys(e),s=0,o=l.length;s<o;s++){var a=l[s],c=e[a];if(qs(c))typeof c=="undefined"?delete i[a]:i[a]=c;else{var u=i[a],d=c;if(Sm(r,a,n)||Sm(e,a,n))delete i[a];else{if(si(u)&&si(d)){var h=n.get(u)||[],f=n.get(d)||[];h.push({obj:r,key:a}),f.push({obj:e,key:a}),n.set(u,h),n.set(d,f)}i[a]=vm(i[a],c,t,n)}}}}else i=e;return i}}function Sm(r,e,t){for(var n=t.get(r[e])||[],i=0,s=n.length;i<s;i++){var o=n[i];if(o.key===e&&o.obj===r)return!0}return!1}function $s(r){return Array.isArray(r)}function _m(r){return typeof r=="function"}function si(r){return!qs(r)&&!$s(r)&&!_m(r)&&typeof r=="object"}function qs(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="undefined"||r instanceof Date||r instanceof RegExp||r===null}function sO(r,e){return!(!bm(r)||!bm(e))}function oO(r,e){return typeof e=="string"?r===e:!!r.match(e)}var aO=function(){function r(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(r.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),r.prototype.resolve=function(e){this._resolve(e)},r.prototype.reject=function(e){this._reject(e)},r}(),lO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},cO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},uO=function(){function r(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new aO}return Object.defineProperty(r.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),r.prototype.call=function(){for(var e,t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,cO([this._that],lO(n),!1))).then(function(s){return t._deferred.resolve(s)},function(s){return t._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},r}(),dO="exception",gc=function(){return gc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},gc.apply(this,arguments)},hO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tm=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},fO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},pO=function(){function r(e,t,n,i,s,o,l,a,c,u){l===void 0&&(l=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ds.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=l;var d=Date.now();this._performanceStartTime=$r.now(),this._performanceOffset=d-(this._performanceStartTime+cc()),this._startTimeProvided=a!=null,this.startTime=this._getTime(a!=null?a:d),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,u!=null&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return t==null||this._isSpanEnded()?this:e.length===0?(G.warn("Invalid attribute key: "+e),this):nm(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(G.warn("Invalid attribute value set for key: "+e),this)},r.prototype.setAttributes=function(e){var t,n;try{for(var i=hO(Object.entries(e)),s=i.next();!s.done;s=i.next()){var o=Tm(s.value,2),l=o[0],a=o[1];this.setAttribute(l,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},r.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return G.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&G.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),cm(t)&&(cm(n)||(n=t),t=void 0);var i=Ks(t);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},r.prototype.addLink=function(e){return this.links.push(e),this},r.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,fO([],Tm(e),!1)),this},r.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=gc({},e),this.status.message!=null&&typeof e.message!="string"&&(G.warn("Dropping invalid status.message of type '"+typeof e.message+"', expected 'string'"),delete this.status.message),this)},r.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},r.prototype.end=function(e){if(this._isSpanEnded()){G.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=IL(this.startTime,this.endTime),this._duration[0]<0&&(G.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&G.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},r.prototype._getTime=function(e){if(typeof e=="number"&&e<=$r.now())return lm(e+this._performanceOffset);if(typeof e=="number")return zt(e);if(e instanceof Date)return zt(e.getTime());if(uc(e))return e;if(this._startTimeProvided)return zt(Date.now());var t=$r.now()-this._performanceStartTime;return um(this.startTime,zt(t))},r.prototype.isRecording=function(){return this._ended===!1},r.prototype.recordException=function(e,t){var n={};typeof e=="string"?n[lc]=e:e&&(e.code?n[ac]=e.code.toString():e.name&&(n[ac]=e.name),e.message&&(n[lc]=e.message),e.stack&&(n[SL]=e.stack)),n[ac]||n[lc]?this.addEvent(dO,n,t):G.warn("Failed to record an exception "+e)},Object.defineProperty(r.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),r.prototype._isSpanEnded=function(){return this._ended&&G.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},r.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},r.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(G.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?t._truncateToLimitUtil(i,n):i}):e},r}(),qr;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(qr||(qr={}));var eo=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:qr.NOT_RECORD}},r.prototype.toString=function(){return"AlwaysOffSampler"},r}(),en=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:qr.RECORD_AND_SAMPLED}},r.prototype.toString=function(){return"AlwaysOnSampler"},r}(),yc=function(){function r(e){var t,n,i,s;this._root=e.root,this._root||(Qr(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new en),this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new en,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new eo,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new en,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new eo}return r.prototype.shouldSample=function(e,t,n,i,s,o){var l=oe.getSpanContext(e);return!l||!jn(l)?this._root.shouldSample(e,t,n,i,s,o):l.isRemote?l.traceFlags&Tt.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,i,s,o):this._remoteParentNotSampled.shouldSample(e,t,n,i,s,o):l.traceFlags&Tt.SAMPLED?this._localParentSampled.shouldSample(e,t,n,i,s,o):this._localParentNotSampled.shouldSample(e,t,n,i,s,o)},r.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},r}(),Em=function(){function r(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return r.prototype.shouldSample=function(e,t){return{decision:Zp(t)&&this._accumulate(t)<this._upperBound?qr.RECORD_AND_SAMPLED:qr.NOT_RECORD}},r.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},r.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},r.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var i=n*8,s=parseInt(e.slice(i,i+8),16);t=(t^s)>>>0}return t},r}(),mO=Et.AlwaysOn,tn=1;function wm(){var r=ni();return{sampler:Rm(r),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:r.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:r.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function Rm(r){switch(r===void 0&&(r=ni()),r.OTEL_TRACES_SAMPLER){case Et.AlwaysOn:return new en;case Et.AlwaysOff:return new eo;case Et.ParentBasedAlwaysOn:return new yc({root:new en});case Et.ParentBasedAlwaysOff:return new yc({root:new eo});case Et.TraceIdRatio:return new Em(Im(r));case Et.ParentBasedTraceIdRatio:return new yc({root:new Em(Im(r))});default:return G.error('OTEL_TRACES_SAMPLER value "'+r.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+mO+'".'),new en}}function Im(r){if(r.OTEL_TRACES_SAMPLER_ARG===void 0||r.OTEL_TRACES_SAMPLER_ARG==="")return G.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+tn+"."),tn;var e=Number(r.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(G.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+tn+"."),tn):e<0||e>1?(G.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+tn+"."),tn):e}function gO(r){var e={sampler:Rm()},t=wm(),n=Object.assign({},t,e,r);return n.generalLimits=Object.assign({},t.generalLimits,r.generalLimits||{}),n.spanLimits=Object.assign({},t.spanLimits,r.spanLimits||{}),n}function yO(r){var e,t,n,i,s,o,l,a,c,u,d,h,f=Object.assign({},r.spanLimits),m=pL();return f.attributeCountLimit=(o=(s=(i=(t=(e=r.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&t!==void 0?t:(n=r.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:js,f.attributeValueLengthLimit=(h=(d=(u=(a=(l=r.spanLimits)===null||l===void 0?void 0:l.attributeValueLengthLimit)!==null&&a!==void 0?a:(c=r.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&u!==void 0?u:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&h!==void 0?h:zs,Object.assign({},r,{spanLimits:f})}var bO=function(){function r(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=ni();this._maxExportBatchSize=typeof(t==null?void 0:t.maxExportBatchSize)=="number"?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(t==null?void 0:t.maxQueueSize)=="number"?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(t==null?void 0:t.scheduledDelayMillis)=="number"?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(t==null?void 0:t.exportTimeoutMillis)=="number"?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new uO(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(G.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&Tt.SAMPLED&&this._addToBuffer(e)},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},r.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&G.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(G.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},r.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var i=[],s=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),o=0,l=s;o<l;o++)i.push(e._flushOneBatch());Promise.all(i).then(function(){t()}).catch(n)})},r.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);re.with(WC(re.active()),function(){var s;e._finishedSpans.length<=e._maxExportBatchSize?(s=e._finishedSpans,e._finishedSpans=[]):s=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var o=function(){return e._exporter.export(s,function(d){var h;clearTimeout(i),d.code===dc.SUCCESS?t():n((h=d.error)!==null&&h!==void 0?h:new Error("BatchSpanProcessor: span export failed"))})},l=null,a=0,c=s.length;a<c;a++){var u=s[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(l!=null||(l=[]),l.push(u.resource.waitForAsyncAttributes()))}l===null?o():Promise.all(l).then(o,function(d){Qr(d),n(d)})})})},r.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,Qr(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis))}},r.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},r}(),vO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cm=function(r){vO(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.onInit(n),i}return e.prototype.onInit=function(t){var n=this;(t==null?void 0:t.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush().catch(function(i){Qr(i)})},this._pageHideListener=function(){n.forceFlush().catch(function(i){Qr(i)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(bO),SO=8,_O=16,TO=function(){function r(){this.generateTraceId=Lm(_O),this.generateSpanId=Lm(SO)}return r}(),to=Array(32);function Lm(r){return function(){for(var t=0;t<r*2;t++)to[t]=Math.floor(Math.random()*16)+48,to[t]>=58&&(to[t]+=39);return String.fromCharCode.apply(null,to.slice(0,r*2))}}var EO=function(){function r(e,t,n){this._tracerProvider=n;var i=gO(t);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new TO,this.resource=n.resource,this.instrumentationLibrary=e}return r.prototype.startSpan=function(e,t,n){var i,s,o;t===void 0&&(t={}),n===void 0&&(n=re.active()),t.root&&(n=oe.deleteSpan(n));var l=oe.getSpan(n);if(nc(n)){G.debug("Instrumentation suppressed, returning Noop Span");var a=oe.wrapSpanContext(Lp);return a}var c=l==null?void 0:l.spanContext(),u=this._idGenerator.generateSpanId(),d,h,f;!c||!oe.isSpanContextValid(c)?d=this._idGenerator.generateTraceId():(d=c.traceId,h=c.traceState,f=c.spanId);var m=(i=t.kind)!==null&&i!==void 0?i:Qn.INTERNAL,p=((s=t.links)!==null&&s!==void 0?s:[]).map(function(N){return{context:N.context,attributes:Ks(N.attributes)}}),g=Ks(t.attributes),y=this._sampler.shouldSample(n,d,e,m,g,p);h=(o=y.traceState)!==null&&o!==void 0?o:h;var T=y.decision===Fs.RECORD_AND_SAMPLED?Tt.SAMPLED:Tt.NONE,E={traceId:d,spanId:u,traceFlags:T,traceState:h};if(y.decision===Fs.NOT_RECORD){G.debug("Recording is off, propagating context in a non-recording span");var a=oe.wrapSpanContext(E);return a}var C=Ks(Object.assign(g,y.attributes)),R=new pO(this,n,e,E,m,f,p,t.startTime,void 0,C);return R},r.prototype.startActiveSpan=function(e,t,n,i){var s,o,l;if(!(arguments.length<2)){arguments.length===2?l=t:arguments.length===3?(s=t,l=n):(s=t,o=n,l=i);var a=o!=null?o:re.active(),c=this.startSpan(e,s,a),u=oe.setSpan(a,c);return re.with(u,l,void 0,c)}},r.prototype.getGeneralLimits=function(){return this._generalLimits},r.prototype.getSpanLimits=function(){return this._spanLimits},r.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},r}(),wO="process.runtime.name",RO="service.name",IO="telemetry.sdk.name",CO="telemetry.sdk.language",LO="telemetry.sdk.version",OO=wO,ZO=RO,bc=IO,vc=CO,Sc=LO,NO="webjs",GO=NO,VO="1.30.1",rn,_c=(rn={},rn[bc]="opentelemetry",rn[OO]="browser",rn[vc]=GO,rn[Sc]=VO,rn);function xO(){return"unknown_service"}var Qt=function(){return Qt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Qt.apply(this,arguments)},XO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},kO=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},WO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},oi=function(){function r(e,t){var n=this,i;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=t==null?void 0:t.then(function(s){return n._attributes=Object.assign({},n._attributes,s),n.asyncAttributesPending=!1,s},function(s){return G.debug("a resource's async attributes promise rejected: %s",s),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[ZO]=xO(),e[vc]=_c[vc],e[bc]=_c[bc],e[Sc]=_c[Sc],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&G.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return XO(this,void 0,void 0,function(){return kO(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var i=Qt(Qt({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(i);var s=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(o){var l,a=WO(o,2),c=a[0],u=a[1];return Qt(Qt(Qt(Qt({},t._syncAttributes),c),(l=e._syncAttributes)!==null&&l!==void 0?l:e.attributes),u)});return new r(i,s)},r.EMPTY=new r({}),r}(),ro=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Om=function(){function r(e){this._spanProcessors=e}return r.prototype.forceFlush=function(){var e,t,n=[];try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;n.push(o.forceFlush())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(l){Promise.all(n).then(function(){l()}).catch(function(a){Qr(a||new Error("MultiSpanProcessor: forceFlush failed")),l()})})},r.prototype.onStart=function(e,t){var n,i;try{for(var s=ro(this._spanProcessors),o=s.next();!o.done;o=s.next()){var l=o.value;l.onStart(e,t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},r.prototype.onEnd=function(e){var t,n;try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;o.onEnd(e)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.shutdown=function(){var e,t,n=[];try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;n.push(o.shutdown())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(l,a){Promise.all(n).then(function(){l()},a)})},r}(),AO=function(){function r(){}return r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){},r.prototype.shutdown=function(){return Promise.resolve()},r.prototype.forceFlush=function(){return Promise.resolve()},r}(),PO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},MO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},vr;(function(r){r[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved"})(vr||(vr={}));var UO=function(){function r(e){e===void 0&&(e={});var t,n;this._registeredSpanProcessors=[],this._tracers=new Map;var i=iO({},wm(),yO(e));if(this.resource=(t=i.resource)!==null&&t!==void 0?t:oi.empty(),i.mergeResourceWithDefaults&&(this.resource=oi.default().merge(this.resource)),this._config=Object.assign({},i,{resource:this.resource}),!((n=e.spanProcessors)===null||n===void 0)&&n.length)this._registeredSpanProcessors=MO([],PO(e.spanProcessors),!1),this.activeSpanProcessor=new Om(this._registeredSpanProcessors);else{var s=this._buildExporterFromEnv();if(s!==void 0){var o=new Cm(s);this.activeSpanProcessor=o}else this.activeSpanProcessor=new AO}}return r.prototype.getTracer=function(e,t,n){var i=e+"@"+(t||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new EO({name:e,version:t,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(i)},r.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(t){return G.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Om(this._registeredSpanProcessors)},r.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},r.prototype.register=function(e){e===void 0&&(e={}),oe.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&re.setGlobalContextManager(e.contextManager),e.propagator&&Ae.setGlobalPropagator(e.propagator)},r.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var s,o=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),s=vr.timeout},e);n.forceFlush().then(function(){clearTimeout(o),s!==vr.timeout&&(s=vr.resolved,i(s))}).catch(function(l){clearTimeout(o),s=vr.error,i(l)})})});return new Promise(function(n,i){Promise.all(t).then(function(s){var o=s.filter(function(l){return l!==vr.resolved});o.length>0?i(o):n()}).catch(function(s){return i([s])})})},r.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},r.prototype._getPropagator=function(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()},r.prototype._getSpanExporter=function(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()},r.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(ni().OTEL_PROPAGATORS)),n=t.map(function(s){var o=e._getPropagator(s);return o||G.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),o}),i=n.reduce(function(s,o){return o&&s.push(o),s},[]);if(i.length!==0)return t.length===1?i[0]:new LL({propagators:i})},r.prototype._buildExporterFromEnv=function(){var e=ni().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var t=this._getSpanExporter(e);return t||G.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},r._registeredPropagators=new Map([["tracecontext",function(){return new JL}],["baggage",function(){return new HC}]]),r._registeredExporters=new Map,r}(),FO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},DO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Zm=function(){function r(){this._enabled=!1,this._currentContext=mr}return r.prototype._bindFunction=function(e,t){e===void 0&&(e=mr);var n=this,i=function(){for(var s=this,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.with(e,function(){return t.apply(s,o)})};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),i},r.prototype.active=function(){return this._currentContext},r.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):t},r.prototype.disable=function(){return this._currentContext=mr,this._enabled=!1,this},r.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=mr,this)},r.prototype.with=function(e,t,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=this._currentContext;this._currentContext=e||mr;try{return t.call.apply(t,DO([n],FO(i),!1))}finally{this._currentContext=o}},r}(),YO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JO=function(r){YO(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(t){t===void 0&&(t={}),t.contextManager===void 0&&(t.contextManager=new Zm),t.contextManager&&t.contextManager.enable(),r.prototype.register.call(this,t)},e}(UO),H;(function(r){r.CONNECT_END="connectEnd",r.CONNECT_START="connectStart",r.DECODED_BODY_SIZE="decodedBodySize",r.DOM_COMPLETE="domComplete",r.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",r.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",r.DOM_INTERACTIVE="domInteractive",r.DOMAIN_LOOKUP_END="domainLookupEnd",r.DOMAIN_LOOKUP_START="domainLookupStart",r.ENCODED_BODY_SIZE="encodedBodySize",r.FETCH_START="fetchStart",r.LOAD_EVENT_END="loadEventEnd",r.LOAD_EVENT_START="loadEventStart",r.NAVIGATION_START="navigationStart",r.REDIRECT_END="redirectEnd",r.REDIRECT_START="redirectStart",r.REQUEST_START="requestStart",r.RESPONSE_END="responseEnd",r.RESPONSE_START="responseStart",r.SECURE_CONNECTION_START="secureConnectionStart",r.UNLOAD_EVENT_END="unloadEventEnd",r.UNLOAD_EVENT_START="unloadEventStart"})(H||(H={}));var Tc;function HO(){return Tc||(Tc=document.createElement("a")),Tc}function $t(r,e){return e in r}function Re(r,e,t,n){var i=void 0,s=void 0;$t(t,e)&&typeof t[e]=="number"&&(i=t[e]);var o=H.FETCH_START;if($t(t,o)&&typeof t[o]=="number"&&(s=t[o]),i!==void 0&&s!==void 0&&i>=s)return r.addEvent(e,i),r}function nn(r,e,t){t===void 0&&(t=!1),t||(Re(r,H.FETCH_START,e),Re(r,H.DOMAIN_LOOKUP_START,e),Re(r,H.DOMAIN_LOOKUP_END,e),Re(r,H.CONNECT_START,e),$t(e,"name")&&e.name.startsWith("https:")&&Re(r,H.SECURE_CONNECTION_START,e),Re(r,H.CONNECT_END,e),Re(r,H.REQUEST_START,e),Re(r,H.RESPONSE_START,e),Re(r,H.RESPONSE_END,e));var n=e[H.ENCODED_BODY_SIZE];n!==void 0&&r.setAttribute(_L,n);var i=e[H.DECODED_BODY_SIZE];i!==void 0&&n!==i&&r.setAttribute(TL,i)}function BO(r){return r.slice().sort(function(e,t){var n=e[H.FETCH_START],i=t[H.FETCH_START];return n>i?1:n<i?-1:0})}function Nm(){return typeof location!="undefined"?location.origin:void 0}function Gm(r,e,t,n,i,s){i===void 0&&(i=new WeakSet);var o=xt(r);r=o.toString();var l=zO(r,e,t,n,i,s);if(l.length===0)return{mainRequest:void 0};if(l.length===1)return{mainRequest:l[0]};var a=BO(l);if(o.origin!==Nm()&&a.length>1){var c=a[0],u=KO(a,c[H.RESPONSE_END],t),d=c[H.RESPONSE_END],h=u[H.FETCH_START];return h<d&&(u=c,c=void 0),{corsPreFlightRequest:c,mainRequest:u}}else return{mainRequest:l[0]}}function KO(r,e,t){for(var n=jt(t),i=jt(ii(e)),s=r[1],o,l=r.length,a=1;a<l;a++){var c=r[a],u=jt(ii(c[H.FETCH_START])),d=jt(ii(c[H.RESPONSE_END])),h=n-d;u>=i&&(!o||h<o)&&(o=h,s=c)}return s}function zO(r,e,t,n,i,s){var o=jt(e),l=jt(t),a=n.filter(function(c){var u=jt(ii(c[H.FETCH_START])),d=jt(ii(c[H.RESPONSE_END]));return c.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&c.name===r&&u>=o&&d<=l});return a.length>0&&(a=a.filter(function(c){return!i.has(c)})),a}function xt(r){if(typeof URL=="function")return new URL(r,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);var e=HO();return e.href=r,e}function Vm(r,e){if(r.nodeType===Node.DOCUMENT_NODE)return"/";var t=QO(r,e);if(e&&t.indexOf("@id")>0)return t;var n="";return r.parentNode&&(n+=Vm(r.parentNode,!1)),n+=t,n}function jO(r){if(!r.parentNode)return 0;var e=[r.nodeType];r.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var t=Array.from(r.parentNode.childNodes);return t=t.filter(function(n){var i=n.localName;return e.indexOf(n.nodeType)>=0&&i===r.localName}),t.length>=1?t.indexOf(r)+1:0}function QO(r,e){var t=r.nodeType,n=jO(r),i="";if(t===Node.ELEMENT_NODE){var s=r.getAttribute("id");if(e&&s)return'//*[@id="'+s+'"]';i=r.localName}else if(t===Node.TEXT_NODE||t===Node.CDATA_SECTION_NODE)i="text()";else if(t===Node.COMMENT_NODE)i="comment()";else return"";return i&&n>1?"/"+i+"["+n+"]":"/"+i}function xm(r,e){var t=e||[];(typeof t=="string"||t instanceof RegExp)&&(t=[t]);var n=xt(r);return n.origin===Nm()?!0:t.some(function(i){return oO(r,i)})}var Ec=function(){return Ec=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ec.apply(this,arguments)},$O=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ne.wrap,this._unwrap=Ne.unwrap,this._massWrap=Ne.massWrap,this._massUnwrap=Ne.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=Ke.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Ec({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),qO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eZ=function(r){qO(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}($O);function Xm(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}var ai;(function(r){r.DOCUMENT_LOAD="documentLoad",r.DOCUMENT_FETCH="documentFetch",r.RESOURCE_FETCH="resourceFetch"})(ai||(ai={}));var tZ="0.44.0",rZ="@opentelemetry/instrumentation-document-load";const nZ="http.url",iZ="http.user_agent",wc=nZ,sZ=iZ,Rc="exception.message",oZ="exception.stacktrace",Ic="exception.type",aZ="service.name",km="telemetry.sdk.name",Wm="telemetry.sdk.version",lZ="url.full",cZ="url.path",uZ="url.query",dZ="user_agent.original";var no;(function(r){r.FIRST_PAINT="firstPaint",r.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(no||(no={}));var hZ=function(){var r,e,t={},n=(e=(r=Bs).getEntriesByType)===null||e===void 0?void 0:e.call(r,"navigation")[0];if(n){var i=Object.values(H);i.forEach(function(l){if($t(n,l)){var a=n[l];typeof a=="number"&&(t[l]=a)}})}else{var s=Bs,o=s.timing;if(o){var i=Object.values(H);i.forEach(function(a){if($t(o,a)){var c=o[a];typeof c=="number"&&(t[a]=c)}})}}return t},Am={"first-paint":no.FIRST_PAINT,"first-contentful-paint":no.FIRST_CONTENTFUL_PAINT},fZ=function(r){var e,t,n=(t=(e=Bs).getEntriesByType)===null||t===void 0?void 0:t.call(e,"paint");n&&n.forEach(function(i){var s=i.name,o=i.startTime;$t(Am,s)&&r.addEvent(Am[s],o)})},pZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mZ=function(r){pZ(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,rZ,tZ,t)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var t=this;window.setTimeout(function(){t._collectPerformance()})},e.prototype._addResourcesSpans=function(t){var n=this,i,s,o=(s=(i=Bs).getEntriesByType)===null||s===void 0?void 0:s.call(i,"resource");o&&o.forEach(function(l){n._initResourceSpan(l,t)})},e.prototype._collectPerformance=function(){var t=this,n=Array.from(document.getElementsByTagName("meta")).find(function(o){return o.getAttribute("name")===kC}),i=hZ(),s=n&&n.content||"";re.with(Ae.extract(mr,{traceparent:s}),function(){var o,l=t._startSpan(ai.DOCUMENT_LOAD,H.FETCH_START,i);l&&(re.with(oe.setSpan(re.active(),l),function(){var a=t._startSpan(ai.DOCUMENT_FETCH,H.FETCH_START,i);a&&(a.setAttribute(wc,location.href),re.with(oe.setSpan(re.active(),a),function(){var c;t.getConfig().ignoreNetworkEvents||nn(a,i),t._addCustomAttributesOnSpan(a,(c=t.getConfig().applyCustomAttributesOnSpan)===null||c===void 0?void 0:c.documentFetch),t._endSpan(a,H.RESPONSE_END,i)}))}),l.setAttribute(wc,location.href),l.setAttribute(sZ,navigator.userAgent),t._addResourcesSpans(l),t.getConfig().ignoreNetworkEvents||(Re(l,H.FETCH_START,i),Re(l,H.UNLOAD_EVENT_START,i),Re(l,H.UNLOAD_EVENT_END,i),Re(l,H.DOM_INTERACTIVE,i),Re(l,H.DOM_CONTENT_LOADED_EVENT_START,i),Re(l,H.DOM_CONTENT_LOADED_EVENT_END,i),Re(l,H.DOM_COMPLETE,i),Re(l,H.LOAD_EVENT_START,i),Re(l,H.LOAD_EVENT_END,i)),t.getConfig().ignorePerformancePaintEvents||fZ(l),t._addCustomAttributesOnSpan(l,(o=t.getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.documentLoad),t._endSpan(l,H.LOAD_EVENT_END,i))})},e.prototype._endSpan=function(t,n,i){t&&($t(i,n)?t.end(i[n]):t.end())},e.prototype._initResourceSpan=function(t,n){var i,s=this._startSpan(ai.RESOURCE_FETCH,H.FETCH_START,t,n);s&&(s.setAttribute(wc,t.name),this.getConfig().ignoreNetworkEvents||nn(s,t),this._addCustomAttributesOnResourceSpan(s,t,(i=this.getConfig().applyCustomAttributesOnSpan)===null||i===void 0?void 0:i.resourceFetch),this._endSpan(s,H.RESPONSE_END,t))},e.prototype._startSpan=function(t,n,i,s){if($t(i,n)&&typeof i[n]=="number"){var o=this.tracer.startSpan(t,{startTime:i[n]},s?oe.setSpan(re.active(),s):void 0);return o}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._addCustomAttributesOnSpan=function(t,n){var i=this;n&&Xm(function(){return n(t)},function(s){s&&i._diag.error("addCustomAttributesOnSpan",s)})},e.prototype._addCustomAttributesOnResourceSpan=function(t,n,i){var s=this;i&&Xm(function(){return i(t,n)},function(o){o&&s._diag.error("addCustomAttributesOnResourceSpan",o)})},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(eZ),Cc=function(){return Cc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cc.apply(this,arguments)},gZ=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ne.wrap,this._unwrap=Ne.unwrap,this._massWrap=Ne.massWrap,this._massUnwrap=Ne.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=Ke.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Cc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),yZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bZ=function(r){yZ(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(gZ);function vZ(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}function SZ(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Lc=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Oc=performance,_Z="http.method",TZ="http.url",EZ="http.host",wZ="http.scheme",RZ="http.status_code",IZ="http.user_agent",CZ="http.request_content_length_uncompressed",LZ=_Z,OZ=TZ,ZZ=EZ,NZ=wZ,GZ=RZ,VZ=IZ,xZ=CZ,XZ=9,kZ=6,WZ=Math.pow(10,kZ),Pm=Math.pow(10,XZ);function Zc(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*WZ);return[t,n]}function AZ(){var r=Oc.timeOrigin;if(typeof r!="number"){var e=Oc;r=e.timing&&e.timing.fetchStart}return r}function Mm(r){var e=Zc(AZ()),t=Zc(Oc.now());return PZ(e,t)}function PZ(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Pm&&(t[1]-=Pm,t[0]+=1),t}var MZ=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function UZ(r,e){return typeof e=="string"?r===e:!!r.match(e)}function FZ(r,e){var t,n;if(!e)return!1;try{for(var i=MZ(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(UZ(r,o))return!0}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}var io;(function(r){r.COMPONENT="component",r.HTTP_ERROR_NAME="http.error_name",r.HTTP_STATUS_TEXT="http.status_text"})(io||(io={}));var DZ=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},YZ=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},JZ=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HZ=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Um=G.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function BZ(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r[0]instanceof URL||typeof r[0]=="string"){var t=r[1];if(!(t!=null&&t.body))return Promise.resolve();if(t.body instanceof ReadableStream){var n=KZ(t.body),i=n.body,s=n.length;return t.body=i,s}else return Promise.resolve(zZ(t.body))}else{var o=r[0];return o!=null&&o.body?o.clone().text().then(function(l){return Nc(l)}):Promise.resolve()}}function KZ(r){if(!r.pipeThrough)return Um.warn("Platform has ReadableStream but not pipeThrough!"),{body:r,length:Promise.resolve(void 0)};var e=0,t,n=new Promise(function(s){t=s}),i=new TransformStream({start:function(){},transform:function(s,o){return DZ(this,void 0,void 0,function(){var l;return YZ(this,function(a){switch(a.label){case 0:return[4,s];case 1:return l=a.sent(),e+=l.byteLength,o.enqueue(s),[2]}})})},flush:function(){t(e)}});return{body:r.pipeThrough(i),length:n}}function zZ(r){if(typeof Document!="undefined"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return QZ(r);if(r instanceof URLSearchParams)return Nc(r.toString());if(typeof r=="string")return Nc(r);Um.warn("unknown body type")}var jZ=new TextEncoder;function Nc(r){return jZ.encode(r).byteLength}function QZ(r){var e,t,n=0;try{for(var i=JZ(r.entries()),s=i.next();!s.done;s=i.next()){var o=HZ(s.value,2),l=o[0],a=o[1];n+=l.length,a instanceof Blob?n+=a.size:n+=a.length}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}var Fm="0.57.2",$Z=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qZ=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},eN=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Gc,tN=300,Dm=typeof process=="object"&&((Gc=process.release)===null||Gc===void 0?void 0:Gc.name)==="node",rN=function(r){$Z(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-fetch",Fm,t)||this;return n.component="fetch",n.version=Fm,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return e.prototype.init=function(){},e.prototype._addChildSpan=function(t,n){var i=this.tracer.startSpan("CORS Preflight",{startTime:n[H.FETCH_START]},oe.setSpan(re.active(),t));nn(i,n,this.getConfig().ignoreNetworkEvents),i.end(n[H.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(t,n){var i=xt(n.url);t.setAttribute(GZ,n.status),n.statusText!=null&&t.setAttribute(io.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(ZZ,i.host),t.setAttribute(NZ,i.protocol.replace(":","")),typeof navigator!="undefined"&&t.setAttribute(VZ,navigator.userAgent)},e.prototype._addHeaders=function(t,n){if(!xm(n,this.getConfig().propagateTraceHeaderCorsUrls)){var i={};Ae.inject(re.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)Ae.inject(re.active(),t.headers,{set:function(s,o,l){return s.set(o,typeof l=="string"?l:String(l))}});else if(t.headers instanceof Headers)Ae.inject(re.active(),t.headers,{set:function(s,o,l){return s.set(o,typeof l=="string"?l:String(l))}});else if(t.headers instanceof Map)Ae.inject(re.active(),t.headers,{set:function(s,o,l){return s.set(o,typeof l=="string"?l:String(l))}});else{var i={};Ae.inject(re.active(),i),t.headers=Object.assign({},i,t.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(t,n){var i;if(n===void 0&&(n={}),FZ(t,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var s=(n.method||"GET").toUpperCase(),o="HTTP "+s;return this.tracer.startSpan(o,{kind:Qn.CLIENT,attributes:(i={},i[io.COMPONENT]=this.moduleName,i[LZ]=s,i[OZ]=t,i)})},e.prototype._findResourceAndAddNetworkEvents=function(t,n,i){var s=n.entries;if(!s.length){if(!performance.getEntriesByType)return;s=performance.getEntriesByType("resource")}var o=Gm(n.spanUrl,n.startTime,i,s,this._usedResources,"fetch");if(o.mainRequest){var l=o.mainRequest;this._markResourceAsUsed(l);var a=o.corsPreFlightRequest;a&&(this._addChildSpan(t,a),this._markResourceAsUsed(a)),nn(t,l,this.getConfig().ignoreNetworkEvents)}},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._endSpan=function(t,n,i){var s=this,o=Zc(Date.now()),l=Mm();this._addFinalSpanAttributes(t,i),setTimeout(function(){var a;(a=n.observer)===null||a===void 0||a.disconnect(),s._findResourceAndAddNetworkEvents(t,n,l),s._tasksCount--,s._clearResources(),t.end(o)},tN)},e.prototype._patchConstructor=function(){var t=this;return function(n){var i=t;return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var a=this,c=xt(o[0]instanceof Request?o[0].url:String(o[0])).href,u=o[0]instanceof Request?o[0]:o[1]||{},d=i._createSpan(c,u);if(!d)return n.apply(this,o);var h=i._prepareSpanData(c);i.getConfig().measureRequestSize&&BZ.apply(void 0,eN([],qZ(o),!1)).then(function(y){y&&d.setAttribute(xZ,y)}).catch(function(y){i._diag.warn("getFetchBodyLength",y)});function f(y,T){i._applyAttributesAfterFetch(y,u,T),i._endSpan(y,h,{status:T.status||0,statusText:T.message,url:c})}function m(y,T){i._applyAttributesAfterFetch(y,u,T),T.status>=200&&T.status<400?i._endSpan(y,h,T):i._endSpan(y,h,{status:T.status,statusText:T.statusText,url:c})}function p(y,T,E){try{var C=E.clone(),R=E.clone(),N=C.body;if(N){var V=N.getReader(),Z=function(){V.read().then(function(w){var L=w.done;L?m(y,R):Z()},function(w){f(y,w)})};Z()}else m(y,E)}finally{T(E)}}function g(y,T,E){try{f(y,E)}finally{T(E)}}return new Promise(function(y,T){return re.with(oe.setSpan(re.active(),d),function(){return i._addHeaders(u,c),i._tasksCount++,n.apply(a,u instanceof Request?[u]:[c,u]).then(p.bind(a,d,y),g.bind(a,d,T))})})}}},e.prototype._applyAttributesAfterFetch=function(t,n,i){var s=this,o=this.getConfig().applyCustomAttributesOnSpan;o&&vZ(function(){return o(t,n,i)},function(l){l&&s._diag.error("applyCustomAttributesOnSpan",l)})},e.prototype._prepareSpanData=function(t){var n=Mm(),i=[];if(typeof PerformanceObserver!="function")return{entries:i,startTime:n,spanUrl:t};var s=new PerformanceObserver(function(o){var l=o.getEntries();l.forEach(function(a){a.initiatorType==="fetch"&&a.name===t&&i.push(a)})});return s.observe({entryTypes:["resource"]}),{entries:i,observer:s,startTime:n,spanUrl:t}},e.prototype.enable=function(){if(Dm){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}SZ(fetch)&&(this._unwrap(Lc,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Lc,"fetch",this._patchConstructor())},e.prototype.disable=function(){Dm||(this._unwrap(Lc,"fetch"),this._usedResources=new WeakSet)},e}(bZ),Vc=function(){return Vc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Vc.apply(this,arguments)},nN=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ne.wrap,this._unwrap=Ne.unwrap,this._massWrap=Ne.massWrap,this._massUnwrap=Ne.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=Ke.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Vc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),iN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sN=function(r){iN(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(nN);function oN(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}function Ym(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var li=performance,aN="http.method",lN="http.url",cN="http.host",uN="http.scheme",dN="http.status_code",hN="http.user_agent",fN="http.request_content_length_uncompressed",pN=aN,mN=lN,gN=cN,yN=uN,bN=dN,vN=hN,SN=fN,_N=9,TN=6,EN=Math.pow(10,TN),Jm=Math.pow(10,_N);function Hm(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*EN);return[t,n]}function wN(){var r=li.timeOrigin;if(typeof r!="number"){var e=li;r=e.timing&&e.timing.fetchStart}return r}function Bm(r){var e=Hm(wN()),t=Hm(li.now());return RN(e,t)}function RN(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Jm&&(t[1]-=Jm,t[0]+=1),t}var IN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CN(r,e){return typeof e=="string"?r===e:!!r.match(e)}function LN(r,e){var t,n;if(!e)return!1;try{for(var i=IN(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(CN(r,o))return!0}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}var Xt;(function(r){r.METHOD_OPEN="open",r.METHOD_SEND="send",r.EVENT_ABORT="abort",r.EVENT_ERROR="error",r.EVENT_LOAD="loaded",r.EVENT_TIMEOUT="timeout"})(Xt||(Xt={}));var ON=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZN=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},NN=G.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function GN(r){if(typeof Document!="undefined"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return xN(r);if(r instanceof URLSearchParams)return Km(r.toString());if(typeof r=="string")return Km(r);NN.warn("unknown body type")}var VN=new TextEncoder;function Km(r){return VN.encode(r).byteLength}function xN(r){var e,t,n=0;try{for(var i=ON(r.entries()),s=i.next();!s.done;s=i.next()){var o=ZN(s.value,2),l=o[0],a=o[1];n+=l.length,a instanceof Blob?n+=a.size:n+=a.length}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}var zm="0.57.2",xc;(function(r){r.HTTP_STATUS_TEXT="http.status_text"})(xc||(xc={}));var XN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kN=300,WN=function(r){XN(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-xml-http-request",zm,t)||this;return n.component="xml-http-request",n.version=zm,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return e.prototype.init=function(){},e.prototype._addHeaders=function(t,n){var i=xt(n).href;if(!xm(i,this.getConfig().propagateTraceHeaderCorsUrls)){var s={};Ae.inject(re.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var o={};Ae.inject(re.active(),o),Object.keys(o).forEach(function(l){t.setRequestHeader(l,String(o[l]))})},e.prototype._addChildSpan=function(t,n){var i=this;re.with(oe.setSpan(re.active(),t),function(){var s=i.tracer.startSpan("CORS Preflight",{startTime:n[H.FETCH_START]});nn(s,n,i.getConfig().ignoreNetworkEvents),s.end(n[H.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(t,n,i){if(typeof i=="string"){var s=xt(i);n.status!==void 0&&t.setAttribute(bN,n.status),n.statusText!==void 0&&t.setAttribute(xc.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(gN,s.host),t.setAttribute(yN,s.protocol.replace(":","")),t.setAttribute(vN,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(t,n){var i=this,s=this.getConfig().applyCustomAttributesOnSpan;typeof s=="function"&&oN(function(){return s(t,n)},function(o){o&&i._diag.error("applyCustomAttributesOnSpan",o)})},e.prototype._addResourceObserver=function(t,n){var i=this._xhrMem.get(t);!i||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(i.createdResources={observer:new PerformanceObserver(function(s){var o=s.getEntries(),l=xt(n);o.forEach(function(a){a.initiatorType==="xmlhttprequest"&&a.name===l.href&&i.createdResources&&i.createdResources.entries.push(a)})}),entries:[]},i.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(li.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(t,n,i,s,o){if(!(!i||!s||!o||!t.createdResources)){var l=t.createdResources.entries;(!l||!l.length)&&(l=li.getEntriesByType("resource"));var a=Gm(xt(i).href,s,o,l,this._usedResources);if(a.mainRequest){var c=a.mainRequest;this._markResourceAsUsed(c);var u=a.corsPreFlightRequest;u&&(this._addChildSpan(n,u),this._markResourceAsUsed(u)),nn(n,c,this.getConfig().ignoreNetworkEvents)}}},e.prototype._cleanPreviousSpanInformation=function(t){var n=this._xhrMem.get(t);if(n){var i=n.callbackToRemoveEvents;i&&i(),this._xhrMem.delete(t)}},e.prototype._createSpan=function(t,n,i){var s;if(LN(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var o=i.toUpperCase(),l=this.tracer.startSpan(o,{kind:Qn.CLIENT,attributes:(s={},s[pN]=i,s[mN]=xt(n).toString(),s)});return l.addEvent(Xt.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:l,spanUrl:n}),l},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._patchOpen=function(){var t=this;return function(n){var i=t;return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var a=o[0],c=o[1];return i._createSpan(this,c,a),n.apply(this,o)}}},e.prototype._patchSend=function(){var t=this;function n(u,d,h,f){var m=d.callbackToRemoveEvents;typeof m=="function"&&m();var p=d.span,g=d.spanUrl,y=d.sendStartTime;p&&(t._findResourceAndAddNetworkEvents(d,p,g,y,h),p.addEvent(u,f),t._addFinalSpanAttributes(p,d,g),p.end(f),t._tasksCount--),t._clearResources()}function i(u,d){var h=t._xhrMem.get(d);if(h){h.status=d.status,h.statusText=d.statusText,t._xhrMem.delete(d),h.span&&t._applyAttributesAfterXHR(h.span,d);var f=Bm(),m=Date.now();setTimeout(function(){n(u,h,f,m)},kN)}}function s(){i(Xt.EVENT_ERROR,this)}function o(){i(Xt.EVENT_ABORT,this)}function l(){i(Xt.EVENT_TIMEOUT,this)}function a(){this.status<299?i(Xt.EVENT_LOAD,this):i(Xt.EVENT_ERROR,this)}function c(u){u.removeEventListener("abort",o),u.removeEventListener("error",s),u.removeEventListener("load",a),u.removeEventListener("timeout",l);var d=t._xhrMem.get(u);d&&(d.callbackToRemoveEvents=void 0)}return function(u){return function(){for(var h=this,f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];var p=t._xhrMem.get(this);if(!p)return u.apply(this,f);var g=p.span,y=p.spanUrl;if(g&&y){if(t.getConfig().measureRequestSize&&(f!=null&&f[0])){var T=f[0],E=GN(T);E!==void 0&&g.setAttribute(SN,E)}re.with(oe.setSpan(re.active(),g),function(){t._tasksCount++,p.sendStartTime=Bm(),g.addEvent(Xt.METHOD_SEND),h.addEventListener("abort",o),h.addEventListener("error",s),h.addEventListener("load",a),h.addEventListener("timeout",l),p.callbackToRemoveEvents=function(){c(h),p.createdResources&&p.createdResources.observer.disconnect()},t._addHeaders(h,y),t._addResourceObserver(h,y)})}return u.apply(this,f)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),Ym(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Ym(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(sN);const so=1e3,jm=1e3*2,Qm=4*60*60*1e3,Xc=15*60*1e3,oo={normal:{bytes:1e7,time:4*60*1e3},canvas:{bytes:16e6,time:5e3}},$m=100,ci="app.highlight.io",AN="https://app.launchdarkly.com",PN={"observability.ld-stg.launchdarkly.com":"ld-stg.launchdarkly.com","observability.app.launchdarkly.com":"app.launchdarkly.com","observability.app.ld.catamorphic.com":"app.ld.catamorphic.com"},MN="/projects/default",UN=new RegExp("pub\\.(?<domain>.+)");/*! js-cookie v3.0.5 | MIT */function ao(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var FN={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function kc(r,e){function t(i,s,o){if(typeof document!="undefined"){o=ao({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in o)o[a]&&(l+="; "+a,o[a]!==!0&&(l+="="+o[a].split(";")[0]));return document.cookie=i+"="+r.write(s,i)+l}}function n(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},l=0;l<s.length;l++){var a=s[l].split("="),c=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(o[u]=r.read(c,u),i===u)break}catch(d){}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,s){t(i,"",ao({},s,{expires:-1}))},withAttributes:function(i){return kc(this.converter,ao({},this.attributes,i))},withConverter:function(i){return kc(ao({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var Wc=kc(FN,{path:"/"});const qm=Object.create(null),Ge=(r,e,...t)=>{const n=`[@launchdarkly plugins]: (${r}): `;console[e].apply(console,[n,...t]),DN(n,...t)},kt=(r,e,t,...n)=>{qm[`${r}-${e}`]||(qm[`${r}-${e}`]=!0,Ge(r,t,...n))},DN=(r,...e)=>J(this,null,function*(){try{const{LDObserve:t}=yield Promise.resolve().then(()=>ck);t.recordLog(`${r}${e}`,"warn")}catch(t){}});var ui=(r=>(r.CLIENT_ID="highlightClientID",r))(ui||{});let lo="localStorage",Ac=!0;class YN{constructor(){v(this,"storage",{})}get length(){return Object.keys(this.storage).length}key(e){var n;return(n=Object.keys(this.storage)[e])!=null?n:null}getItem(e){var t;return(t=this.storage[e])!=null?t:""}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}}class JN{getItem(e){var t;return(t=Wc.get(e))!=null?t:""}setItem(e,t){if(!Ac)return;const n=new Date;n.setTime(n.getTime()+Xc),Wc.set(e,t,{expires:n})}removeItem(e){Ac&&Wc.remove(e)}}const sn=new YN,co=new JN,di=()=>{let r=null;if(typeof window=="undefined")return sn;try{switch(lo){case"localStorage":r=window.localStorage;break;case"sessionStorage":r=window.sessionStorage;break}r||(kt("storage","getPersistentStorage","debug",`persistent storage was not found for mode ${lo}; using global storage`),r=sn)}catch(e){kt("storage","getPersistentStorage","debug","failed to get persistent storage; using global storage",e),r=sn}return r},eg=r=>{lo=r},uo=r=>{Ac=r},Ve=r=>{try{return di().getItem(r)}catch(e){return kt("storage","getItem","debug",`failed to get item ${r}; using global storage`,e),sn.getItem(r)}},nt=(r,e)=>{co.setItem(r,e);try{return di().setItem(r,e)}catch(t){return kt("storage","setItem","debug",`failed to set item ${r}; using global storage`,t),sn.setItem(r,e)}},on=r=>{co.removeItem(r);try{return di().removeItem(r)}catch(e){return kt("storage","removeItem","debug",`failed to remove item ${r}; using global storage`,e),sn.removeItem(r)}},HN=r=>{if(lo==="sessionStorage"){console.warn("highlight.io cannot use local storage; segment integration will not work");return}if(typeof window=="undefined"){console.warn("highlight.io cannot use local storage (not a window); segment integration will not work");return}const e=window.localStorage.setItem;window.localStorage.setItem=function(){const[t,n]=arguments;r({keyName:t,keyValue:n}),e.apply(this,[t,n])}};var Se=(r=>(r.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",r.SESSION_ID="sessionID",r.SESSION_DATA="sessionData",r.USER_IDENTIFIER="highlightIdentifier",r.USER_OBJECT="highlightUserObject",r))(Se||{});const ho=r=>`${Se.SESSION_DATA}_${r}`,Wt=()=>{var r;return typeof globalThis!="undefined"&&((r=globalThis.persistentSessionSecureID)!=null&&r.length)?globalThis.persistentSessionSecureID:tg()},BN=r=>{typeof globalThis!="undefined"&&(r!=null&&r.length)&&(globalThis.persistentSessionSecureID=r)},tg=()=>{var r;return(r=Ve(Se.SESSION_ID))!=null?r:""},qt=r=>{nt(Se.SESSION_ID,r)},KN=r=>{const e=ho(r);return JSON.parse(Ve(e)||"{}")},At=r=>{r||(r=tg());let e=KN(r);if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<Xc)return e;on(ho(r))},it=function(r){if(!(r!=null&&r.sessionSecureID))return;const e=r.sessionSecureID;BN(e);const t=ho(e);nt(t,JSON.stringify(r)),zN(t)},rg=function(){const r=co.getItem(Se.SESSION_ID);qt(r);const e=ho(r),t=co.getItem(e);try{it(JSON.parse(t))}catch(n){}};function zN(r){const e=`${Se.SESSION_DATA}_`;for(let t=di().length-1;t>=0;t--){const n=di().key(t);if(n&&n.startsWith(e)&&n!==r)try{const i=JSON.parse(Ve(n)||"{}");i.lastPushTime===void 0?kt("highlightSession","pruneSessionData","error",`data for key ${n} is not session data`):Date.now()-i.lastPushTime>=Xc&&(kt("highlightSession","pruneSessionData","debug",`removing session data for stale key ${n}`),on(n))}catch(i){kt("highlightSession","pruneSessionData","error",`failed to parse session data for key ${n}`,i)}}}const ng=(r,e,t)=>{const n=ig(e,r.headers,t);return P(S({},r),{headers:n})},ig=(r,e,t)=>{var i,s;const n=S({},e);return t?((i=Object.keys(n))==null||i.forEach(o=>{[...t].includes(o==null?void 0:o.toLowerCase())||(n[o]="[REDACTED]")}),n):((s=Object.keys(n))==null||s.forEach(o=>{[...jN,...r].includes(o==null?void 0:o.toLowerCase())&&(n[o]="[REDACTED]")}),n)},jN=["authorization","cookie","proxy-authorization","token"],sg=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"],QN=new RegExp("sdk\\/evalx\\/[^/]+\\/contexts\\/(?<context>[^/?]*)\\??.*?"),$N=new RegExp("\\/eval\\/[^/]+\\/(?<context>[^/?]*)\\??.*?");function qN(r){return!!(r.includes("/sdk/evalx")&&r.match(QN)||r.includes("/eval/")&&r.match($N))}const og="X-Highlight-Request",ag=r=>{let e=r;return!r.startsWith("https://")&&!r.startsWith("http://")&&(e=`${window.location.origin}${e}`),e.replace(/\/+$/,"")},eG=(r,{headersToRedact:e,headersToRecord:t,requestResponseSanitizer:n})=>{var a,c;let i=r;if(n){let d=!0;try{i.request.body=JSON.parse(i.request.body)}catch(f){d=!1}let h=!0;try{i.response.body=JSON.parse(i.response.body)}catch(f){h=!1}try{i=n(i)}catch(f){}finally{d=d&&!!((a=i==null?void 0:i.request)!=null&&a.body),h=h&&!!((c=i==null?void 0:i.response)!=null&&c.body),d&&(i.request.body=JSON.stringify(i.request.body)),h&&(i.response.body=JSON.stringify(i.response.body))}if(!i)return null}const u=i,{request:s,response:o}=u,l=He(u,["request","response"]);return S({request:ng(s,e,t),response:ng(o,e,t)},l)},lg=(r,e,t,n)=>{r.sort((a,c)=>a.responseEnd-c.responseEnd);const i={xmlhttprequest:{},others:{},fetch:{}},s=r.reduce((a,c)=>{const u=ag(c.name);return c.initiatorType===t?a[t][u]=[...a[t][u]||[],c]:a.others[u]=[...a.others[u]||[],c],a},i);let o={};o=e.reduce((a,c)=>{const u=ag(c.request.url);return a[u]=[...a[u]||[],c],a},o);for(let a in s[t]){const c=s[t][a],u=o[a];if(!u)continue;const d=Math.max(c.length-u.length,0);for(let h=d;h<c.length;h++)c[h]&&(c[h].requestResponsePair=u[h-d])}let l=[];for(let a in s)for(let c in s[a])l=l.concat(s[a][c]);return l.sort((a,c)=>a.fetchStart-c.fetchStart).reduce((a,c)=>{let u=c.requestResponsePair;return u&&(u=eG(c.requestResponsePair,n),!u)||(c.toJSON=function(){const d=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:d+this.startTime,connectStartAbs:d+this.connectStart,connectEndAbs:d+this.connectEnd,domainLookupStartAbs:d+this.domainLookupStart,domainLookupEndAbs:d+this.domainLookupEnd,fetchStartAbs:d+this.fetchStart,redirectStartAbs:d+this.redirectStart,redirectEndAbs:d+this.redirectEnd,requestStartAbs:d+this.requestStart,responseStartAbs:d+this.responseStart,responseEndAbs:d+this.responseEnd,secureConnectionStartAbs:d+this.secureConnectionStart,workerStartAbs:d+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:u}},a.push(c)),a},[])},tG=r=>["events.ld.catamorphic.com","events.launchdarkly.com"].some(e=>r.toLocaleLowerCase().includes(e)),rG=r=>qN(r),nG=(r,e)=>e.some(t=>r.toLocaleLowerCase().includes(t)),fo=(r,e,t)=>!nG(r,e)&&!rG(r)&&!tG(r),Pc=(r,e,t)=>{var s;if(t.some(o=>r.toLowerCase().includes(o)))return!1;let n=[];e===!0?(n=["localhost",/^\//],(s=window==null?void 0:window.location)!=null&&s.host&&n.push(window.location.host)):e instanceof Array&&(n=e);let i=!1;return n.forEach(o=>{r.match(o)&&(i=!0)}),i};function iG(r){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,i=0;i<r;i++)e+=t.charAt(Math.floor(Math.random()*n));return e}const Mc=()=>{const r=iG(10),e=J1(),t=e==null?void 0:e.spanContext().traceId;return[Wt(),t!=null?t:r]},cg=(r,e)=>r+"/"+e,sG=(r,e,t,n,i,s)=>{const o=XMLHttpRequest.prototype,l=o.open,a=o.send,c=o.setRequestHeader;return o.open=function(u,d){return typeof d=="string"?this._url=d:this._url=d.toString(),this._method=u,this._requestHeaders={},this._shouldRecordHeaderAndBody=!n.some(h=>this._url.toLowerCase().includes(h)),l.apply(this,arguments)},o.setRequestHeader=function(u,d){return this._requestHeaders[u]=d,c.apply(this,arguments)},o.send=function(u){if(!fo(this._url,e))return a.apply(this,arguments);const[d,h]=Mc();Pc(this._url,t,n)&&this.setRequestHeader(og,cg(d,h));const f=this._shouldRecordHeaderAndBody,m={sessionSecureID:d,id:h,url:this._url,verb:this._method,headers:f?this._requestHeaders:{},body:void 0};if(f&&u){const p=ug(u,m.url);p&&(this._body=p,m.body=er(p,i,s,m.headers))}return this.addEventListener("load",function(){return J(this,null,function*(){const p={status:this.status,headers:{},body:void 0};if(f){const T=this.getAllResponseHeaders().trim().split(/[\r\n]+/),E={};if(T.forEach(function(C){const R=C.split(": "),N=R.shift();E[N]=R.join(": ")}),p.headers=E,u){const C=ug(u,m.url);C&&(m.body=er(C,i,s,p.headers))}if(this.responseType===""||this.responseType==="text")p.body=er(this.responseText,i,s,p.headers),p.size=this.responseText.length*8;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const C=yield this.response.text();p.body=er(C,i,s,p.headers),p.size=this.response.size}catch(C){}}else try{p.body=er(this.response,i,s,p.headers)}catch(C){}}r({request:m,response:p,urlBlocked:!f})})}),this.addEventListener("error",function(){return J(this,null,function*(){const p={status:this.status,headers:void 0,body:void 0};r({request:m,response:p,urlBlocked:!1})})}),a.apply(this,arguments)},()=>{o.open=l,o.send=a,o.setRequestHeader=c}},ug=(r,e)=>{if(typeof r=="string"){if(!((e!=null&&e.includes("localhost")||e!=null&&e.includes("highlight.run"))&&(r.includes("pushPayload")||r.includes("pushSessionEvents"))))return r}else if(typeof r=="object"||typeof r=="number"||typeof r=="boolean")return ht(r);return null},dg=64*1024,oG={"application/json":64*1024*1024,"text/plain":64*1024*1024},er=(r,e,t,n)=>{var s,o,l;let i=dg;if(n){let a="";typeof n.get=="function"?a=(s=n.get("content-type"))!=null?s:"":a=(o=n["content-type"])!=null?o:"";try{a=a.split(";")[0]}catch(c){}i=(l=oG[a])!=null?l:dg}if(r){if(e)try{const a=JSON.parse(r);Array.isArray(a)?a.forEach(c=>{Object.keys(c).forEach(u=>{e.includes(u.toLocaleLowerCase())&&(c[u]="[REDACTED]")})}):Object.keys(a).forEach(c=>{e.includes(c.toLocaleLowerCase())&&(a[c]="[REDACTED]")}),r=JSON.stringify(a)}catch(a){}if(t)try{const a=JSON.parse(r);Object.keys(a).forEach(c=>{t.includes(c.toLocaleLowerCase())||(a[c]="[REDACTED]")}),r=JSON.stringify(a)}catch(a){}}try{r=r.slice(0,i)}catch(a){}return r},aG=(r,e,t,n,i,s)=>{const o=window._fetchProxy;return window._fetchProxy=function(l,a){const{method:c,url:u}=lG(l,a);if(!fo(u,e))return o.call(this,l,a);const[d,h]=Mc();if(Pc(u,t,n)){a=a||{};let g=new Headers(a.headers);l instanceof Request&&[...l.headers].forEach(([y,T])=>g.set(y,T)),g.set(og,cg(d,h)),a.headers=Object.fromEntries(g.entries())}const f={sessionSecureID:d,id:h,headers:{},body:void 0,url:u,verb:c},m=!n.some(g=>u.toLowerCase().includes(g));m&&(f.headers=Object.fromEntries(new Headers(a==null?void 0:a.headers).entries()),f.body=er(a==null?void 0:a.body,i,s,a==null?void 0:a.headers));let p=o.call(this,l,a);return cG(p,f,r,m,i,s),p},()=>{window._fetchProxy=o}},lG=(r,e)=>{const t=e&&e.method||typeof r=="object"&&"method"in r&&r.method||"GET";let n;return typeof r=="object"?"url"in r&&r.url?n=r.url:n=r.toString():n=r,{method:t,url:n}},cG=(r,e,t,n,i,s)=>{const o=l=>J(this,null,function*(){let a={body:void 0,headers:void 0,status:0,size:0},c=!1,u=!n;"stack"in l||l instanceof Error?(a=P(S({},a),{body:l.message,status:0,size:void 0}),c=!0):"status"in l&&(a=P(S({},a),{status:l.status}),n&&(a.body=yield hg(l,s,i),a.headers=Object.fromEntries(l.headers.entries()),a.size=a.body.length*8),(l.type==="opaque"||l.type==="opaqueredirect")&&(u=!0,a=P(S({},a),{body:"CORS blocked request"})),c=!0),c&&t({request:e,response:a,urlBlocked:u})});r.then(o).catch(()=>{})},hg=(r,e,t)=>J(this,null,function*(){let n;try{const s=r.clone().body;if(s){let o=s.getReader(),l=new TextDecoder,a,c="";for(;!(a=yield o.read()).done;){let u=a.value;c+=l.decode(u)}n=c,n=er(n,t,e,r.headers)}else n=""}catch(i){n=`Unable to clone response: ${i}`}return n});var fg=function(){function r(e){this._delegate=e}return r.prototype.export=function(e,t){this._delegate.export(e,t)},r.prototype.forceFlush=function(){return this._delegate.forceFlush()},r.prototype.shutdown=function(){return this._delegate.shutdown()},r}(),uG=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pg=function(r){uG(e,r);function e(t,n,i){var s=r.call(this,t)||this;return s.name="OTLPExporterError",s.data=i,s.code=n,s}return e}(Error);function dG(r){if(!Number.isNaN(r)&&Number.isFinite(r)&&r>0)return r;throw new Error("Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '"+r+"')")}function hG(r){if(r!=null)return function(){return r}}function fG(r,e,t){var n,i,s,o,l,a;return{timeoutMillis:dG((i=(n=r.timeoutMillis)!==null&&n!==void 0?n:e.timeoutMillis)!==null&&i!==void 0?i:t.timeoutMillis),concurrencyLimit:(o=(s=r.concurrencyLimit)!==null&&s!==void 0?s:e.concurrencyLimit)!==null&&o!==void 0?o:t.concurrencyLimit,compression:(a=(l=r.compression)!==null&&l!==void 0?l:e.compression)!==null&&a!==void 0?a:t.compression}}function pG(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var mG=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},gG=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yG=function(){function r(e){this._sendingPromises=[],this._concurrencyLimit=e}return r.prototype.pushPromise=function(e){var t=this;if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);var n=function(){var i=t._sendingPromises.indexOf(e);t._sendingPromises.splice(i,1)};e.then(n,n)},r.prototype.hasReachedLimit=function(){return this._sendingPromises.length>=this._concurrencyLimit},r.prototype.awaitAll=function(){return mG(this,void 0,void 0,function(){return gG(this,function(e){switch(e.label){case 0:return[4,Promise.all(this._sendingPromises)];case 1:return e.sent(),[2]}})})},r}();function bG(r){return new yG(r.concurrencyLimit)}function vG(r){return Object.prototype.hasOwnProperty.call(r,"partialSuccess")}function SG(){return{handleResponse:function(r){r==null||!vG(r)||r.partialSuccess==null||Object.keys(r.partialSuccess).length===0||G.warn("Received Partial Success response:",JSON.stringify(r.partialSuccess))}}}var _G=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},TG=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},EG=function(){function r(e,t,n,i,s){this._transport=e,this._serializer=t,this._responseHandler=n,this._promiseQueue=i,this._timeout=s,this._diagLogger=G.createComponentLogger({namespace:"OTLPExportDelegate"})}return r.prototype.export=function(e,t){var n=this;if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){t({code:Pe.FAILED,error:new Error("Concurrent export limit reached")});return}var i=this._serializer.serializeRequest(e);if(i==null){t({code:Pe.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(i,this._timeout).then(function(s){if(s.status==="success"){if(s.data!=null)try{n._responseHandler.handleResponse(n._serializer.deserializeResponse(s.data))}catch(o){n._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",o,s.data)}t({code:Pe.SUCCESS});return}else if(s.status==="failure"&&s.error){t({code:Pe.FAILED,error:s.error});return}else s.status==="retryable"?t({code:Pe.FAILED,error:new pg("Export failed with retryable status")}):t({code:Pe.FAILED,error:new pg("Export failed with unknown error")})},function(s){return t({code:Pe.FAILED,error:s})}))},r.prototype.forceFlush=function(){return this._promiseQueue.awaitAll()},r.prototype.shutdown=function(){return _G(this,void 0,void 0,function(){return TG(this,function(e){switch(e.label){case 0:return this._diagLogger.debug("shutdown started"),[4,this.forceFlush()];case 1:return e.sent(),this._transport.shutdown(),[2]}})})},r}();function wG(r,e){return new EG(r.transport,r.serializer,SG(),r.promiseHandler,e.timeout)}function mg(r,e,t){return wG({transport:t,serializer:e,promiseHandler:bG(r)},{timeout:r.timeoutMillis})}function gg(r){return r>=48&&r<=57?r-48:r>=97&&r<=102?r-87:r-55}function Uc(r){for(var e=new Uint8Array(r.length/2),t=0,n=0;n<r.length;n+=2){var i=gg(r.charCodeAt(n)),s=gg(r.charCodeAt(n+1));e[t++]=i<<4|s}return e}var RG=9,IG=Math.pow(10,RG);function CG(r){return r[0]*IG+r[1]}function yg(r){var e=BigInt(1e9);return BigInt(r[0])*e+BigInt(r[1])}function LG(r){var e=Number(BigInt.asUintN(32,r)),t=Number(BigInt.asUintN(32,r>>BigInt(32)));return{low:e,high:t}}function bg(r){var e=yg(r);return LG(e)}function OG(r){var e=yg(r);return e.toString()}var ZG=typeof BigInt!="undefined"?OG:CG;function vg(r){return r}function Sg(r){if(r!==void 0)return Uc(r)}var NG={encodeHrTime:bg,encodeSpanContext:Uc,encodeOptionalSpanContext:Sg};function _g(r){var e,t;if(r===void 0)return NG;var n=(e=r.useLongBits)!==null&&e!==void 0?e:!0,i=(t=r.useHex)!==null&&t!==void 0?t:!1;return{encodeHrTime:n?bg:ZG,encodeSpanContext:i?vg:Uc,encodeOptionalSpanContext:i?vg:Sg}}var GG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Tg(r){return{attributes:Sr(r.attributes),droppedAttributesCount:0}}function Eg(r){return{name:r.name,version:r.version}}function Sr(r){return Object.keys(r).map(function(e){return wg(e,r[e])})}function wg(r,e){return{key:r,value:Rg(e)}}function Rg(r){var e=typeof r;return e==="string"?{stringValue:r}:e==="number"?Number.isInteger(r)?{intValue:r}:{doubleValue:r}:e==="boolean"?{boolValue:r}:r instanceof Uint8Array?{bytesValue:r}:Array.isArray(r)?{arrayValue:{values:r.map(Rg)}}:e==="object"&&r!=null?{kvlistValue:{values:Object.entries(r).map(function(t){var n=GG(t,2),i=n[0],s=n[1];return wg(i,s)})}}:{}}var gt;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(gt||(gt={}));var wt;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(wt||(wt={}));var VG=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ig=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},Cg=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},XG=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},kG=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function WG(r){return r!=null}function Lg(r){var e=Object.keys(r);return e.length===0?"":(e=e.sort(),JSON.stringify(e.map(function(t){return[t,r[t]]})))}function AG(r){var e,t;return r.name+":"+((e=r.version)!==null&&e!==void 0?e:"")+":"+((t=r.schemaUrl)!==null&&t!==void 0?t:"")}var Og=function(r){VG(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error);function hi(r,e){var t,n=new Promise(function(s,o){t=setTimeout(function(){o(new Og("Operation timed out."))},e)});return Promise.race([r,n]).then(function(i){return clearTimeout(t),i},function(i){throw clearTimeout(t),i})}function PG(r){return Ig(this,void 0,void 0,function(){var e=this;return Cg(this,function(t){return[2,Promise.all(r.map(function(n){return Ig(e,void 0,void 0,function(){var i,s;return Cg(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n];case 1:return i=o.sent(),[2,{status:"fulfilled",value:i}];case 2:return s=o.sent(),[2,{status:"rejected",reason:s}];case 3:return[2]}})})}))]})})}function MG(r){return r.status==="rejected"}function Zg(r,e){var t=[];return r.forEach(function(n){t.push.apply(t,XG([],xG(e(n)),!1))}),t}function UG(r,e){var t,n;if(r.size!==e.size)return!1;try{for(var i=kG(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(!e.has(o))return!1}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function FG(r,e){for(var t=0,n=r.length-1,i=r.length;n>=t;){var s=t+Math.trunc((n-t)/2);r[s]<e?t=s+1:(i=s,n=s-1)}return i}function DG(r,e){return r.toLowerCase()===e.toLowerCase()}var _r;(function(r){r[r.DROP=0]="DROP",r[r.SUM=1]="SUM",r[r.LAST_VALUE=2]="LAST_VALUE",r[r.HISTOGRAM=3]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(_r||(_r={}));var YG=function(){function r(){this.kind=_r.DROP}return r.prototype.createAccumulation=function(){},r.prototype.merge=function(e,t){},r.prototype.diff=function(e,t){},r.prototype.toMetricData=function(e,t,n,i){},r}(),Q;(function(r){r.COUNTER="COUNTER",r.GAUGE="GAUGE",r.HISTOGRAM="HISTOGRAM",r.UP_DOWN_COUNTER="UP_DOWN_COUNTER",r.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",r.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",r.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(Q||(Q={}));function tr(r,e,t){var n,i,s,o;return KG(r)||G.warn('Invalid metric name: "'+r+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:r,type:e,description:(n=t==null?void 0:t.description)!==null&&n!==void 0?n:"",unit:(i=t==null?void 0:t.unit)!==null&&i!==void 0?i:"",valueType:(s=t==null?void 0:t.valueType)!==null&&s!==void 0?s:Kt.DOUBLE,advice:(o=t==null?void 0:t.advice)!==null&&o!==void 0?o:{}}}function JG(r,e){var t,n;return{name:(t=r.name)!==null&&t!==void 0?t:e.name,description:(n=r.description)!==null&&n!==void 0?n:e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}function HG(r,e){return DG(r.name,e.name)&&r.unit===e.unit&&r.type===e.type&&r.valueType===e.valueType}var BG=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function KG(r){return r.match(BG)!=null}var zG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function jG(r){var e=r.map(function(){return 0});return e.push(0),{buckets:{boundaries:r,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var Fc=function(){function r(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=jG(t)),this.startTime=e,this._boundaries=t,this._recordMinMax=n,this._current=i}return r.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=FG(this._boundaries,e);this._current.buckets.counts[t]+=1}},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Ng=function(){function r(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=_r.HISTOGRAM}return r.prototype.createAccumulation=function(e){return new Fc(e,this._boundaries,this._recordMinMax)},r.prototype.merge=function(e,t){for(var n=e.toPointValue(),i=t.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,l=new Array(s.length),a=0;a<s.length;a++)l[a]=s[a]+o[a];var c=1/0,u=-1/0;return this._recordMinMax&&(n.hasMinMax&&i.hasMinMax?(c=Math.min(n.min,i.min),u=Math.max(n.max,i.max)):n.hasMinMax?(c=n.min,u=n.max):i.hasMinMax&&(c=i.min,u=i.max)),new Fc(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:n.count+i.count,sum:n.sum+i.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||i.hasMinMax),min:c,max:u})},r.prototype.diff=function(e,t){for(var n=e.toPointValue(),i=t.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,l=new Array(s.length),a=0;a<s.length;a++)l[a]=o[a]-s[a];return new Fc(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:l},count:i.count-n.count,sum:i.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:wt.HISTOGRAM,dataPoints:n.map(function(s){var o=zG(s,2),l=o[0],a=o[1],c=a.toPointValue(),u=e.type===Q.GAUGE||e.type===Q.UP_DOWN_COUNTER||e.type===Q.OBSERVABLE_GAUGE||e.type===Q.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:a.startTime,endTime:i,value:{min:c.hasMinMax?c.min:void 0,max:c.hasMinMax?c.max:void 0,sum:u?void 0:c.sum,buckets:c.buckets,count:c.count}}})}},r}(),Dc=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Yc=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Gg=function(){function r(e,t,n,i){e===void 0&&(e=new QG),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.backing=e,this.indexBase=t,this.indexStart=n,this.indexEnd=i}return Object.defineProperty(r.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),r.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,n){return e.at(n)})},r.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},r.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},r.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},r.prototype.trim=function(){for(var e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate()},r.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,n=1<<e,i=0,s=0,o=this.indexStart;o<=this.indexEnd;){var l=o%n;l<0&&(l+=n);for(var a=l;a<n&&i<t;a++)this._relocateBucket(s,i),i++,o++;s++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},r.prototype.clone=function(){return new r(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},r.prototype._rotate=function(){var e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},r.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},r}(),QG=function(){function r(e){e===void 0&&(e=[0]),this._counts=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),r.prototype.countAt=function(e){return this._counts[e]},r.prototype.growTo=function(e,t,n){var i=new Array(e).fill(0);i.splice.apply(i,Yc([n,this._counts.length-t],Dc(this._counts.slice(t)),!1)),i.splice.apply(i,Yc([0,t],Dc(this._counts.slice(0,t)),!1)),this._counts=i},r.prototype.reverse=function(e,t){for(var n=Math.floor((e+t)/2)-e,i=0;i<n;i++){var s=this._counts[e+i];this._counts[e+i]=this._counts[t-i-1],this._counts[t-i-1]=s}},r.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},r.prototype.increment=function(e,t){this._counts[e]+=t},r.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},r.prototype.clone=function(){return new r(Yc([],Dc(this._counts),!1))},r}(),$G=52,qG=2146435072,eV=1048575,Jc=1023,Vg=-Jc+1,xg=Jc,Hc=Math.pow(2,-1022);function Xg(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=(t&qG)>>20;return n-Jc}function kg(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=e.getUint32(4),i=(t&eV)*Math.pow(2,32);return i+n}function Bc(r,e){return r===0||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY||Number.isNaN(r)?r:r*Math.pow(2,e)}function tV(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}var rV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fi=function(r){rV(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error),nV=function(){function r(e){this._shift=-e}return r.prototype.mapToIndex=function(e){if(e<Hc)return this._minNormalLowerBoundaryIndex();var t=Xg(e),n=this._rightShift(kg(e)-1,$G);return t+n>>this._shift},r.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new fi("underflow: "+e+" is < minimum lower boundary: "+t);var n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new fi("overflow: "+e+" is > maximum lower boundary: "+n);return Bc(1,e<<this._shift)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._shift===0?0:-this._shift},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){var e=Vg>>this._shift;return this._shift<2&&e--,e},r.prototype._maxNormalLowerBoundaryIndex=function(){return xg>>this._shift},r.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},r}(),iV=function(){function r(e){this._scale=e,this._scaleFactor=Bc(Math.LOG2E,e),this._inverseFactor=Bc(Math.LN2,-e)}return r.prototype.mapToIndex=function(e){if(e<=Hc)return this._minNormalLowerBoundaryIndex()-1;if(kg(e)===0){var t=Xg(e);return(t<<this._scale)-1}var n=Math.floor(Math.log(e)*this._scaleFactor),i=this._maxNormalLowerBoundaryIndex();return n>=i?i:n},r.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new fi("overflow: "+e+" is > maximum lower boundary: "+t)}var n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return Hc;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new fi("overflow: "+e+" is < minimum lower boundary: "+n)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){return Vg<<this._scale},r.prototype._maxNormalLowerBoundaryIndex=function(){return(xg+1<<this._scale)-1},r}(),Wg=-10,Ag=20,sV=Array.from({length:31},function(r,e){return e>10?new iV(e-10):new nV(e-10)});function Pg(r){if(r>Ag||r<Wg)throw new fi("expected scale >= "+Wg+" && <= "+Ag+", got: "+r);return sV[r+10]}var oV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},po=function(){function r(e,t){this.low=e,this.high=t}return r.combine=function(e,t){return new r(Math.min(e.low,t.low),Math.max(e.high,t.high))},r}(),aV=20,lV=160,Kc=2,cV=function(){function r(e,t,n,i,s,o,l,a,c,u,d){e===void 0&&(e=e),t===void 0&&(t=lV),n===void 0&&(n=!0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),l===void 0&&(l=Number.POSITIVE_INFINITY),a===void 0&&(a=Number.NEGATIVE_INFINITY),c===void 0&&(c=new Gg),u===void 0&&(u=new Gg),d===void 0&&(d=Pg(aV)),this.startTime=e,this._maxSize=t,this._recordMinMax=n,this._sum=i,this._count=s,this._zeroCount=o,this._min=l,this._max=a,this._positive=c,this._negative=u,this._mapping=d,this._maxSize<Kc&&(G.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: "+Kc),this._maxSize=Kc)}return r.prototype.record=function(e){this.updateByIncrement(e,1)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(r.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),r.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,e===0){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},r.prototype.merge=function(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},r.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},r.prototype.clone=function(){return new r(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},r.prototype._updateBuckets=function(e,t,n){var i=this._mapping.mapToIndex(t),s=!1,o=0,l=0;if(e.length===0?(e.indexStart=i,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):i<e.indexStart&&e.indexEnd-i>=this._maxSize?(s=!0,l=i,o=e.indexEnd):i>e.indexEnd&&i-e.indexStart>=this._maxSize&&(s=!0,l=e.indexStart,o=i),s){var a=this._changeScale(o,l);this._downscale(a),i=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,i,n)},r.prototype._incrementIndexBy=function(e,t,n){if(n!==0){if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var i=e.indexEnd-t;i>=e.backing.length&&this._grow(e,i+1),e.indexStart=t}else if(t>e.indexEnd){var i=t-e.indexStart;i>=e.backing.length&&this._grow(e,i+1),e.indexEnd=t}var s=t-e.indexBase;s<0&&(s+=e.backing.length),e.incrementBucket(s,n)}},r.prototype._grow=function(e,t){var n=e.backing.length,i=e.indexBase-e.indexStart,s=n-i,o=tV(t);o>this._maxSize&&(o=this._maxSize);var l=o-i;e.backing.growTo(o,s,l)},r.prototype._changeScale=function(e,t){for(var n=0;e-t>=this._maxSize;)e>>=1,t>>=1,n++;return n},r.prototype._downscale=function(e){if(e!==0){if(e<0)throw new Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=Pg(t)}},r.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),n=po.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),i=po.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(n.high,n.low),t-this._changeScale(i.high,i.low))},r.prototype._highLowAtScale=function(e,t,n){if(e.length===0)return new po(0,-1);var i=t-n;return new po(e.indexStart>>i,e.indexEnd>>i)},r.prototype._mergeBuckets=function(e,t,n,i){for(var s=n.offset,o=t.scale-i,l=0;l<n.length;l++)this._incrementIndexBy(e,s+l>>o,n.at(l))},r.prototype._diffBuckets=function(e,t,n,i){for(var s=n.offset,o=t.scale-i,l=0;l<n.length;l++){var a=s+l>>o,c=a-e.indexBase;c<0&&(c+=e.backing.length),e.decrementBucket(c,n.at(l))}e.trim()},r}(),uV=function(){function r(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=_r.EXPONENTIAL_HISTOGRAM}return r.prototype.createAccumulation=function(e){return new cV(e,this._maxSize,this._recordMinMax)},r.prototype.merge=function(e,t){var n=t.clone();return n.merge(e),n},r.prototype.diff=function(e,t){var n=t.clone();return n.diff(e),n},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:wt.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(function(s){var o=oV(s,2),l=o[0],a=o[1],c=a.toPointValue(),u=e.type===Q.GAUGE||e.type===Q.UP_DOWN_COUNTER||e.type===Q.OBSERVABLE_GAUGE||e.type===Q.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:l,startTime:a.startTime,endTime:i,value:{min:c.hasMinMax?c.min:void 0,max:c.hasMinMax?c.max:void 0,sum:u?void 0:c.sum,positive:{offset:c.positive.offset,bucketCounts:c.positive.bucketCounts},negative:{offset:c.negative.offset,bucketCounts:c.negative.bucketCounts},count:c.count,scale:c.scale,zeroCount:c.zeroCount}}})}},r}(),dV=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function hV(r){return r.setValue(dV,!0)}function fV(){return function(r){G.error(pV(r))}}function pV(r){return typeof r=="string"?r:JSON.stringify(mV(r))}function mV(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var i=t[n];i&&(e[n]=String(i))}}),t=Object.getPrototypeOf(t);return e}var gV=fV();function Mg(r){try{gV(r)}catch(e){}}var yV=6,bV=Math.pow(10,yV);function zc(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*bV);return[t,n]}function mo(r){return r[0]*1e6+r[1]/1e3}var jc;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(jc||(jc={}));function vV(r,e){return new Promise(function(t){re.with(hV(re.active()),function(){r.export(e,function(n){t(n)})})})}var SV={_export:vV},_V=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Qc=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=[0,0]),this.startTime=e,this._current=t,this.sampleTime=n}return r.prototype.record=function(e){this._current=e,this.sampleTime=zc(Date.now())},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),TV=function(){function r(){this.kind=_r.LAST_VALUE}return r.prototype.createAccumulation=function(e){return new Qc(e)},r.prototype.merge=function(e,t){var n=mo(t.sampleTime)>=mo(e.sampleTime)?t:e;return new Qc(e.startTime,n.toPointValue(),n.sampleTime)},r.prototype.diff=function(e,t){var n=mo(t.sampleTime)>=mo(e.sampleTime)?t:e;return new Qc(t.startTime,n.toPointValue(),n.sampleTime)},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:wt.GAUGE,dataPoints:n.map(function(s){var o=_V(s,2),l=o[0],a=o[1];return{attributes:l,startTime:a.startTime,endTime:i,value:a.toPointValue()}})}},r}(),EV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},pi=function(){function r(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1),this.startTime=e,this.monotonic=t,this._current=n,this.reset=i}return r.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Ug=function(){function r(e){this.monotonic=e,this.kind=_r.SUM}return r.prototype.createAccumulation=function(e){return new pi(e,this.monotonic)},r.prototype.merge=function(e,t){var n=e.toPointValue(),i=t.toPointValue();return t.reset?new pi(t.startTime,this.monotonic,i,t.reset):new pi(e.startTime,this.monotonic,n+i)},r.prototype.diff=function(e,t){var n=e.toPointValue(),i=t.toPointValue();return this.monotonic&&n>i?new pi(t.startTime,this.monotonic,i,!0):new pi(t.startTime,this.monotonic,i-n)},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:wt.SUM,dataPoints:n.map(function(s){var o=EV(s,2),l=o[0],a=o[1];return{attributes:l,startTime:a.startTime,endTime:i,value:a.toPointValue()}}),isMonotonic:this.monotonic}},r}(),Tr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pt=function(){function r(){}return r.Drop=function(){return Fg},r.Sum=function(){return Dg},r.LastValue=function(){return Yg},r.Histogram=function(){return Jg},r.ExponentialHistogram=function(){return NV},r.Default=function(){return GV},r}(),wV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new YG,e}(Pt),RV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){switch(t.type){case Q.COUNTER:case Q.OBSERVABLE_COUNTER:case Q.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new Ug(!0),e.NON_MONOTONIC_INSTANCE=new Ug(!1),e}(Pt),IV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new TV,e}(Pt),CV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Ng([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),e}(Pt),LV=function(r){Tr(e,r);function e(t,n){n===void 0&&(n=!0);var i=r.call(this)||this;if(i._recordMinMax=n,t==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");t=t.concat(),t=t.sort(function(l,a){return l-a});var s=t.lastIndexOf(-1/0),o=t.indexOf(1/0);return o===-1&&(o=void 0),i._boundaries=t.slice(s+1,o),i}return e.prototype.createAggregator=function(t){return new Ng(this._boundaries,this._recordMinMax)},e}(Pt),OV=function(r){Tr(e,r);function e(t,n){t===void 0&&(t=160),n===void 0&&(n=!0);var i=r.call(this)||this;return i._maxSize=t,i._recordMinMax=n,i}return e.prototype.createAggregator=function(t){return new uV(this._maxSize,this._recordMinMax)},e}(Pt),ZV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._resolve=function(t){switch(t.type){case Q.COUNTER:case Q.UP_DOWN_COUNTER:case Q.OBSERVABLE_COUNTER:case Q.OBSERVABLE_UP_DOWN_COUNTER:return Dg;case Q.GAUGE:case Q.OBSERVABLE_GAUGE:return Yg;case Q.HISTOGRAM:return t.advice.explicitBucketBoundaries?new LV(t.advice.explicitBucketBoundaries):Jg}return G.warn("Unable to recognize instrument type: "+t.type),Fg},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(Pt),Fg=new wV,Dg=new RV,Yg=new IV,Jg=new CV,NV=new OV,GV=new ZV,VV=function(r){return Pt.Default()},xV=function(r){return gt.CUMULATIVE},$c=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},qc=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Hg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},XV=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},kV=function(){function r(e){var t,n,i;this._shutdown=!1,this._aggregationSelector=(t=e==null?void 0:e.aggregationSelector)!==null&&t!==void 0?t:VV,this._aggregationTemporalitySelector=(n=e==null?void 0:e.aggregationTemporalitySelector)!==null&&n!==void 0?n:xV,this._metricProducers=(i=e==null?void 0:e.metricProducers)!==null&&i!==void 0?i:[],this._cardinalitySelector=e==null?void 0:e.cardinalitySelector}return r.prototype.setMetricProducer=function(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()},r.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},r.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},r.prototype.selectCardinalityLimit=function(e){return this._cardinalitySelector?this._cardinalitySelector(e):2e3},r.prototype.onInitialized=function(){},r.prototype.collect=function(e){return $c(this,void 0,void 0,function(){var t,n,i,s,o,l;return qc(this,function(a){switch(a.label){case 0:if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[4,Promise.all(XV([this._sdkMetricProducer.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})],Hg(this._metricProducers.map(function(c){return c.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})})),!1))];case 1:return t=Hg.apply(void 0,[a.sent()]),n=t[0],i=t.slice(1),s=n.errors.concat(Zg(i,function(c){return c.errors})),o=n.resourceMetrics.resource,l=n.resourceMetrics.scopeMetrics.concat(Zg(i,function(c){return c.resourceMetrics.scopeMetrics})),[2,{resourceMetrics:{resource:o,scopeMetrics:l},errors:s}]}})})},r.prototype.shutdown=function(e){return $c(this,void 0,void 0,function(){return qc(this,function(t){switch(t.label){case 0:return this._shutdown?(G.error("Cannot call shutdown twice."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onShutdown()];case 1:return t.sent(),[3,4];case 2:return[4,hi(this.onShutdown(),e.timeoutMillis)];case 3:t.sent(),t.label=4;case 4:return this._shutdown=!0,[2]}})})},r.prototype.forceFlush=function(e){return $c(this,void 0,void 0,function(){return qc(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onForceFlush()];case 1:return t.sent(),[2];case 2:return[4,hi(this.onForceFlush(),e.timeoutMillis)];case 3:return t.sent(),[2]}})})},r}(),WV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},yo=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},AV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},PV=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},MV=function(r){WV(e,r);function e(t){var n,i,s,o,l=r.call(this,{aggregationSelector:(n=t.exporter.selectAggregation)===null||n===void 0?void 0:n.bind(t.exporter),aggregationTemporalitySelector:(i=t.exporter.selectAggregationTemporality)===null||i===void 0?void 0:i.bind(t.exporter),metricProducers:t.metricProducers})||this;if(t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return l._exportInterval=(s=t.exportIntervalMillis)!==null&&s!==void 0?s:6e4,l._exportTimeout=(o=t.exportTimeoutMillis)!==null&&o!==void 0?o:3e4,l._exporter=t.exporter,l}return e.prototype._runOnce=function(){return go(this,void 0,void 0,function(){var t;return yo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,hi(this._doRun(),this._exportTimeout)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),t instanceof Og?(G.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2]):(Mg(t),[3,3]);case 3:return[2]}})})},e.prototype._doRun=function(){var t,n;return go(this,void 0,void 0,function(){var i,s,o,l,a,c;return yo(this,function(u){switch(u.label){case 0:return[4,this.collect({timeoutMillis:this._exportTimeout})];case 1:if(i=u.sent(),s=i.resourceMetrics,o=i.errors,o.length>0&&(c=G).error.apply(c,PV(["PeriodicExportingMetricReader: metrics collection errors"],AV(o),!1)),!s.resource.asyncAttributesPending)return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,(n=(t=s.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(t)];case 3:return u.sent(),[3,5];case 4:return l=u.sent(),G.debug("Error while resolving async portion of resource: ",l),Mg(l),[3,5];case 5:return s.scopeMetrics.length===0?[2]:[4,SV._export(this._exporter,s)];case 6:if(a=u.sent(),a.code!==jc.SUCCESS)throw new Error("PeriodicExportingMetricReader: metrics export failed (error "+a.error+")");return[2]}})})},e.prototype.onInitialized=function(){var t=this;this._interval=setInterval(function(){t._runOnce()},this._exportInterval)},e.prototype.onForceFlush=function(){return go(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this._runOnce()];case 1:return t.sent(),[4,this._exporter.forceFlush()];case 2:return t.sent(),[2]}})})},e.prototype.onShutdown=function(){return go(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this._interval&&clearInterval(this._interval),[4,this.onForceFlush()];case 1:return t.sent(),[4,this._exporter.shutdown()];case 2:return t.sent(),[2]}})})},e}(kV),UV=function(){function r(){this._registeredViews=[]}return r.prototype.addView=function(e){this._registeredViews.push(e)},r.prototype.findViews=function(e,t){var n=this,i=this._registeredViews.filter(function(s){return n._matchInstrument(s.instrumentSelector,e)&&n._matchMeter(s.meterSelector,t)});return i},r.prototype._matchInstrument=function(e,t){return(e.getType()===void 0||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)},r.prototype._matchMeter=function(e,t){return e.getNameFilter().match(t.name)&&(t.version===void 0||e.getVersionFilter().match(t.version))&&(t.schemaUrl===void 0||e.getSchemaUrlFilter().match(t.schemaUrl))},r}(),Er=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bo=function(){function r(e,t){this._writableMetricStorage=e,this._descriptor=t}return r.prototype._record=function(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=re.active()),typeof e!="number"){G.warn("non-number value provided to metric "+this._descriptor.name+": "+e);return}this._descriptor.valueType===Kt.INT&&!Number.isInteger(e)&&(G.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._writableMetricStorage.record(e,t,n,zc(Date.now()))},r}(),FV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,i){this._record(t,n,i)},e}(bo),DV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,i){if(t<0){G.warn("negative value provided to counter "+this._descriptor.name+": "+t);return}this._record(t,n,i)},e}(bo),YV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,i){this._record(t,n,i)},e}(bo),JV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,i){if(t<0){G.warn("negative value provided to histogram "+this._descriptor.name+": "+t);return}this._record(t,n,i)},e}(bo),vo=function(){function r(e,t,n){this._observableRegistry=n,this._descriptor=e,this._metricStorages=t}return r.prototype.addCallback=function(e){this._observableRegistry.addCallback(e,this)},r.prototype.removeCallback=function(e){this._observableRegistry.removeCallback(e,this)},r}(),HV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo),BV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo),KV=function(r){Er(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo);function eu(r){return r instanceof vo}var zV=function(){function r(e){this._meterSharedState=e}return r.prototype.createGauge=function(e,t){var n=tr(e,Q.GAUGE,t),i=this._meterSharedState.registerMetricStorage(n);return new YV(i,n)},r.prototype.createHistogram=function(e,t){var n=tr(e,Q.HISTOGRAM,t),i=this._meterSharedState.registerMetricStorage(n);return new JV(i,n)},r.prototype.createCounter=function(e,t){var n=tr(e,Q.COUNTER,t),i=this._meterSharedState.registerMetricStorage(n);return new DV(i,n)},r.prototype.createUpDownCounter=function(e,t){var n=tr(e,Q.UP_DOWN_COUNTER,t),i=this._meterSharedState.registerMetricStorage(n);return new FV(i,n)},r.prototype.createObservableGauge=function(e,t){var n=tr(e,Q.OBSERVABLE_GAUGE,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new BV(n,i,this._meterSharedState.observableRegistry)},r.prototype.createObservableCounter=function(e,t){var n=tr(e,Q.OBSERVABLE_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new HV(n,i,this._meterSharedState.observableRegistry)},r.prototype.createObservableUpDownCounter=function(e,t){var n=tr(e,Q.OBSERVABLE_UP_DOWN_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new KV(n,i,this._meterSharedState.observableRegistry)},r.prototype.addBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)},r.prototype.removeBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)},r}(),Bg=function(){function r(e){this._instrumentDescriptor=e}return r.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},r.prototype.updateDescription=function(e){this._instrumentDescriptor=tr(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},r}(),jV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kg=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},QV=function(){function r(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}return r.prototype.get=function(e,t){return t!=null||(t=this._hash(e)),this._valueMap.get(t)},r.prototype.getOrDefault=function(e,t){var n=this._hash(e);if(this._valueMap.has(n))return this._valueMap.get(n);var i=t();return this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,i),i},r.prototype.set=function(e,t,n){n!=null||(n=this._hash(e)),this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,t)},r.prototype.has=function(e,t){return t!=null||(t=this._hash(e)),this._valueMap.has(t)},r.prototype.keys=function(){var e,t;return Kg(this,function(n){switch(n.label){case 0:e=this._keyMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},r.prototype.entries=function(){var e,t;return Kg(this,function(n){switch(n.label){case 0:e=this._valueMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[this._keyMap.get(t.value[0]),t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},Object.defineProperty(r.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),r}(),wr=function(r){jV(e,r);function e(){return r.call(this,Lg)||this}return e}(QV),$V=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},zg=function(){function r(e,t){this._aggregator=e,this._activeCollectionStorage=new wr,this._cumulativeMemoStorage=new wr,this._overflowAttributes={"otel.metric.overflow":!0},this._cardinalityLimit=(t!=null?t:2e3)-1,this._overflowHashCode=Lg(this._overflowAttributes)}return r.prototype.record=function(e,t,n,i){var s=this,o=this._activeCollectionStorage.get(t);if(!o){if(this._activeCollectionStorage.size>=this._cardinalityLimit){var l=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,function(){return s._aggregator.createAccumulation(i)});l==null||l.record(e);return}o=this._aggregator.createAccumulation(i),this._activeCollectionStorage.set(t,o)}o==null||o.record(e)},r.prototype.batchCumulate=function(e,t){var n=this;Array.from(e.entries()).forEach(function(i){var s=$V(i,3),o=s[0],l=s[1],a=s[2],c=n._aggregator.createAccumulation(t);c==null||c.record(l);var u=c;if(n._cumulativeMemoStorage.has(o,a)){var d=n._cumulativeMemoStorage.get(o,a);u=n._aggregator.diff(d,c)}else if(n._cumulativeMemoStorage.size>=n._cardinalityLimit&&(o=n._overflowAttributes,a=n._overflowHashCode,n._cumulativeMemoStorage.has(o,a))){var d=n._cumulativeMemoStorage.get(o,a);u=n._aggregator.diff(d,c)}if(n._activeCollectionStorage.has(o,a)){var h=n._activeCollectionStorage.get(o,a);u=n._aggregator.merge(h,u)}n._cumulativeMemoStorage.set(o,c,a),n._activeCollectionStorage.set(o,u,a)})},r.prototype.collect=function(){var e=this._activeCollectionStorage;return this._activeCollectionStorage=new wr,e},r}(),tu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Qg=function(){function r(e,t){var n=this;this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map,t.forEach(function(i){n._unreportedAccumulations.set(i,[])})}return r.prototype.buildMetrics=function(e,t,n,i){this._stashAccumulations(n);var s=this._getMergedUnreportedAccumulations(e),o=s,l;if(this._reportHistory.has(e)){var a=this._reportHistory.get(e),c=a.collectionTime;l=a.aggregationTemporality,l===gt.CUMULATIVE?o=r.merge(a.accumulations,s,this._aggregator):o=r.calibrateStartTime(a.accumulations,s,c)}else l=e.selectAggregationTemporality(t.type);this._reportHistory.set(e,{accumulations:o,collectionTime:i,aggregationTemporality:l});var u=qV(o);if(u.length!==0)return this._aggregator.toMetricData(t,l,u,i)},r.prototype._stashAccumulations=function(e){var t,n,i=this._unreportedAccumulations.keys();try{for(var s=tu(i),o=s.next();!o.done;o=s.next()){var l=o.value,a=this._unreportedAccumulations.get(l);a===void 0&&(a=[],this._unreportedAccumulations.set(l,a)),a.push(e)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},r.prototype._getMergedUnreportedAccumulations=function(e){var t,n,i=new wr,s=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),s===void 0)return i;try{for(var o=tu(s),l=o.next();!l.done;l=o.next()){var a=l.value;i=r.merge(i,a,this._aggregator)}}catch(c){t={error:c}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.merge=function(e,t,n){for(var i=e,s=t.entries(),o=s.next();o.done!==!0;){var l=jg(o.value,3),a=l[0],c=l[1],u=l[2];if(e.has(a,u)){var d=e.get(a,u),h=n.merge(d,c);i.set(a,h,u)}else i.set(a,c,u);o=s.next()}return i},r.calibrateStartTime=function(e,t,n){var i,s;try{for(var o=tu(e.keys()),l=o.next();!l.done;l=o.next()){var a=jg(l.value,2),c=a[0],u=a[1],d=t.get(c,u);d==null||d.setStartTime(n)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return t},r}();function qV(r){return Array.from(r.entries())}var ex=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},rx=function(r){ex(e,r);function e(t,n,i,s,o){var l=r.call(this,t)||this;return l._attributesProcessor=i,l._aggregationCardinalityLimit=o,l._deltaMetricStorage=new zg(n,l._aggregationCardinalityLimit),l._temporalMetricStorage=new Qg(n,s),l}return e.prototype.record=function(t,n){var i=this,s=new wr;Array.from(t.entries()).forEach(function(o){var l=tx(o,2),a=l[0],c=l[1];s.set(i._attributesProcessor.process(a),c)}),this._deltaMetricStorage.batchCumulate(s,n)},e.prototype.collect=function(t,n){var i=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,i,n)},e}(Bg);function $g(r,e){var t="";return r.unit!==e.unit&&(t+="	- Unit '"+r.unit+"' does not match '"+e.unit+`'
`),r.type!==e.type&&(t+="	- Type '"+r.type+"' does not match '"+e.type+`'
`),r.valueType!==e.valueType&&(t+="	- Value Type '"+r.valueType+"' does not match '"+e.valueType+`'
`),r.description!==e.description&&(t+="	- Description '"+r.description+"' does not match '"+e.description+`'
`),t}function nx(r,e){return"	- use valueType '"+r.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function ix(r,e){return"	- use unit '"+r.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function sx(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+"'"}function ox(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+`'
    	- OR - create a new view with the name `+r.name+" and description '"+r.description+"' and InstrumentSelector "+n+`
    	- OR - create a new view with the name `+e.name+" and description '"+r.description+"' and InstrumentSelector "+n}function qg(r,e){return r.valueType!==e.valueType?nx(r,e):r.unit!==e.unit?ix(r,e):r.type!==e.type?sx(r,e):r.description!==e.description?ox(r,e):""}var ru=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ax=function(){function r(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return r.create=function(){return new r},r.prototype.getStorages=function(e){var t,n,i,s,o=[];try{for(var l=ru(this._sharedRegistry.values()),a=l.next();!a.done;a=l.next()){var c=a.value;o=o.concat(c)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}var u=this._perCollectorRegistry.get(e);if(u!=null)try{for(var d=ru(u.values()),h=d.next();!h.done;h=d.next()){var c=h.value;o=o.concat(c)}}catch(f){i={error:f}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return o},r.prototype.register=function(e){this._registerStorage(e,this._sharedRegistry)},r.prototype.registerForCollector=function(e,t){var n=this._perCollectorRegistry.get(e);n==null&&(n=new Map,this._perCollectorRegistry.set(e,n)),this._registerStorage(t,n)},r.prototype.findOrUpdateCompatibleStorage=function(e){var t=this._sharedRegistry.get(e.name);return t===void 0?null:this._findOrUpdateCompatibleStorage(e,t)},r.prototype.findOrUpdateCompatibleCollectorStorage=function(e,t){var n=this._perCollectorRegistry.get(e);if(n===void 0)return null;var i=n.get(t.name);return i===void 0?null:this._findOrUpdateCompatibleStorage(t,i)},r.prototype._registerStorage=function(e,t){var n=e.getInstrumentDescriptor(),i=t.get(n.name);if(i===void 0){t.set(n.name,[e]);return}i.push(e)},r.prototype._findOrUpdateCompatibleStorage=function(e,t){var n,i,s=null;try{for(var o=ru(t),l=o.next();!l.done;l=o.next()){var a=l.value,c=a.getInstrumentDescriptor();HG(c,e)?(c.description!==e.description&&(e.description.length>c.description.length&&a.updateDescription(e.description),G.warn("A view or instrument with the name ",e.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,$g(c,e),`The longer description will be used.
To resolve the conflict:`,qg(c,e))),s=a):G.warn("A view or instrument with the name ",e.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,$g(c,e),`To resolve the conflict:
`,qg(c,e))}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},r}(),lx=function(){function r(e){this._backingStorages=e}return r.prototype.record=function(e,t,n,i){this._backingStorages.forEach(function(s){s.record(e,t,n,i)})},r}(),cx=function(){function r(e,t){this._instrumentName=e,this._valueType=t,this._buffer=new wr}return r.prototype.observe=function(e,t){if(t===void 0&&(t={}),typeof e!="number"){G.warn("non-number value provided to metric "+this._instrumentName+": "+e);return}this._valueType===Kt.INT&&!Number.isInteger(e)&&(G.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._buffer.set(t,e)},r}(),ux=function(){function r(){this._buffer=new Map}return r.prototype.observe=function(e,t,n){if(n===void 0&&(n={}),!!eu(e)){var i=this._buffer.get(e);if(i==null&&(i=new wr,this._buffer.set(e,i)),typeof t!="number"){G.warn("non-number value provided to metric "+e._descriptor.name+": "+t);return}e._descriptor.valueType===Kt.INT&&!Number.isInteger(t)&&(G.warn("INT value type cannot accept a floating-point value for "+e._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t),!Number.isInteger(t))||i.set(n,t)}},r}(),nu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},iu=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ey=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},ty=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},dx=function(){function r(){this._callbacks=[],this._batchCallbacks=[]}return r.prototype.addCallback=function(e,t){var n=this._findCallback(e,t);n>=0||this._callbacks.push({callback:e,instrument:t})},r.prototype.removeCallback=function(e,t){var n=this._findCallback(e,t);n<0||this._callbacks.splice(n,1)},r.prototype.addBatchCallback=function(e,t){var n=new Set(t.filter(eu));if(n.size===0){G.error("BatchObservableCallback is not associated with valid instruments",t);return}var i=this._findBatchCallback(e,n);i>=0||this._batchCallbacks.push({callback:e,instruments:n})},r.prototype.removeBatchCallback=function(e,t){var n=new Set(t.filter(eu)),i=this._findBatchCallback(e,n);i<0||this._batchCallbacks.splice(i,1)},r.prototype.observe=function(e,t){return nu(this,void 0,void 0,function(){var n,i,s,o;return iu(this,function(l){switch(l.label){case 0:return n=this._observeCallbacks(e,t),i=this._observeBatchCallbacks(e,t),[4,PG(ty(ty([],ey(n),!1),ey(i),!1))];case 1:return s=l.sent(),o=s.filter(MG).map(function(a){return a.reason}),[2,o]}})})},r.prototype._observeCallbacks=function(e,t){var n=this;return this._callbacks.map(function(i){var s=i.callback,o=i.instrument;return nu(n,void 0,void 0,function(){var l,a;return iu(this,function(c){switch(c.label){case 0:return l=new cx(o._descriptor.name,o._descriptor.valueType),a=Promise.resolve(s(l)),t!=null&&(a=hi(a,t)),[4,a];case 1:return c.sent(),o._metricStorages.forEach(function(u){u.record(l._buffer,e)}),[2]}})})})},r.prototype._observeBatchCallbacks=function(e,t){var n=this;return this._batchCallbacks.map(function(i){var s=i.callback,o=i.instruments;return nu(n,void 0,void 0,function(){var l,a;return iu(this,function(c){switch(c.label){case 0:return l=new ux,a=Promise.resolve(s(l)),t!=null&&(a=hi(a,t)),[4,a];case 1:return c.sent(),o.forEach(function(u){var d=l._buffer.get(u);d!=null&&u._metricStorages.forEach(function(h){h.record(d,e)})}),[2]}})})})},r.prototype._findCallback=function(e,t){return this._callbacks.findIndex(function(n){return n.callback===e&&n.instrument===t})},r.prototype._findBatchCallback=function(e,t){return this._batchCallbacks.findIndex(function(n){return n.callback===e&&UG(n.instruments,t)})},r}(),hx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fx=function(r){hx(e,r);function e(t,n,i,s,o){var l=r.call(this,t)||this;return l._attributesProcessor=i,l._aggregationCardinalityLimit=o,l._deltaMetricStorage=new zg(n,l._aggregationCardinalityLimit),l._temporalMetricStorage=new Qg(n,s),l}return e.prototype.record=function(t,n,i,s){n=this._attributesProcessor.process(n,i),this._deltaMetricStorage.record(t,n,i,s)},e.prototype.collect=function(t,n){var i=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,i,n)},e}(Bg),ry=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),su=function(){function r(){}return r.Noop=function(){return mx},r}(),px=function(r){ry(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t,n){return t},e}(su);(function(r){ry(e,r);function e(t){var n=r.call(this)||this;return n._allowedAttributeNames=t,n}return e.prototype.process=function(t,n){var i=this,s={};return Object.keys(t).filter(function(o){return i._allowedAttributeNames.includes(o)}).forEach(function(o){return s[o]=t[o]}),s},e})(su);var mx=new px,gx=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},yx=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},vx=function(){function r(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new ax,this.observableRegistry=new dx,this.meter=new zV(this)}return r.prototype.registerMetricStorage=function(e){var t=this._registerMetricStorage(e,fx);return t.length===1?t[0]:new lx(t)},r.prototype.registerAsyncMetricStorage=function(e){var t=this._registerMetricStorage(e,rx);return t},r.prototype.collect=function(e,t,n){return gx(this,void 0,void 0,function(){var i,s,o;return yx(this,function(l){switch(l.label){case 0:return[4,this.observableRegistry.observe(t,n==null?void 0:n.timeoutMillis)];case 1:return i=l.sent(),s=this.metricStorageRegistry.getStorages(e),s.length===0?[2,null]:(o=s.map(function(a){return a.collect(e,t)}).filter(WG),o.length===0?[2,{errors:i}]:[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:i}])}})})},r.prototype._registerMetricStorage=function(e,t){var n=this,i=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope),s=i.map(function(a){var c=JG(a,e),u=n.metricStorageRegistry.findOrUpdateCompatibleStorage(c);if(u!=null)return u;var d=a.aggregation.createAggregator(c),h=new t(c,d,a.attributesProcessor,n._meterProviderSharedState.metricCollectors,a.aggregationCardinalityLimit);return n.metricStorageRegistry.register(h),h});if(s.length===0){var o=this._meterProviderSharedState.selectAggregations(e.type),l=o.map(function(a){var c=bx(a,2),u=c[0],d=c[1],h=n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(u,e);if(h!=null)return h;var f=d.createAggregator(e),m=u.selectCardinalityLimit(e.type),p=new t(e,f,su.Noop(),[u],m);return n.metricStorageRegistry.registerForCollector(u,p),p});s=s.concat(l)}return s},r}(),Sx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_x=function(){function r(e){this.resource=e,this.viewRegistry=new UV,this.metricCollectors=[],this.meterSharedStates=new Map}return r.prototype.getMeterSharedState=function(e){var t=AG(e),n=this.meterSharedStates.get(t);return n==null&&(n=new vx(this,e),this.meterSharedStates.set(t,n)),n},r.prototype.selectAggregations=function(e){var t,n,i=[];try{for(var s=Sx(this.metricCollectors),o=s.next();!o.done;o=s.next()){var l=o.value;i.push([l,l.selectAggregation(e)])}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r}(),So=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},_o=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Ex=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},wx=function(){function r(e,t){this._sharedState=e,this._metricReader=t}return r.prototype.collect=function(e){return So(this,void 0,void 0,function(){var t,n,i,s,o=this;return _o(this,function(l){switch(l.label){case 0:return t=zc(Date.now()),n=[],i=[],s=Array.from(this._sharedState.meterSharedStates.values()).map(function(a){return So(o,void 0,void 0,function(){var c;return _o(this,function(u){switch(u.label){case 0:return[4,a.collect(this,t,e)];case 1:return c=u.sent(),(c==null?void 0:c.scopeMetrics)!=null&&n.push(c.scopeMetrics),(c==null?void 0:c.errors)!=null&&i.push.apply(i,Ex([],Tx(c.errors),!1)),[2]}})})}),[4,Promise.all(s)];case 1:return l.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:i}]}})})},r.prototype.forceFlush=function(e){return So(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this._metricReader.forceFlush(e)];case 1:return t.sent(),[2]}})})},r.prototype.shutdown=function(e){return So(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this._metricReader.shutdown(e)];case 1:return t.sent(),[2]}})})},r.prototype.selectAggregationTemporality=function(e){return this._metricReader.selectAggregationTemporality(e)},r.prototype.selectAggregation=function(e){return this._metricReader.selectAggregation(e)},r.prototype.selectCardinalityLimit=function(e){var t,n,i;return(i=(n=(t=this._metricReader).selectCardinalityLimit)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:2e3},r}(),ny=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},iy=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},sy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Rx(r,e){var t=e!=null?e:oi.empty();return r?oi.default().merge(t):t}var Ix=function(){function r(e){var t,n,i,s,o;if(this._shutdown=!1,this._sharedState=new _x(Rx((o=e==null?void 0:e.mergeResourceWithDefaults)!==null&&o!==void 0?o:!0,e==null?void 0:e.resource)),(e==null?void 0:e.views)!=null&&e.views.length>0)try{for(var l=sy(e.views),a=l.next();!a.done;a=l.next()){var c=a.value;this._sharedState.viewRegistry.addView(c)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if((e==null?void 0:e.readers)!=null&&e.readers.length>0)try{for(var u=sy(e.readers),d=u.next();!d.done;d=u.next()){var h=d.value;this.addMetricReader(h)}}catch(f){i={error:f}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}}return r.prototype.getMeter=function(e,t,n){return t===void 0&&(t=""),n===void 0&&(n={}),this._shutdown?(G.warn("A shutdown MeterProvider cannot provide a Meter"),VR()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:n.schemaUrl}).meter},r.prototype.addMetricReader=function(e){var t=new wx(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)},r.prototype.shutdown=function(e){return ny(this,void 0,void 0,function(){return iy(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.shutdown(e)}))]);case 1:return t.sent(),[2]}})})},r.prototype.forceFlush=function(e){return ny(this,void 0,void 0,function(){return iy(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.forceFlush(e)}))];case 1:return t.sent(),[2]}})})},r}();function Cx(r,e){var t=_g(e);return{resource:Tg(r.resource),schemaUrl:void 0,scopeMetrics:Lx(r.scopeMetrics,t)}}function Lx(r,e){return Array.from(r.map(function(t){return{scope:Eg(t.scope),metrics:t.metrics.map(function(n){return Ox(n,e)}),schemaUrl:t.scope.schemaUrl}}))}function Ox(r,e){var t={name:r.descriptor.name,description:r.descriptor.description,unit:r.descriptor.unit},n=Vx(r.aggregationTemporality);switch(r.dataPointType){case wt.SUM:t.sum={aggregationTemporality:n,isMonotonic:r.isMonotonic,dataPoints:oy(r,e)};break;case wt.GAUGE:t.gauge={dataPoints:oy(r,e)};break;case wt.HISTOGRAM:t.histogram={aggregationTemporality:n,dataPoints:Nx(r,e)};break;case wt.EXPONENTIAL_HISTOGRAM:t.exponentialHistogram={aggregationTemporality:n,dataPoints:Gx(r,e)};break}return t}function Zx(r,e,t){var n={attributes:Sr(r.attributes),startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)};switch(e){case Kt.INT:n.asInt=r.value;break;case Kt.DOUBLE:n.asDouble=r.value;break}return n}function oy(r,e){return r.dataPoints.map(function(t){return Zx(t,r.descriptor.valueType,e)})}function Nx(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:Sr(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Gx(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:Sr(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Vx(r){switch(r){case gt.DELTA:return 1;case gt.CUMULATIVE:return 2}}function xx(r,e){return{resourceMetrics:r.map(function(t){return Cx(t,e)})}}var Xx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Wx(r,e){var t,n=r.spanContext(),i=r.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(r.parentSpanId),traceState:(t=n.traceState)===null||t===void 0?void 0:t.serialize(),name:r.name,kind:r.kind==null?0:r.kind+1,startTimeUnixNano:e.encodeHrTime(r.startTime),endTimeUnixNano:e.encodeHrTime(r.endTime),attributes:Sr(r.attributes),droppedAttributesCount:r.droppedAttributesCount,events:r.events.map(function(s){return Px(s,e)}),droppedEventsCount:r.droppedEventsCount,status:{code:i.code,message:i.message},links:r.links.map(function(s){return Ax(s,e)}),droppedLinksCount:r.droppedLinksCount}}function Ax(r,e){var t;return{attributes:r.attributes?Sr(r.attributes):[],spanId:e.encodeSpanContext(r.context.spanId),traceId:e.encodeSpanContext(r.context.traceId),traceState:(t=r.context.traceState)===null||t===void 0?void 0:t.serialize(),droppedAttributesCount:r.droppedAttributesCount||0}}function Px(r,e){return{attributes:r.attributes?Sr(r.attributes):[],name:r.name,timeUnixNano:e.encodeHrTime(r.time),droppedAttributesCount:r.droppedAttributesCount||0}}function Mx(r,e){var t=_g(e);return{resourceSpans:Fx(r,t)}}function Ux(r){var e,t,n=new Map;try{for(var i=Xx(r),s=i.next();!s.done;s=i.next()){var o=s.value,l=n.get(o.resource);l||(l=new Map,n.set(o.resource,l));var a=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),c=l.get(a);c||(c=[],l.set(a,c)),c.push(o)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function Fx(r,e){for(var t=Ux(r),n=[],i=t.entries(),s=i.next();!s.done;){for(var o=kx(s.value,2),l=o[0],a=o[1],c=[],u=a.values(),d=u.next();!d.done;){var h=d.value;if(h.length>0){var f=h.map(function(p){return Wx(p,e)});c.push({scope:Eg(h[0].instrumentationLibrary),spans:f,schemaUrl:h[0].instrumentationLibrary.schemaUrl})}d=u.next()}var m={resource:Tg(l),scopeSpans:c,schemaUrl:void 0};n.push(m),s=i.next()}return n}var Dx={serializeRequest:function(r){var e=xx([r],{useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},Yx={serializeRequest:function(r){var e=Mx(r,{useHex:!0,useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},Jx=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(u){try{c(n.next(u))}catch(d){o(d)}}function a(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((n=n.apply(r,e||[])).next())})},Hx=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bx=5,Kx=1e3,zx=5e3,jx=1.5,ay=.2;function Qx(){return Math.random()*(2*ay)-ay}var $x=function(){function r(e){this._transport=e}return r.prototype.retry=function(e,t,n){var i=this;return new Promise(function(s,o){setTimeout(function(){i._transport.send(e,t).then(s,o)},n)})},r.prototype.send=function(e,t){var n;return Jx(this,void 0,void 0,function(){var i,s,o,l,a,c,u;return Hx(this,function(d){switch(d.label){case 0:return i=Date.now()+t,[4,this._transport.send(e,t)];case 1:s=d.sent(),o=Bx,l=Kx,d.label=2;case 2:return s.status==="retryable"&&o>0?(o--,a=Math.max(Math.min(l,zx)+Qx(),0),l=l*jx,c=(n=s.retryInMillis)!==null&&n!==void 0?n:a,u=i-Date.now(),c>u?[2,s]:[4,this.retry(e,u,c)]):[3,4];case 3:return s=d.sent(),[3,2];case 4:return[2,s]}})})},r.prototype.shutdown=function(){return this._transport.shutdown()},r}();function ly(r){return new $x(r.transport)}function qx(r){var e=[429,502,503,504];return e.includes(r)}function e1(r){if(r!=null){var e=Number.parseInt(r,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var t=new Date(r).getTime()-Date.now();return t>=0?t:0}}var t1=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},r1=function(){function r(e){this._parameters=e}return r.prototype.send=function(e,t){var n=this;return new Promise(function(i){var s=new XMLHttpRequest;s.timeout=t,s.open("POST",n._parameters.url);var o=n._parameters.headers();Object.entries(o).forEach(function(l){var a=t1(l,2),c=a[0],u=a[1];s.setRequestHeader(c,u)}),s.ontimeout=function(l){i({status:"failure",error:new Error("XHR request timed out")})},s.onreadystatechange=function(){s.status>=200&&s.status<=299?(G.debug("XHR success"),i({status:"success"})):s.status&&qx(s.status)?i({status:"retryable",retryInMillis:e1(s.getResponseHeader("Retry-After"))}):s.status!==0&&i({status:"failure",error:new Error("XHR request failed with non-retryable status")})},s.onabort=function(){i({status:"failure",error:new Error("XHR request aborted")})},s.onerror=function(){i({status:"failure",error:new Error("XHR request errored")})},s.send(e)})},r.prototype.shutdown=function(){},r}();function n1(r){return new r1(r)}var i1=function(){function r(e){this._params=e}return r.prototype.send=function(e){var t=this;return new Promise(function(n){navigator.sendBeacon(t._params.url,new Blob([e],{type:t._params.blobType}))?(G.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})},r.prototype.shutdown=function(){},r}();function s1(r){return new i1(r)}function o1(r,e){return mg(r,e,ly({transport:n1(r)}))}function a1(r,e){return mg(r,e,ly({transport:s1({url:r.url,blobType:r.headers()["Content-Type"]})}))}var l1=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function c1(r){return function(){var e,t={};return Object.entries((e=r==null?void 0:r())!==null&&e!==void 0?e:{}).forEach(function(n){var i=l1(n,2),s=i[0],o=i[1];typeof o!="undefined"?t[s]=String(o):G.warn('Header "'+s+'" has invalid value ('+o+") and will be ignored")}),t}}var Rr=function(){return Rr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Rr.apply(this,arguments)};function u1(r,e,t){var n=Rr({},t()),i={};return function(){return e!=null&&Object.assign(i,e()),r!=null&&Object.assign(i,r()),Object.assign(i,n)}}function d1(r){if(r!=null)try{return new URL(r),r}catch(e){throw new Error("Configuration: Could not parse user-provided export URL: '"+r+"'")}}function h1(r,e,t){var n,i,s,o;return Rr(Rr({},fG(r,e,t)),{headers:u1(c1(r.headers),e.headers,t.headers),url:(i=(n=d1(r.url))!==null&&n!==void 0?n:e.url)!==null&&i!==void 0?i:t.url,agentOptions:(o=(s=r.agentOptions)!==null&&s!==void 0?s:e.agentOptions)!==null&&o!==void 0?o:t.agentOptions})}function f1(r,e){return Rr(Rr({},pG()),{headers:function(){return r},url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}})}function p1(r,e,t){return h1({url:r.url,timeoutMillis:r.timeoutMillis,headers:hG(r.headers),concurrencyLimit:r.concurrencyLimit},{},f1(t,e))}function cy(r,e,t,n){var i=!!r.headers||typeof navigator.sendBeacon!="function",s=p1(r,t,n);return i?o1(s,e):a1(s,e)}var m1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),g1=function(r){m1(e,r);function e(t){return t===void 0&&(t={}),r.call(this,cy(t,Yx,"v1/traces",{"Content-Type":"application/json"}))||this}return e}(fg),To;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE",r[r.LOWMEMORY=2]="LOWMEMORY"})(To||(To={}));var y1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ou=function(){return gt.CUMULATIVE},uy=function(r){switch(r){case Q.COUNTER:case Q.OBSERVABLE_COUNTER:case Q.GAUGE:case Q.HISTOGRAM:case Q.OBSERVABLE_GAUGE:return gt.DELTA;case Q.UP_DOWN_COUNTER:case Q.OBSERVABLE_UP_DOWN_COUNTER:return gt.CUMULATIVE}},dy=function(r){switch(r){case Q.COUNTER:case Q.HISTOGRAM:return gt.DELTA;case Q.GAUGE:case Q.UP_DOWN_COUNTER:case Q.OBSERVABLE_UP_DOWN_COUNTER:case Q.OBSERVABLE_COUNTER:case Q.OBSERVABLE_GAUGE:return gt.CUMULATIVE}};function b1(){var r=kI(),e=r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();return e==="cumulative"?ou:e==="delta"?uy:e==="lowmemory"?dy:(G.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '"+r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE+"', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."),ou)}function v1(r){return r!=null?r===To.DELTA?uy:r===To.LOWMEMORY?dy:ou:b1()}function S1(r){return r!=null&&r.aggregationPreference?r.aggregationPreference:function(e){return Pt.Default()}}var _1=function(r){y1(e,r);function e(t,n){var i=r.call(this,t)||this;return i._aggregationSelector=S1(n),i._aggregationTemporalitySelector=v1(n==null?void 0:n.temporalityPreference),i}return e.prototype.selectAggregation=function(t){return this._aggregationSelector(t)},e.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},e}(fg),T1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E1=function(r){T1(e,r);function e(t){return r.call(this,cy(t!=null?t:{},Dx,"v1/metrics",{"Content-Type":"application/json"}),t)||this}return e}(_1),hy=(r=>(r.BillingQuotaExceeded="BillingQuotaExceeded",r))(hy||{});const au=10,lu=1e3,cu=500,w1=[hy.BillingQuotaExceeded.toString()],R1=r=>{var t;return((t=r.response.errors)==null?void 0:t.find(n=>w1.includes(n.message)))===void 0},uu=()=>{const r=(e,t,n,i,s=0)=>J(this,null,function*(){try{return yield e()}catch(o){if(o instanceof xr&&!R1(o))throw o;if(s<au)return yield new Promise(l=>setTimeout(l,lu+cu*Math.pow(2,s))),yield r(e,t,n,i,s+1);throw console.error(`highlight.io: data request failed after ${s} retries`),o}});return r};function I1(r,e){const t=r.spanContext();return{name:r.name,kind:r.kind,spanContext:()=>t,parentSpanId:r.parentSpanId,startTime:r.startTime,endTime:r.endTime,status:r.status,attributes:SC(r.attributes,e),links:r.links,events:r.events,duration:r.duration,ended:r.ended,resource:r.resource,instrumentationLibrary:r.instrumentationLibrary,droppedAttributesCount:r.droppedAttributesCount,droppedEventsCount:r.droppedEventsCount,droppedLinksCount:r.droppedLinksCount}}function C1(r,e){if(!e.isSamplingEnabled())return r;const t=[],n={},i={};for(const s of r){s.parentSpanId&&(i[s.parentSpanId]=i[s.parentSpanId]||[],i[s.parentSpanId].push(s.spanContext().spanId));const o=e.shouldSample(s);o.sample?o.attributes?n[s.spanContext().spanId]=I1(s,o.attributes):n[s.spanContext().spanId]=s:t.push(s.spanContext().spanId)}for(;t.length>0;){const s=t.shift(),o=i[s];if(o)for(const l of o)delete n[l],t.push(l)}return Object.values(n)}class L1 extends g1{constructor(e,t){super(P(S({},e),{headers:{}})),this.sampler=t}export(e,t){const n=C1(e,this.sampler);if(n.length===0)return;let i=0;const s=o=>{if(o.code===Pe.SUCCESS)return t({code:Pe.SUCCESS});if(i++,i>au)return t({code:Pe.FAILED,error:o.error});new Promise(l=>setTimeout(l,lu+cu*Math.pow(2,i))).then(()=>{super.export(n,s)})};super.export(n,s)}}class O1 extends E1{constructor(e){super(P(S({},e),{headers:{}}))}export(e,t){let n=0;const i=s=>{var o;if(s.code===Pe.SUCCESS)return t({code:Pe.SUCCESS});if(n++,n>au)return console.error(`[@launchdarkly/observability] failed to export OTeL metrics: ${(o=s.error)==null?void 0:o.message}`,s.error),t({code:Pe.FAILED,error:s.error});new Promise(l=>setTimeout(l,lu+cu*Math.pow(2,n))).then(()=>{var l;console.warn(`[@launchdarkly/observability] retry ${n}, failed to export OTeL metrics: ${(l=s.error)==null?void 0:l.message}`,s.error),super.export(e,i)})};super.export(e,i)}}const Z1="OT_ZONE_CONTEXT",N1="Navigation:",G1=["click","input","submit"];function V1(){return!1}const Ct=class Ct extends XC{constructor(t={}){var n;super(Ct.moduleName,Ct.version,t);v(this,"_spansData",new WeakMap);v(this,"_zonePatched");v(this,"_wrappedListeners",new WeakMap);v(this,"_eventsSpanMap",new WeakMap);v(this,"_eventNames");v(this,"_shouldPreventSpanCreation");this._eventNames=new Set((n=t==null?void 0:t.eventNames)!=null?n:G1),this._shouldPreventSpanCreation=typeof(t==null?void 0:t.shouldPreventSpanCreation)=="function"?t.shouldPreventSpanCreation:V1}init(){}_checkForTimeout(t,n){const i=this._spansData.get(n);i&&(t.source==="setTimeout"?i.hrTimeLastTimeout=UI():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(i.hrTimeLastTimeout=void 0))}_allowEventName(t){return this._eventNames.has(t)}_createSpan(t,n){var l;const i=t==null?void 0:t.target,s=t==null?void 0:t.type;if(!(i instanceof HTMLElement)||!i.getAttribute||i.hasAttribute("disabled")||!this._allowEventName(s))return;const o=Vm(i,!0);try{const a=this.tracer.startSpan(s,{attributes:{"event.type":s,"event.tag":i.tagName,"event.xpath":o,"event.id":i.id,"event.text":(l=i.textContent)!=null?l:"","event.url":window.location.href,"viewport.width":window.innerWidth,"viewport.height":window.innerHeight}},n?oe.setSpan(re.active(),n):void 0);return t instanceof MouseEvent&&(a.setAttribute("event.x",t.clientX),a.setAttribute("event.y",t.clientY),a.setAttribute("event.relativeX",t.clientX/window.innerWidth),a.setAttribute("event.relativeY",t.clientY/window.innerHeight),s==="scroll"&&(a.setAttribute("event.scrollX",window.scrollX),a.setAttribute("event.scrollY",window.scrollY))),this._shouldPreventSpanCreation(s,i,a)===!0?void 0:(this._spansData.set(a,{taskCount:0}),a)}catch(a){this._diag.error("failed to start create new user interaction span",a)}}_decrementTask(t){const n=this._spansData.get(t);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(t,n.hrTimeLastTimeout))}_getCurrentSpan(t){const n=t.get(Z1);return n&&oe.getSpan(n)}_incrementTask(t){const n=this._spansData.get(t);n&&n.taskCount++}addPatchedListener(t,n,i,s){let o=this._wrappedListeners.get(i);o||(o=new Map,this._wrappedListeners.set(i,o));let l=o.get(n);return l||(l=new Map,o.set(n,l)),l.has(t)?!1:(l.set(t,s),!0)}removePatchedListener(t,n,i){const s=this._wrappedListeners.get(i);if(!s)return;const o=s.get(n);if(!o)return;const l=o.get(t);return l&&(o.delete(t),o.size===0&&(s.delete(n),s.size===0&&this._wrappedListeners.delete(i))),l}_invokeListener(t,n,i){return typeof t=="function"?t.apply(n,i):t.handleEvent(i[0])}_patchAddEventListener(){const t=this;let n=new Map;return i=>function(o,l,a){if(!l)return i.call(this,o,l,a);const c=a&&typeof a=="object"&&a.once,u=function(...d){var p;let h;const f=d[0];if(!(f!=null&&f.type))return t._invokeListener(l,this,d);if(Date.now()-((p=n.get(f.type))!=null?p:0)<1e3/60)return t._invokeListener(l,this,d);n.set(f.type,Date.now()),f&&(h=t._eventsSpanMap.get(f)),c&&t.removePatchedListener(this,o,l);const m=t._createSpan(f,h);return m?(f&&t._eventsSpanMap.set(f,m),re.with(oe.setSpan(re.active(),m),()=>{const g=t._invokeListener(l,this,d);return m.end(),g})):t._invokeListener(l,this,d)};if(t.addPatchedListener(this,o,l,u))return i.call(this,o,u,a)}}_patchRemoveEventListener(){const t=this;return n=>function(s,o,l){const a=t.removePatchedListener(this,s,o);return a?n.call(this,s,a,l):n.call(this,s,o,l)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){const t=this;return n=>function(...s){const o=`${location.pathname}${location.hash}${location.search}`,l=n.apply(this,s),a=`${location.pathname}${location.hash}${location.search}`;return o!==a&&t._updateInteractionName(a),l}}_unpatchHistoryApi(){Ue(history.replaceState)&&this._unwrap(history,"replaceState"),Ue(history.pushState)&&this._unwrap(history,"pushState"),Ue(history.back)&&this._unwrap(history,"back"),Ue(history.forward)&&this._unwrap(history,"forward"),Ue(history.go)&&this._unwrap(history,"go")}_updateInteractionName(t){const n=oe.getSpan(re.active());n&&typeof n.updateName=="function"&&n.updateName(`${N1} ${t}`)}_patchZoneCancelTask(){const t=this;return n=>function(s){const o=Zone.current,l=t._getCurrentSpan(o);return l&&t._shouldCountTask(s,o)&&t._decrementTask(l),n.call(this,s)}}_patchZoneScheduleTask(){const t=this;return n=>function(s){const o=Zone.current,l=t._getCurrentSpan(o);return l&&t._shouldCountTask(s,o)&&(t._incrementTask(l),t._checkForTimeout(s,l)),n.call(this,s)}}_patchZoneRunTask(){const t=this;return n=>function(s,o,l){const a=Array.isArray(l)&&l[0]instanceof Event?l[0]:void 0,c=a==null?void 0:a.target;let u;const d=this;if(c){if(u=t._createSpan(a),u)return t._incrementTask(u),d.run(()=>{try{return re.with(oe.setSpan(re.active(),u),()=>{const h=Zone.current;return s._zone=h,n.call(h,s,o,l)})}finally{t._decrementTask(u)}})}else u=t._getCurrentSpan(d);try{return n.call(d,s,o,l)}finally{u&&t._shouldCountTask(s,d)&&t._decrementTask(u)}}}_shouldCountTask(t,n){if(t._zone&&(n=t._zone),!n||!t.data||t.data.isPeriodic)return!1;const i=this._getCurrentSpan(n);return!i||!this._spansData.get(i)?!1:t.type==="macroTask"||t.type==="microTask"}_tryToEndSpan(t,n){t&&this._spansData.get(t)&&(t.end(n),this._spansData.delete(t))}enable(){const t=this._getZoneWithPrototype();this._diag.debug("applying patch to",Ct.moduleName,Ct.version,"zone:",!!t),t?(Ue(t.prototype.runTask)&&(this._unwrap(t.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),Ue(t.prototype.scheduleTask)&&(this._unwrap(t.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),Ue(t.prototype.cancelTask)&&(this._unwrap(t.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(t.prototype,"runTask",this._patchZoneRunTask()),this._wrap(t.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(t.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach(i=>{Ue(i.addEventListener)&&(this._unwrap(i,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),Ue(i.removeEventListener)&&(this._unwrap(i,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(i,"addEventListener",this._patchAddEventListener()),this._wrap(i,"removeEventListener",this._patchRemoveEventListener())})),this._patchHistoryApi()}disable(){const t=this._getZoneWithPrototype();this._diag.debug("removing patch from",Ct.moduleName,Ct.version,"zone:",!!t),t&&this._zonePatched?(Ue(t.prototype.runTask)&&this._unwrap(t.prototype,"runTask"),Ue(t.prototype.scheduleTask)&&this._unwrap(t.prototype,"scheduleTask"),Ue(t.prototype.cancelTask)&&this._unwrap(t.prototype,"cancelTask")):this._getPatchableEventTargets().forEach(i=>{Ue(i.addEventListener)&&this._unwrap(i,"addEventListener"),Ue(i.removeEventListener)&&this._unwrap(i,"removeEventListener")}),this._unpatchHistoryApi()}_getZoneWithPrototype(){return window.Zone}};v(Ct,"version","0.1.0"),v(Ct,"moduleName","user-interaction");let du=Ct;class hu{constructor(e,t){v(this,"debug");v(this,"name");this.debug=e,this.name=t}log(...e){if(this.debug){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.log.apply(console,[t,...e])}}warn(...e){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.warn.apply(console,[t,...e])}}class fu{constructor(){v(this,"_sdk");v(this,"_isLoaded",!1);v(this,"_callBuffer",[]);v(this,"_capacity",1e5);v(this,"_droppedEvents",0);v(this,"_exceededCapacity",!1);v(this,"_logger",new hu)}_bufferCall(e,t){if(this._isLoaded)try{return this._sdk[e](...t)}catch(n){Ge(`Error executing buffered call to ${e}:`,"error",n)}else{this._enqueue({method:e,args:t});return}}_enqueue(e){this._callBuffer.length<this._capacity?(this._callBuffer.push(e),this._exceededCapacity=!1):(this._exceededCapacity||(this._exceededCapacity=!0,Ge("Exceeded event queue capacity. Increase capacity to avoid dropping events.","warn")),this._droppedEvents+=1)}load(e){this._sdk=e,this._isLoaded=!0;for(const{method:t,args:n}of this._callBuffer)try{this._sdk[t](...n)}catch(i){Ge(`Error executing buffered call to ${t}:`,"error",i)}this._callBuffer=[]}}const xe="feature_flag",fy="launchdarkly",pu="evaluation",x1=`${xe}.${pu}`,py=`${xe}.set.id`,my=`${xe}.key`,gy=`${xe}.contextKeys`,yy=`${xe}.context.id`,by=`${xe}.result.value`,mu=`${xe}.provider.name`,Eo={kind:`${xe}.result.reason.kind`,errorKind:`${xe}.result.reason.errorKind`,ruleIndex:`${xe}.result.reason.ruleIndex`,ruleId:`${xe}.result.reason.ruleId`,prerequisiteKey:`${xe}.result.reason.prerequisiteKey`,inExperiment:`${xe}.result.reason.inExperiment`,bigSegmentsStatus:`${xe}.result.reason.bigSegmentsStatus`},vy=`${xe}.result.variationIndex`,Sy=`${fy}.application.id`,_y=`${fy}.application.version`,X1="$ld:telemetry:session:init",k1="$ld:telemetry:error",Ty="$ld:telemetry:track",W1="$ld:telemetry:metric",Ey="document_load",A1="result.status";function wy(r){return r.includes("%")||r.includes(":")?r.replace(/%/g,"%25").replace(/:/g,"%3A"):r}function Ry(r){return r.kind==="multi"}function Ir(r){return Ry(r)?Object.keys(r).sort().filter(e=>e!=="kind").map(e=>`${e}:${wy(r[e].key)}`).join(":"):"kind"in r&&r.kind==="user"?r.key:"kind"in r?`${r.kind}:${wy(r.key)}`:r.key}function mi(r){return Ry(r)?Object.keys(r).sort().filter(e=>e!=="kind").map(e=>({[e]:r[e].key})).reduce((e,t)=>S(S({},e),t),{}):"kind"in r?{[r.kind]:r.key}:{user:r.key}}function P1(r,e,t){e.addHook({getMetadata:()=>({name:"highlight.run"}),afterIdentify:(n,i,s)=>{var l,a;const o=P(S({},mi(n.context)),{key:(a=(l=t==null?void 0:t.contextFriendlyName)==null?void 0:l.call(t,n.context))!=null?a:Ir(n.context)});return r.log("LD.identify","INFO",o),s.status==="completed"&&r.identify(o.key,o,"LaunchDarkly"),i},afterEvaluation:(n,i,s)=>{const o=S({[mu]:"LaunchDarkly",[my]:n.flagKey,[by]:JSON.stringify(s.value)},s.variationIndex?{[vy]:s.variationIndex}:{});if(s.reason)for(const l in Eo){const a=l,c=s.reason[a];c&&(o[Eo[a]]=c)}return n.context&&(o[gy]=JSON.stringify(mi(n.context)),o[yy]=Ir(n.context)),r.startSpan(pu,l=>{l&&l.addEvent(x1,o)}),i}})}class M1{constructor(e,t){v(this,"client");v(this,"metadata");this.client=e,this.metadata=t}getHooks(e){return[]}init(e){this.client.track(X1,{sessionID:e})}recordGauge(e,t){var n;t.category!==ye.WebVital&&t.name!==Ey||t.name!=="Jank"&&this.client.track(`${W1}:${t.name.toLowerCase()}`,P(S({},(n=t.tags)==null?void 0:n.map(i=>({[i.name]:i.value})).reduce((i,s)=>S(S({},i),s),{})),{category:t.category,group:t.group,sessionID:e}),t.value)}identify(e,t,n={},i){}error(e,t){this.client.track(k1,P(S({},t),{sessionID:e}))}track(e,t){const n=t.event;this.client.track(n?`${Ty}:${n}`:Ty,P(S({},t),{sessionID:e}))}}class wo extends fu{constructor(t,n){super();v(this,"client");this.client=new M1(t,n)}getHooks(t){return[{getMetadata:()=>({name:"highlight.run/ld"}),afterIdentify:(n,i,s)=>(this.load(this.client),i)}]}init(t){return this._bufferCall("init",[t])}recordGauge(t,n){return this._bufferCall("recordGauge",[t,n])}identify(t,n,i={},s){return this._bufferCall("identify",[t,n,i,s])}error(t,n){return this._bufferCall("error",[t,n])}track(t,n){return this._bufferCall("track",[t,n])}}const gu={version:"9.21.0"}.version;let ze={},Mt;const Ro="highlight.record",U1="highlight.session_id",Iy="launchdarkly.js.log",F1="launchdarkly.exception.id",Cy="launchdarkly.sampling.ratio",Ly="log.severity",Oy="log.message",Zy=(r,e)=>{var p,g,y,T,E,C,R,N,V;if(ze.tracerProvider!==void 0){console.warn("OTEL already initialized. Skipping...");return}Mt=r;const t=r.backendUrl||void 0||"https://pub.highlight.io",n=[...(g=(p=r.networkRecordingOptions)==null?void 0:p.urlBlocklist)!=null?g:[],...sg],i=(y=r.environment)!=null?y:"production",s={url:r.otlpEndpoint+"/v1/traces",concurrencyLimit:100,timeoutMillis:3e4,compression:"gzip",keepAlive:!0,httpAgentOptions:{timeout:6e4,keepAlive:!0}},o=new L1(s,e),l=new D1(o,{maxExportBatchSize:100,maxQueueSize:1e3,exportTimeoutMillis:s.timeoutMillis,scheduledDelayMillis:s.timeoutMillis}),a=new oi({[aZ]:(T=r.serviceName)!=null?T:"highlight-browser","deployment.environment.name":i,"highlight.project_id":r.projectId,[dZ]:navigator.userAgent,"browser.language":navigator.language,"telemetry.distro.name":"@highlight-run/observability","telemetry.distro.version":gu});ze.tracerProvider=new JO({resource:a,mergeResourceWithDefaults:!0,spanProcessors:[l]}),oe.setGlobalTracerProvider(ze.tracerProvider);const c=new O1(P(S({},s),{url:r.otlpEndpoint+"/v1/metrics"})),u=new MV({exporter:c,exportIntervalMillis:s.timeoutMillis,exportTimeoutMillis:s.timeoutMillis});ze.meterProvider=new Ix({resource:a,readers:[u]}),Ke.setGlobalMeterProvider(ze.meterProvider);let d=[];((E=r.instrumentations)==null?void 0:E["@opentelemetry/instrumentation-document-load"])!==!1&&d.push(new mZ({applyCustomAttributesOnSpan:{documentLoad:xy,documentFetch:xy,resourceFetch:K1}})),((C=r.instrumentations)==null?void 0:C["@opentelemetry/instrumentation-user-interaction"])!==!1&&d.push(new du({eventNames:r.eventNames})),(R=r.networkRecordingOptions)!=null&&R.enabled&&(((N=r.instrumentations)==null?void 0:N["@opentelemetry/instrumentation-fetch"])!==!1&&d.push(new rN({propagateTraceHeaderCorsUrls:ky(r.tracingOrigins),applyCustomAttributesOnSpan:(L,k,A)=>J(this,null,function*(){var U,D,M;if(!L.attributes)return;const $=L;if($.attributes[Ro]===!1)return;const b=$.attributes["http.url"],_=(U=k.method)!=null?U:"GET";if(L.updateName(Gy(b,_,k.body)),!(A instanceof Response)){L.setAttributes({"http.response.error":A.message,"http.response.status":A.status});return}Vy(L,k.body,k.headers,r.networkRecordingOptions);const x=yield hg(A,(D=r.networkRecordingOptions)==null?void 0:D.bodyKeysToRecord,(M=r.networkRecordingOptions)==null?void 0:M.networkBodyKeysToRedact);L.setAttribute("http.response.body",x)})})),((V=r.instrumentations)==null?void 0:V["@opentelemetry/instrumentation-xml-http-request"])!==!1&&d.push(new WN({propagateTraceHeaderCorsUrls:ky(r.tracingOrigins),applyCustomAttributesOnSpan:(L,k)=>{var x,U;const A=k;if(!L.attributes||L.attributes[Ro]===!1)return;const b=Gy(A._url,A._method,k.responseText);L.updateName(b),Vy(L,A._body,A._requestHeaders,r.networkRecordingOptions);const _=er(A._body,(x=r.networkRecordingOptions)==null?void 0:x.networkBodyKeysToRedact,(U=r.networkRecordingOptions)==null?void 0:U.bodyKeysToRecord,A._requestHeaders);L.setAttribute("http.request.body",_)}}))),ZC({instrumentations:d});const m=new Zm;return m.enable(),ze.tracerProvider.register({contextManager:m,propagator:new YI({propagators:[new vI,new Y1({backendUrl:t,otlpEndpoint:r.otlpEndpoint,tracingOrigins:r.tracingOrigins,urlBlocklist:n})]})}),ze};class D1 extends Cm{onStart(e,t){e.setAttribute(U1,Wt()),super.onStart(e,t)}onEnd(e){e.attributes[Ro]!==!1&&super.onEnd(e)}}class Y1 extends aC{constructor(t){super();v(this,"highlightEndpoints");v(this,"tracingOrigins");v(this,"urlBlocklist");this.highlightEndpoints=[t.backendUrl,`${t.otlpEndpoint}/v1/traces`,`${t.otlpEndpoint}/v1/logs`,`${t.otlpEndpoint}/v1/metrics`],this.tracingOrigins=t.tracingOrigins,this.urlBlocklist=t.urlBlocklist}inject(t,n,i){var l;const s=oe.getSpan(t);if(!s||!s.attributes)return;const o=s.attributes["http.url"];typeof o=="string"&&(B1(o,this.highlightEndpoints,this.tracingOrigins,this.urlBlocklist)||s.setAttribute(Ro,!1),!Pc(o,(l=this.tracingOrigins)!=null?l:[],this.urlBlocklist))||super.inject(t,n,i)}}const Ny="highlight-browser",rr=Ny,Io=()=>{var r;return(r=ze.tracerProvider)==null?void 0:r.getTracer(Ny)},J1=()=>oe.getActiveSpan(),H1=()=>J(this,null,function*(){ze.tracerProvider?(yield ze.tracerProvider.forceFlush(),yield ze.tracerProvider.shutdown()):console.warn("OTEL shutdown called without initialized tracerProvider."),ze.meterProvider?(yield ze.meterProvider.forceFlush(),yield ze.meterProvider.shutdown()):console.warn("OTEL shutdown called without initialized meterProvider.")}),Gy=(r,e,t)=>{var l,a,c;let n;const i=new URL(r),s=i.pathname;let o=`${e.toUpperCase()} - ${s}`;try{if(n=typeof t=="string"?JSON.parse(t):t,n&&n.query){const u=Bo(n.query),d=((l=u.definitions[0])==null?void 0:l.kind)==="OperationDefinition"?(c=(a=u.definitions[0])==null?void 0:a.name)==null?void 0:c.value:void 0;d&&(o=`${d} (GraphQL: ${i.host+i.pathname})`)}}catch(u){}return o},Vy=(r,e,t,n)=>{var u;const i=typeof e=="string"?e:String(e);if(!r.attributes)return;const o=r.attributes["http.url"],l=new URL(o);let a;try{a=e?JSON.parse(i):void 0,a.operationName&&r.setAttribute("graphql.operation.name",a.operationName)}catch(d){}const c=ig((u=n==null?void 0:n.networkHeadersToRedact)!=null?u:[],t,n==null?void 0:n.headerKeysToRecord);r.setAttributes({"highlight.type":"http.request","http.request.headers":JSON.stringify(c),"http.request.body":i,[lZ]:o,[cZ]:l.pathname,[uZ]:l.search}),l.searchParams.size>0&&r.setAttributes({"url.query_params":JSON.stringify(Object.fromEntries(l.searchParams))})},B1=(r,e,t,n)=>n!=null&&n.some(s=>r.toLowerCase().includes(s))?!1:fo(r,e),xy=r=>{var s,o,l;if(!r.events)return;const t=r.events,n={unload:st("unloadEventStart","unloadEventEnd",t),dom_interactive:st("fetchStart","domInteractive",t),dom_content_loaded:st("domContentLoadedEventStart","domContentLoadedEventEnd",t),dom_complete:st("fetchStart","domComplete",t),load_event:st("loadEventStart","loadEventEnd",t),document_load:st("fetchStart","loadEventEnd",t),first_paint:st("fetchStart","firstPaint",t),first_contentful_paint:st("fetchStart","firstContentfulPaint",t),domain_lookup:st("domainLookupStart","domainLookupEnd",t),connect:st("connectStart","connectEnd",t),request:st("requestStart","requestEnd",t),response:st("responseStart","responseEnd",t)},i=(o=(s=Mt==null?void 0:Mt.getIntegrations)==null?void 0:s.call(Mt))!=null?o:[];if(n.document_load!==void 0)for(const a of i)a.recordGauge((l=Mt==null?void 0:Mt.sessionSecureId)!=null?l:"",{name:Ey,value:n.document_load/1e6});Object.entries(n).forEach(([a,c])=>{c!==void 0&&(r.setAttribute(`timings.${a}.ns`,c),r.setAttribute(`timings.${a}.readable`,Xy(c)))})};function st(r,e,t){const n=t.find(l=>l.name===r),i=t.find(l=>l.name===e);if(!n||!i)return;const s=n.time[0]*1e9+n.time[1];return i.time[0]*1e9+i.time[1]-s}const K1=(r,e)=>{const t={domain_lookup:(e.domainLookupEnd-e.domainLookupStart)*1e9,connect:(e.connectEnd-e.connectStart)*1e9,request:(e.responseEnd-e.requestStart)*1e9,response:(e.responseEnd-e.responseStart)*1e9};Object.entries(t).forEach(([n,i])=>{r.setAttribute(`timings.${n}.ns`,i),r.setAttribute(`timings.${n}.readable`,Xy(i))})},Xy=r=>{if(r>=36e11){const o=r/36e11;return`${Number(o.toFixed(1))}h`}else if(r>=6e10){const o=r/6e10;return`${Number(o.toFixed(1))}m`}else if(r>=1e9){const o=r/1e9;return`${Number(o.toFixed(1))}s`}else if(r>=1e6){const o=r/1e6;return`${Number(o.toFixed(1))}ms`}else if(r>=1e3){const o=r/1e3;return`${Number(o.toFixed(1))}s`}else return`${Number(r.toFixed(1))}ns`},ky=r=>r===!0?[/localhost/,/^\//,new RegExp(window.location.host)]:Array.isArray(r)?r.map(e=>typeof e=="string"?new RegExp(e):e):/^$/,z1=(r,e,t)=>{const n=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=r;const i=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=s=>{const d=s,{message:o,size:l}=d,a=He(d,["message","size"]),u=t.some(h=>s.name.toLowerCase().includes(h))?a:s;e(u)},()=>{window._highlightWebSocketRequestCallback=n,window._highlightWebSocketEventCallback=i}},j1=({xhrCallback:r,fetchCallback:e,webSocketRequestCallback:t,webSocketEventCallback:n,disableWebSocketRecording:i,bodyKeysToRedact:s,highlightEndpoints:o,tracingOrigins:l,urlBlocklist:a,bodyKeysToRecord:c})=>{const u=sG(r,o,l,a,s,c),d=aG(e,o,l,a,s,c),h=i?()=>{}:z1(t,n,a);return()=>{u(),d(),h()}};class Ut{constructor(e){v(this,"disableConsoleRecording");v(this,"reportConsoleErrors");v(this,"enablePromisePatch");v(this,"consoleMethodsToRecord");v(this,"listeners");v(this,"errors");v(this,"messages");v(this,"options");v(this,"hasNetworkRecording",!0);v(this,"disableNetworkRecording");v(this,"enableRecordingNetworkContents");v(this,"xhrNetworkContents");v(this,"fetchNetworkContents");v(this,"disableRecordingWebSocketContents");v(this,"webSocketNetworkContents");v(this,"webSocketEventContents");v(this,"tracingOrigins");v(this,"networkHeadersToRedact");v(this,"networkBodyKeysToRedact");v(this,"networkBodyKeysToRecord");v(this,"networkHeaderKeysToRecord");v(this,"lastNetworkRequestTimestamp");v(this,"urlBlocklist");v(this,"highlightEndpoints");v(this,"requestResponseSanitizer");var t,n;this.options=e,this.disableConsoleRecording=!!e.disableConsoleRecording,this.reportConsoleErrors=(t=e.reportConsoleErrors)!=null?t:!1,this.enablePromisePatch=(n=e.enablePromisePatch)!=null?n:!1,this.consoleMethodsToRecord=e.consoleMethodsToRecord||[...Rl],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const e=this;this.disableConsoleRecording||this.listeners.push(Sp(t=>{var n,i,s;if(this.reportConsoleErrors&&(t.type==="Error"||t.type==="error")&&t.value&&t.trace){const o=ht(t.value);if(Gl.includes(o)||Vl.some(l=>o.includes(l)))return;e.errors.push({event:o,type:"console.error",url:window.location.href,source:(n=t.trace[0])!=null&&n.fileName?t.trace[0].fileName:"",lineNumber:(i=t.trace[0])!=null&&i.lineNumber?t.trace[0].lineNumber:0,columnNumber:(s=t.trace[0])!=null&&s.columnNumber?t.trace[0].columnNumber:0,stackTrace:t.trace,timestamp:new Date().toISOString(),id:Ps()})}e.messages.push(t)},P(S({},vp),{level:this.consoleMethodsToRecord}))),this.listeners.push(Tp(t=>{Gl.includes(t.event)||Vl.some(n=>t.event.includes(n))||e.errors.push(t)},{enablePromisePatch:this.enablePromisePatch})),this.listeners.push(H1),Ut.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(e=>e()),this.listeners=[]}static setupNetworkListener(e,t){var s,o,l,a,c,u,d,h,f,m,p,g;const n=(t==null?void 0:t.backendUrl)||void 0||"https://pub.highlight.io",i=t.otlpEndpoint||"https://otel.highlight.io";e.highlightEndpoints=[n,`${i}/v1/traces`,`${i}/v1/logs`,`${i}/v1/metrics`],e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],e.networkHeadersToRedact=[],e.urlBlocklist=[],e.tracingOrigins=t.tracingOrigins||[],(t==null?void 0:t.disableNetworkRecording)!==void 0?(e.disableNetworkRecording=t==null?void 0:t.disableNetworkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[],e.networkBodyKeysToRecord=[]):typeof(t==null?void 0:t.networkRecording)=="boolean"?(e.disableNetworkRecording=!t.networkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[]):(((s=t.networkRecording)==null?void 0:s.enabled)!==void 0?e.disableNetworkRecording=!t.networkRecording.enabled:e.disableNetworkRecording=!1,e.enableRecordingNetworkContents=((o=t.networkRecording)==null?void 0:o.recordHeadersAndBody)||!1,e.disableRecordingWebSocketContents=((l=t.networkRecording)==null?void 0:l.disableWebSocketEventRecordings)||!1,e.networkHeadersToRedact=((c=(a=t.networkRecording)==null?void 0:a.networkHeadersToRedact)==null?void 0:c.map(y=>y.toLowerCase()))||[],e.networkBodyKeysToRedact=((d=(u=t.networkRecording)==null?void 0:u.networkBodyKeysToRedact)==null?void 0:d.map(y=>y.toLowerCase()))||[],e.urlBlocklist=((f=(h=t.networkRecording)==null?void 0:h.urlBlocklist)==null?void 0:f.map(y=>y.toLowerCase()))||[],e.urlBlocklist=[...e.urlBlocklist,...sg],e.requestResponseSanitizer=(m=t.networkRecording)==null?void 0:m.requestResponseSanitizer,e.networkHeaderKeysToRecord=(p=t.networkRecording)==null?void 0:p.headerKeysToRecord,e.networkHeaderKeysToRecord&&(e.networkHeadersToRedact=[],e.networkHeaderKeysToRecord=e.networkHeaderKeysToRecord.map(y=>y.toLocaleLowerCase())),e.networkBodyKeysToRecord=(g=t.networkRecording)==null?void 0:g.bodyKeysToRecord,e.networkBodyKeysToRecord&&(e.networkBodyKeysToRedact=[],e.networkBodyKeysToRecord=e.networkBodyKeysToRecord.map(y=>y.toLocaleLowerCase()))),!e.disableNetworkRecording&&e.enableRecordingNetworkContents&&e.listeners.push(j1({xhrCallback:y=>{e.xhrNetworkContents.push(y)},fetchCallback:y=>{e.fetchNetworkContents.push(y)},webSocketRequestCallback:y=>{e.webSocketNetworkContents&&e.webSocketNetworkContents.push(y)},webSocketEventCallback:y=>{e.webSocketEventContents.push(y)},disableWebSocketRecording:e.disableRecordingWebSocketContents,bodyKeysToRedact:e.networkBodyKeysToRedact,highlightEndpoints:e.highlightEndpoints,tracingOrigins:e.tracingOrigins,urlBlocklist:e.urlBlocklist,bodyKeysToRecord:e.networkBodyKeysToRecord}))}static getRecordedNetworkResources(e,t){var s,o;let n=[],i=[];if(!e.disableNetworkRecording){const l=((s=window==null?void 0:window.performance)==null?void 0:s.timeOrigin)||0;n=performance.getEntriesByType("resource");const a=(t-l)*2;if(n=n.filter(c=>c.responseEnd<e.lastNetworkRequestTimestamp?!1:fo(c.name,e.highlightEndpoints)).map(c=>P(S({},c.toJSON()),{offsetStartTime:c.startTime-a,offsetResponseEnd:c.responseEnd-a,offsetFetchStart:c.fetchStart-a})),e.lastNetworkRequestTimestamp=((o=n.at(-1))==null?void 0:o.responseEnd)||e.lastNetworkRequestTimestamp,e.enableRecordingNetworkContents){const c={headersToRedact:e.networkHeadersToRedact,headersToRecord:e.networkHeaderKeysToRecord,requestResponseSanitizer:e.requestResponseSanitizer};n=lg(n,e.xhrNetworkContents,"xmlhttprequest",c),n=lg(n,e.fetchNetworkContents,"fetch",c)}}return e.disableRecordingWebSocketContents||(i=e.webSocketNetworkContents||[]),[...n,...i]}static getRecordedWebSocketEvents(e){let t=[];return!e.disableNetworkRecording&&!e.disableRecordingWebSocketContents&&(t=e.webSocketEventContents),t}static clearRecordedNetworkResources(e){e.disableNetworkRecording||(e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],performance.clearResourceTimings())}}const Wy=r=>{r(window.location.href);const e=history.pushState;history.pushState=(s=>function(){var l=s.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),l})(history.pushState);const t=history.replaceState;history.replaceState=(s=>function(){var l=s.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),l})(history.replaceState);const n=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",n);const i=function(){r(window.location.href)};return window.addEventListener("locationchange",i),()=>{window.removeEventListener("popstate",n),window.removeEventListener("locationchange",i),history.pushState=e,history.replaceState=t}},Ay=r=>{switch(r){case"strict":return[!0,void 0];case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}};let ot,yu;function Py(r,e){return r.nodeType,Node.ELEMENT_NODE,Tu(r);return Q1(r,e)}function bu(r){if(r.id.length)return`#${r.id}`;if(r.classList.length){let e=[];for(const t of r.classList)e.push(`.${t}`);return`${r.nodeName.toLowerCase()}${e.join(",")}`}return r.nodeName.toLowerCase()}function Q1(r,e){if(r.tagName.toLowerCase()==="html")return"html";try{const t={root:document.body,idName:i=>!0,className:i=>!0,tagName:i=>!0,attr:(i,s)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:50,maxNumberOfTries:1e3,optimized:!0};ot=S(S({},t),e),yu=$1(ot.root,t);let n=vu(r,0,()=>vu(r,1,()=>vu(r,2)));if(n){if(ot.optimized){const i=Yy(Jy(n,r));i.length>0&&(n=i[0])}return Co(n)}else return Tu(r)}catch(t){return Tu(r)}}function $1(r,e){return r.nodeType===Node.DOCUMENT_NODE?r:r===e.root?r.ownerDocument:r}function vu(r,e,t){let n=null,i=[],s=r,o=0;for(;s&&s!==ot.root.parentElement;){let l=Lo(q1(s))||Lo(...eX(s))||Lo(...tX(s))||Lo(rX(s))||[nX()];const a=iX(s);if(e===0)a&&(l=l.concat(l.filter(_u).map(c=>Su(c,a))));else if(e===1)l=l.slice(0,1),a&&(l=l.concat(l.filter(_u).map(c=>Su(c,a))));else if(e===2){const[c]=l=l.slice(0,1);a&&_u(c)&&(l=[Su(c,a)])}for(let c of l)c.level=o;if(i.push(l),i.length>=ot.seedMinLength&&(n=My(i,t),n))break;s=s.parentElement,o++}return n||(n=My(i,t)),n}function My(r,e){const t=Yy(Dy(r));if(t.length>ot.threshold)return e?e():null;for(let n of t)if(Fy(n))return n;return null}function Co(r){let e=r[0],t=e.name;for(let n=1;n<r.length;n++){const i=r[n].level||0;e.level===i-1?t=`${r[n].name} > ${t}`:t=`${r[n].name} ${t}`,e=r[n]}return t}function Uy(r){return r.map(e=>e.penalty).reduce((e,t)=>e+t,0)}function Fy(r){switch(yu.querySelectorAll(Co(r)).length){case 0:return!0;case 1:return!0;default:return!1}}function q1(r){const e=r.getAttribute("id");return e&&ot.idName(e)?{name:"#"+Oo(e,{isIdentifier:!0}),penalty:0}:null}function eX(r){return Array.from(r.attributes).filter(t=>ot.attr(t.name,t.value)).map(t=>({name:"["+Oo(t.name,{isIdentifier:!0})+'="'+Oo(t.value)+'"]',penalty:.5}))}function tX(r){return Array.from(r.classList).filter(ot.className).map(t=>({name:"."+Oo(t,{isIdentifier:!0}),penalty:1}))}function rX(r){const e=r.tagName.toLowerCase();return ot.tagName(e)?{name:e,penalty:2}:null}function nX(){return{name:"*",penalty:3}}function iX(r){const e=r.parentNode;if(!e)return null;let t=e.firstChild;if(!t)return null;let n=0;for(;t&&(t.nodeType===Node.ELEMENT_NODE&&n++,t!==r);)t=t.nextSibling;return n}function Su(r,e){return{name:r.name+`:nth-child(${e})`,penalty:r.penalty+1}}function _u(r){return r.name!=="html"&&!r.name.startsWith("#")}function Lo(...r){const e=r.filter(sX);return e.length>0?e:null}function sX(r){return r!=null}function*Dy(r,e=[]){if(r.length>0)for(let t of r[0])yield*ju(Dy(r.slice(1,r.length),e.concat(t)));else yield e}function Yy(r){return Array.from(r).sort((e,t)=>Uy(e)-Uy(t))}function*Jy(r,e,t={counter:0,visited:new Map}){if(r.length>2&&r.length>ot.optimizedMinLength)for(let n=1;n<r.length-1;n++){if(t.counter>ot.maxNumberOfTries)return;t.counter+=1;const i=[...r];i.splice(n,1);const s=Co(i);if(t.visited.has(s))return;Fy(i)&&oX(i,e)&&(yield i,t.visited.set(s,!0),yield*ju(Jy(i,e,t)))}}function oX(r,e){return yu.querySelector(Co(r))===e}const aX=/[ -,\.\/:-@\[-\^`\{-~]/,lX=/[ -,\.\/:-@\[\]\^`\{-~]/,cX=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,uX={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function Oo(r,e={}){const t=S(S({},uX),e);t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");const n=t.quotes=="double"?'"':"'",i=t.isIdentifier,s=r.charAt(0);let o="",l=0;const a=r.length;for(;l<a;){const c=r.charAt(l++);let u=c.charCodeAt(0),d;if(u<32||u>126){if(u>=55296&&u<=56319&&l<a){const h=r.charCodeAt(l++);(h&64512)==56320?u=((u&1023)<<10)+(h&1023)+65536:l--}d="\\"+u.toString(16).toUpperCase()+" "}else t.escapeEverything?aX.test(c)?d="\\"+c:d="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?d="\\"+u.toString(16).toUpperCase()+" ":c=="\\"||!i&&(c=='"'&&n==c||c=="'"&&n==c)||i&&lX.test(c)?d="\\"+c:d=c;o+=d}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(s)&&(o="\\3"+s+" "+o.slice(1))),o=o.replace(cX,function(c,u,d){return u&&u.length%2?c:(u||"")+d}),!i&&t.wrap?n+o+n:o}const Tu=r=>{let e="";const t=r.getAttribute("class"),n=r.getAttribute("id");return n&&(e=e.concat(Hy(n,"#"))),t&&(e=e.concat(Hy(t,"."))),e===""&&(e=e.concat(r.tagName.toLowerCase())),e},Hy=(r,e)=>`${e}${r.trim().split(" ").join(e)}`,By=r=>{const e=t=>{if(t.target){const n=t.target,i=Py(n);r(i,t)}};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},Ky=r=>{const e=t=>{if(t.target){const n=Py(t.target);r(n)}};return window.addEventListener("focusin",e),()=>window.removeEventListener("focusin",e)},dX=30,hX=()=>new Promise(r=>requestAnimationFrame(e=>requestAnimationFrame(t=>r(t-e)))),fX=()=>J(this,null,function*(){const r=[];for(let e=0;e<dX;e++)r.push(yield hX());return r.reduce((e,t)=>e+t,0)/r.length}),zy=(r,e)=>{let t={},n=16.666666666666668;fX().then(a=>n=a);const i=a=>{var c;t!=null&&t.event||(t={event:a,location:window.location.href,timerStart:(c=window.performance)==null?void 0:c.now()},window.requestAnimationFrame(s))},s=()=>{if(!(t!=null&&t.timerStart))return;const a=window.performance.now()-t.timerStart-n;o(a),t={}},o=a=>{const c=(new Date().getTime()-e)/1e3;r({relativeTimestamp:c,jankAmount:a,querySelector:l(),newLocation:window.location.href!=t.location?window.location.href:void 0})},l=()=>{var a;return(a=t==null?void 0:t.event)!=null&&a.target?bu(t.event.target):""};return window.addEventListener("click",i,!0),window.addEventListener("keydown",i,!0),()=>{window.removeEventListener("keydown",i,!0),window.removeEventListener("click",i,!0)}},jy=r=>{let e,t;if(typeof document.hidden!="undefined"?(e="hidden",t="visibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",t="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",t="webkitvisibilitychange"),t===void 0)return()=>{};if(e===void 0)return()=>{};const n=e,i=()=>{const o=document[n];r(!!o)};document.addEventListener(t,i);const s=t;return()=>document.removeEventListener(s,i)},Qy=typeof window!="undefined"&&"performance"in window&&"memory"in performance?performance:{memory:{}},$y=(r,e)=>{let t=0,n=0;const i=()=>{const u=(new Date().getTime()-e)/1e3,d=Qy.memory.jsHeapSizeLimit||0,h=Qy.memory.usedJSHeapSize||0;r({jsHeapSizeLimit:d,usedJSHeapSize:h,relativeTimestamp:u,fps:t})};i();let s;s=setInterval(()=>{i()},1e3);let o=0,l=Date.now();const a=function(){var c=Date.now();o++,c>1e3+l&&(t=Math.round(o*1e3/(c-l)),o=0,l=c),n=requestAnimationFrame(a)};return a(),()=>{clearInterval(s),cancelAnimationFrame(n)}},qy=r=>{r(window.location.href);var e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(s){setTimeout(()=>{var l;var o;try{o=JSON.parse((l=s==null?void 0:s.toString())!=null?l:"")}catch(a){return}(o.type==="track"||o.type==="identify")&&Eu(o)&&r(o)},100),e.call(this,s)};const t=s=>{if(s.key==="ajs_user_id"||s.key==="ajs_anonymous_id"||s.key==="ajs_user_traits"){const{userId:o,userTraits:l}=eb();if(o){let a={};l&&(a=JSON.parse(l));const c={type:"identify",userId:o.toString(),traits:a};Eu(c)&&r(c)}}},{userId:n,userTraits:i}=eb();if(n){let s={};i&&(s=JSON.parse(i));const o={type:"identify",userId:n.toString(),traits:s};Eu(o)&&r(o)}return window.addEventListener("storage",t),HN(({keyName:s})=>{t({key:s})}),()=>{window.removeEventListener("storage",t),XMLHttpRequest.prototype.send=e}},eb=()=>{const r=Ve("ajs_user_id"),e=Ve("ajs_user_traits"),t=Ve("ajs_anonymous_id");return{userId:r,userTraits:e,anonymousId:t}},Eu=r=>{if(!r)return!1;let e="";try{e=JSON.stringify(r)}catch(i){return!1}const t=pX(e),n=Ve(Se.SEGMENT_LAST_SENT_HASH_KEY);return n===void 0||t!==n?(nt(Se.SEGMENT_LAST_SENT_HASH_KEY,t),!0):!1},pX=r=>{var e=0,t=r.length,n=0;if(t>0)for(;n<t;)e=(e<<5)-e+r.charCodeAt(n++)|0;return e.toString()},tb=(r,e)=>{const t=mX(r);let n=[];const i=!1,s=!0;for(let o=0;o<t.length;o++){let l=t[o].split("+");n=[],l.length>1&&(n=bX(nb,l)),l=l[l.length-1],l=l==="*"?"*":yX(l),l in Rt||(Rt[l]=[]),Rt[l].push({mods:n,shortcut:t[o],key:t[o],method:e,keyup:i,keydown:s,scope:"all",splitKey:"+"})}vX(document,"keydown",o=>{_X(o)})};let Fe=[];function mX(r){typeof r!="string"&&(r=""),r=r.replace(/\s/g,"");const e=r.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}const Rt={},wu=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1,gX={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":wu?173:189,"=":wu?61:187,";":wu?59:186,"'":222,"[":219,"]":221,"\\":220},rb={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},De={16:!1,18:!1,17:!1,91:!1},nb={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},yX=r=>gX[r.toLowerCase()]||nb[r.toLowerCase()]||r.toUpperCase().charCodeAt(0);function bX(r,e){const t=e.slice(0,e.length-1);for(let n=0;n<t.length;n++)t[n]=r[t[n].toLowerCase()];return t}function vX(r,e,t){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.attachEvent(`on${e}`,()=>{t(window.event)})}function SX(r,e,t){let n;if(e.scope===t||e.scope==="all"){n=e.mods.length>0;for(const i in De)Object.prototype.hasOwnProperty.call(De,i)&&(!De[i]&&e.mods.indexOf(+i)>-1||De[i]&&e.mods.indexOf(+i)===-1)&&(n=!1);(e.mods.length===0&&!De[16]&&!De[18]&&!De[17]&&!De[91]||n||e.shortcut==="*")&&e.method(r,e)===!1&&(r.preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation&&r.stopPropagation(),r.cancelBubble&&(r.cancelBubble=!0))}}function _X(r){const e=Rt["*"];let t=r.keyCode||r.which||r.charCode;if((t===93||t===224)&&(t=91),Fe.indexOf(t)===-1&&t!==229&&Fe.push(t),["ctrlKey","altKey","shiftKey","metaKey"].forEach(n=>{const i=rb[n];r[n]&&Fe.indexOf(i)===-1?Fe.push(i):!r[n]&&Fe.indexOf(i)>-1?Fe.splice(Fe.indexOf(i),1):n==="metaKey"&&r[n]&&Fe.length===3&&(r.ctrlKey||r.shiftKey||r.altKey||(Fe=Fe.slice(Fe.indexOf(i))))}),!(t in De&&(De[t]=!0,!e))){for(const n in De)Object.prototype.hasOwnProperty.call(De,n)&&(De[n]=r[rb[n]]);if(r.getModifierState&&!(r.altKey&&!r.ctrlKey)&&r.getModifierState("AltGraph")&&(Fe.indexOf(17)===-1&&Fe.push(17),Fe.indexOf(18)===-1&&Fe.push(18),De[17]=!0,De[18]=!0),t in Rt){for(let n=0;n<Rt[t].length;n++)if((r.type==="keydown"&&Rt[t][n].keydown||r.type==="keyup"&&Rt[t][n].keyup)&&Rt[t][n].key){const i=Rt[t][n];SX(r,i,"all")}}}}const Ru=r=>{let e;const n=()=>{clearTimeout(e),e=setTimeout(()=>{var i,s;r({height:window.innerHeight,width:window.innerWidth,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,orientation:(s=(i=window.screen.orientation)==null?void 0:i.angle)!=null?s:0})},500)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)};var nr,gi,ib,Zo,Iu,sb=-1,Cr=function(r){addEventListener("pageshow",function(e){e.persisted&&(sb=e.timeStamp,r(e))},!0)},Cu=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},No=function(){var r=Cu();return r&&r.activationStart||0},at=function(r,e){var t=Cu(),n="navigate";return sb>=0?n="back-forward-cache":t&&(document.prerendering||No()>0?n="prerender":document.wasDiscarded?n="restore":t.type&&(n=t.type.replace(/_/g,"-"))),{name:r,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},an=function(r,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(r)){var n=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return n.observe(Object.assign({type:r,buffered:!0},t||{})),n}}catch(i){}},lt=function(r,e,t,n){var i,s;return function(o){e.value>=0&&(o||n)&&((s=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=s,e.rating=function(l,a){return l>a[1]?"poor":l>a[0]?"needs-improvement":"good"}(e.value,t),r(e))}},Lu=function(r){requestAnimationFrame(function(){return requestAnimationFrame(function(){return r()})})},Go=function(r){var e=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||r(t)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Ou=function(r){var e=!1;return function(t){e||(r(t),e=!0)}},ln=-1,ob=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Vo=function(r){document.visibilityState==="hidden"&&ln>-1&&(ln=r.type==="visibilitychange"?r.timeStamp:0,TX())},ab=function(){addEventListener("visibilitychange",Vo,!0),addEventListener("prerenderingchange",Vo,!0)},TX=function(){removeEventListener("visibilitychange",Vo,!0),removeEventListener("prerenderingchange",Vo,!0)},Zu=function(){return ln<0&&(ln=ob(),ab(),Cr(function(){setTimeout(function(){ln=ob(),ab()},0)})),{get firstHiddenTime(){return ln}}},yi=function(r){document.prerendering?addEventListener("prerenderingchange",function(){return r()},!0):r()},lb=[1800,3e3],cb=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=at("FCP"),s=an("paint",function(o){o.forEach(function(l){l.name==="first-contentful-paint"&&(s.disconnect(),l.startTime<n.firstHiddenTime&&(i.value=Math.max(l.startTime-No(),0),i.entries.push(l),t(!0)))})});s&&(t=lt(r,i,lb,e.reportAllChanges),Cr(function(o){i=at("FCP"),t=lt(r,i,lb,e.reportAllChanges),Lu(function(){i.value=performance.now()-o.timeStamp,t(!0)})}))})},ub=[.1,.25],EX=function(r,e){e=e||{},cb(Ou(function(){var t,n=at("CLS",0),i=0,s=[],o=function(a){a.forEach(function(c){if(!c.hadRecentInput){var u=s[0],d=s[s.length-1];i&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>n.value&&(n.value=i,n.entries=s,t())},l=an("layout-shift",o);l&&(t=lt(r,n,ub,e.reportAllChanges),Go(function(){o(l.takeRecords()),t(!0)}),Cr(function(){i=0,n=at("CLS",0),t=lt(r,n,ub,e.reportAllChanges),Lu(function(){return t()})}),setTimeout(t,0))}))},bi={passive:!0,capture:!0},wX=new Date,db=function(r,e){nr||(nr=e,gi=r,ib=new Date,fb(removeEventListener),hb())},hb=function(){if(gi>=0&&gi<ib-wX){var r={entryType:"first-input",name:nr.type,target:nr.target,cancelable:nr.cancelable,startTime:nr.timeStamp,processingStart:nr.timeStamp+gi};Zo.forEach(function(e){e(r)}),Zo=[]}},RX=function(r){if(r.cancelable){var e=(r.timeStamp>1e12?new Date:performance.now())-r.timeStamp;r.type=="pointerdown"?function(t,n){var i=function(){db(t,n),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,bi),removeEventListener("pointercancel",s,bi)};addEventListener("pointerup",i,bi),addEventListener("pointercancel",s,bi)}(e,r):db(e,r)}},fb=function(r){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return r(e,RX,bi)})},pb=[100,300],IX=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=at("FID"),s=function(a){a.startTime<n.firstHiddenTime&&(i.value=a.processingStart-a.startTime,i.entries.push(a),t(!0))},o=function(a){a.forEach(s)},l=an("first-input",o);t=lt(r,i,pb,e.reportAllChanges),l&&Go(Ou(function(){o(l.takeRecords()),l.disconnect()})),l&&Cr(function(){var a;i=at("FID"),t=lt(r,i,pb,e.reportAllChanges),Zo=[],gi=-1,nr=null,fb(addEventListener),a=s,Zo.push(a),hb()})})},mb=0,Nu=1/0,xo=0,CX=function(r){r.forEach(function(e){e.interactionId&&(Nu=Math.min(Nu,e.interactionId),xo=Math.max(xo,e.interactionId),mb=xo?(xo-Nu)/7+1:0)})},gb=function(){return Iu?mb:performance.interactionCount||0},LX=function(){"interactionCount"in performance||Iu||(Iu=an("event",CX,{type:"event",buffered:!0,durationThreshold:0}))},yb=[200,500],bb=0,vb=function(){return gb()-bb},It=[],Gu={},Sb=function(r){var e=It[It.length-1],t=Gu[r.interactionId];if(t||It.length<10||r.duration>e.latency){if(t)t.entries.push(r),t.latency=Math.max(t.latency,r.duration);else{var n={id:r.interactionId,latency:r.duration,entries:[r]};Gu[n.id]=n,It.push(n)}It.sort(function(i,s){return s.latency-i.latency}),It.splice(10).forEach(function(i){delete Gu[i.id]})}},OX=function(r,e){e=e||{},yi(function(){var t;LX();var n,i=at("INP"),s=function(l){l.forEach(function(u){u.interactionId&&Sb(u),u.entryType==="first-input"&&!It.some(function(d){return d.entries.some(function(h){return u.duration===h.duration&&u.startTime===h.startTime})})&&Sb(u)});var a,c=(a=Math.min(It.length-1,Math.floor(vb()/50)),It[a]);c&&c.latency!==i.value&&(i.value=c.latency,i.entries=c.entries,n())},o=an("event",s,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});n=lt(r,i,yb,e.reportAllChanges),o&&("interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),Go(function(){s(o.takeRecords()),i.value<0&&vb()>0&&(i.value=0,i.entries=[]),n(!0)}),Cr(function(){It=[],bb=gb(),i=at("INP"),n=lt(r,i,yb,e.reportAllChanges)}))})},_b=[2500,4e3],Vu={},ZX=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=at("LCP"),s=function(a){var c=a[a.length-1];c&&c.startTime<n.firstHiddenTime&&(i.value=Math.max(c.startTime-No(),0),i.entries=[c],t())},o=an("largest-contentful-paint",s);if(o){t=lt(r,i,_b,e.reportAllChanges);var l=Ou(function(){Vu[i.id]||(s(o.takeRecords()),o.disconnect(),Vu[i.id]=!0,t(!0))});["keydown","click"].forEach(function(a){addEventListener(a,function(){return setTimeout(l,0)},!0)}),Go(l),Cr(function(a){i=at("LCP"),t=lt(r,i,_b,e.reportAllChanges),Lu(function(){i.value=performance.now()-a.timeStamp,Vu[i.id]=!0,t(!0)})})}})},Tb=[800,1800],NX=function r(e){document.prerendering?yi(function(){return r(e)}):document.readyState!=="complete"?addEventListener("load",function(){return r(e)},!0):setTimeout(e,0)},GX=function(r,e){e=e||{};var t=at("TTFB"),n=lt(r,t,Tb,e.reportAllChanges);NX(function(){var i=Cu();if(i){var s=i.responseStart;if(s<=0||s>performance.now())return;t.value=Math.max(s-No(),0),t.entries=[i],n(!0),Cr(function(){t=at("TTFB",0),(n=lt(r,t,Tb,e.reportAllChanges))(!0)})}})};const Eb=r=>(EX(r),cb(r),IX(r),ZX(r),GX(r),OX(r),()=>{}),cn=typeof navigator!="undefined"&&"connection"in navigator?navigator.connection:{},wb=(r,e)=>{const t=()=>{const s=(new Date().getTime()-e)/1e3;r({relativeTimestamp:s,downlink:cn.downlink,downlinkMax:cn.downlinkMax,effectiveType:cn.effectiveType,rtt:cn.rtt,saveData:cn.saveData,type:cn.type})};t();let n;return n=setInterval(()=>{t()},1e3),()=>{clearInterval(n)}},Xo="iframe parent ready",ko="iframe ok",vi="highlightLogs",VX=r=>{let e=Ve(vi)||"";e=e+"["+new Date().getTime()+"] "+r+`
`,nt(vi,e)},Rb=()=>Ve(vi)||"",Ib=r=>{if(!r)return;let e=Ve(vi)||"";e&&(e.startsWith(r)?(e=e.slice(r.length),nt(vi,e)):VX("Unable to clear logs "+r.replace(`
`," ")+" from "+e.replace(`
`," ")))},Cb=()=>{if(!("performance"in window&&"memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const r=window.performance;return{getDeviceDetails:()=>({deviceMemory:xX(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>{const n=xu(r.memory.jsHeapSizeLimit),i=xu(r.memory.totalJSHeapSize),s=xu(r.memory.usedJSHeapSize);return{jsHeapSizeLimit:n,totalJSHeapSize:i,usedJSHeapSize:s}}}},xu=r=>r/Math.pow(1e3,2),xX=r=>1024*r;var Lb={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */(function(r){(function(){var e;function t(n,i){var s=this instanceof t?this:e;if(s.reset(i),typeof n=="string"&&n.length>0&&s.hash(n),s!==this)return s}t.prototype.hash=function(n){var i,s,o,l,a;switch(a=n.length,this.len+=a,s=this.k1,o=0,this.rem){case 0:s^=a>o?n.charCodeAt(o++)&65535:0;case 1:s^=a>o?(n.charCodeAt(o++)&65535)<<8:0;case 2:s^=a>o?(n.charCodeAt(o++)&65535)<<16:0;case 3:s^=a>o?(n.charCodeAt(o)&255)<<24:0,s^=a>o?(n.charCodeAt(o++)&65280)>>8:0}if(this.rem=a+this.rem&3,a-=this.rem,a>0){for(i=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,i^=s,i=i<<13|i>>>19,i=i*5+3864292196&4294967295,!(o>=a);)s=n.charCodeAt(o++)&65535^(n.charCodeAt(o++)&65535)<<8^(n.charCodeAt(o++)&65535)<<16,l=n.charCodeAt(o++),s^=(l&255)<<24^(l&65280)>>8;switch(s=0,this.rem){case 3:s^=(n.charCodeAt(o+2)&65535)<<16;case 2:s^=(n.charCodeAt(o+1)&65535)<<8;case 1:s^=n.charCodeAt(o)&65535}this.h1=i}return this.k1=s,this},t.prototype.result=function(){var n,i;return n=this.k1,i=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,i^=n),i^=this.len,i^=i>>>16,i=i*51819+(i&65535)*2246770688&4294967295,i^=i>>>13,i=i*44597+(i&65535)*3266445312&4294967295,i^=i>>>16,i>>>0},t.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},e=new t,r.exports=t})()})(Lb);var XX=Lb.exports;const kX=Gi(XX),Xu=28,un="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",WX=2246822507,ct=r=>{var t;var e="";if(r){const n=kX(r).result();for(let i=0;i<Xu;i++){const o=((n^i*WX)>>>0)%un.length;e+=un.charAt(o)}}else{const n=typeof window!="undefined"&&((t=window.crypto)==null?void 0:t.getRandomValues),i=new Uint32Array(Xu);n&&window.crypto.getRandomValues(i);for(let s=0;s<Xu;s++)n?e+=un.charAt(i[s]%un.length):e+=un.charAt(Math.floor(Math.random()*un.length))}return e};var Qe=Uint8Array,$e=Uint16Array,ku=Int32Array,Wu=new Qe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Au=new Qe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ob=new Qe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zb=function(r,e){for(var t=new $e(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new ku(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},Nb=Zb(Wu,2),AX=Nb.b,Pu=Nb.r;AX[28]=258,Pu[258]=28;for(var PX=Zb(Au,0),Gb=PX.r,Mu=new $e(32768),me=0;me<32768;++me){var ir=(me&43690)>>1|(me&21845)<<1;ir=(ir&52428)>>2|(ir&13107)<<2,ir=(ir&61680)>>4|(ir&3855)<<4,Mu[me]=((ir&65280)>>8|(ir&255)<<8)>>1}for(var Si=function(r,e,t){for(var n=r.length,i=0,s=new $e(e);i<n;++i)r[i]&&++s[r[i]-1];var o=new $e(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(t){l=new $e(1<<e);var a=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=e-r[i],d=o[r[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)l[Mu[d]>>a]=c}else for(l=new $e(n),i=0;i<n;++i)r[i]&&(l[i]=Mu[o[r[i]-1]++]>>15-r[i]);return l},Lr=new Qe(288),me=0;me<144;++me)Lr[me]=8;for(var me=144;me<256;++me)Lr[me]=9;for(var me=256;me<280;++me)Lr[me]=7;for(var me=280;me<288;++me)Lr[me]=8;for(var Wo=new Qe(32),me=0;me<32;++me)Wo[me]=5;var MX=Si(Lr,9,0),UX=Si(Wo,5,0),Vb=function(r){return(r+7)/8|0},xb=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Qe(r.subarray(e,t))},Ft=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},_i=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Uu=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:Ab,l:0};if(i==1){var o=new Qe(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(R,N){return R.f-N.f}),t.push({s:-1,f:25001});var l=t[0],a=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:l.f+a.f,l,r:a};u!=i-1;)l=t[t[c].f<t[d].f?c++:d++],a=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:l.f+a.f,l,r:a};for(var h=s[0].s,n=1;n<i;++n)s[n].s>h&&(h=s[n].s);var f=new $e(h+1),m=Fu(t[u-1],f,0);if(m>e){var n=0,p=0,g=m-e,y=1<<g;for(s.sort(function(N,V){return f[V.s]-f[N.s]||N.f-V.f});n<i;++n){var T=s[n].s;if(f[T]>e)p+=y-(1<<m-f[T]),f[T]=e;else break}for(p>>=g;p>0;){var E=s[n].s;f[E]<e?p-=1<<e-f[E]++-1:++n}for(;n>=0&&p;--n){var C=s[n].s;f[C]==e&&(--f[C],++p)}m=e}return{t:new Qe(f),l:m}},Fu=function(r,e,t){return r.s==-1?Math.max(Fu(r.l,e,t+1),Fu(r.r,e,t+1)):e[r.s]=t},Xb=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new $e(++e),n=0,i=r[0],s=1,o=function(a){t[n++]=a},l=1;l<=e;++l)if(r[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=r[l]}return{c:t.subarray(0,n),n:e}},Ti=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},kb=function(r,e,t){var n=t.length,i=Vb(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},Wb=function(r,e,t,n,i,s,o,l,a,c,u){Ft(e,u++,t),++i[256];for(var d=Uu(i,15),h=d.t,f=d.l,m=Uu(s,15),p=m.t,g=m.l,y=Xb(h),T=y.c,E=y.n,C=Xb(p),R=C.c,N=C.n,V=new $e(19),Z=0;Z<T.length;++Z)++V[T[Z]&31];for(var Z=0;Z<R.length;++Z)++V[R[Z]&31];for(var w=Uu(V,7),L=w.t,k=w.l,A=19;A>4&&!L[Ob[A-1]];--A);var $=c+5<<3,b=Ti(i,Lr)+Ti(s,Wo)+o,_=Ti(i,h)+Ti(s,p)+o+14+3*A+Ti(V,L)+2*V[16]+3*V[17]+7*V[18];if(a>=0&&$<=b&&$<=_)return kb(e,u,r.subarray(a,a+c));var x,U,D,M;if(Ft(e,u,1+(_<b)),u+=2,_<b){x=Si(h,f,0),U=h,D=Si(p,g,0),M=p;var Y=Si(L,k,0);Ft(e,u,E-257),Ft(e,u+5,N-1),Ft(e,u+10,A-4),u+=14;for(var Z=0;Z<A;++Z)Ft(e,u+3*Z,L[Ob[Z]]);u+=3*A;for(var ne=[T,R],Le=0;Le<2;++Le)for(var Je=ne[Le],Z=0;Z<Je.length;++Z){var ut=Je[Z]&31;Ft(e,u,Y[ut]),u+=L[ut],ut>15&&(Ft(e,u,Je[Z]>>5&127),u+=Je[Z]>>12)}}else x=MX,U=Lr,D=UX,M=Wo;for(var Z=0;Z<l;++Z){var Ie=n[Z];if(Ie>255){var ut=Ie>>18&31;_i(e,u,x[ut+257]),u+=U[ut+257],ut>7&&(Ft(e,u,Ie>>23&31),u+=Wu[ut]);var yt=Ie&31;_i(e,u,D[yt]),u+=M[yt],yt>3&&(_i(e,u,Ie>>5&8191),u+=Au[yt])}else _i(e,u,x[Ie]),u+=U[Ie]}return _i(e,u,x[256]),u+U[256]},FX=new ku([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ab=new Qe(0),DX=function(r,e,t,n,i,s){var o=s.z||r.length,l=new Qe(n+o+5*(1+Math.ceil(o/7e3))+i),a=l.subarray(n,l.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(a[0]=s.r>>3);for(var d=FX[e-1],h=d>>13,f=d&8191,m=(1<<t)-1,p=s.p||new $e(32768),g=s.h||new $e(m+1),y=Math.ceil(t/3),T=2*y,E=function(sr){return(r[sr]^r[sr+1]<<y^r[sr+2]<<T)&m},C=new ku(25e3),R=new $e(288),N=new $e(32),V=0,Z=0,w=s.i||0,L=0,k=s.w||0,A=0;w+2<o;++w){var $=E(w),b=w&32767,_=g[$];if(p[b]=_,g[$]=b,k<=w){var x=o-w;if((V>7e3||L>24576)&&(x>423||!c)){u=Wb(r,a,0,C,R,N,Z,L,A,w-A,u),L=V=Z=0,A=w;for(var U=0;U<286;++U)R[U]=0;for(var U=0;U<30;++U)N[U]=0}var D=2,M=0,Y=f,ne=b-_&32767;if(x>2&&$==E(w-ne))for(var Le=Math.min(h,x)-1,Je=Math.min(32767,w),ut=Math.min(258,x);ne<=Je&&--Y&&b!=_;){if(r[w+D]==r[w+D-ne]){for(var Ie=0;Ie<ut&&r[w+Ie]==r[w+Ie-ne];++Ie);if(Ie>D){if(D=Ie,M=ne,Ie>Le)break;for(var yt=Math.min(ne,Ie-2),Or=0,U=0;U<yt;++U){var Dt=w-ne+U&32767,Ii=p[Dt],dn=Dt-Ii&32767;dn>Or&&(Or=dn,_=Dt)}}}b=_,_=p[b],ne+=b-_&32767}if(M){C[L++]=268435456|Pu[D]<<18|Gb[M];var Ci=Pu[D]&31,hn=Gb[M]&31;Z+=Wu[Ci]+Au[hn],++R[257+Ci],++N[hn],k=w+D,++V}else C[L++]=r[w],++R[r[w]]}}for(w=Math.max(w,k);w<o;++w)C[L++]=r[w],++R[r[w]];u=Wb(r,a,c,C,R,N,Z,L,A,w-A,u),c||(s.r=u&7|a[u/8|0]<<3,u-=7,s.h=g,s.p=p,s.i=w,s.w=k)}else{for(var w=s.w||0;w<o+c;w+=65535){var fn=w+65535;fn>=o&&(a[u/8|0]=c,fn=o),u=kb(a,u+1,r.subarray(w,fn))}s.i=o}return xb(l,0,n+Vb(u)+i)},YX=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),JX=function(){var r=-1;return{p:function(e){for(var t=r,n=0;n<e.length;++n)t=YX[t&255^e[n]]^t>>>8;r=t},d:function(){return~r}}},HX=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Qe(s.length+r.length);o.set(s),o.set(r,s.length),r=o,i.w=s.length}return DX(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},Du=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},BX=function(r,e){var t=e.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=e.level<2?4:e.level==9?2:0,r[9]=3,e.mtime!=0&&Du(r,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){r[3]=8;for(var n=0;n<=t.length;++n)r[n+10]=t.charCodeAt(n)}},KX=function(r){return 10+(r.filename?r.filename.length+1:0)};function zX(r,e){e||(e={});var t=JX(),n=r.length;t.p(r);var i=HX(r,e,KX(e),8),s=i.length;return BX(i,e),Du(i,s-8,t.d()),Du(i,s-4,n),i}var Pb=typeof TextEncoder!="undefined"&&new TextEncoder,jX=typeof TextDecoder!="undefined"&&new TextDecoder;try{jX.decode(Ab,{stream:!0})}catch(r){}function QX(r,e){var t;if(Pb)return Pb.encode(r);for(var n=r.length,i=new Qe(r.length+(r.length>>1)),s=0,o=function(c){i[s++]=c},t=0;t<n;++t){if(s+5>i.length){var l=new Qe(s+8+(n-t<<1));l.set(i),i=l}var a=r.charCodeAt(t);a<128||e?o(a):a<2048?(o(192|a>>6),o(128|a&63)):a>55295&&a<57344?(a=65536+(a&1047552)|r.charCodeAt(++t)&1023,o(240|a>>18),o(128|a>>12&63),o(128|a>>6&63),o(128|a&63)):(o(224|a>>12),o(128|a>>6&63),o(128|a&63))}return xb(i,0,s)}function Mb(r){return J(this,null,function*(){const e=QX(JSON.stringify(r)),t=zX(e),n=yield new Promise(i=>{const s=new FileReader;s.onload=()=>i(s.result),s.readAsDataURL(new Blob([new Uint8Array(t)]))});return{compressedBase64:n.slice(n.indexOf(",")+1),compressedSize:t.length,bufferLength:e.length}})}const Ub="dmFyIFZyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxqcj1PYmplY3QuZGVmaW5lUHJvcGVydGllczt2YXIgcXI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7dmFyICRlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIHRuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbm49T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTt2YXIgZnQ9KEYsUCxNKT0+UCBpbiBGP1ZyKEYsUCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6TX0pOkZbUF09TSxEPShGLFApPT57Zm9yKHZhciBNIGluIFB8fChQPXt9KSl0bi5jYWxsKFAsTSkmJmZ0KEYsTSxQW01dKTtpZigkZSlmb3IodmFyIE0gb2YgJGUoUCkpbm4uY2FsbChQLE0pJiZmdChGLE0sUFtNXSk7cmV0dXJuIEZ9LEJlPShGLFApPT5qcihGLHFyKFApKTt2YXIgdmU9KEYsUCk9Pnt2YXIgTT17fTtmb3IodmFyIFggaW4gRil0bi5jYWxsKEYsWCkmJlAuaW5kZXhPZihYKTwwJiYoTVtYXT1GW1hdKTtpZihGIT1udWxsJiYkZSlmb3IodmFyIFggb2YgJGUoRikpUC5pbmRleE9mKFgpPDAmJm5uLmNhbGwoRixYKSYmKE1bWF09RltYXSk7cmV0dXJuIE19O3ZhciBodD0oRixQLE0pPT5mdChGLHR5cGVvZiBQIT0ic3ltYm9sIj9QKyIiOlAsTSk7dmFyIFE9KEYsUCxNKT0+bmV3IFByb21pc2UoKFgsSWUpPT57dmFyIFVlPXJlPT57dHJ5e29lKE0ubmV4dChyZSkpfWNhdGNoKEVlKXtJZShFZSl9fSxWZT1yZT0+e3RyeXtvZShNLnRocm93KHJlKSl9Y2F0Y2goRWUpe0llKEVlKX19LG9lPXJlPT5yZS5kb25lP1gocmUudmFsdWUpOlByb21pc2UucmVzb2x2ZShyZS52YWx1ZSkudGhlbihVZSxWZSk7b2UoKE09TS5hcHBseShGLFApKS5uZXh0KCkpfSk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEYoZSx0KXtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKG4pe24mJnR5cGVvZiBuIT0ic3RyaW5nIiYmIUFycmF5LmlzQXJyYXkobikmJk9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoaSE9PSJkZWZhdWx0IiYmIShpIGluIGUpKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4saSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSxyLmdldD9yOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuW2ldfX0pfX0pfSksT2JqZWN0LmZyZWV6ZShlKX1jb25zdCBQPUpTT04sTT1lPT5lLnRvVXBwZXJDYXNlKCksWD1lPT57Y29uc3QgdD17fTtyZXR1cm4gZS5mb3JFYWNoKChuLGkpPT57dFtpXT1ufSksdH0sSWU9KGUsdCxuKT0+ZS5kb2N1bWVudD9lOntkb2N1bWVudDplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0sVWU9KGUsdCxuKT0+ZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0sVmU9KGUsdCk9PmUuZG9jdW1lbnRzP2U6e2RvY3VtZW50czplLHJlcXVlc3RIZWFkZXJzOnQsc2lnbmFsOnZvaWQgMH07ZnVuY3Rpb24gb2UoZSx0KXtpZighISFlKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiByZShlKXtyZXR1cm4gdHlwZW9mIGU9PSJvYmplY3QiJiZlIT09bnVsbH1mdW5jdGlvbiBFZShlLHQpe2lmKCEhIWUpdGhyb3cgbmV3IEVycm9yKCJVbmV4cGVjdGVkIGludmFyaWFudCB0cmlnZ2VyZWQuIil9Y29uc3Qgcm49L1xyXG58W1xuXHJdL2c7ZnVuY3Rpb24gamUoZSx0KXtsZXQgbj0wLGk9MTtmb3IoY29uc3QgciBvZiBlLmJvZHkubWF0Y2hBbGwocm4pKXtpZih0eXBlb2Ygci5pbmRleD09Im51bWJlciJ8fEVlKCExKSxyLmluZGV4Pj10KWJyZWFrO249ci5pbmRleCtyWzBdLmxlbmd0aCxpKz0xfXJldHVybntsaW5lOmksY29sdW1uOnQrMS1ufX1mdW5jdGlvbiBzbihlKXtyZXR1cm4gZHQoZS5zb3VyY2UsamUoZS5zb3VyY2UsZS5zdGFydCkpfWZ1bmN0aW9uIGR0KGUsdCl7Y29uc3Qgbj1lLmxvY2F0aW9uT2Zmc2V0LmNvbHVtbi0xLGk9IiIucGFkU3RhcnQobikrZS5ib2R5LHI9dC5saW5lLTEscz1lLmxvY2F0aW9uT2Zmc2V0LmxpbmUtMSxvPXQubGluZStzLGM9dC5saW5lPT09MT9uOjAsZj10LmNvbHVtbitjLGQ9YCR7ZS5uYW1lfToke299OiR7Zn0KYCx1PWkuc3BsaXQoL1xyXG58W1xuXHJdL2cpLHk9dVtyXTtpZih5Lmxlbmd0aD4xMjApe2NvbnN0IHY9TWF0aC5mbG9vcihmLzgwKSxiPWYlODAsbT1bXTtmb3IobGV0IE49MDtOPHkubGVuZ3RoO04rPTgwKW0ucHVzaCh5LnNsaWNlKE4sTis4MCkpO3JldHVybiBkK3B0KFtbYCR7b30gfGAsbVswXV0sLi4ubS5zbGljZSgxLHYrMSkubWFwKE49PlsifCIsTl0pLFsifCIsIl4iLnBhZFN0YXJ0KGIpXSxbInwiLG1bdisxXV1dKX1yZXR1cm4gZCtwdChbW2Ake28tMX0gfGAsdVtyLTFdXSxbYCR7b30gfGAseV0sWyJ8IiwiXiIucGFkU3RhcnQoZildLFtgJHtvKzF9IHxgLHVbcisxXV1dKX1mdW5jdGlvbiBwdChlKXtjb25zdCB0PWUuZmlsdGVyKChbaSxyXSk9PnIhPT12b2lkIDApLG49TWF0aC5tYXgoLi4udC5tYXAoKFtpXSk9PmkubGVuZ3RoKSk7cmV0dXJuIHQubWFwKChbaSxyXSk9PmkucGFkU3RhcnQobikrKHI/IiAiK3I6IiIpKS5qb2luKGAKYCl9ZnVuY3Rpb24gb24oZSl7Y29uc3QgdD1lWzBdO3JldHVybiB0PT1udWxsfHwia2luZCJpbiB0fHwibGVuZ3RoImluIHQ/e25vZGVzOnQsc291cmNlOmVbMV0scG9zaXRpb25zOmVbMl0scGF0aDplWzNdLG9yaWdpbmFsRXJyb3I6ZVs0XSxleHRlbnNpb25zOmVbNV19OnR9Y2xhc3MgcWUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LC4uLm4pe3ZhciBpLHIscztjb25zdHtub2RlczpvLHNvdXJjZTpjLHBvc2l0aW9uczpmLHBhdGg6ZCxvcmlnaW5hbEVycm9yOnUsZXh0ZW5zaW9uczp5fT1vbihuKTtzdXBlcih0KSx0aGlzLm5hbWU9IkdyYXBoUUxFcnJvciIsdGhpcy5wYXRoPWQhPW51bGw/ZDp2b2lkIDAsdGhpcy5vcmlnaW5hbEVycm9yPXUhPW51bGw/dTp2b2lkIDAsdGhpcy5ub2Rlcz1tdChBcnJheS5pc0FycmF5KG8pP286bz9bb106dm9pZCAwKTtjb25zdCB2PW10KChpPXRoaXMubm9kZXMpPT09bnVsbHx8aT09PXZvaWQgMD92b2lkIDA6aS5tYXAobT0+bS5sb2MpLmZpbHRlcihtPT5tIT1udWxsKSk7dGhpcy5zb3VyY2U9YyE9bnVsbD9jOnY9PW51bGx8fChyPXZbMF0pPT09bnVsbHx8cj09PXZvaWQgMD92b2lkIDA6ci5zb3VyY2UsdGhpcy5wb3NpdGlvbnM9ZiE9bnVsbD9mOnY9PW51bGw/dm9pZCAwOnYubWFwKG09Pm0uc3RhcnQpLHRoaXMubG9jYXRpb25zPWYmJmM/Zi5tYXAobT0+amUoYyxtKSk6dj09bnVsbD92b2lkIDA6di5tYXAobT0+amUobS5zb3VyY2UsbS5zdGFydCkpO2NvbnN0IGI9cmUodT09bnVsbD92b2lkIDA6dS5leHRlbnNpb25zKT91PT1udWxsP3ZvaWQgMDp1LmV4dGVuc2lvbnM6dm9pZCAwO3RoaXMuZXh0ZW5zaW9ucz0ocz15IT1udWxsP3k6YikhPT1udWxsJiZzIT09dm9pZCAwP3M6T2JqZWN0LmNyZWF0ZShudWxsKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHttZXNzYWdlOnt3cml0YWJsZTohMCxlbnVtZXJhYmxlOiEwfSxuYW1lOntlbnVtZXJhYmxlOiExfSxub2Rlczp7ZW51bWVyYWJsZTohMX0sc291cmNlOntlbnVtZXJhYmxlOiExfSxwb3NpdGlvbnM6e2VudW1lcmFibGU6ITF9LG9yaWdpbmFsRXJyb3I6e2VudW1lcmFibGU6ITF9fSksdSE9bnVsbCYmdS5zdGFjaz9PYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTp1LnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pOkVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMscWUpOk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzdGFjayIse3ZhbHVlOkVycm9yKCkuc3RhY2ssd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iR3JhcGhRTEVycm9yIn10b1N0cmluZygpe2xldCB0PXRoaXMubWVzc2FnZTtpZih0aGlzLm5vZGVzKWZvcihjb25zdCBuIG9mIHRoaXMubm9kZXMpbi5sb2MmJih0Kz1gCgpgK3NuKG4ubG9jKSk7ZWxzZSBpZih0aGlzLnNvdXJjZSYmdGhpcy5sb2NhdGlvbnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5sb2NhdGlvbnMpdCs9YAoKYCtkdCh0aGlzLnNvdXJjZSxuKTtyZXR1cm4gdH10b0pTT04oKXtjb25zdCB0PXttZXNzYWdlOnRoaXMubWVzc2FnZX07cmV0dXJuIHRoaXMubG9jYXRpb25zIT1udWxsJiYodC5sb2NhdGlvbnM9dGhpcy5sb2NhdGlvbnMpLHRoaXMucGF0aCE9bnVsbCYmKHQucGF0aD10aGlzLnBhdGgpLHRoaXMuZXh0ZW5zaW9ucyE9bnVsbCYmT2JqZWN0LmtleXModGhpcy5leHRlbnNpb25zKS5sZW5ndGg+MCYmKHQuZXh0ZW5zaW9ucz10aGlzLmV4dGVuc2lvbnMpLHR9fWZ1bmN0aW9uIG10KGUpe3JldHVybiBlPT09dm9pZCAwfHxlLmxlbmd0aD09PTA/dm9pZCAwOmV9ZnVuY3Rpb24gRyhlLHQsbil7cmV0dXJuIG5ldyBxZShgU3ludGF4IEVycm9yOiAke259YCx7c291cmNlOmUscG9zaXRpb25zOlt0XX0pfWNsYXNzIGFue2NvbnN0cnVjdG9yKHQsbixpKXt0aGlzLnN0YXJ0PXQuc3RhcnQsdGhpcy5lbmQ9bi5lbmQsdGhpcy5zdGFydFRva2VuPXQsdGhpcy5lbmRUb2tlbj1uLHRoaXMuc291cmNlPWl9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iTG9jYXRpb24ifXRvSlNPTigpe3JldHVybntzdGFydDp0aGlzLnN0YXJ0LGVuZDp0aGlzLmVuZH19fWNsYXNzIHl0e2NvbnN0cnVjdG9yKHQsbixpLHIscyxvKXt0aGlzLmtpbmQ9dCx0aGlzLnN0YXJ0PW4sdGhpcy5lbmQ9aSx0aGlzLmxpbmU9cix0aGlzLmNvbHVtbj1zLHRoaXMudmFsdWU9byx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJUb2tlbiJ9dG9KU09OKCl7cmV0dXJue2tpbmQ6dGhpcy5raW5kLHZhbHVlOnRoaXMudmFsdWUsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1ufX19Y29uc3QgZ3Q9e05hbWU6W10sRG9jdW1lbnQ6WyJkZWZpbml0aW9ucyJdLE9wZXJhdGlvbkRlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxWYXJpYWJsZURlZmluaXRpb246WyJ2YXJpYWJsZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sVmFyaWFibGU6WyJuYW1lIl0sU2VsZWN0aW9uU2V0Olsic2VsZWN0aW9ucyJdLEZpZWxkOlsiYWxpYXMiLCJuYW1lIiwiYXJndW1lbnRzIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEFyZ3VtZW50OlsibmFtZSIsInZhbHVlIl0sRnJhZ21lbnRTcHJlYWQ6WyJuYW1lIiwiZGlyZWN0aXZlcyJdLElubGluZUZyYWdtZW50OlsidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxGcmFnbWVudERlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsInR5cGVDb25kaXRpb24iLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sSW50VmFsdWU6W10sRmxvYXRWYWx1ZTpbXSxTdHJpbmdWYWx1ZTpbXSxCb29sZWFuVmFsdWU6W10sTnVsbFZhbHVlOltdLEVudW1WYWx1ZTpbXSxMaXN0VmFsdWU6WyJ2YWx1ZXMiXSxPYmplY3RWYWx1ZTpbImZpZWxkcyJdLE9iamVjdEZpZWxkOlsibmFtZSIsInZhbHVlIl0sRGlyZWN0aXZlOlsibmFtZSIsImFyZ3VtZW50cyJdLE5hbWVkVHlwZTpbIm5hbWUiXSxMaXN0VHlwZTpbInR5cGUiXSxOb25OdWxsVHlwZTpbInR5cGUiXSxTY2hlbWFEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjpbInR5cGUiXSxTY2FsYXJUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRmllbGREZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiYXJndW1lbnRzIiwidHlwZSIsImRpcmVjdGl2ZXMiXSxJbnB1dFZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sSW50ZXJmYWNlVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sRW51bVZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLERpcmVjdGl2ZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJsb2NhdGlvbnMiXSxTY2hlbWFFeHRlbnNpb246WyJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxTY2FsYXJUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXX0sY249bmV3IFNldChPYmplY3Qua2V5cyhndCkpO2Z1bmN0aW9uIHZ0KGUpe2NvbnN0IHQ9ZT09bnVsbD92b2lkIDA6ZS5raW5kO3JldHVybiB0eXBlb2YgdD09InN0cmluZyImJmNuLmhhcyh0KX12YXIgZmU7KGZ1bmN0aW9uKGUpe2UuUVVFUlk9InF1ZXJ5IixlLk1VVEFUSU9OPSJtdXRhdGlvbiIsZS5TVUJTQ1JJUFRJT049InN1YnNjcmlwdGlvbiJ9KShmZXx8KGZlPXt9KSk7dmFyIEdlOyhmdW5jdGlvbihlKXtlLlFVRVJZPSJRVUVSWSIsZS5NVVRBVElPTj0iTVVUQVRJT04iLGUuU1VCU0NSSVBUSU9OPSJTVUJTQ1JJUFRJT04iLGUuRklFTEQ9IkZJRUxEIixlLkZSQUdNRU5UX0RFRklOSVRJT049IkZSQUdNRU5UX0RFRklOSVRJT04iLGUuRlJBR01FTlRfU1BSRUFEPSJGUkFHTUVOVF9TUFJFQUQiLGUuSU5MSU5FX0ZSQUdNRU5UPSJJTkxJTkVfRlJBR01FTlQiLGUuVkFSSUFCTEVfREVGSU5JVElPTj0iVkFSSUFCTEVfREVGSU5JVElPTiIsZS5TQ0hFTUE9IlNDSEVNQSIsZS5TQ0FMQVI9IlNDQUxBUiIsZS5PQkpFQ1Q9Ik9CSkVDVCIsZS5GSUVMRF9ERUZJTklUSU9OPSJGSUVMRF9ERUZJTklUSU9OIixlLkFSR1VNRU5UX0RFRklOSVRJT049IkFSR1VNRU5UX0RFRklOSVRJT04iLGUuSU5URVJGQUNFPSJJTlRFUkZBQ0UiLGUuVU5JT049IlVOSU9OIixlLkVOVU09IkVOVU0iLGUuRU5VTV9WQUxVRT0iRU5VTV9WQUxVRSIsZS5JTlBVVF9PQkpFQ1Q9IklOUFVUX09CSkVDVCIsZS5JTlBVVF9GSUVMRF9ERUZJTklUSU9OPSJJTlBVVF9GSUVMRF9ERUZJTklUSU9OIn0pKEdlfHwoR2U9e30pKTt2YXIgVDsoZnVuY3Rpb24oZSl7ZS5OQU1FPSJOYW1lIixlLkRPQ1VNRU5UPSJEb2N1bWVudCIsZS5PUEVSQVRJT05fREVGSU5JVElPTj0iT3BlcmF0aW9uRGVmaW5pdGlvbiIsZS5WQVJJQUJMRV9ERUZJTklUSU9OPSJWYXJpYWJsZURlZmluaXRpb24iLGUuU0VMRUNUSU9OX1NFVD0iU2VsZWN0aW9uU2V0IixlLkZJRUxEPSJGaWVsZCIsZS5BUkdVTUVOVD0iQXJndW1lbnQiLGUuRlJBR01FTlRfU1BSRUFEPSJGcmFnbWVudFNwcmVhZCIsZS5JTkxJTkVfRlJBR01FTlQ9IklubGluZUZyYWdtZW50IixlLkZSQUdNRU5UX0RFRklOSVRJT049IkZyYWdtZW50RGVmaW5pdGlvbiIsZS5WQVJJQUJMRT0iVmFyaWFibGUiLGUuSU5UPSJJbnRWYWx1ZSIsZS5GTE9BVD0iRmxvYXRWYWx1ZSIsZS5TVFJJTkc9IlN0cmluZ1ZhbHVlIixlLkJPT0xFQU49IkJvb2xlYW5WYWx1ZSIsZS5OVUxMPSJOdWxsVmFsdWUiLGUuRU5VTT0iRW51bVZhbHVlIixlLkxJU1Q9Ikxpc3RWYWx1ZSIsZS5PQkpFQ1Q9Ik9iamVjdFZhbHVlIixlLk9CSkVDVF9GSUVMRD0iT2JqZWN0RmllbGQiLGUuRElSRUNUSVZFPSJEaXJlY3RpdmUiLGUuTkFNRURfVFlQRT0iTmFtZWRUeXBlIixlLkxJU1RfVFlQRT0iTGlzdFR5cGUiLGUuTk9OX05VTExfVFlQRT0iTm9uTnVsbFR5cGUiLGUuU0NIRU1BX0RFRklOSVRJT049IlNjaGVtYURlZmluaXRpb24iLGUuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTj0iT3BlcmF0aW9uVHlwZURlZmluaXRpb24iLGUuU0NBTEFSX1RZUEVfREVGSU5JVElPTj0iU2NhbGFyVHlwZURlZmluaXRpb24iLGUuT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iT2JqZWN0VHlwZURlZmluaXRpb24iLGUuRklFTERfREVGSU5JVElPTj0iRmllbGREZWZpbml0aW9uIixlLklOUFVUX1ZBTFVFX0RFRklOSVRJT049IklucHV0VmFsdWVEZWZpbml0aW9uIixlLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT049IkludGVyZmFjZVR5cGVEZWZpbml0aW9uIixlLlVOSU9OX1RZUEVfREVGSU5JVElPTj0iVW5pb25UeXBlRGVmaW5pdGlvbiIsZS5FTlVNX1RZUEVfREVGSU5JVElPTj0iRW51bVR5cGVEZWZpbml0aW9uIixlLkVOVU1fVkFMVUVfREVGSU5JVElPTj0iRW51bVZhbHVlRGVmaW5pdGlvbiIsZS5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIixlLkRJUkVDVElWRV9ERUZJTklUSU9OPSJEaXJlY3RpdmVEZWZpbml0aW9uIixlLlNDSEVNQV9FWFRFTlNJT049IlNjaGVtYUV4dGVuc2lvbiIsZS5TQ0FMQVJfVFlQRV9FWFRFTlNJT049IlNjYWxhclR5cGVFeHRlbnNpb24iLGUuT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJPYmplY3RUeXBlRXh0ZW5zaW9uIixlLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTj0iSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiIsZS5VTklPTl9UWVBFX0VYVEVOU0lPTj0iVW5pb25UeXBlRXh0ZW5zaW9uIixlLkVOVU1fVFlQRV9FWFRFTlNJT049IkVudW1UeXBlRXh0ZW5zaW9uIixlLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTj0iSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uIn0pKFR8fChUPXt9KSk7ZnVuY3Rpb24gemUoZSl7cmV0dXJuIGU9PT05fHxlPT09MzJ9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuIGU+PTQ4JiZlPD01N31mdW5jdGlvbiBFdChlKXtyZXR1cm4gZT49OTcmJmU8PTEyMnx8ZT49NjUmJmU8PTkwfWZ1bmN0aW9uIF90KGUpe3JldHVybiBFdChlKXx8ZT09PTk1fWZ1bmN0aW9uIHVuKGUpe3JldHVybiBFdChlKXx8X2UoZSl8fGU9PT05NX1mdW5jdGlvbiBsbihlKXt2YXIgdDtsZXQgbj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUixpPW51bGwscj0tMTtmb3IobGV0IG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIHM7Y29uc3QgYz1lW29dLGY9Zm4oYyk7ZiE9PWMubGVuZ3RoJiYoaT0ocz1pKSE9PW51bGwmJnMhPT12b2lkIDA/czpvLHI9byxvIT09MCYmZjxuJiYobj1mKSl9cmV0dXJuIGUubWFwKChvLGMpPT5jPT09MD9vOm8uc2xpY2UobikpLnNsaWNlKCh0PWkpIT09bnVsbCYmdCE9PXZvaWQgMD90OjAscisxKX1mdW5jdGlvbiBmbihlKXtsZXQgdD0wO2Zvcig7dDxlLmxlbmd0aCYmemUoZS5jaGFyQ29kZUF0KHQpKTspKyt0O3JldHVybiB0fWZ1bmN0aW9uIGhuKGUsdCl7Y29uc3Qgbj1lLnJlcGxhY2UoLyIiIi9nLCdcXCIiIicpLGk9bi5zcGxpdCgvXHJcbnxbXG5ccl0vZykscj1pLmxlbmd0aD09PTEscz1pLmxlbmd0aD4xJiZpLnNsaWNlKDEpLmV2ZXJ5KGI9PmIubGVuZ3RoPT09MHx8emUoYi5jaGFyQ29kZUF0KDApKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGM9ZS5lbmRzV2l0aCgnIicpJiYhbyxmPWUuZW5kc1dpdGgoIlxcIiksZD1jfHxmLHU9IXJ8fGUubGVuZ3RoPjcwfHxkfHxzfHxvO2xldCB5PSIiO2NvbnN0IHY9ciYmemUoZS5jaGFyQ29kZUF0KDApKTtyZXR1cm4odSYmIXZ8fHMpJiYoeSs9YApgKSx5Kz1uLCh1fHxkKSYmKHkrPWAKYCksJyIiIicreSsnIiIiJ312YXIgbDsoZnVuY3Rpb24oZSl7ZS5TT0Y9IjxTT0Y+IixlLkVPRj0iPEVPRj4iLGUuQkFORz0iISIsZS5ET0xMQVI9IiQiLGUuQU1QPSImIixlLlBBUkVOX0w9IigiLGUuUEFSRU5fUj0iKSIsZS5TUFJFQUQ9Ii4uLiIsZS5DT0xPTj0iOiIsZS5FUVVBTFM9Ij0iLGUuQVQ9IkAiLGUuQlJBQ0tFVF9MPSJbIixlLkJSQUNLRVRfUj0iXSIsZS5CUkFDRV9MPSJ7IixlLlBJUEU9InwiLGUuQlJBQ0VfUj0ifSIsZS5OQU1FPSJOYW1lIixlLklOVD0iSW50IixlLkZMT0FUPSJGbG9hdCIsZS5TVFJJTkc9IlN0cmluZyIsZS5CTE9DS19TVFJJTkc9IkJsb2NrU3RyaW5nIixlLkNPTU1FTlQ9IkNvbW1lbnQifSkobHx8KGw9e30pKTtjbGFzcyBkbntjb25zdHJ1Y3Rvcih0KXtjb25zdCBuPW5ldyB5dChsLlNPRiwwLDAsMCwwKTt0aGlzLnNvdXJjZT10LHRoaXMubGFzdFRva2VuPW4sdGhpcy50b2tlbj1uLHRoaXMubGluZT0xLHRoaXMubGluZVN0YXJ0PTB9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iTGV4ZXIifWFkdmFuY2UoKXtyZXR1cm4gdGhpcy5sYXN0VG9rZW49dGhpcy50b2tlbix0aGlzLnRva2VuPXRoaXMubG9va2FoZWFkKCl9bG9va2FoZWFkKCl7bGV0IHQ9dGhpcy50b2tlbjtpZih0LmtpbmQhPT1sLkVPRilkbyBpZih0Lm5leHQpdD10Lm5leHQ7ZWxzZXtjb25zdCBuPW1uKHRoaXMsdC5lbmQpO3QubmV4dD1uLG4ucHJldj10LHQ9bn13aGlsZSh0LmtpbmQ9PT1sLkNPTU1FTlQpO3JldHVybiB0fX1mdW5jdGlvbiBwbihlKXtyZXR1cm4gZT09PWwuQkFOR3x8ZT09PWwuRE9MTEFSfHxlPT09bC5BTVB8fGU9PT1sLlBBUkVOX0x8fGU9PT1sLlBBUkVOX1J8fGU9PT1sLlNQUkVBRHx8ZT09PWwuQ09MT058fGU9PT1sLkVRVUFMU3x8ZT09PWwuQVR8fGU9PT1sLkJSQUNLRVRfTHx8ZT09PWwuQlJBQ0tFVF9SfHxlPT09bC5CUkFDRV9MfHxlPT09bC5QSVBFfHxlPT09bC5CUkFDRV9SfWZ1bmN0aW9uIGhlKGUpe3JldHVybiBlPj0wJiZlPD01NTI5NXx8ZT49NTczNDQmJmU8PTExMTQxMTF9ZnVuY3Rpb24gU2UoZSx0KXtyZXR1cm4gVHQoZS5jaGFyQ29kZUF0KHQpKSYmYnQoZS5jaGFyQ29kZUF0KHQrMSkpfWZ1bmN0aW9uIFR0KGUpe3JldHVybiBlPj01NTI5NiYmZTw9NTYzMTl9ZnVuY3Rpb24gYnQoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiB1ZShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keS5jb2RlUG9pbnRBdCh0KTtpZihuPT09dm9pZCAwKXJldHVybiBsLkVPRjtpZihuPj0zMiYmbjw9MTI2KXtjb25zdCBpPVN0cmluZy5mcm9tQ29kZVBvaW50KG4pO3JldHVybiBpPT09JyInP2AnIidgOmAiJHtpfSJgfXJldHVybiJVKyIrbi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCg0LCIwIil9ZnVuY3Rpb24gVihlLHQsbixpLHIpe2NvbnN0IHM9ZS5saW5lLG89MStuLWUubGluZVN0YXJ0O3JldHVybiBuZXcgeXQodCxuLGkscyxvLHIpfWZ1bmN0aW9uIG1uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dDtmb3IoO3I8aTspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KHIpO3N3aXRjaChzKXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytyO2NvbnRpbnVlO2Nhc2UgMTA6KytyLCsrZS5saW5lLGUubGluZVN0YXJ0PXI7Y29udGludWU7Y2FzZSAxMzpuLmNoYXJDb2RlQXQocisxKT09PTEwP3IrPTI6KytyLCsrZS5saW5lLGUubGluZVN0YXJ0PXI7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4geW4oZSxyKTtjYXNlIDMzOnJldHVybiBWKGUsbC5CQU5HLHIscisxKTtjYXNlIDM2OnJldHVybiBWKGUsbC5ET0xMQVIscixyKzEpO2Nhc2UgMzg6cmV0dXJuIFYoZSxsLkFNUCxyLHIrMSk7Y2FzZSA0MDpyZXR1cm4gVihlLGwuUEFSRU5fTCxyLHIrMSk7Y2FzZSA0MTpyZXR1cm4gVihlLGwuUEFSRU5fUixyLHIrMSk7Y2FzZSA0NjppZihuLmNoYXJDb2RlQXQocisxKT09PTQ2JiZuLmNoYXJDb2RlQXQocisyKT09PTQ2KXJldHVybiBWKGUsbC5TUFJFQUQscixyKzMpO2JyZWFrO2Nhc2UgNTg6cmV0dXJuIFYoZSxsLkNPTE9OLHIscisxKTtjYXNlIDYxOnJldHVybiBWKGUsbC5FUVVBTFMscixyKzEpO2Nhc2UgNjQ6cmV0dXJuIFYoZSxsLkFULHIscisxKTtjYXNlIDkxOnJldHVybiBWKGUsbC5CUkFDS0VUX0wscixyKzEpO2Nhc2UgOTM6cmV0dXJuIFYoZSxsLkJSQUNLRVRfUixyLHIrMSk7Y2FzZSAxMjM6cmV0dXJuIFYoZSxsLkJSQUNFX0wscixyKzEpO2Nhc2UgMTI0OnJldHVybiBWKGUsbC5QSVBFLHIscisxKTtjYXNlIDEyNTpyZXR1cm4gVihlLGwuQlJBQ0VfUixyLHIrMSk7Y2FzZSAzNDpyZXR1cm4gbi5jaGFyQ29kZUF0KHIrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHIrMik9PT0zND9ibihlLHIpOnZuKGUscil9aWYoX2Uocyl8fHM9PT00NSlyZXR1cm4gZ24oZSxyLHMpO2lmKF90KHMpKXJldHVybiBObihlLHIpO3Rocm93IEcoZS5zb3VyY2UscixzPT09Mzk/YFVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKCIpP2A6aGUocyl8fFNlKG4scik/YFVuZXhwZWN0ZWQgY2hhcmFjdGVyOiAke3VlKGUscil9LmA6YEludmFsaWQgY2hhcmFjdGVyOiAke3VlKGUscil9LmApfXJldHVybiBWKGUsbC5FT0YsaSxpKX1mdW5jdGlvbiB5bihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxpPW4ubGVuZ3RoO2xldCByPXQrMTtmb3IoO3I8aTspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KHIpO2lmKHM9PT0xMHx8cz09PTEzKWJyZWFrO2lmKGhlKHMpKSsrcjtlbHNlIGlmKFNlKG4scikpcis9MjtlbHNlIGJyZWFrfXJldHVybiBWKGUsbC5DT01NRU5ULHQscixuLnNsaWNlKHQrMSxyKSl9ZnVuY3Rpb24gZ24oZSx0LG4pe2NvbnN0IGk9ZS5zb3VyY2UuYm9keTtsZXQgcj10LHM9bixvPSExO2lmKHM9PT00NSYmKHM9aS5jaGFyQ29kZUF0KCsrcikpLHM9PT00OCl7aWYocz1pLmNoYXJDb2RlQXQoKytyKSxfZShzKSl0aHJvdyBHKGUuc291cmNlLHIsYEludmFsaWQgbnVtYmVyLCB1bmV4cGVjdGVkIGRpZ2l0IGFmdGVyIDA6ICR7dWUoZSxyKX0uYCl9ZWxzZSByPUhlKGUscixzKSxzPWkuY2hhckNvZGVBdChyKTtpZihzPT09NDYmJihvPSEwLHM9aS5jaGFyQ29kZUF0KCsrcikscj1IZShlLHIscykscz1pLmNoYXJDb2RlQXQocikpLChzPT09Njl8fHM9PT0xMDEpJiYobz0hMCxzPWkuY2hhckNvZGVBdCgrK3IpLChzPT09NDN8fHM9PT00NSkmJihzPWkuY2hhckNvZGVBdCgrK3IpKSxyPUhlKGUscixzKSxzPWkuY2hhckNvZGVBdChyKSkscz09PTQ2fHxfdChzKSl0aHJvdyBHKGUuc291cmNlLHIsYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke3VlKGUscil9LmApO3JldHVybiBWKGUsbz9sLkZMT0FUOmwuSU5ULHQscixpLnNsaWNlKHQscikpfWZ1bmN0aW9uIEhlKGUsdCxuKXtpZighX2UobikpdGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHt1ZShlLHQpfS5gKTtjb25zdCBpPWUuc291cmNlLmJvZHk7bGV0IHI9dCsxO2Zvcig7X2UoaS5jaGFyQ29kZUF0KHIpKTspKytyO3JldHVybiByfWZ1bmN0aW9uIHZuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dCsxLHM9cixvPSIiO2Zvcig7cjxpOyl7Y29uc3QgYz1uLmNoYXJDb2RlQXQocik7aWYoYz09PTM0KXJldHVybiBvKz1uLnNsaWNlKHMsciksVihlLGwuU1RSSU5HLHQscisxLG8pO2lmKGM9PT05Mil7bys9bi5zbGljZShzLHIpO2NvbnN0IGY9bi5jaGFyQ29kZUF0KHIrMSk9PT0xMTc/bi5jaGFyQ29kZUF0KHIrMik9PT0xMjM/RW4oZSxyKTpfbihlLHIpOlRuKGUscik7bys9Zi52YWx1ZSxyKz1mLnNpemUscz1yO2NvbnRpbnVlfWlmKGM9PT0xMHx8Yz09PTEzKWJyZWFrO2lmKGhlKGMpKSsrcjtlbHNlIGlmKFNlKG4scikpcis9MjtlbHNlIHRocm93IEcoZS5zb3VyY2UscixgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHt1ZShlLHIpfS5gKX10aHJvdyBHKGUuc291cmNlLHIsIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gRW4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IGk9MCxyPTM7Zm9yKDtyPDEyOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQodCtyKyspO2lmKHM9PT0xMjUpe2lmKHI8NXx8IWhlKGkpKWJyZWFrO3JldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChpKSxzaXplOnJ9fWlmKGk9aTw8NHxUZShzKSxpPDApYnJlYWt9dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCtyKX0iLmApfWZ1bmN0aW9uIF9uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9TnQobix0KzIpO2lmKGhlKGkpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChpKSxzaXplOjZ9O2lmKFR0KGkpJiZuLmNoYXJDb2RlQXQodCs2KT09PTkyJiZuLmNoYXJDb2RlQXQodCs3KT09PTExNyl7Y29uc3Qgcj1OdChuLHQrOCk7aWYoYnQocikpcmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KGksciksc2l6ZToxMn19dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCs2KX0iLmApfWZ1bmN0aW9uIE50KGUsdCl7cmV0dXJuIFRlKGUuY2hhckNvZGVBdCh0KSk8PDEyfFRlKGUuY2hhckNvZGVBdCh0KzEpKTw8OHxUZShlLmNoYXJDb2RlQXQodCsyKSk8PDR8VGUoZS5jaGFyQ29kZUF0KHQrMykpfWZ1bmN0aW9uIFRlKGUpe3JldHVybiBlPj00OCYmZTw9NTc/ZS00ODplPj02NSYmZTw9NzA/ZS01NTplPj05NyYmZTw9MTAyP2UtODc6LTF9ZnVuY3Rpb24gVG4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOmAKYCxzaXplOjJ9O2Nhc2UgMTE0OnJldHVybnt2YWx1ZToiXHIiLHNpemU6Mn07Y2FzZSAxMTY6cmV0dXJue3ZhbHVlOiIJIixzaXplOjJ9fXRocm93IEcoZS5zb3VyY2UsdCxgSW52YWxpZCBjaGFyYWN0ZXIgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCsyKX0iLmApfWZ1bmN0aW9uIGJuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9ZS5saW5lU3RhcnQscz10KzMsbz1zLGM9IiI7Y29uc3QgZj1bXTtmb3IoO3M8aTspe2NvbnN0IGQ9bi5jaGFyQ29kZUF0KHMpO2lmKGQ9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCl7Yys9bi5zbGljZShvLHMpLGYucHVzaChjKTtjb25zdCB1PVYoZSxsLkJMT0NLX1NUUklORyx0LHMrMyxsbihmKS5qb2luKGAKYCkpO3JldHVybiBlLmxpbmUrPWYubGVuZ3RoLTEsZS5saW5lU3RhcnQ9cix1fWlmKGQ9PT05MiYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMyk9PT0zNCl7Yys9bi5zbGljZShvLHMpLG89cysxLHMrPTQ7Y29udGludWV9aWYoZD09PTEwfHxkPT09MTMpe2MrPW4uc2xpY2UobyxzKSxmLnB1c2goYyksZD09PTEzJiZuLmNoYXJDb2RlQXQocysxKT09PTEwP3MrPTI6KytzLGM9IiIsbz1zLHI9cztjb250aW51ZX1pZihoZShkKSkrK3M7ZWxzZSBpZihTZShuLHMpKXMrPTI7ZWxzZSB0aHJvdyBHKGUuc291cmNlLHMsYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7dWUoZSxzKX0uYCl9dGhyb3cgRyhlLnNvdXJjZSxzLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIE5uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dCsxO2Zvcig7cjxpOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQocik7aWYodW4ocykpKytyO2Vsc2UgYnJlYWt9cmV0dXJuIFYoZSxsLk5BTUUsdCxyLG4uc2xpY2UodCxyKSl9Y29uc3QgeG49MTAseHQ9MjtmdW5jdGlvbiBZZShlKXtyZXR1cm4gT2UoZSxbXSl9ZnVuY3Rpb24gT2UoZSx0KXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7Y2FzZSJmdW5jdGlvbiI6cmV0dXJuIGUubmFtZT9gW2Z1bmN0aW9uICR7ZS5uYW1lfV1gOiJbZnVuY3Rpb25dIjtjYXNlIm9iamVjdCI6cmV0dXJuIEFuKGUsdCk7ZGVmYXVsdDpyZXR1cm4gU3RyaW5nKGUpfX1mdW5jdGlvbiBBbihlLHQpe2lmKGU9PT1udWxsKXJldHVybiJudWxsIjtpZih0LmluY2x1ZGVzKGUpKXJldHVybiJbQ2lyY3VsYXJdIjtjb25zdCBuPVsuLi50LGVdO2lmKEluKGUpKXtjb25zdCBpPWUudG9KU09OKCk7aWYoaSE9PWUpcmV0dXJuIHR5cGVvZiBpPT0ic3RyaW5nIj9pOk9lKGksbil9ZWxzZSBpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBPbihlLG4pO3JldHVybiBTbihlLG4pfWZ1bmN0aW9uIEluKGUpe3JldHVybiB0eXBlb2YgZS50b0pTT049PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gU24oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO3JldHVybiBuLmxlbmd0aD09PTA/Int9Ijp0Lmxlbmd0aD54dD8iWyIrd24oZSkrIl0iOiJ7ICIrbi5tYXAoKFtyLHNdKT0+cisiOiAiK09lKHMsdCkpLmpvaW4oIiwgIikrIiB9In1mdW5jdGlvbiBPbihlLHQpe2lmKGUubGVuZ3RoPT09MClyZXR1cm4iW10iO2lmKHQubGVuZ3RoPnh0KXJldHVybiJbQXJyYXldIjtjb25zdCBuPU1hdGgubWluKHhuLGUubGVuZ3RoKSxpPWUubGVuZ3RoLW4scj1bXTtmb3IobGV0IHM9MDtzPG47KytzKXIucHVzaChPZShlW3NdLHQpKTtyZXR1cm4gaT09PTE/ci5wdXNoKCIuLi4gMSBtb3JlIGl0ZW0iKTppPjEmJnIucHVzaChgLi4uICR7aX0gbW9yZSBpdGVtc2ApLCJbIityLmpvaW4oIiwgIikrIl0ifWZ1bmN0aW9uIHduKGUpe2NvbnN0IHQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnJlcGxhY2UoL15cW29iamVjdCAvLCIiKS5yZXBsYWNlKC9dJC8sIiIpO2lmKHQ9PT0iT2JqZWN0IiYmdHlwZW9mIGUuY29uc3RydWN0b3I9PSJmdW5jdGlvbiIpe2NvbnN0IG49ZS5jb25zdHJ1Y3Rvci5uYW1lO2lmKHR5cGVvZiBuPT0ic3RyaW5nIiYmbiE9PSIiKXJldHVybiBufXJldHVybiB0fWNvbnN0IERuPWdsb2JhbFRoaXMucHJvY2VzcyYmcHJvY2Vzcy5lbnYuTk9ERV9FTlY9PT0icHJvZHVjdGlvbiI/ZnVuY3Rpb24odCxuKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG59OmZ1bmN0aW9uKHQsbil7aWYodCBpbnN0YW5jZW9mIG4pcmV0dXJuITA7aWYodHlwZW9mIHQ9PSJvYmplY3QiJiZ0IT09bnVsbCl7dmFyIGk7Y29uc3Qgcj1uLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddLHM9U3ltYm9sLnRvU3RyaW5nVGFnIGluIHQ/dFtTeW1ib2wudG9TdHJpbmdUYWddOihpPXQuY29uc3RydWN0b3IpPT09bnVsbHx8aT09PXZvaWQgMD92b2lkIDA6aS5uYW1lO2lmKHI9PT1zKXtjb25zdCBvPVllKHQpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSAke3J9ICIke299IiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLgoKRW5zdXJlIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgaW5zdGFuY2Ugb2YgImdyYXBocWwiIGluIHRoZSBub2RlX21vZHVsZXMKZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgImdyYXBocWwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyCnJlbGllZCBvbiBtb2R1bGVzLCB1c2UgInJlc29sdXRpb25zIiB0byBlbnN1cmUgb25seSBvbmUgdmVyc2lvbiBpcyBpbnN0YWxsZWQuCgpodHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnMKCkR1cGxpY2F0ZSAiZ3JhcGhxbCIgbW9kdWxlcyBjYW5ub3QgYmUgdXNlZCBhdCB0aGUgc2FtZSB0aW1lIHNpbmNlIGRpZmZlcmVudAp2ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmUKdmVyc2lvbiB1c2VkIGluIHRoZSBmdW5jdGlvbiBmcm9tIGFub3RoZXIgY291bGQgcHJvZHVjZSBjb25mdXNpbmcgYW5kCnNwdXJpb3VzIHJlc3VsdHMuYCl9fXJldHVybiExfTtjbGFzcyBBdHtjb25zdHJ1Y3Rvcih0LG49IkdyYXBoUUwgcmVxdWVzdCIsaT17bGluZToxLGNvbHVtbjoxfSl7dHlwZW9mIHQ9PSJzdHJpbmcifHxvZSghMSxgQm9keSBtdXN0IGJlIGEgc3RyaW5nLiBSZWNlaXZlZDogJHtZZSh0KX0uYCksdGhpcy5ib2R5PXQsdGhpcy5uYW1lPW4sdGhpcy5sb2NhdGlvbk9mZnNldD1pLHRoaXMubG9jYXRpb25PZmZzZXQubGluZT4wfHxvZSghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8b2UoITEsImNvbHVtbiBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIil9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iU291cmNlIn19ZnVuY3Rpb24gQ24oZSl7cmV0dXJuIERuKGUsQXQpfWZ1bmN0aW9uIEl0KGUsdCl7Y29uc3Qgbj1uZXcga24oZSx0KSxpPW4ucGFyc2VEb2N1bWVudCgpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwidG9rZW5Db3VudCIse2VudW1lcmFibGU6ITEsdmFsdWU6bi50b2tlbkNvdW50fSksaX1jbGFzcyBrbntjb25zdHJ1Y3Rvcih0LG49e30pe2NvbnN0IGk9Q24odCk/dDpuZXcgQXQodCk7dGhpcy5fbGV4ZXI9bmV3IGRuKGkpLHRoaXMuX29wdGlvbnM9bix0aGlzLl90b2tlbkNvdW50ZXI9MH1nZXQgdG9rZW5Db3VudCgpe3JldHVybiB0aGlzLl90b2tlbkNvdW50ZXJ9cGFyc2VOYW1lKCl7Y29uc3QgdD10aGlzLmV4cGVjdFRva2VuKGwuTkFNRSk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuTkFNRSx2YWx1ZTp0LnZhbHVlfSl9cGFyc2VEb2N1bWVudCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5ET0NVTUVOVCxkZWZpbml0aW9uczp0aGlzLm1hbnkobC5TT0YsdGhpcy5wYXJzZURlZmluaXRpb24sbC5FT0YpfSl9cGFyc2VEZWZpbml0aW9uKCl7aWYodGhpcy5wZWVrKGwuQlJBQ0VfTCkpcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y29uc3QgdD10aGlzLnBlZWtEZXNjcmlwdGlvbigpLG49dD90aGlzLl9sZXhlci5sb29rYWhlYWQoKTp0aGlzLl9sZXhlci50b2tlbjtpZihuLmtpbmQ9PT1sLk5BTUUpe3N3aXRjaChuLnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFEZWZpbml0aW9uKCk7Y2FzZSJzY2FsYXIiOnJldHVybiB0aGlzLnBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpO2Nhc2UidW5pb24iOnJldHVybiB0aGlzLnBhcnNlVW5pb25UeXBlRGVmaW5pdGlvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZURlZmluaXRpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImRpcmVjdGl2ZSI6cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl9aWYodCl0aHJvdyBHKHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCwiVW5leHBlY3RlZCBkZXNjcmlwdGlvbiwgZGVzY3JpcHRpb25zIGFyZSBzdXBwb3J0ZWQgb25seSBvbiB0eXBlIGRlZmluaXRpb25zLiIpO3N3aXRjaChuLnZhbHVlKXtjYXNlInF1ZXJ5IjpjYXNlIm11dGF0aW9uIjpjYXNlInN1YnNjcmlwdGlvbiI6cmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y2FzZSJmcmFnbWVudCI6cmV0dXJuIHRoaXMucGFyc2VGcmFnbWVudERlZmluaXRpb24oKTtjYXNlImV4dGVuZCI6cmV0dXJuIHRoaXMucGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl9fXRocm93IHRoaXMudW5leHBlY3RlZChuKX1wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHRoaXMucGVlayhsLkJSQUNFX0wpKXJldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk9QRVJBVElPTl9ERUZJTklUSU9OLG9wZXJhdGlvbjpmZS5RVUVSWSxuYW1lOnZvaWQgMCx2YXJpYWJsZURlZmluaXRpb25zOltdLGRpcmVjdGl2ZXM6W10sc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pO2NvbnN0IG49dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtsZXQgaTtyZXR1cm4gdGhpcy5wZWVrKGwuTkFNRSkmJihpPXRoaXMucGFyc2VOYW1lKCkpLHRoaXMubm9kZSh0LHtraW5kOlQuT1BFUkFUSU9OX0RFRklOSVRJT04sb3BlcmF0aW9uOm4sbmFtZTppLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VPcGVyYXRpb25UeXBlKCl7Y29uc3QgdD10aGlzLmV4cGVjdFRva2VuKGwuTkFNRSk7c3dpdGNoKHQudmFsdWUpe2Nhc2UicXVlcnkiOnJldHVybiBmZS5RVUVSWTtjYXNlIm11dGF0aW9uIjpyZXR1cm4gZmUuTVVUQVRJT047Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiBmZS5TVUJTQ1JJUFRJT059dGhyb3cgdGhpcy51bmV4cGVjdGVkKHQpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueShsLlBBUkVOX0wsdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbixsLlBBUkVOX1IpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpULlZBUklBQkxFX0RFRklOSVRJT04sdmFyaWFibGU6dGhpcy5wYXJzZVZhcmlhYmxlKCksdHlwZToodGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxkZWZhdWx0VmFsdWU6dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuRVFVQUxTKT90aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCl9KX1wYXJzZVZhcmlhYmxlKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkRPTExBUiksdGhpcy5ub2RlKHQse2tpbmQ6VC5WQVJJQUJMRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wYXJzZVNlbGVjdGlvblNldCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5TRUxFQ1RJT05fU0VULHNlbGVjdGlvbnM6dGhpcy5tYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlU2VsZWN0aW9uLGwuQlJBQ0VfUil9KX1wYXJzZVNlbGVjdGlvbigpe3JldHVybiB0aGlzLnBlZWsobC5TUFJFQUQpP3RoaXMucGFyc2VGcmFnbWVudCgpOnRoaXMucGFyc2VGaWVsZCgpfXBhcnNlRmllbGQoKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtsZXQgaSxyO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5DT0xPTik/KGk9bixyPXRoaXMucGFyc2VOYW1lKCkpOnI9bix0aGlzLm5vZGUodCx7a2luZDpULkZJRUxELGFsaWFzOmksbmFtZTpyLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCExKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wZWVrKGwuQlJBQ0VfTCk/dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpOnZvaWQgMH0pfXBhcnNlQXJndW1lbnRzKHQpe2NvbnN0IG49dD90aGlzLnBhcnNlQ29uc3RBcmd1bWVudDp0aGlzLnBhcnNlQXJndW1lbnQ7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuUEFSRU5fTCxuLGwuUEFSRU5fUil9cGFyc2VBcmd1bWVudCh0PSExKXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuLGk9dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLm5vZGUobix7a2luZDpULkFSR1VNRU5ULG5hbWU6aSx2YWx1ZTp0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKHQpfSl9cGFyc2VDb25zdEFyZ3VtZW50KCl7cmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCghMCl9cGFyc2VGcmFnbWVudCgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RUb2tlbihsLlNQUkVBRCk7Y29uc3Qgbj10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgib24iKTtyZXR1cm4hbiYmdGhpcy5wZWVrKGwuTkFNRSk/dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9TUFJFQUQsbmFtZTp0aGlzLnBhcnNlRnJhZ21lbnROYW1lKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSl9KTp0aGlzLm5vZGUodCx7a2luZDpULklOTElORV9GUkFHTUVOVCx0eXBlQ29uZGl0aW9uOm4/dGhpcy5wYXJzZU5hbWVkVHlwZSgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudERlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdEtleXdvcmQoImZyYWdtZW50IiksdGhpcy5fb3B0aW9ucy5hbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzPT09ITA/dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09Im9uIil0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaChuLmtpbmQpe2Nhc2UgbC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KHQpO2Nhc2UgbC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KHQpO2Nhc2UgbC5JTlQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKG4se2tpbmQ6VC5JTlQsdmFsdWU6bi52YWx1ZX0pO2Nhc2UgbC5GTE9BVDpyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUobix7a2luZDpULkZMT0FULHZhbHVlOm4udmFsdWV9KTtjYXNlIGwuU1RSSU5HOmNhc2UgbC5CTE9DS19TVFJJTkc6cmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7Y2FzZSBsLk5BTUU6c3dpdGNoKHRoaXMuYWR2YW5jZUxleGVyKCksbi52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKG4se2tpbmQ6VC5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuRU5VTSx2YWx1ZTpuLnZhbHVlfSl9Y2FzZSBsLkRPTExBUjppZih0KWlmKHRoaXMuZXhwZWN0VG9rZW4obC5ET0xMQVIpLHRoaXMuX2xleGVyLnRva2VuLmtpbmQ9PT1sLk5BTUUpe2NvbnN0IGk9dGhpcy5fbGV4ZXIudG9rZW4udmFsdWU7dGhyb3cgRyh0aGlzLl9sZXhlci5zb3VyY2Usbi5zdGFydCxgVW5leHBlY3RlZCB2YXJpYWJsZSAiJCR7aX0iIGluIGNvbnN0YW50IHZhbHVlLmApfWVsc2UgdGhyb3cgdGhpcy51bmV4cGVjdGVkKG4pO3JldHVybiB0aGlzLnBhcnNlVmFyaWFibGUoKTtkZWZhdWx0OnRocm93IHRoaXMudW5leHBlY3RlZCgpfX1wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCl7cmV0dXJuIHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoITApfXBhcnNlU3RyaW5nTGl0ZXJhbCgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKHQse2tpbmQ6VC5TVFJJTkcsdmFsdWU6dC52YWx1ZSxibG9jazp0LmtpbmQ9PT1sLkJMT0NLX1NUUklOR30pfXBhcnNlTGlzdCh0KXtjb25zdCBuPSgpPT50aGlzLnBhcnNlVmFsdWVMaXRlcmFsKHQpO3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5MSVNULHZhbHVlczp0aGlzLmFueShsLkJSQUNLRVRfTCxuLGwuQlJBQ0tFVF9SKX0pfXBhcnNlT2JqZWN0KHQpe2NvbnN0IG49KCk9PnRoaXMucGFyc2VPYmplY3RGaWVsZCh0KTtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuT0JKRUNULGZpZWxkczp0aGlzLmFueShsLkJSQUNFX0wsbixsLkJSQUNFX1IpfSl9cGFyc2VPYmplY3RGaWVsZCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuLGk9dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLm5vZGUobix7a2luZDpULk9CSkVDVF9GSUVMRCxuYW1lOmksdmFsdWU6dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0KX0pfXBhcnNlRGlyZWN0aXZlcyh0KXtjb25zdCBuPVtdO2Zvcig7dGhpcy5wZWVrKGwuQVQpOyluLnB1c2godGhpcy5wYXJzZURpcmVjdGl2ZSh0KSk7cmV0dXJuIG59cGFyc2VDb25zdERpcmVjdGl2ZXMoKXtyZXR1cm4gdGhpcy5wYXJzZURpcmVjdGl2ZXMoITApfXBhcnNlRGlyZWN0aXZlKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4obC5BVCksdGhpcy5ub2RlKG4se2tpbmQ6VC5ESVJFQ1RJVkUsbmFtZTp0aGlzLnBhcnNlTmFtZSgpLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKHQpfSl9cGFyc2VUeXBlUmVmZXJlbmNlKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtsZXQgbjtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5CUkFDS0VUX0wpKXtjb25zdCBpPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7dGhpcy5leHBlY3RUb2tlbihsLkJSQUNLRVRfUiksbj10aGlzLm5vZGUodCx7a2luZDpULkxJU1RfVFlQRSx0eXBlOml9KX1lbHNlIG49dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5CQU5HKT90aGlzLm5vZGUodCx7a2luZDpULk5PTl9OVUxMX1RZUEUsdHlwZTpufSk6bn1wYXJzZU5hbWVkVHlwZSgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5OQU1FRF9UWVBFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKX0pfXBlZWtEZXNjcmlwdGlvbigpe3JldHVybiB0aGlzLnBlZWsobC5TVFJJTkcpfHx0aGlzLnBlZWsobC5CTE9DS19TVFJJTkcpfXBhcnNlRGVzY3JpcHRpb24oKXtpZih0aGlzLnBlZWtEZXNjcmlwdGlvbigpKXJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpfXBhcnNlU2NoZW1hRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5tYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sbC5CUkFDRV9SKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5TQ0hFTUFfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLGRpcmVjdGl2ZXM6aSxvcGVyYXRpb25UeXBlczpyfSl9cGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO3RoaXMuZXhwZWN0VG9rZW4obC5DT0xPTik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZWRUeXBlKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTixvcGVyYXRpb246bix0eXBlOml9KX1wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgic2NhbGFyIik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlNDQUxBUl9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOmksZGlyZWN0aXZlczpyfSl9cGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInR5cGUiKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxzPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxvPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT0JKRUNUX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczpzLGZpZWxkczpvfSl9cGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgiaW1wbGVtZW50cyIpP3RoaXMuZGVsaW1pdGVkTWFueShsLkFNUCx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5CUkFDRV9MLHRoaXMucGFyc2VGaWVsZERlZmluaXRpb24sbC5CUkFDRV9SKX1wYXJzZUZpZWxkRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCk7dGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKTtjb25zdCBzPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCksbz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRklFTERfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxhcmd1bWVudHM6cix0eXBlOnMsZGlyZWN0aXZlczpvfSl9cGFyc2VBcmd1bWVudERlZnMoKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5QQVJFTl9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLGwuUEFSRU5fUil9cGFyc2VJbnB1dFZhbHVlRGVmKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpLGk9dGhpcy5wYXJzZU5hbWUoKTt0aGlzLmV4cGVjdFRva2VuKGwuQ09MT04pO2NvbnN0IHI9dGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKTtsZXQgczt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5FUVVBTFMpJiYocz10aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKSk7Y29uc3Qgbz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuSU5QVVRfVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSx0eXBlOnIsZGVmYXVsdFZhbHVlOnMsZGlyZWN0aXZlczpvfSl9cGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IGk9dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLG89dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGludGVyZmFjZXM6cixkaXJlY3RpdmVzOnMsZmllbGRzOm99KX1wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IGk9dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuVU5JT05fVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGRpcmVjdGl2ZXM6cix0eXBlczpzfSl9cGFyc2VVbmlvbk1lbWJlclR5cGVzKCl7cmV0dXJuIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihsLkVRVUFMUyk/dGhpcy5kZWxpbWl0ZWRNYW55KGwuUElQRSx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5FTlVNX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxkaXJlY3RpdmVzOnIsdmFsdWVzOnN9KX1wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbixsLkJSQUNFX1IpfXBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxpPXRoaXMucGFyc2VFbnVtVmFsdWVOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRU5VTV9WQUxVRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGRpcmVjdGl2ZXM6cn0pfXBhcnNlRW51bVZhbHVlTmFtZSgpe2lmKHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09InRydWUifHx0aGlzLl9sZXhlci50b2tlbi52YWx1ZT09PSJmYWxzZSJ8fHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09Im51bGwiKXRocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLHRoaXMuX2xleGVyLnRva2VuLnN0YXJ0LGAke3dlKHRoaXMuX2xleGVyLnRva2VuKX0gaXMgcmVzZXJ2ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGZvciBhbiBlbnVtIHZhbHVlLmApO3JldHVybiB0aGlzLnBhcnNlTmFtZSgpfXBhcnNlSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5CUkFDRV9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLGwuQlJBQ0VfUil9cGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci5sb29rYWhlYWQoKTtpZih0LmtpbmQ9PT1sLk5BTUUpc3dpdGNoKHQudmFsdWUpe2Nhc2Uic2NoZW1hIjpyZXR1cm4gdGhpcy5wYXJzZVNjaGVtYUV4dGVuc2lvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZUV4dGVuc2lvbigpO2Nhc2UiaW50ZXJmYWNlIjpyZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZUV4dGVuc2lvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpO2Nhc2UiaW5wdXQiOnJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKCl9dGhyb3cgdGhpcy51bmV4cGVjdGVkKHQpfXBhcnNlU2NoZW1hRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgic2NoZW1hIik7Y29uc3Qgbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLm9wdGlvbmFsTWFueShsLkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLGwuQlJBQ0VfUik7aWYobi5sZW5ndGg9PT0wJiZpLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuU0NIRU1BX0VYVEVOU0lPTixkaXJlY3RpdmVzOm4sb3BlcmF0aW9uVHlwZXM6aX0pfXBhcnNlU2NhbGFyVHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtpZihpLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuU0NBTEFSX1RZUEVfRVhURU5TSU9OLG5hbWU6bixkaXJlY3RpdmVzOml9KX1wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wJiZzLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT0JKRUNUX1RZUEVfRVhURU5TSU9OLG5hbWU6bixpbnRlcmZhY2VzOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgiaW50ZXJmYWNlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wJiZzLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuSU5URVJGQUNFX1RZUEVfRVhURU5TSU9OLG5hbWU6bixpbnRlcmZhY2VzOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7aWYoaS5sZW5ndGg9PT0wJiZyLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuVU5JT05fVFlQRV9FWFRFTlNJT04sbmFtZTpuLGRpcmVjdGl2ZXM6aSx0eXBlczpyfSl9cGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtpZihpLmxlbmd0aD09PTAmJnIubGVuZ3RoPT09MCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5FTlVNX1RZUEVfRVhURU5TSU9OLG5hbWU6bixkaXJlY3RpdmVzOmksdmFsdWVzOnJ9KX1wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOm4sZGlyZWN0aXZlczppLGZpZWxkczpyfSl9cGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgiZGlyZWN0aXZlIiksdGhpcy5leHBlY3RUb2tlbihsLkFUKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCkscz10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgicmVwZWF0YWJsZSIpO3RoaXMuZXhwZWN0S2V5d29yZCgib24iKTtjb25zdCBvPXRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5ESVJFQ1RJVkVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxhcmd1bWVudHM6cixyZXBlYXRhYmxlOnMsbG9jYXRpb25zOm99KX1wYXJzZURpcmVjdGl2ZUxvY2F0aW9ucygpe3JldHVybiB0aGlzLmRlbGltaXRlZE1hbnkobC5QSVBFLHRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbil9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlTmFtZSgpO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChHZSxuLnZhbHVlKSlyZXR1cm4gbjt0aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9bm9kZSh0LG4pe3JldHVybiB0aGlzLl9vcHRpb25zLm5vTG9jYXRpb24hPT0hMCYmKG4ubG9jPW5ldyBhbih0LHRoaXMuX2xleGVyLmxhc3RUb2tlbix0aGlzLl9sZXhlci5zb3VyY2UpKSxufXBlZWsodCl7cmV0dXJuIHRoaXMuX2xleGVyLnRva2VuLmtpbmQ9PT10fWV4cGVjdFRva2VuKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47aWYobi5raW5kPT09dClyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSxuO3Rocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYEV4cGVjdGVkICR7U3QodCl9LCBmb3VuZCAke3dlKG4pfS5gKX1leHBlY3RPcHRpb25hbFRva2VuKHQpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09dD8odGhpcy5hZHZhbmNlTGV4ZXIoKSwhMCk6ITF9ZXhwZWN0S2V5d29yZCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO2lmKG4ua2luZD09PWwuTkFNRSYmbi52YWx1ZT09PXQpdGhpcy5hZHZhbmNlTGV4ZXIoKTtlbHNlIHRocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYEV4cGVjdGVkICIke3R9IiwgZm91bmQgJHt3ZShuKX0uYCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIG4ua2luZD09PWwuTkFNRSYmbi52YWx1ZT09PXQ/KHRoaXMuYWR2YW5jZUxleGVyKCksITApOiExfXVuZXhwZWN0ZWQodCl7Y29uc3Qgbj10IT1udWxsP3Q6dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYFVuZXhwZWN0ZWQgJHt3ZShuKX0uYCl9YW55KHQsbixpKXt0aGlzLmV4cGVjdFRva2VuKHQpO2NvbnN0IHI9W107Zm9yKDshdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGkpOylyLnB1c2gobi5jYWxsKHRoaXMpKTtyZXR1cm4gcn1vcHRpb25hbE1hbnkodCxuLGkpe2lmKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KSl7Y29uc3Qgcj1bXTtkbyByLnB1c2gobi5jYWxsKHRoaXMpKTt3aGlsZSghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGkpKTtyZXR1cm4gcn1yZXR1cm5bXX1tYW55KHQsbixpKXt0aGlzLmV4cGVjdFRva2VuKHQpO2NvbnN0IHI9W107ZG8gci5wdXNoKG4uY2FsbCh0aGlzKSk7d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihpKSk7cmV0dXJuIHJ9ZGVsaW1pdGVkTWFueSh0LG4pe3RoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KTtjb25zdCBpPVtdO2RvIGkucHVzaChuLmNhbGwodGhpcykpO3doaWxlKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KSk7cmV0dXJuIGl9YWR2YW5jZUxleGVyKCl7Y29uc3R7bWF4VG9rZW5zOnR9PXRoaXMuX29wdGlvbnMsbj10aGlzLl9sZXhlci5hZHZhbmNlKCk7aWYobi5raW5kIT09bC5FT0YmJigrK3RoaXMuX3Rva2VuQ291bnRlcix0IT09dm9pZCAwJiZ0aGlzLl90b2tlbkNvdW50ZXI+dCkpdGhyb3cgRyh0aGlzLl9sZXhlci5zb3VyY2Usbi5zdGFydCxgRG9jdW1lbnQgY29udGFpbnMgbW9yZSB0aGF0ICR7dH0gdG9rZW5zLiBQYXJzaW5nIGFib3J0ZWQuYCl9fWZ1bmN0aW9uIHdlKGUpe2NvbnN0IHQ9ZS52YWx1ZTtyZXR1cm4gU3QoZS5raW5kKSsodCE9bnVsbD9gICIke3R9ImA6IiIpfWZ1bmN0aW9uIFN0KGUpe3JldHVybiBwbihlKT9gIiR7ZX0iYDplfWZ1bmN0aW9uIFJuKGUpe3JldHVybmAiJHtlLnJlcGxhY2UoUG4sTG4pfSJgfWNvbnN0IFBuPS9bXHgwMC1ceDFmXHgyMlx4NWNceDdmLVx4OWZdL2c7ZnVuY3Rpb24gTG4oZSl7cmV0dXJuIEZuW2UuY2hhckNvZGVBdCgwKV19Y29uc3QgRm49WyJcXHUwMDAwIiwiXFx1MDAwMSIsIlxcdTAwMDIiLCJcXHUwMDAzIiwiXFx1MDAwNCIsIlxcdTAwMDUiLCJcXHUwMDA2IiwiXFx1MDAwNyIsIlxcYiIsIlxcdCIsIlxcbiIsIlxcdTAwMEIiLCJcXGYiLCJcXHIiLCJcXHUwMDBFIiwiXFx1MDAwRiIsIlxcdTAwMTAiLCJcXHUwMDExIiwiXFx1MDAxMiIsIlxcdTAwMTMiLCJcXHUwMDE0IiwiXFx1MDAxNSIsIlxcdTAwMTYiLCJcXHUwMDE3IiwiXFx1MDAxOCIsIlxcdTAwMTkiLCJcXHUwMDFBIiwiXFx1MDAxQiIsIlxcdTAwMUMiLCJcXHUwMDFEIiwiXFx1MDAxRSIsIlxcdTAwMUYiLCIiLCIiLCdcXCInLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCJcXFxcIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFx1MDA3RiIsIlxcdTAwODAiLCJcXHUwMDgxIiwiXFx1MDA4MiIsIlxcdTAwODMiLCJcXHUwMDg0IiwiXFx1MDA4NSIsIlxcdTAwODYiLCJcXHUwMDg3IiwiXFx1MDA4OCIsIlxcdTAwODkiLCJcXHUwMDhBIiwiXFx1MDA4QiIsIlxcdTAwOEMiLCJcXHUwMDhEIiwiXFx1MDA4RSIsIlxcdTAwOEYiLCJcXHUwMDkwIiwiXFx1MDA5MSIsIlxcdTAwOTIiLCJcXHUwMDkzIiwiXFx1MDA5NCIsIlxcdTAwOTUiLCJcXHUwMDk2IiwiXFx1MDA5NyIsIlxcdTAwOTgiLCJcXHUwMDk5IiwiXFx1MDA5QSIsIlxcdTAwOUIiLCJcXHUwMDlDIiwiXFx1MDA5RCIsIlxcdTAwOUUiLCJcXHUwMDlGIl0sTW49T2JqZWN0LmZyZWV6ZSh7fSk7ZnVuY3Rpb24gJG4oZSx0LG49Z3Qpe2NvbnN0IGk9bmV3IE1hcDtmb3IoY29uc3QgRSBvZiBPYmplY3QudmFsdWVzKFQpKWkuc2V0KEUsQm4odCxFKSk7bGV0IHIscz1BcnJheS5pc0FycmF5KGUpLG89W2VdLGM9LTEsZj1bXSxkPWUsdSx5O2NvbnN0IHY9W10sYj1bXTtkb3tjKys7Y29uc3QgRT1jPT09by5sZW5ndGgsQz1FJiZmLmxlbmd0aCE9PTA7aWYoRSl7aWYodT1iLmxlbmd0aD09PTA/dm9pZCAwOnZbdi5sZW5ndGgtMV0sZD15LHk9Yi5wb3AoKSxDKWlmKHMpe2Q9ZC5zbGljZSgpO2xldCBSPTA7Zm9yKGNvbnN0WyQscV1vZiBmKXtjb25zdCBCPSQtUjtxPT09bnVsbD8oZC5zcGxpY2UoQiwxKSxSKyspOmRbQl09cX19ZWxzZXtkPUQoe30sZCk7Zm9yKGNvbnN0W1IsJF1vZiBmKWRbUl09JH1jPXIuaW5kZXgsbz1yLmtleXMsZj1yLmVkaXRzLHM9ci5pbkFycmF5LHI9ci5wcmV2fWVsc2UgaWYoeSl7aWYodT1zP2M6b1tjXSxkPXlbdV0sZD09bnVsbCljb250aW51ZTt2LnB1c2godSl9bGV0IHc7aWYoIUFycmF5LmlzQXJyYXkoZCkpe3ZhciBtLE47dnQoZCl8fG9lKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke1llKGQpfS5gKTtjb25zdCBSPUU/KG09aS5nZXQoZC5raW5kKSk9PT1udWxsfHxtPT09dm9pZCAwP3ZvaWQgMDptLmxlYXZlOihOPWkuZ2V0KGQua2luZCkpPT09bnVsbHx8Tj09PXZvaWQgMD92b2lkIDA6Ti5lbnRlcjtpZih3PVI9PW51bGw/dm9pZCAwOlIuY2FsbCh0LGQsdSx5LHYsYiksdz09PU1uKWJyZWFrO2lmKHc9PT0hMSl7aWYoIUUpe3YucG9wKCk7Y29udGludWV9fWVsc2UgaWYodyE9PXZvaWQgMCYmKGYucHVzaChbdSx3XSksIUUpKWlmKHZ0KHcpKWQ9dztlbHNle3YucG9wKCk7Y29udGludWV9fWlmKHc9PT12b2lkIDAmJkMmJmYucHVzaChbdSxkXSksRSl2LnBvcCgpO2Vsc2V7dmFyIGc7cj17aW5BcnJheTpzLGluZGV4OmMsa2V5czpvLGVkaXRzOmYscHJldjpyfSxzPUFycmF5LmlzQXJyYXkoZCksbz1zP2Q6KGc9bltkLmtpbmRdKSE9PW51bGwmJmchPT12b2lkIDA/ZzpbXSxjPS0xLGY9W10seSYmYi5wdXNoKHkpLHk9ZH19d2hpbGUociE9PXZvaWQgMCk7cmV0dXJuIGYubGVuZ3RoIT09MD9mW2YubGVuZ3RoLTFdWzFdOmV9ZnVuY3Rpb24gQm4oZSx0KXtjb25zdCBuPWVbdF07cmV0dXJuIHR5cGVvZiBuPT0ib2JqZWN0Ij9uOnR5cGVvZiBuPT0iZnVuY3Rpb24iP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19ZnVuY3Rpb24gVW4oZSl7cmV0dXJuICRuKGUsam4pfWNvbnN0IFZuPTgwLGpuPXtOYW1lOntsZWF2ZTplPT5lLnZhbHVlfSxWYXJpYWJsZTp7bGVhdmU6ZT0+IiQiK2UubmFtZX0sRG9jdW1lbnQ6e2xlYXZlOmU9PnAoZS5kZWZpbml0aW9ucyxgCgpgKX0sT3BlcmF0aW9uRGVmaW5pdGlvbjp7bGVhdmUoZSl7Y29uc3QgdD1PKCIoIixwKGUudmFyaWFibGVEZWZpbml0aW9ucywiLCAiKSwiKSIpLG49cChbZS5vcGVyYXRpb24scChbZS5uYW1lLHRdKSxwKGUuZGlyZWN0aXZlcywiICIpXSwiICIpO3JldHVybihuPT09InF1ZXJ5Ij8iIjpuKyIgIikrZS5zZWxlY3Rpb25TZXR9fSxWYXJpYWJsZURlZmluaXRpb246e2xlYXZlOih7dmFyaWFibGU6ZSx0eXBlOnQsZGVmYXVsdFZhbHVlOm4sZGlyZWN0aXZlczppfSk9PmUrIjogIit0K08oIiA9ICIsbikrTygiICIscChpLCIgIikpfSxTZWxlY3Rpb25TZXQ6e2xlYXZlOih7c2VsZWN0aW9uczplfSk9PmVlKGUpfSxGaWVsZDp7bGVhdmUoe2FsaWFzOmUsbmFtZTp0LGFyZ3VtZW50czpuLGRpcmVjdGl2ZXM6aSxzZWxlY3Rpb25TZXQ6cn0pe2NvbnN0IHM9TygiIixlLCI6ICIpK3Q7bGV0IG89cytPKCIoIixwKG4sIiwgIiksIikiKTtyZXR1cm4gby5sZW5ndGg+Vm4mJihvPXMrTyhgKApgLERlKHAobixgCmApKSxgCilgKSkscChbbyxwKGksIiAiKSxyXSwiICIpfX0sQXJndW1lbnQ6e2xlYXZlOih7bmFtZTplLHZhbHVlOnR9KT0+ZSsiOiAiK3R9LEZyYWdtZW50U3ByZWFkOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+Ii4uLiIrZStPKCIgIixwKHQsIiAiKSl9LElubGluZUZyYWdtZW50OntsZWF2ZTooe3R5cGVDb25kaXRpb246ZSxkaXJlY3RpdmVzOnQsc2VsZWN0aW9uU2V0Om59KT0+cChbIi4uLiIsTygib24gIixlKSxwKHQsIiAiKSxuXSwiICIpfSxGcmFnbWVudERlZmluaXRpb246e2xlYXZlOih7bmFtZTplLHR5cGVDb25kaXRpb246dCx2YXJpYWJsZURlZmluaXRpb25zOm4sZGlyZWN0aXZlczppLHNlbGVjdGlvblNldDpyfSk9PmBmcmFnbWVudCAke2V9JHtPKCIoIixwKG4sIiwgIiksIikiKX0gb24gJHt0fSAke08oIiIscChpLCIgIiksIiAiKX1gK3J9LEludFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sRmxvYXRWYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmV9LFN0cmluZ1ZhbHVlOntsZWF2ZTooe3ZhbHVlOmUsYmxvY2s6dH0pPT50P2huKGUpOlJuKGUpfSxCb29sZWFuVmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lPyJ0cnVlIjoiZmFsc2UifSxOdWxsVmFsdWU6e2xlYXZlOigpPT4ibnVsbCJ9LEVudW1WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmV9LExpc3RWYWx1ZTp7bGVhdmU6KHt2YWx1ZXM6ZX0pPT4iWyIrcChlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK3AoZSwiLCAiKSsifSJ9LE9iamVjdEZpZWxkOntsZWF2ZTooe25hbWU6ZSx2YWx1ZTp0fSk9PmUrIjogIit0fSxEaXJlY3RpdmU6e2xlYXZlOih7bmFtZTplLGFyZ3VtZW50czp0fSk9PiJAIitlK08oIigiLHAodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9Pk8oIiIsZSxgCmApK3AoWyJzY2hlbWEiLHAodCwiICIpLGVlKG4pXSwiICIpfSxPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtvcGVyYXRpb246ZSx0eXBlOnR9KT0+ZSsiOiAiK3R9LFNjYWxhclR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bn0pPT5PKCIiLGUsYApgKStwKFsic2NhbGFyIix0LHAobiwiICIpXSwiICIpfSxPYmplY3RUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxpbnRlcmZhY2VzOm4sZGlyZWN0aXZlczppLGZpZWxkczpyfSk9Pk8oIiIsZSxgCmApK3AoWyJ0eXBlIix0LE8oImltcGxlbWVudHMgIixwKG4sIiAmICIpKSxwKGksIiAiKSxlZShyKV0sIiAiKX0sRmllbGREZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHR5cGU6aSxkaXJlY3RpdmVzOnJ9KT0+TygiIixlLGAKYCkrdCsoT3Qobik/TyhgKApgLERlKHAobixgCmApKSxgCilgKTpPKCIoIixwKG4sIiwgIiksIikiKSkrIjogIitpK08oIiAiLHAociwiICIpKX0sSW5wdXRWYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsdHlwZTpuLGRlZmF1bHRWYWx1ZTppLGRpcmVjdGl2ZXM6cn0pPT5PKCIiLGUsYApgKStwKFt0KyI6ICIrbixPKCI9ICIsaSkscChyLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOmksZmllbGRzOnJ9KT0+TygiIixlLGAKYCkrcChbImludGVyZmFjZSIsdCxPKCJpbXBsZW1lbnRzICIscChuLCIgJiAiKSkscChpLCIgIiksZWUocildLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOml9KT0+TygiIixlLGAKYCkrcChbInVuaW9uIix0LHAobiwiICIpLE8oIj0gIixwKGksIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6aX0pPT5PKCIiLGUsYApgKStwKFsiZW51bSIsdCxwKG4sIiAiKSxlZShpKV0sIiAiKX0sRW51bVZhbHVlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+TygiIixlLGAKYCkrcChbdCxwKG4sIiAiKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm4sZmllbGRzOml9KT0+TygiIixlLGAKYCkrcChbImlucHV0Iix0LHAobiwiICIpLGVlKGkpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6aSxsb2NhdGlvbnM6cn0pPT5PKCIiLGUsYApgKSsiZGlyZWN0aXZlIEAiK3QrKE90KG4pP08oYCgKYCxEZShwKG4sYApgKSksYAopYCk6TygiKCIscChuLCIsICIpLCIpIikpKyhpPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIitwKHIsIiB8ICIpfSxTY2hlbWFFeHRlbnNpb246e2xlYXZlOih7ZGlyZWN0aXZlczplLG9wZXJhdGlvblR5cGVzOnR9KT0+cChbImV4dGVuZCBzY2hlbWEiLHAoZSwiICIpLGVlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+cChbImV4dGVuZCBzY2FsYXIiLGUscCh0LCIgIildLCIgIil9LE9iamVjdFR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGludGVyZmFjZXM6dCxkaXJlY3RpdmVzOm4sZmllbGRzOml9KT0+cChbImV4dGVuZCB0eXBlIixlLE8oImltcGxlbWVudHMgIixwKHQsIiAmICIpKSxwKG4sIiAiKSxlZShpKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6aX0pPT5wKFsiZXh0ZW5kIGludGVyZmFjZSIsZSxPKCJpbXBsZW1lbnRzICIscCh0LCIgJiAiKSkscChuLCIgIiksZWUoaSldLCIgIil9LFVuaW9uVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsZGlyZWN0aXZlczp0LHR5cGVzOm59KT0+cChbImV4dGVuZCB1bmlvbiIsZSxwKHQsIiAiKSxPKCI9ICIscChuLCIgfCAiKSldLCIgIil9LEVudW1UeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsdmFsdWVzOm59KT0+cChbImV4dGVuZCBlbnVtIixlLHAodCwiICIpLGVlKG4pXSwiICIpfSxJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCxmaWVsZHM6bn0pPT5wKFsiZXh0ZW5kIGlucHV0IixlLHAodCwiICIpLGVlKG4pXSwiICIpfX07ZnVuY3Rpb24gcChlLHQ9IiIpe3ZhciBuO3JldHVybihuPWU9PW51bGw/dm9pZCAwOmUuZmlsdGVyKGk9PmkpLmpvaW4odCkpIT09bnVsbCYmbiE9PXZvaWQgMD9uOiIifWZ1bmN0aW9uIGVlKGUpe3JldHVybiBPKGB7CmAsRGUocChlLGAKYCkpLGAKfWApfWZ1bmN0aW9uIE8oZSx0LG49IiIpe3JldHVybiB0IT1udWxsJiZ0IT09IiI/ZSt0K246IiJ9ZnVuY3Rpb24gRGUoZSl7cmV0dXJuIE8oIiAgIixlLnJlcGxhY2UoL1xuL2csYAogIGApKX1mdW5jdGlvbiBPdChlKXt2YXIgdDtyZXR1cm4odD1lPT1udWxsP3ZvaWQgMDplLnNvbWUobj0+bi5pbmNsdWRlcyhgCmApKSkhPT1udWxsJiZ0IT09dm9pZCAwP3Q6ITF9Y29uc3Qgd3Q9ZT0+e3ZhciBpLHI7bGV0IHQ7Y29uc3Qgbj1lLmRlZmluaXRpb25zLmZpbHRlcihzPT5zLmtpbmQ9PT0iT3BlcmF0aW9uRGVmaW5pdGlvbiIpO3JldHVybiBuLmxlbmd0aD09PTEmJih0PShyPShpPW5bMF0pPT1udWxsP3ZvaWQgMDppLm5hbWUpPT1udWxsP3ZvaWQgMDpyLnZhbHVlKSx0fSxKZT1lPT57aWYodHlwZW9mIGU9PSJzdHJpbmciKXtsZXQgbjt0cnl7Y29uc3QgaT1JdChlKTtuPXd0KGkpfWNhdGNoKGkpe31yZXR1cm57cXVlcnk6ZSxvcGVyYXRpb25OYW1lOm59fWNvbnN0IHQ9d3QoZSk7cmV0dXJue3F1ZXJ5OlVuKGUpLG9wZXJhdGlvbk5hbWU6dH19O2NsYXNzIGRlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IodCxuKXtjb25zdCBpPWAke2RlLmV4dHJhY3RNZXNzYWdlKHQpfTogJHtKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6dCxyZXF1ZXN0Om59KX1gO3N1cGVyKGkpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLGRlLnByb3RvdHlwZSksdGhpcy5yZXNwb25zZT10LHRoaXMucmVxdWVzdD1uLHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT09ImZ1bmN0aW9uIiYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxkZSl9c3RhdGljIGV4dHJhY3RNZXNzYWdlKHQpe3ZhciBuLGkscjtyZXR1cm4ocj0oaT0obj10LmVycm9ycyk9PW51bGw/dm9pZCAwOm5bMF0pPT1udWxsP3ZvaWQgMDppLm1lc3NhZ2UpIT1udWxsP3I6YEdyYXBoUUwgRXJyb3IgKENvZGU6ICR7dC5zdGF0dXN9KWB9fXZhciBxbj10eXBlb2YgZ2xvYmFsVGhpcyE9InVuZGVmaW5lZCI/Z2xvYmFsVGhpczp0eXBlb2Ygd2luZG93IT0idW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT0idW5kZWZpbmVkIj9zZWxmOnt9O2Z1bmN0aW9uIER0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZWZhdWx0Iik/ZS5kZWZhdWx0OmV9dmFyIFFlPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2Ygc2VsZiE9InVuZGVmaW5lZCI/c2VsZjpxbixpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcygpe3RoaXMuZmV0Y2g9ITEsdGhpcy5ET01FeGNlcHRpb249bi5ET01FeGNlcHRpb259cmV0dXJuIHMucHJvdG90eXBlPW4sbmV3IHN9KCk7KGZ1bmN0aW9uKHMpeyhmdW5jdGlvbihvKXt2YXIgYz17c2VhcmNoUGFyYW1zOiJVUkxTZWFyY2hQYXJhbXMiaW4gcyxpdGVyYWJsZToiU3ltYm9sImluIHMmJiJpdGVyYXRvciJpbiBTeW1ib2wsYmxvYjoiRmlsZVJlYWRlciJpbiBzJiYiQmxvYiJpbiBzJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2goYSl7cmV0dXJuITF9fSgpLGZvcm1EYXRhOiJGb3JtRGF0YSJpbiBzLGFycmF5QnVmZmVyOiJBcnJheUJ1ZmZlciJpbiBzfTtmdW5jdGlvbiBmKGEpe3JldHVybiBhJiZEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKX1pZihjLmFycmF5QnVmZmVyKXZhciBkPVsiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OEFycmF5XSIsIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgVWludDE2QXJyYXldIiwiW29iamVjdCBJbnQzMkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIl0sdT1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKGEpe3JldHVybiBhJiZkLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKT4tMX07ZnVuY3Rpb24geShhKXtpZih0eXBlb2YgYSE9InN0cmluZyImJihhPVN0cmluZyhhKSksL1teYS16MC05XC0jJCUmJyorLl5fYHx+XS9pLnRlc3QoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUiKTtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIHR5cGVvZiBhIT0ic3RyaW5nIiYmKGE9U3RyaW5nKGEpKSxhfWZ1bmN0aW9uIGIoYSl7dmFyIGg9e25leHQ6ZnVuY3Rpb24oKXt2YXIgXz1hLnNoaWZ0KCk7cmV0dXJue2RvbmU6Xz09PXZvaWQgMCx2YWx1ZTpffX19O3JldHVybiBjLml0ZXJhYmxlJiYoaFtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIGh9KSxofWZ1bmN0aW9uIG0oYSl7dGhpcy5tYXA9e30sYSBpbnN0YW5jZW9mIG0/YS5mb3JFYWNoKGZ1bmN0aW9uKGgsXyl7dGhpcy5hcHBlbmQoXyxoKX0sdGhpcyk6QXJyYXkuaXNBcnJheShhKT9hLmZvckVhY2goZnVuY3Rpb24oaCl7dGhpcy5hcHBlbmQoaFswXSxoWzFdKX0sdGhpcyk6YSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihoKXt0aGlzLmFwcGVuZChoLGFbaF0pfSx0aGlzKX1tLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oYSxoKXthPXkoYSksaD12KGgpO3ZhciBfPXRoaXMubWFwW2FdO3RoaXMubWFwW2FdPV8/XysiLCAiK2g6aH0sbS5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLm1hcFt5KGEpXX0sbS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBhPXkoYSksdGhpcy5oYXMoYSk/dGhpcy5tYXBbYV06bnVsbH0sbS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eSh5KGEpKX0sbS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsaCl7dGhpcy5tYXBbeShhKV09dihoKX0sbS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihhLGgpe2Zvcih2YXIgXyBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShfKSYmYS5jYWxsKGgsdGhpcy5tYXBbX10sXyx0aGlzKX0sbS5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oaCxfKXthLnB1c2goXyl9KSxiKGEpfSxtLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGgpe2EucHVzaChoKX0pLGIoYSl9LG0ucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGgsXyl7YS5wdXNoKFtfLGhdKX0pLGIoYSl9LGMuaXRlcmFibGUmJihtLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPW0ucHJvdG90eXBlLmVudHJpZXMpO2Z1bmN0aW9uIE4oYSl7aWYoYS5ib2R5VXNlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIikpO2EuYm9keVVzZWQ9ITB9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaCxfKXthLm9ubG9hZD1mdW5jdGlvbigpe2goYS5yZXN1bHQpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtfKGEuZXJyb3IpfX0pfWZ1bmN0aW9uIEUoYSl7dmFyIGg9bmV3IEZpbGVSZWFkZXIsXz1nKGgpO3JldHVybiBoLnJlYWRBc0FycmF5QnVmZmVyKGEpLF99ZnVuY3Rpb24gQyhhKXt2YXIgaD1uZXcgRmlsZVJlYWRlcixfPWcoaCk7cmV0dXJuIGgucmVhZEFzVGV4dChhKSxffWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBoPW5ldyBVaW50OEFycmF5KGEpLF89bmV3IEFycmF5KGgubGVuZ3RoKSxBPTA7QTxoLmxlbmd0aDtBKyspX1tBXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGhbQV0pO3JldHVybiBfLmpvaW4oIiIpfWZ1bmN0aW9uIFIoYSl7aWYoYS5zbGljZSlyZXR1cm4gYS5zbGljZSgwKTt2YXIgaD1uZXcgVWludDhBcnJheShhLmJ5dGVMZW5ndGgpO3JldHVybiBoLnNldChuZXcgVWludDhBcnJheShhKSksaC5idWZmZXJ9ZnVuY3Rpb24gJCgpe3JldHVybiB0aGlzLmJvZHlVc2VkPSExLHRoaXMuX2luaXRCb2R5PWZ1bmN0aW9uKGEpe3RoaXMuX2JvZHlJbml0PWEsYT90eXBlb2YgYT09InN0cmluZyI/dGhpcy5fYm9keVRleHQ9YTpjLmJsb2ImJkJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYSk/dGhpcy5fYm9keUJsb2I9YTpjLmZvcm1EYXRhJiZGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKT90aGlzLl9ib2R5Rm9ybURhdGE9YTpjLnNlYXJjaFBhcmFtcyYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpP3RoaXMuX2JvZHlUZXh0PWEudG9TdHJpbmcoKTpjLmFycmF5QnVmZmVyJiZjLmJsb2ImJmYoYSk/KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj1SKGEuYnVmZmVyKSx0aGlzLl9ib2R5SW5pdD1uZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpOmMuYXJyYXlCdWZmZXImJihBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKXx8dShhKSk/dGhpcy5fYm9keUFycmF5QnVmZmVyPVIoYSk6dGhpcy5fYm9keVRleHQ9YT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk6dGhpcy5fYm9keVRleHQ9IiIsdGhpcy5oZWFkZXJzLmdldCgiY29udGVudC10eXBlIil8fCh0eXBlb2YgYT09InN0cmluZyI/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Iik6dGhpcy5fYm9keUJsb2ImJnRoaXMuX2JvZHlCbG9iLnR5cGU/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIix0aGlzLl9ib2R5QmxvYi50eXBlKTpjLnNlYXJjaFBhcmFtcyYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpJiZ0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCIpKX0sYy5ibG9iJiYodGhpcy5ibG9iPWZ1bmN0aW9uKCl7dmFyIGE9Tih0aGlzKTtpZihhKXJldHVybiBhO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSl9LHRoaXMuYXJyYXlCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9keUFycmF5QnVmZmVyP04odGhpcyl8fFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpOnRoaXMuYmxvYigpLnRoZW4oRSl9KSx0aGlzLnRleHQ9ZnVuY3Rpb24oKXt2YXIgYT1OKHRoaXMpO2lmKGEpcmV0dXJuIGE7aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIEModGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHcodGhpcy5fYm9keUFycmF5QnVmZmVyKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LGMuZm9ybURhdGEmJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oUyl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc312YXIgcT1bIkRFTEVURSIsIkdFVCIsIkhFQUQiLCJPUFRJT05TIiwiUE9TVCIsIlBVVCJdO2Z1bmN0aW9uIEIoYSl7dmFyIGg9YS50b1VwcGVyQ2FzZSgpO3JldHVybiBxLmluZGV4T2YoaCk+LTE/aDphfWZ1bmN0aW9uIEkoYSxoKXtoPWh8fHt9O3ZhciBfPWguYm9keTtpZihhIGluc3RhbmNlb2YgSSl7aWYoYS5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKTt0aGlzLnVybD1hLnVybCx0aGlzLmNyZWRlbnRpYWxzPWEuY3JlZGVudGlhbHMsaC5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBtKGEuaGVhZGVycykpLHRoaXMubWV0aG9kPWEubWV0aG9kLHRoaXMubW9kZT1hLm1vZGUsdGhpcy5zaWduYWw9YS5zaWduYWwsIV8mJmEuX2JvZHlJbml0IT1udWxsJiYoXz1hLl9ib2R5SW5pdCxhLmJvZHlVc2VkPSEwKX1lbHNlIHRoaXMudXJsPVN0cmluZyhhKTtpZih0aGlzLmNyZWRlbnRpYWxzPWguY3JlZGVudGlhbHN8fHRoaXMuY3JlZGVudGlhbHN8fCJzYW1lLW9yaWdpbiIsKGguaGVhZGVyc3x8IXRoaXMuaGVhZGVycykmJih0aGlzLmhlYWRlcnM9bmV3IG0oaC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9QihoLm1ldGhvZHx8dGhpcy5tZXRob2R8fCJHRVQiKSx0aGlzLm1vZGU9aC5tb2RlfHx0aGlzLm1vZGV8fG51bGwsdGhpcy5zaWduYWw9aC5zaWduYWx8fHRoaXMuc2lnbmFsLHRoaXMucmVmZXJyZXI9bnVsbCwodGhpcy5tZXRob2Q9PT0iR0VUInx8dGhpcy5tZXRob2Q9PT0iSEVBRCIpJiZfKXRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7dGhpcy5faW5pdEJvZHkoXyl9SS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEkodGhpcyx7Ym9keTp0aGlzLl9ib2R5SW5pdH0pfTtmdW5jdGlvbiBTKGEpe3ZhciBoPW5ldyBGb3JtRGF0YTtyZXR1cm4gYS50cmltKCkuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKF8pe2lmKF8pe3ZhciBBPV8uc3BsaXQoIj0iKSxrPUEuc2hpZnQoKS5yZXBsYWNlKC9cKy9nLCIgIikseD1BLmpvaW4oIj0iKS5yZXBsYWNlKC9cKy9nLCIgIik7aC5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KGspLGRlY29kZVVSSUNvbXBvbmVudCh4KSl9fSksaH1mdW5jdGlvbiBqKGEpe3ZhciBoPW5ldyBtLF89YS5yZXBsYWNlKC9ccj9cbltcdCBdKy9nLCIgIik7cmV0dXJuIF8uc3BsaXQoL1xyP1xuLykuZm9yRWFjaChmdW5jdGlvbihBKXt2YXIgaz1BLnNwbGl0KCI6IikseD1rLnNoaWZ0KCkudHJpbSgpO2lmKHgpe3ZhciBjZT1rLmpvaW4oIjoiKS50cmltKCk7aC5hcHBlbmQoeCxjZSl9fSksaH0kLmNhbGwoSS5wcm90b3R5cGUpO2Z1bmN0aW9uIFUoYSxoKXtofHwoaD17fSksdGhpcy50eXBlPSJkZWZhdWx0Iix0aGlzLnN0YXR1cz1oLnN0YXR1cz09PXZvaWQgMD8yMDA6aC5zdGF0dXMsdGhpcy5vaz10aGlzLnN0YXR1cz49MjAwJiZ0aGlzLnN0YXR1czwzMDAsdGhpcy5zdGF0dXNUZXh0PSJzdGF0dXNUZXh0ImluIGg/aC5zdGF0dXNUZXh0OiJPSyIsdGhpcy5oZWFkZXJzPW5ldyBtKGguaGVhZGVycyksdGhpcy51cmw9aC51cmx8fCIiLHRoaXMuX2luaXRCb2R5KGEpfSQuY2FsbChVLnByb3RvdHlwZSksVS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFUodGhpcy5fYm9keUluaXQse3N0YXR1czp0aGlzLnN0YXR1cyxzdGF0dXNUZXh0OnRoaXMuc3RhdHVzVGV4dCxoZWFkZXJzOm5ldyBtKHRoaXMuaGVhZGVycyksdXJsOnRoaXMudXJsfSl9LFUuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVShudWxsLHtzdGF0dXM6MCxzdGF0dXNUZXh0OiIifSk7cmV0dXJuIGEudHlwZT0iZXJyb3IiLGF9O3ZhciB6PVszMDEsMzAyLDMwMywzMDcsMzA4XTtVLnJlZGlyZWN0PWZ1bmN0aW9uKGEsaCl7aWYoei5pbmRleE9mKGgpPT09LTEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUiKTtyZXR1cm4gbmV3IFUobnVsbCx7c3RhdHVzOmgsaGVhZGVyczp7bG9jYXRpb246YX19KX0sby5ET01FeGNlcHRpb249cy5ET01FeGNlcHRpb247dHJ5e25ldyBvLkRPTUV4Y2VwdGlvbn1jYXRjaChhKXtvLkRPTUV4Y2VwdGlvbj1mdW5jdGlvbihoLF8pe3RoaXMubWVzc2FnZT1oLHRoaXMubmFtZT1fO3ZhciBBPUVycm9yKGgpO3RoaXMuc3RhY2s9QS5zdGFja30sby5ET01FeGNlcHRpb24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxvLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I9by5ET01FeGNlcHRpb259ZnVuY3Rpb24gSyhhLGgpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihfLEEpe3ZhciBrPW5ldyBJKGEsaCk7aWYoay5zaWduYWwmJmsuc2lnbmFsLmFib3J0ZWQpcmV0dXJuIEEobmV3IG8uRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgeD1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gY2UoKXt4LmFib3J0KCl9eC5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgSD17c3RhdHVzOnguc3RhdHVzLHN0YXR1c1RleHQ6eC5zdGF0dXNUZXh0LGhlYWRlcnM6aih4LmdldEFsbFJlc3BvbnNlSGVhZGVycygpfHwiIil9O0gudXJsPSJyZXNwb25zZVVSTCJpbiB4P3gucmVzcG9uc2VVUkw6SC5oZWFkZXJzLmdldCgiWC1SZXF1ZXN0LVVSTCIpO3ZhciBzZT0icmVzcG9uc2UiaW4geD94LnJlc3BvbnNlOngucmVzcG9uc2VUZXh0O18obmV3IFUoc2UsSCkpfSx4Lm9uZXJyb3I9ZnVuY3Rpb24oKXtBKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LHgub250aW1lb3V0PWZ1bmN0aW9uKCl7QShuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSx4Lm9uYWJvcnQ9ZnVuY3Rpb24oKXtBKG5ldyBvLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LHgub3BlbihrLm1ldGhvZCxrLnVybCwhMCksay5jcmVkZW50aWFscz09PSJpbmNsdWRlIj94LndpdGhDcmVkZW50aWFscz0hMDprLmNyZWRlbnRpYWxzPT09Im9taXQiJiYoeC53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4geCYmYy5ibG9iJiYoeC5yZXNwb25zZVR5cGU9ImJsb2IiKSxrLmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihILHNlKXt4LnNldFJlcXVlc3RIZWFkZXIoc2UsSCl9KSxrLnNpZ25hbCYmKGsuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IixjZSkseC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt4LnJlYWR5U3RhdGU9PT00JiZrLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsY2UpfSkseC5zZW5kKHR5cGVvZiBrLl9ib2R5SW5pdD09InVuZGVmaW5lZCI/bnVsbDprLl9ib2R5SW5pdCl9KX1yZXR1cm4gSy5wb2x5ZmlsbD0hMCxzLmZldGNofHwocy5mZXRjaD1LLHMuSGVhZGVycz1tLHMuUmVxdWVzdD1JLHMuUmVzcG9uc2U9VSksby5IZWFkZXJzPW0sby5SZXF1ZXN0PUksby5SZXNwb25zZT1VLG8uZmV0Y2g9SyxPYmplY3QuZGVmaW5lUHJvcGVydHkobywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksb30pKHt9KX0pKGkpLGkuZmV0Y2gucG9ueWZpbGw9ITAsZGVsZXRlIGkuZmV0Y2gucG9seWZpbGw7dmFyIHI9aTt0PXIuZmV0Y2gsdC5kZWZhdWx0PXIuZmV0Y2gsdC5mZXRjaD1yLmZldGNoLHQuSGVhZGVycz1yLkhlYWRlcnMsdC5SZXF1ZXN0PXIuUmVxdWVzdCx0LlJlc3BvbnNlPXIuUmVzcG9uc2UsZS5leHBvcnRzPXR9KShRZSxRZS5leHBvcnRzKTt2YXIgQ2U9UWUuZXhwb3J0cyxrZT1EdChDZSksR249Rih7X19wcm90b19fOm51bGwsZGVmYXVsdDprZX0sW0NlXSk7Y29uc3QgcGU9ZT0+e2xldCB0PXt9O3JldHVybiBlJiYodHlwZW9mIEhlYWRlcnMhPSJ1bmRlZmluZWQiJiZlIGluc3RhbmNlb2YgSGVhZGVyc3x8R24mJkNlLkhlYWRlcnMmJmUgaW5zdGFuY2VvZiBDZS5IZWFkZXJzP3Q9WChlKTpBcnJheS5pc0FycmF5KGUpP2UuZm9yRWFjaCgoW24saV0pPT57biYmaSE9PXZvaWQgMCYmKHRbbl09aSl9KTp0PWUpLHR9LEN0PWU9PmUucmVwbGFjZSgvKFtccyxdfCNbXlxuXHJdKykrL2csIiAiKS50cmltKCksem49ZT0+e2lmKCFBcnJheS5pc0FycmF5KGUucXVlcnkpKXtjb25zdCBpPWUscj1bYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KEN0KGkucXVlcnkpKX1gXTtyZXR1cm4gZS52YXJpYWJsZXMmJnIucHVzaChgdmFyaWFibGVzPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGkuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KGkudmFyaWFibGVzKSl9YCksaS5vcGVyYXRpb25OYW1lJiZyLnB1c2goYG9wZXJhdGlvbk5hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoaS5vcGVyYXRpb25OYW1lKX1gKSxyLmpvaW4oIiYiKX1pZih0eXBlb2YgZS52YXJpYWJsZXMhPSJ1bmRlZmluZWQiJiYhQXJyYXkuaXNBcnJheShlLnZhcmlhYmxlcykpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIHF1ZXJ5IHdpdGggZ2l2ZW4gdmFyaWFibGUgdHlwZSwgYXJyYXkgZXhwZWN0ZWQiKTtjb25zdCB0PWUsbj1lLnF1ZXJ5LnJlZHVjZSgoaSxyLHMpPT4oaS5wdXNoKHtxdWVyeTpDdChyKSx2YXJpYWJsZXM6dC52YXJpYWJsZXM/dC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkodC52YXJpYWJsZXNbc10pOnZvaWQgMH0pLGkpLFtdKTtyZXR1cm5gcXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQodC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkobikpfWB9LEhuPWU9PnQ9PlEodGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBOO2NvbnN0e3VybDpuLHF1ZXJ5OmksdmFyaWFibGVzOnIsb3BlcmF0aW9uTmFtZTpzLGZldGNoOm8sZmV0Y2hPcHRpb25zOmMsbWlkZGxld2FyZTpmfT10LGQ9RCh7fSx0LmhlYWRlcnMpO2xldCB1PSIiLHk7ZT09PSJQT1NUIj8oeT1KbihpLHIscyxjLmpzb25TZXJpYWxpemVyKSx0eXBlb2YgeT09InN0cmluZyImJihkWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vanNvbiIpKTp1PXpuKHtxdWVyeTppLHZhcmlhYmxlczpyLG9wZXJhdGlvbk5hbWU6cyxqc29uU2VyaWFsaXplcjooTj1jLmpzb25TZXJpYWxpemVyKSE9bnVsbD9OOlB9KTtjb25zdCB2PUQoe21ldGhvZDplLGhlYWRlcnM6ZCxib2R5Onl9LGMpO2xldCBiPW4sbT12O2lmKGYpe2NvbnN0IGc9eWllbGQgUHJvbWlzZS5yZXNvbHZlKGYoQmUoRCh7fSx2KSx7dXJsOm4sb3BlcmF0aW9uTmFtZTpzLHZhcmlhYmxlczpyfSkpKSx7dXJsOkN9PWcsdz12ZShnLFsidXJsIl0pO2I9QyxtPXd9cmV0dXJuIHUmJihiPWAke2J9PyR7dX1gKSx5aWVsZCBvKGIsbSl9KTtjbGFzcyBZbntjb25zdHJ1Y3Rvcih0LG49e30pe3RoaXMudXJsPXQsdGhpcy5yZXF1ZXN0Q29uZmlnPW4sdGhpcy5yYXdSZXF1ZXN0PSguLi5pKT0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3RbcixzLG9dPWksYz1VZShyLHMsbyksZz10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6ZixmZXRjaDpkPWtlLG1ldGhvZDp1PSJQT1NUIixyZXF1ZXN0TWlkZGxld2FyZTp5LHJlc3BvbnNlTWlkZGxld2FyZTp2fT1nLGI9dmUoZyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6bX09dGhpcztjLnNpZ25hbCE9PXZvaWQgMCYmKGIuc2lnbmFsPWMuc2lnbmFsKTtjb25zdHtvcGVyYXRpb25OYW1lOk59PUplKGMucXVlcnkpO3JldHVybiBYZSh7dXJsOm0scXVlcnk6Yy5xdWVyeSx2YXJpYWJsZXM6Yy52YXJpYWJsZXMsaGVhZGVyczpEKEQoe30scGUoV2UoZikpKSxwZShjLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTpOLGZldGNoOmQsbWV0aG9kOnUsZmV0Y2hPcHRpb25zOmIsbWlkZGxld2FyZTp5fSkudGhlbihFPT4odiYmdihFKSxFKSkuY2F0Y2goRT0+e3Rocm93IHYmJnYoRSksRX0pfSl9cmVxdWVzdCh0LC4uLm4pe3JldHVybiBRKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdFtpLHJdPW4scz1JZSh0LGksciksTj10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6byxmZXRjaDpjPWtlLG1ldGhvZDpmPSJQT1NUIixyZXF1ZXN0TWlkZGxld2FyZTpkLHJlc3BvbnNlTWlkZGxld2FyZTp1fT1OLHk9dmUoTixbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6dn09dGhpcztzLnNpZ25hbCE9PXZvaWQgMCYmKHkuc2lnbmFsPXMuc2lnbmFsKTtjb25zdHtxdWVyeTpiLG9wZXJhdGlvbk5hbWU6bX09SmUocy5kb2N1bWVudCk7cmV0dXJuIFhlKHt1cmw6dixxdWVyeTpiLHZhcmlhYmxlczpzLnZhcmlhYmxlcyxoZWFkZXJzOkQoRCh7fSxwZShXZShvKSkpLHBlKHMucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOm0sZmV0Y2g6YyxtZXRob2Q6ZixmZXRjaE9wdGlvbnM6eSxtaWRkbGV3YXJlOmR9KS50aGVuKGc9Pih1JiZ1KGcpLGcuZGF0YSkpLmNhdGNoKGc9Pnt0aHJvdyB1JiZ1KGcpLGd9KX0pfWJhdGNoUmVxdWVzdHModCxuKXt2YXIgZDtjb25zdCBpPVZlKHQsbiksZj10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6cn09ZixzPXZlKGYsWyJoZWFkZXJzIl0pO2kuc2lnbmFsIT09dm9pZCAwJiYocy5zaWduYWw9aS5zaWduYWwpO2NvbnN0IG89aS5kb2N1bWVudHMubWFwKCh7ZG9jdW1lbnQ6dX0pPT5KZSh1KS5xdWVyeSksYz1pLmRvY3VtZW50cy5tYXAoKHt2YXJpYWJsZXM6dX0pPT51KTtyZXR1cm4gWGUoe3VybDp0aGlzLnVybCxxdWVyeTpvLHZhcmlhYmxlczpjLGhlYWRlcnM6RChEKHt9LHBlKFdlKHIpKSkscGUoaS5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOihkPXRoaXMucmVxdWVzdENvbmZpZy5mZXRjaCkhPW51bGw/ZDprZSxtZXRob2Q6dGhpcy5yZXF1ZXN0Q29uZmlnLm1ldGhvZHx8IlBPU1QiLGZldGNoT3B0aW9uczpzLG1pZGRsZXdhcmU6dGhpcy5yZXF1ZXN0Q29uZmlnLnJlcXVlc3RNaWRkbGV3YXJlfSkudGhlbih1PT4odGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSh1KSx1LmRhdGEpKS5jYXRjaCh1PT57dGhyb3cgdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSh1KSx1fSl9c2V0SGVhZGVycyh0KXtyZXR1cm4gdGhpcy5yZXF1ZXN0Q29uZmlnLmhlYWRlcnM9dCx0aGlzfXNldEhlYWRlcih0LG4pe2NvbnN0e2hlYWRlcnM6aX09dGhpcy5yZXF1ZXN0Q29uZmlnO3JldHVybiBpP2lbdF09bjp0aGlzLnJlcXVlc3RDb25maWcuaGVhZGVycz17W3RdOm59LHRoaXN9c2V0RW5kcG9pbnQodCl7cmV0dXJuIHRoaXMudXJsPXQsdGhpc319Y29uc3QgWGU9ZT0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHUseTtjb25zdHtxdWVyeTp0LHZhcmlhYmxlczpuLGZldGNoT3B0aW9uczppfT1lLHI9SG4oTSgodT1lLm1ldGhvZCkhPW51bGw/dToicG9zdCIpKSxzPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksbz15aWVsZCByKGUpLGM9eWllbGQgUW4obywoeT1pLmpzb25TZXJpYWxpemVyKSE9bnVsbD95OlApLGY9QXJyYXkuaXNBcnJheShjKT8hYy5zb21lKCh7ZGF0YTpifSk9PiFiKTohIWMuZGF0YSxkPUFycmF5LmlzQXJyYXkoYyl8fCFjLmVycm9yc3x8QXJyYXkuaXNBcnJheShjLmVycm9ycykmJiFjLmVycm9ycy5sZW5ndGh8fGkuZXJyb3JQb2xpY3k9PT0iYWxsInx8aS5lcnJvclBvbGljeT09PSJpZ25vcmUiO2lmKG8ub2smJmQmJmYpe2NvbnN0IHY9KEFycmF5LmlzQXJyYXkoYyksYykse2Vycm9yczpifT12LG09dmUodixbImVycm9ycyJdKSxOPWkuZXJyb3JQb2xpY3k9PT0iaWdub3JlIj9tOmM7cmV0dXJuIEJlKEQoe30scz97ZGF0YTpOfTpOKSx7aGVhZGVyczpvLmhlYWRlcnMsc3RhdHVzOm8uc3RhdHVzfSl9ZWxzZXtjb25zdCBiPXR5cGVvZiBjPT0ic3RyaW5nIj97ZXJyb3I6Y306Yzt0aHJvdyBuZXcgZGUoQmUoRCh7fSxiKSx7c3RhdHVzOm8uc3RhdHVzLGhlYWRlcnM6by5oZWFkZXJzfSkse3F1ZXJ5OnQsdmFyaWFibGVzOm59KX19KSxKbj0oZSx0LG4saSk9Pntjb25zdCByPWkhPW51bGw/aTpQO2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiByLnN0cmluZ2lmeSh7cXVlcnk6ZSx2YXJpYWJsZXM6dCxvcGVyYXRpb25OYW1lOm59KTtpZih0eXBlb2YgdCE9InVuZGVmaW5lZCImJiFBcnJheS5pc0FycmF5KHQpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSByZXF1ZXN0IGJvZHkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO2NvbnN0IHM9ZS5yZWR1Y2UoKG8sYyxmKT0+KG8ucHVzaCh7cXVlcnk6Yyx2YXJpYWJsZXM6dD90W2ZdOnZvaWQgMH0pLG8pLFtdKTtyZXR1cm4gci5zdHJpbmdpZnkocyl9LFFuPShlLHQpPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgbjtyZXR1cm4gZS5oZWFkZXJzLmZvckVhY2goKGkscik9PntyLnRvTG93ZXJDYXNlKCk9PT0iY29udGVudC10eXBlIiYmKG49aSl9KSxuJiYobi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKXx8bi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2dyYXBocWwranNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uIikpP3QucGFyc2UoeWllbGQgZS50ZXh0KCkpOmUudGV4dCgpfSksV2U9ZT0+dHlwZW9mIGU9PSJmdW5jdGlvbiI/ZSgpOmU7dmFyIFplPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSx0KXt0PWUuZXhwb3J0cz1uLHQuZ2V0U2VyaWFsaXplPWk7ZnVuY3Rpb24gbihyLHMsbyxjKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkocixpKHMsYyksbyl9ZnVuY3Rpb24gaShyLHMpe3ZhciBvPVtdLGM9W107cmV0dXJuIHM9PW51bGwmJihzPWZ1bmN0aW9uKGYsZCl7cmV0dXJuIG9bMF09PT1kPyJbQ2lyY3VsYXIgfl0iOiJbQ2lyY3VsYXIgfi4iK2Muc2xpY2UoMCxvLmluZGV4T2YoZCkpLmpvaW4oIi4iKSsiXSJ9KSxmdW5jdGlvbihmLGQpe2lmKG8ubGVuZ3RoPjApe3ZhciB1PW8uaW5kZXhPZih0aGlzKTt+dT9vLnNwbGljZSh1KzEpOm8ucHVzaCh0aGlzKSx+dT9jLnNwbGljZSh1LDEvMCxmKTpjLnB1c2goZiksfm8uaW5kZXhPZihkKSYmKGQ9cy5jYWxsKHRoaXMsZixkKSl9ZWxzZSBvLnB1c2goZCk7cmV0dXJuIHI9PW51bGw/ZDpyLmNhbGwodGhpcyxmLGQpfX19KShaZSxaZS5leHBvcnRzKTt2YXIgWG49WmUuZXhwb3J0cyxtZT1EdChYbik7Y29uc3Qga3Q9MWUzKjE1O3ZhciBSZT1mdW5jdGlvbigpe3JldHVybiBSZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIG4saT0xLHI9YXJndW1lbnRzLmxlbmd0aDtpPHI7aSsrKXtuPWFyZ3VtZW50c1tpXTtmb3IodmFyIHMgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixzKSYmKHRbc109bltzXSl9cmV0dXJuIHR9LFJlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dHlwZW9mIFN1cHByZXNzZWRFcnJvcj09ImZ1bmN0aW9uIiYmU3VwcHJlc3NlZEVycm9yO3ZhciBQZT1uZXcgTWFwLEtlPW5ldyBNYXAsUnQ9ITAsTGU9ITE7ZnVuY3Rpb24gUHQoZSl7cmV0dXJuIGUucmVwbGFjZSgvW1xzLF0rL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gV24oZSl7cmV0dXJuIFB0KGUuc291cmNlLmJvZHkuc3Vic3RyaW5nKGUuc3RhcnQsZS5lbmQpKX1mdW5jdGlvbiBabihlKXt2YXIgdD1uZXcgU2V0LG49W107cmV0dXJuIGUuZGVmaW5pdGlvbnMuZm9yRWFjaChmdW5jdGlvbihpKXtpZihpLmtpbmQ9PT0iRnJhZ21lbnREZWZpbml0aW9uIil7dmFyIHI9aS5uYW1lLnZhbHVlLHM9V24oaS5sb2MpLG89S2UuZ2V0KHIpO28mJiFvLmhhcyhzKT9SdCYmY29uc29sZS53YXJuKCJXYXJuaW5nOiBmcmFnbWVudCB3aXRoIG5hbWUgIityK2AgYWxyZWFkeSBleGlzdHMuCmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dAp0aGlzIGluIHRoZSBkb2NzOiBodHRwOi8vZGV2LmFwb2xsb2RhdGEuY29tL2NvcmUvZnJhZ21lbnRzLmh0bWwjdW5pcXVlLW5hbWVzYCk6b3x8S2Uuc2V0KHIsbz1uZXcgU2V0KSxvLmFkZChzKSx0LmhhcyhzKXx8KHQuYWRkKHMpLG4ucHVzaChpKSl9ZWxzZSBuLnB1c2goaSl9KSxSZShSZSh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIEtuKGUpe3ZhciB0PW5ldyBTZXQoZS5kZWZpbml0aW9ucyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGkpe2kubG9jJiZkZWxldGUgaS5sb2MsT2JqZWN0LmtleXMoaSkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgcz1pW3JdO3MmJnR5cGVvZiBzPT0ib2JqZWN0IiYmdC5hZGQocyl9KX0pO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX1mdW5jdGlvbiBlcihlKXt2YXIgdD1QdChlKTtpZighUGUuaGFzKHQpKXt2YXIgbj1JdChlLHtleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczpMZSxhbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzOkxlfSk7aWYoIW58fG4ua2luZCE9PSJEb2N1bWVudCIpdGhyb3cgbmV3IEVycm9yKCJOb3QgYSB2YWxpZCBHcmFwaFFMIGRvY3VtZW50LiIpO1BlLnNldCh0LEtuKFpuKG4pKSl9cmV0dXJuIFBlLmdldCh0KX1mdW5jdGlvbiBKKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO3R5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKTt2YXIgaT1lWzBdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24ocixzKXtyJiZyLmtpbmQ9PT0iRG9jdW1lbnQiP2krPXIubG9jLnNvdXJjZS5ib2R5OmkrPXIsaSs9ZVtzKzFdfSksZXIoaSl9ZnVuY3Rpb24gdHIoKXtQZS5jbGVhcigpLEtlLmNsZWFyKCl9ZnVuY3Rpb24gbnIoKXtSdD0hMX1mdW5jdGlvbiBycigpe0xlPSEwfWZ1bmN0aW9uIGlyKCl7TGU9ITF9dmFyIGJlPXtncWw6SixyZXNldENhY2hlczp0cixkaXNhYmxlRnJhZ21lbnRXYXJuaW5nczpucixlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczpycixkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6aXJ9OyhmdW5jdGlvbihlKXtlLmdxbD1iZS5ncWwsZS5yZXNldENhY2hlcz1iZS5yZXNldENhY2hlcyxlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPWJlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzLGUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9YmUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsZS5kaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9YmUuZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzfSkoSnx8KEo9e30pKSxKLmRlZmF1bHQ9Sjtjb25zdCBMdD1KYAoJZnJhZ21lbnQgTWF0Y2hQYXJ0cyBvbiBNYXRjaENvbmZpZyB7CgkJcmVnZXhWYWx1ZQoJCW1hdGNoVmFsdWUKCX0KYCxzcj1KYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IElEIQoJCSRldmVudHM6IFJlcGxheUV2ZW50c0lucHV0IQoJCSRtZXNzYWdlczogU3RyaW5nIQoJCSRyZXNvdXJjZXM6IFN0cmluZyEKCQkkd2ViX3NvY2tldF9ldmVudHM6IFN0cmluZyEKCQkkZXJyb3JzOiBbRXJyb3JPYmplY3RJbnB1dF0hCgkJJGlzX2JlYWNvbjogQm9vbGVhbgoJCSRoYXNfc2Vzc2lvbl91bmxvYWRlZDogQm9vbGVhbgoJCSRoaWdobGlnaHRfbG9nczogU3RyaW5nCgkpIHsKCQlwdXNoUGF5bG9hZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlldmVudHM6ICRldmVudHMKCQkJbWVzc2FnZXM6ICRtZXNzYWdlcwoJCQlyZXNvdXJjZXM6ICRyZXNvdXJjZXMKCQkJd2ViX3NvY2tldF9ldmVudHM6ICR3ZWJfc29ja2V0X2V2ZW50cwoJCQllcnJvcnM6ICRlcnJvcnMKCQkJaXNfYmVhY29uOiAkaXNfYmVhY29uCgkJCWhhc19zZXNzaW9uX3VubG9hZGVkOiAkaGFzX3Nlc3Npb25fdW5sb2FkZWQKCQkJaGlnaGxpZ2h0X2xvZ3M6ICRoaWdobGlnaHRfbG9ncwoJCSkKCX0KYCxvcj1KYAoJbXV0YXRpb24gUHVzaFNlc3Npb25FdmVudHMoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IEludDY0SUQhCgkJJGRhdGE6IFN0cmluZyEKCSkgewoJCXB1c2hTZXNzaW9uRXZlbnRzKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXBheWxvYWRfaWQ6ICRwYXlsb2FkX2lkCgkJCWRhdGE6ICRkYXRhCgkJKQoJfQpgLGFyPUpgCgltdXRhdGlvbiBpZGVudGlmeVNlc3Npb24oCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHVzZXJfaWRlbnRpZmllcjogU3RyaW5nIQoJCSR1c2VyX29iamVjdDogQW55CgkpIHsKCQlpZGVudGlmeVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJdXNlcl9pZGVudGlmaWVyOiAkdXNlcl9pZGVudGlmaWVyCgkJCXVzZXJfb2JqZWN0OiAkdXNlcl9vYmplY3QKCQkpCgl9CmAsY3I9SmAKCW11dGF0aW9uIGFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwcm9wZXJ0aWVzX29iamVjdDogQW55CgkpIHsKCQlhZGRTZXNzaW9uUHJvcGVydGllcygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwcm9wZXJ0aWVzX29iamVjdDogJHByb3BlcnRpZXNfb2JqZWN0CgkJKQoJfQpgLHVyPUpgCgltdXRhdGlvbiBwdXNoTWV0cmljcygkbWV0cmljczogW01ldHJpY0lucHV0XSEpIHsKCQlwdXNoTWV0cmljcyhtZXRyaWNzOiAkbWV0cmljcykKCX0KYCxscj1KYAoJbXV0YXRpb24gYWRkU2Vzc2lvbkZlZWRiYWNrKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSR1c2VyX25hbWU6IFN0cmluZwoJCSR1c2VyX2VtYWlsOiBTdHJpbmcKCQkkdmVyYmF0aW06IFN0cmluZyEKCQkkdGltZXN0YW1wOiBUaW1lc3RhbXAhCgkpIHsKCQlhZGRTZXNzaW9uRmVlZGJhY2soCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJdXNlcl9uYW1lOiAkdXNlcl9uYW1lCgkJCXVzZXJfZW1haWw6ICR1c2VyX2VtYWlsCgkJCXZlcmJhdGltOiAkdmVyYmF0aW0KCQkJdGltZXN0YW1wOiAkdGltZXN0YW1wCgkJKQoJfQpgLGZyPUpgCgltdXRhdGlvbiBpbml0aWFsaXplU2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkc2Vzc2lvbl9rZXk6IFN0cmluZwoJCSRvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogU3RyaW5nIQoJCSRlbmFibGVfc3RyaWN0X3ByaXZhY3k6IEJvb2xlYW4hCgkJJHByaXZhY3lfc2V0dGluZzogU3RyaW5nIQoJCSRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6IEJvb2xlYW4hCgkJJGNsaWVudFZlcnNpb246IFN0cmluZyEKCQkkZmlyc3Rsb2FkVmVyc2lvbjogU3RyaW5nIQoJCSRjbGllbnRDb25maWc6IFN0cmluZyEKCQkkZW52aXJvbm1lbnQ6IFN0cmluZyEKCQkkaWQ6IFN0cmluZyEKCQkkYXBwVmVyc2lvbjogU3RyaW5nCgkJJHNlcnZpY2VOYW1lOiBTdHJpbmchCgkJJGNsaWVudF9pZDogU3RyaW5nIQoJCSRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiBbU3RyaW5nIV0KCQkkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogQm9vbGVhbgoJKSB7CgkJaW5pdGlhbGl6ZVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJc2Vzc2lvbl9rZXk6ICRzZXNzaW9uX2tleQoJCQlvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogJG9yZ2FuaXphdGlvbl92ZXJib3NlX2lkCgkJCWVuYWJsZV9zdHJpY3RfcHJpdmFjeTogJGVuYWJsZV9zdHJpY3RfcHJpdmFjeQoJCQllbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6ICRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHMKCQkJY2xpZW50VmVyc2lvbjogJGNsaWVudFZlcnNpb24KCQkJZmlyc3Rsb2FkVmVyc2lvbjogJGZpcnN0bG9hZFZlcnNpb24KCQkJY2xpZW50Q29uZmlnOiAkY2xpZW50Q29uZmlnCgkJCWVudmlyb25tZW50OiAkZW52aXJvbm1lbnQKCQkJYXBwVmVyc2lvbjogJGFwcFZlcnNpb24KCQkJc2VydmljZU5hbWU6ICRzZXJ2aWNlTmFtZQoJCQlmaW5nZXJwcmludDogJGlkCgkJCWNsaWVudF9pZDogJGNsaWVudF9pZAoJCQluZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiAkbmV0d29ya19yZWNvcmRpbmdfZG9tYWlucwoJCQlkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiAkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZwoJCQlwcml2YWN5X3NldHRpbmc6ICRwcml2YWN5X3NldHRpbmcKCQkpIHsKCQkJc2VjdXJlX2lkCgkJCXByb2plY3RfaWQKCQkJc2FtcGxpbmcgewoJCQkJc3BhbnMgewoJCQkJCW5hbWUgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZXMgewoJCQkJCQlrZXkgewoJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQl9CgkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQl9CgkJCQkJZXZlbnRzIHsKCQkJCQkJbmFtZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQkJYXR0cmlidXRlcyB7CgkJCQkJCQlrZXkgewoJCQkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQkJCX0KCQkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCXNhbXBsaW5nUmF0aW8KCQkJCX0KCQkJCWxvZ3MgewoJCQkJCW1lc3NhZ2UgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCXNldmVyaXR5VGV4dCB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQkJYXR0cmlidXRlcyB7CgkJCQkJCWtleSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQkJYXR0cmlidXRlIHsKCQkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQkJfQoJCQkJCX0KCQkJCQlzYW1wbGluZ1JhdGlvCgkJCQl9CgkJCX0KCQl9Cgl9Cgkke0x0fQpgLGhyPUpgCglxdWVyeSBJZ25vcmUoJGlkOiBJRCEpIHsKCQlpZ25vcmUoaWQ6ICRpZCkKCX0KYCxkcj1KYAoJcXVlcnkgR2V0U2FtcGxpbmdDb25maWcoJG9yZ2FuaXphdGlvbl92ZXJib3NlX2lkOiBTdHJpbmchKSB7CgkJc2FtcGxpbmcob3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6ICRvcmdhbml6YXRpb25fdmVyYm9zZV9pZCkgewoJCQlzcGFucyB7CgkJCQluYW1lIHsKCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQl9CgkJCQlhdHRyaWJ1dGVzIHsKCQkJCQlrZXkgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQl9CgkJCQlldmVudHMgewoJCQkJCW5hbWUgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZXMgewoJCQkJCQlrZXkgewoJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQl9CgkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlzYW1wbGluZ1JhdGlvCgkJCX0KCQkJbG9ncyB7CgkJCQltZXNzYWdlIHsKCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQl9CgkJCQlzZXZlcml0eVRleHQgewoJCQkJCS4uLk1hdGNoUGFydHMKCQkJCX0KCQkJCWF0dHJpYnV0ZXMgewoJCQkJCWtleSB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQkJYXR0cmlidXRlIHsKCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCX0KCQkJCX0KCQkJCXNhbXBsaW5nUmF0aW8KCQkJfQoJCX0KCX0KCSR7THR9CmAscHI9KGUsdCxuLGkpPT5lKCk7ZnVuY3Rpb24gbXIoZSx0PXByKXtyZXR1cm57UHVzaFBheWxvYWQobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3Qoc3IsbixEKEQoe30saSkscikpLCJQdXNoUGF5bG9hZCIsIm11dGF0aW9uIixuKX0sUHVzaFNlc3Npb25FdmVudHMobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3Qob3IsbixEKEQoe30saSkscikpLCJQdXNoU2Vzc2lvbkV2ZW50cyIsIm11dGF0aW9uIixuKX0saWRlbnRpZnlTZXNzaW9uKG4saSl7cmV0dXJuIHQocj0+ZS5yZXF1ZXN0KGFyLG4sRChEKHt9LGkpLHIpKSwiaWRlbnRpZnlTZXNzaW9uIiwibXV0YXRpb24iLG4pfSxhZGRTZXNzaW9uUHJvcGVydGllcyhuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdChjcixuLEQoRCh7fSxpKSxyKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iLG4pfSxwdXNoTWV0cmljcyhuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdCh1cixuLEQoRCh7fSxpKSxyKSksInB1c2hNZXRyaWNzIiwibXV0YXRpb24iLG4pfSxhZGRTZXNzaW9uRmVlZGJhY2sobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3QobHIsbixEKEQoe30saSkscikpLCJhZGRTZXNzaW9uRmVlZGJhY2siLCJtdXRhdGlvbiIsbil9LGluaXRpYWxpemVTZXNzaW9uKG4saSl7cmV0dXJuIHQocj0+ZS5yZXF1ZXN0KGZyLG4sRChEKHt9LGkpLHIpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIsbil9LElnbm9yZShuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdChocixuLEQoRCh7fSxpKSxyKSksIklnbm9yZSIsInF1ZXJ5IixuKX0sR2V0U2FtcGxpbmdDb25maWcobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3QoZHIsbixEKEQoe30saSkscikpLCJHZXRTYW1wbGluZ0NvbmZpZyIsInF1ZXJ5IixuKX19fXZhciBXPVVpbnQ4QXJyYXksWj1VaW50MTZBcnJheSxldD1JbnQzMkFycmF5LHR0PW5ldyBXKFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwLDBdKSxudD1uZXcgVyhbMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxMywwLDBdKSxGdD1uZXcgVyhbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLE10PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBaKDMxKSxpPTA7aTwzMTsrK2kpbltpXT10Kz0xPDxlW2ktMV07Zm9yKHZhciByPW5ldyBldChuWzMwXSksaT0xO2k8MzA7KytpKWZvcih2YXIgcz1uW2ldO3M8bltpKzFdOysrcylyW3NdPXMtbltpXTw8NXxpO3JldHVybntiOm4scn19LCR0PU10KHR0LDIpLHlyPSR0LmIscnQ9JHQucjt5clsyOF09MjU4LHJ0WzI1OF09Mjg7Zm9yKHZhciBncj1NdChudCwwKSxCdD1nci5yLGl0PW5ldyBaKDMyNzY4KSxMPTA7TDwzMjc2ODsrK0wpe3ZhciBhZT0oTCY0MzY5MCk+PjF8KEwmMjE4NDUpPDwxO2FlPShhZSY1MjQyOCk+PjJ8KGFlJjEzMTA3KTw8MixhZT0oYWUmNjE2ODApPj40fChhZSYzODU1KTw8NCxpdFtMXT0oKGFlJjY1MjgwKT4+OHwoYWUmMjU1KTw8OCk+PjF9Zm9yKHZhciBOZT1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPWUubGVuZ3RoLHI9MCxzPW5ldyBaKHQpO3I8aTsrK3IpZVtyXSYmKytzW2Vbcl0tMV07dmFyIG89bmV3IFoodCk7Zm9yKHI9MTtyPHQ7KytyKW9bcl09b1tyLTFdK3Nbci0xXTw8MTt2YXIgYztpZihuKXtjPW5ldyBaKDE8PHQpO3ZhciBmPTE1LXQ7Zm9yKHI9MDtyPGk7KytyKWlmKGVbcl0pZm9yKHZhciBkPXI8PDR8ZVtyXSx1PXQtZVtyXSx5PW9bZVtyXS0xXSsrPDx1LHY9eXwoMTw8dSktMTt5PD12OysreSljW2l0W3ldPj5mXT1kfWVsc2UgZm9yKGM9bmV3IFooaSkscj0wO3I8aTsrK3IpZVtyXSYmKGNbcl09aXRbb1tlW3JdLTFdKytdPj4xNS1lW3JdKTtyZXR1cm4gY30sbGU9bmV3IFcoMjg4KSxMPTA7TDwxNDQ7KytMKWxlW0xdPTg7Zm9yKHZhciBMPTE0NDtMPDI1NjsrK0wpbGVbTF09OTtmb3IodmFyIEw9MjU2O0w8MjgwOysrTClsZVtMXT03O2Zvcih2YXIgTD0yODA7TDwyODg7KytMKWxlW0xdPTg7Zm9yKHZhciBGZT1uZXcgVygzMiksTD0wO0w8MzI7KytMKUZlW0xdPTU7dmFyIHZyPU5lKGxlLDksMCksRXI9TmUoRmUsNSwwKSxVdD1mdW5jdGlvbihlKXtyZXR1cm4oZSs3KS84fDB9LFZ0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4obj09bnVsbHx8bj5lLmxlbmd0aCkmJihuPWUubGVuZ3RoKSxuZXcgVyhlLnN1YmFycmF5KHQsbikpfSxpZT1mdW5jdGlvbihlLHQsbil7bjw8PXQmNzt2YXIgaT10Lzh8MDtlW2ldfD1uLGVbaSsxXXw9bj4+OH0seGU9ZnVuY3Rpb24oZSx0LG4pe248PD10Jjc7dmFyIGk9dC84fDA7ZVtpXXw9bixlW2krMV18PW4+PjgsZVtpKzJdfD1uPj4xNn0sc3Q9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10saT0wO2k8ZS5sZW5ndGg7KytpKWVbaV0mJm4ucHVzaCh7czppLGY6ZVtpXX0pO3ZhciByPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFyKXJldHVybnt0Onp0LGw6MH07aWYocj09MSl7dmFyIG89bmV3IFcoblswXS5zKzEpO3JldHVybiBvW25bMF0uc109MSx7dDpvLGw6MX19bi5zb3J0KGZ1bmN0aW9uKCQscSl7cmV0dXJuICQuZi1xLmZ9KSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBjPW5bMF0sZj1uWzFdLGQ9MCx1PTEseT0yO2ZvcihuWzBdPXtzOi0xLGY6Yy5mK2YuZixsOmMscjpmfTt1IT1yLTE7KWM9bltuW2RdLmY8blt5XS5mP2QrKzp5KytdLGY9bltkIT11JiZuW2RdLmY8blt5XS5mP2QrKzp5KytdLG5bdSsrXT17czotMSxmOmMuZitmLmYsbDpjLHI6Zn07Zm9yKHZhciB2PXNbMF0ucyxpPTE7aTxyOysraSlzW2ldLnM+diYmKHY9c1tpXS5zKTt2YXIgYj1uZXcgWih2KzEpLG09b3Qoblt1LTFdLGIsMCk7aWYobT50KXt2YXIgaT0wLE49MCxnPW0tdCxFPTE8PGc7Zm9yKHMuc29ydChmdW5jdGlvbihxLEIpe3JldHVybiBiW0Iuc10tYltxLnNdfHxxLmYtQi5mfSk7aTxyOysraSl7dmFyIEM9c1tpXS5zO2lmKGJbQ10+dClOKz1FLSgxPDxtLWJbQ10pLGJbQ109dDtlbHNlIGJyZWFrfWZvcihOPj49ZztOPjA7KXt2YXIgdz1zW2ldLnM7Ylt3XTx0P04tPTE8PHQtYlt3XSsrLTE6KytpfWZvcig7aT49MCYmTjstLWkpe3ZhciBSPXNbaV0ucztiW1JdPT10JiYoLS1iW1JdLCsrTil9bT10fXJldHVybnt0Om5ldyBXKGIpLGw6bX19LG90PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5zPT0tMT9NYXRoLm1heChvdChlLmwsdCxuKzEpLG90KGUucix0LG4rMSkpOnRbZS5zXT1ufSxqdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGg7dCYmIWVbLS10XTspO2Zvcih2YXIgbj1uZXcgWigrK3QpLGk9MCxyPWVbMF0scz0xLG89ZnVuY3Rpb24oZil7bltpKytdPWZ9LGM9MTtjPD10OysrYylpZihlW2NdPT1yJiZjIT10KSsrcztlbHNle2lmKCFyJiZzPjIpe2Zvcig7cz4xMzg7cy09MTM4KW8oMzI3NTQpO3M+MiYmKG8ocz4xMD9zLTExPDw1fDI4NjkwOnMtMzw8NXwxMjMwNSkscz0wKX1lbHNlIGlmKHM+Myl7Zm9yKG8ociksLS1zO3M+NjtzLT02KW8oODMwNCk7cz4yJiYobyhzLTM8PDV8ODIwOCkscz0wKX1mb3IoO3MtLTspbyhyKTtzPTEscj1lW2NdfXJldHVybntjOm4uc3ViYXJyYXkoMCxpKSxuOnR9fSxBZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLGk9MDtpPHQubGVuZ3RoOysraSluKz1lW2ldKnRbaV07cmV0dXJuIG59LHF0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLmxlbmd0aCxyPVV0KHQrMik7ZVtyXT1pJjI1NSxlW3IrMV09aT4+OCxlW3IrMl09ZVtyXV4yNTUsZVtyKzNdPWVbcisxXV4yNTU7Zm9yKHZhciBzPTA7czxpOysrcyllW3Ircys0XT1uW3NdO3JldHVybihyKzQraSkqOH0sR3Q9ZnVuY3Rpb24oZSx0LG4saSxyLHMsbyxjLGYsZCx1KXtpZSh0LHUrKyxuKSwrK3JbMjU2XTtmb3IodmFyIHk9c3QociwxNSksdj15LnQsYj15LmwsbT1zdChzLDE1KSxOPW0udCxnPW0ubCxFPWp0KHYpLEM9RS5jLHc9RS5uLFI9anQoTiksJD1SLmMscT1SLm4sQj1uZXcgWigxOSksST0wO0k8Qy5sZW5ndGg7KytJKSsrQltDW0ldJjMxXTtmb3IodmFyIEk9MDtJPCQubGVuZ3RoOysrSSkrK0JbJFtJXSYzMV07Zm9yKHZhciBTPXN0KEIsNyksaj1TLnQsVT1TLmwsej0xOTt6PjQmJiFqW0Z0W3otMV1dOy0teik7dmFyIEs9ZCs1PDwzLGE9QWUocixsZSkrQWUocyxGZSkrbyxoPUFlKHIsdikrQWUocyxOKStvKzE0KzMqeitBZShCLGopKzIqQlsxNl0rMypCWzE3XSs3KkJbMThdO2lmKGY+PTAmJks8PWEmJks8PWgpcmV0dXJuIHF0KHQsdSxlLnN1YmFycmF5KGYsZitkKSk7dmFyIF8sQSxrLHg7aWYoaWUodCx1LDErKGg8YSkpLHUrPTIsaDxhKXtfPU5lKHYsYiwwKSxBPXYsaz1OZShOLGcsMCkseD1OO3ZhciBjZT1OZShqLFUsMCk7aWUodCx1LHctMjU3KSxpZSh0LHUrNSxxLTEpLGllKHQsdSsxMCx6LTQpLHUrPTE0O2Zvcih2YXIgST0wO0k8ejsrK0kpaWUodCx1KzMqSSxqW0Z0W0ldXSk7dSs9Myp6O2Zvcih2YXIgSD1bQywkXSxzZT0wO3NlPDI7KytzZSlmb3IodmFyIHllPUhbc2VdLEk9MDtJPHllLmxlbmd0aDsrK0kpe3ZhciBuZT15ZVtJXSYzMTtpZSh0LHUsY2VbbmVdKSx1Kz1qW25lXSxuZT4xNSYmKGllKHQsdSx5ZVtJXT4+NSYxMjcpLHUrPXllW0ldPj4xMil9fWVsc2UgXz12cixBPWxlLGs9RXIseD1GZTtmb3IodmFyIEk9MDtJPGM7KytJKXt2YXIgWT1pW0ldO2lmKFk+MjU1KXt2YXIgbmU9WT4+MTgmMzE7eGUodCx1LF9bbmUrMjU3XSksdSs9QVtuZSsyNTddLG5lPjcmJihpZSh0LHUsWT4+MjMmMzEpLHUrPXR0W25lXSk7dmFyIGdlPVkmMzE7eGUodCx1LGtbZ2VdKSx1Kz14W2dlXSxnZT4zJiYoeGUodCx1LFk+PjUmODE5MSksdSs9bnRbZ2VdKX1lbHNlIHhlKHQsdSxfW1ldKSx1Kz1BW1ldfXJldHVybiB4ZSh0LHUsX1syNTZdKSx1K0FbMjU2XX0sX3I9bmV3IGV0KFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLHp0PW5ldyBXKDApLFRyPWZ1bmN0aW9uKGUsdCxuLGkscixzKXt2YXIgbz1zLnp8fGUubGVuZ3RoLGM9bmV3IFcoaStvKzUqKDErTWF0aC5jZWlsKG8vN2UzKSkrciksZj1jLnN1YmFycmF5KGksYy5sZW5ndGgtciksZD1zLmwsdT0ocy5yfHwwKSY3O2lmKHQpe3UmJihmWzBdPXMucj4+Myk7Zm9yKHZhciB5PV9yW3QtMV0sdj15Pj4xMyxiPXkmODE5MSxtPSgxPDxuKS0xLE49cy5wfHxuZXcgWigzMjc2OCksZz1zLmh8fG5ldyBaKG0rMSksRT1NYXRoLmNlaWwobi8zKSxDPTIqRSx3PWZ1bmN0aW9uKGx0KXtyZXR1cm4oZVtsdF1eZVtsdCsxXTw8RV5lW2x0KzJdPDxDKSZtfSxSPW5ldyBldCgyNWUzKSwkPW5ldyBaKDI4OCkscT1uZXcgWigzMiksQj0wLEk9MCxTPXMuaXx8MCxqPTAsVT1zLnd8fDAsej0wO1MrMjxvOysrUyl7dmFyIEs9dyhTKSxhPVMmMzI3NjcsaD1nW0tdO2lmKE5bYV09aCxnW0tdPWEsVTw9Uyl7dmFyIF89by1TO2lmKChCPjdlM3x8aj4yNDU3NikmJihfPjQyM3x8IWQpKXt1PUd0KGUsZiwwLFIsJCxxLEksaix6LFMteix1KSxqPUI9ST0wLHo9Uztmb3IodmFyIEE9MDtBPDI4NjsrK0EpJFtBXT0wO2Zvcih2YXIgQT0wO0E8MzA7KytBKXFbQV09MH12YXIgaz0yLHg9MCxjZT1iLEg9YS1oJjMyNzY3O2lmKF8+MiYmSz09dyhTLUgpKWZvcih2YXIgc2U9TWF0aC5taW4odixfKS0xLHllPU1hdGgubWluKDMyNzY3LFMpLG5lPU1hdGgubWluKDI1OCxfKTtIPD15ZSYmLS1jZSYmYSE9aDspe2lmKGVbUytrXT09ZVtTK2stSF0pe2Zvcih2YXIgWT0wO1k8bmUmJmVbUytZXT09ZVtTK1ktSF07KytZKTtpZihZPmspe2lmKGs9WSx4PUgsWT5zZSlicmVhaztmb3IodmFyIGdlPU1hdGgubWluKEgsWS0yKSxXdD0wLEE9MDtBPGdlOysrQSl7dmFyIGN0PVMtSCtBJjMyNzY3LFVyPU5bY3RdLFp0PWN0LVVyJjMyNzY3O1p0Pld0JiYoV3Q9WnQsaD1jdCl9fX1hPWgsaD1OW2FdLEgrPWEtaCYzMjc2N31pZih4KXtSW2orK109MjY4NDM1NDU2fHJ0W2tdPDwxOHxCdFt4XTt2YXIgS3Q9cnRba10mMzEsZW49QnRbeF0mMzE7SSs9dHRbS3RdK250W2VuXSwrKyRbMjU3K0t0XSwrK3FbZW5dLFU9UytrLCsrQn1lbHNlIFJbaisrXT1lW1NdLCsrJFtlW1NdXX19Zm9yKFM9TWF0aC5tYXgoUyxVKTtTPG87KytTKVJbaisrXT1lW1NdLCsrJFtlW1NdXTt1PUd0KGUsZixkLFIsJCxxLEksaix6LFMteix1KSxkfHwocy5yPXUmN3xmW3UvOHwwXTw8Myx1LT03LHMuaD1nLHMucD1OLHMuaT1TLHMudz1VKX1lbHNle2Zvcih2YXIgUz1zLnd8fDA7UzxvK2Q7Uys9NjU1MzUpe3ZhciB1dD1TKzY1NTM1O3V0Pj1vJiYoZlt1Lzh8MF09ZCx1dD1vKSx1PXF0KGYsdSsxLGUuc3ViYXJyYXkoUyx1dCkpfXMuaT1vfXJldHVybiBWdChjLDAsaStVdCh1KStyKX0sYnI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IEludDMyQXJyYXkoMjU2KSx0PTA7dDwyNTY7Kyt0KXtmb3IodmFyIG49dCxpPTk7LS1pOyluPShuJjEmJi0zMDY2NzQ5MTIpXm4+Pj4xO2VbdF09bn1yZXR1cm4gZX0oKSxOcj1mdW5jdGlvbigpe3ZhciBlPS0xO3JldHVybntwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1lLGk9MDtpPHQubGVuZ3RoOysraSluPWJyW24mMjU1XnRbaV1dXm4+Pj44O2U9bn0sZDpmdW5jdGlvbigpe3JldHVybn5lfX19LHhyPWZ1bmN0aW9uKGUsdCxuLGkscil7aWYoIXImJihyPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IFcocy5sZW5ndGgrZS5sZW5ndGgpO28uc2V0KHMpLG8uc2V0KGUscy5sZW5ndGgpLGU9byxyLnc9cy5sZW5ndGh9cmV0dXJuIFRyKGUsdC5sZXZlbD09bnVsbD82OnQubGV2ZWwsdC5tZW09PW51bGw/ci5sP01hdGguY2VpbChNYXRoLm1heCg4LE1hdGgubWluKDEzLE1hdGgubG9nKGUubGVuZ3RoKSkpKjEuNSk6MjA6MTIrdC5tZW0sbixpLHIpfSxhdD1mdW5jdGlvbihlLHQsbil7Zm9yKDtuOysrdCllW3RdPW4sbj4+Pj04fSxBcj1mdW5jdGlvbihlLHQpe3ZhciBuPXQuZmlsZW5hbWU7aWYoZVswXT0zMSxlWzFdPTEzOSxlWzJdPTgsZVs4XT10LmxldmVsPDI/NDp0LmxldmVsPT05PzI6MCxlWzldPTMsdC5tdGltZSE9MCYmYXQoZSw0LE1hdGguZmxvb3IobmV3IERhdGUodC5tdGltZXx8RGF0ZS5ub3coKSkvMWUzKSksbil7ZVszXT04O2Zvcih2YXIgaT0wO2k8PW4ubGVuZ3RoOysraSllW2krMTBdPW4uY2hhckNvZGVBdChpKX19LElyPWZ1bmN0aW9uKGUpe3JldHVybiAxMCsoZS5maWxlbmFtZT9lLmZpbGVuYW1lLmxlbmd0aCsxOjApfTtmdW5jdGlvbiBTcihlLHQpe3R8fCh0PXt9KTt2YXIgbj1OcigpLGk9ZS5sZW5ndGg7bi5wKGUpO3ZhciByPXhyKGUsdCxJcih0KSw4KSxzPXIubGVuZ3RoO3JldHVybiBBcihyLHQpLGF0KHIscy04LG4uZCgpKSxhdChyLHMtNCxpKSxyfXZhciBIdD10eXBlb2YgVGV4dEVuY29kZXIhPSJ1bmRlZmluZWQiJiZuZXcgVGV4dEVuY29kZXIsT3I9dHlwZW9mIFRleHREZWNvZGVyIT0idW5kZWZpbmVkIiYmbmV3IFRleHREZWNvZGVyLHdyPTA7dHJ5e09yLmRlY29kZSh6dCx7c3RyZWFtOiEwfSksd3I9MX1jYXRjaChlKXt9ZnVuY3Rpb24gRHIoZSx0KXt2YXIgbjtpZihIdClyZXR1cm4gSHQuZW5jb2RlKGUpO2Zvcih2YXIgaT1lLmxlbmd0aCxyPW5ldyBXKGUubGVuZ3RoKyhlLmxlbmd0aD4+MSkpLHM9MCxvPWZ1bmN0aW9uKGQpe3JbcysrXT1kfSxuPTA7bjxpOysrbil7aWYocys1PnIubGVuZ3RoKXt2YXIgYz1uZXcgVyhzKzgrKGktbjw8MSkpO2Muc2V0KHIpLHI9Y312YXIgZj1lLmNoYXJDb2RlQXQobik7ZjwxMjh8fHQ/byhmKTpmPDIwNDg/KG8oMTkyfGY+PjYpLG8oMTI4fGYmNjMpKTpmPjU1Mjk1JiZmPDU3MzQ0PyhmPTY1NTM2KyhmJjEwNDc1NTIpfGUuY2hhckNvZGVBdCgrK24pJjEwMjMsbygyNDB8Zj4+MTgpLG8oMTI4fGY+PjEyJjYzKSxvKDEyOHxmPj42JjYzKSxvKDEyOHxmJjYzKSk6KG8oMjI0fGY+PjEyKSxvKDEyOHxmPj42JjYzKSxvKDEyOHxmJjYzKSl9cmV0dXJuIFZ0KHIsMCxzKX1mdW5jdGlvbiBDcihlKXtyZXR1cm4gUSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3QgdD1EcihKU09OLnN0cmluZ2lmeShlKSksbj1Tcih0KSxpPXlpZWxkIG5ldyBQcm9taXNlKHI9Pntjb25zdCBzPW5ldyBGaWxlUmVhZGVyO3Mub25sb2FkPSgpPT5yKHMucmVzdWx0KSxzLnJlYWRBc0RhdGFVUkwobmV3IEJsb2IoW25ldyBVaW50OEFycmF5KG4pXSkpfSk7cmV0dXJue2NvbXByZXNzZWRCYXNlNjQ6aS5zbGljZShpLmluZGV4T2YoIiwiKSsxKSxjb21wcmVzc2VkU2l6ZTpuLmxlbmd0aCxidWZmZXJMZW5ndGg6dC5sZW5ndGh9fSl9Y2xhc3Mga3J7Y29uc3RydWN0b3IodCxuKXtodCh0aGlzLCJkZWJ1ZyIpO2h0KHRoaXMsIm5hbWUiKTt0aGlzLmRlYnVnPXQsdGhpcy5uYW1lPW59bG9nKC4uLnQpe2lmKHRoaXMuZGVidWcpe2xldCBuPWBbJHtEYXRlLm5vdygpfV1gO3RoaXMubmFtZSYmKG4rPWAgLSAke3RoaXMubmFtZX1gKSxjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtuLC4uLnRdKX19d2FybiguLi50KXtsZXQgbj1gWyR7RGF0ZS5ub3coKX1dYDt0aGlzLm5hbWUmJihuKz1gIC0gJHt0aGlzLm5hbWV9YCksY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsW24sLi4udF0pfX12YXIgWXQ9KGU9PihlLkJpbGxpbmdRdW90YUV4Y2VlZGVkPSJCaWxsaW5nUXVvdGFFeGNlZWRlZCIsZSkpKFl0fHx7fSk7Y29uc3QgUnI9MTAsUHI9MWUzLExyPTUwMCxGcj1bWXQuQmlsbGluZ1F1b3RhRXhjZWVkZWQudG9TdHJpbmcoKV0sTXI9ZT0+e3ZhciBuO3JldHVybigobj1lLnJlc3BvbnNlLmVycm9ycyk9PW51bGw/dm9pZCAwOm4uZmluZChpPT5Gci5pbmNsdWRlcyhpLm1lc3NhZ2UpKSk9PT12b2lkIDB9LCRyPSgpPT57Y29uc3QgZT0odCxuLGkscixzPTApPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7cmV0dXJuIHlpZWxkIHQoKX1jYXRjaChvKXtpZihvIGluc3RhbmNlb2YgZGUmJiFNcihvKSl0aHJvdyBvO2lmKHM8UnIpcmV0dXJuIHlpZWxkIG5ldyBQcm9taXNlKGM9PnNldFRpbWVvdXQoYyxQcitMcipNYXRoLnBvdygyLHMpKSkseWllbGQgZSh0LG4saSxyLHMrMSk7dGhyb3cgY29uc29sZS5lcnJvcihgaGlnaGxpZ2h0LmlvOiBkYXRhIHJlcXVlc3QgZmFpbGVkIGFmdGVyICR7c30gcmV0cmllc2ApLG99fSk7cmV0dXJuIGV9LEp0PTUsUXQ9MmUzLEJyPVsibnVtYmVyIiwic3RyaW5nIiwiYm9vbGVhbiJdO3ZhciB0ZT0oZT0+KGVbZS5Jbml0aWFsaXplPTBdPSJJbml0aWFsaXplIixlW2UuQXN5bmNFdmVudHM9MV09IkFzeW5jRXZlbnRzIixlW2UuSWRlbnRpZnk9Ml09IklkZW50aWZ5IixlW2UuUHJvcGVydGllcz0zXT0iUHJvcGVydGllcyIsZVtlLk1ldHJpY3M9NF09Ik1ldHJpY3MiLGVbZS5GZWVkYmFjaz01XT0iRmVlZGJhY2siLGVbZS5DdXN0b21FdmVudD02XT0iQ3VzdG9tRXZlbnQiLGVbZS5TdG9wPTddPSJTdG9wIixlKSkodGV8fHt9KTtjb25zdCBNZT1zZWxmO2Z1bmN0aW9uIFh0KGUsdCl7Y29uc3Qgbj17fSxpPVtdLHI9W107Zm9yKGNvbnN0W3Msb11vZiBPYmplY3QuZW50cmllcyhlKSl7aWYobz09bnVsbCljb250aW51ZTtCci5pbmNsdWRlcyh0eXBlb2Ygbyl8fGkucHVzaCh7W3NdOm99KTtsZXQgYzt0eXBlb2Ygbz09InN0cmluZyI/Yz1vOmM9bWUobyksYy5sZW5ndGg+UXQmJihyLnB1c2goe1tzXTpvfSksYz1jLnN1YnN0cmluZygwLFF0KSksbltzXT1jfXJldHVybiB0IT09InNlc3Npb24iJiYoaS5sZW5ndGg+MCYmY29uc29sZS53YXJuKGBIaWdobGlnaHQgd2FzIHBhc3NlZCBvbmUgb3IgbW9yZSAke3R9IHByb3BlcnRpZXMgbm90IG9mIHR5cGUgc3RyaW5nLCBudW1iZXIsIG9yIGJvb2xlYW4uYCxpKSxyLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBleGNlZWRpbmcgMjAwMCBjaGFyYWN0ZXJzLCB3aGljaCB3aWxsIGJlIHRydW5jYXRlZC5gLHIpKSxufXtsZXQgZSx0LG4saT0wLHI9MCxzPSExLG89MCxjPW5ldyBrcighMSwiW3dvcmtlcl0iKTtjb25zdCBmPVtdLGQ9KCk9Pm8hPT0wJiZpPEp0JiYhIShuIT1udWxsJiZuLmxlbmd0aCksdT0oZyxFKT0+e01lLnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTp0ZS5DdXN0b21FdmVudCx0YWc6ZyxwYXlsb2FkOkV9fSl9LHk9Zz0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3R7aWQ6RSxldmVudHM6QyxtZXNzYWdlczp3LGVycm9yczpSLHJlc291cmNlc1N0cmluZzokLHdlYlNvY2tldEV2ZW50c1N0cmluZzpxLGhhc1Nlc3Npb25VbmxvYWRlZDpCLGhpZ2hsaWdodExvZ3M6SX09ZyxTPW1lKHttZXNzYWdlczp3fSk7bGV0IGo9e3Nlc3Npb25fc2VjdXJlX2lkOm4scGF5bG9hZF9pZDpFLnRvU3RyaW5nKCksZXZlbnRzOntldmVudHM6Q30sbWVzc2FnZXM6UyxyZXNvdXJjZXM6JCx3ZWJfc29ja2V0X2V2ZW50czpxLGVycm9yczpSLGlzX2JlYWNvbjohMSxoYXNfc2Vzc2lvbl91bmxvYWRlZDpCfTtJJiYoai5oaWdobGlnaHRfbG9ncz1JKTtjb25zdHtjb21wcmVzc2VkQmFzZTY0OlUsYnVmZmVyTGVuZ3RoOnosY29tcHJlc3NlZFNpemU6S309eWllbGQgQ3IoaiksYT17dHlwZTp0ZS5Bc3luY0V2ZW50cyxpZDpFLGV2ZW50c1NpemU6eixjb21wcmVzc2VkU2l6ZTpVLmxlbmd0aH07Yy5sb2coYFB1c2hpbmcgcGF5bG9hZDogJHtKU09OLnN0cmluZ2lmeSh7c2Vzc2lvblNlY3VyZUlEOm4saWQ6RSxmaXJzdFNJRDpNYXRoLm1pbiguLi5qLmV2ZW50cy5ldmVudHMubWFwKHg9Png9PW51bGw/dm9pZCAwOnguX3NpZCkuZmlsdGVyKHg9PiEheCkpLGV2ZW50c0xlbmd0aDpqLmV2ZW50cy5ldmVudHMubGVuZ3RoLG1lc3NhZ2VzTGVuZ3RoOncubGVuZ3RoLHJlc291cmNlc0xlbmd0aDokLmxlbmd0aCx3ZWJTb2NrZXRMZW5ndGg6cS5sZW5ndGgsZXJyb3JzTGVuZ3RoOlIubGVuZ3RoLGJ1Zkxlbmd0aDp6LGNvbXByZXNzZWRMZW5ndGg6Syxjb21wcmVzc2VkQmFzZTY0TGVuZ3RoOlUubGVuZ3RofSx2b2lkIDAsMil9YCk7Y29uc3QgaD1lLlB1c2hTZXNzaW9uRXZlbnRzKHtzZXNzaW9uX3NlY3VyZV9pZDpuLHBheWxvYWRfaWQ6RS50b1N0cmluZygpLGRhdGE6VX0pO2xldCBfPVByb21pc2UucmVzb2x2ZSgpO2YubGVuZ3RoJiYoXz1lLnB1c2hNZXRyaWNzKHttZXRyaWNzOmZ9KSxmLnNwbGljZSgwKSk7bGV0IEE9cGVyZm9ybWFuY2Uubm93KCk7Y29uc3Qgaz1zZXRJbnRlcnZhbCgoKT0+e0EmJnBlcmZvcm1hbmNlLm5vdygpLUE+a3QmJihjb25zb2xlLndhcm4oYFVwbG9hZGluZyBwdXNoUGF5bG9hZCB0b29rIHRvbyBsb25nLCBmYWlsdXJlIG51bWJlciAjJHtyfS5gKSxyKz0xLGNsZWFySW50ZXJ2YWwoaykscj49SnQmJihjb25zb2xlLndhcm4oIlVwbG9hZGluZyBwdXNoUGF5bG9hZCB0b29rIHRvbyBsb25nLCBzdG9wcGluZyByZWNvcmRpbmcgdG8gYXZvaWQgT09NLiIpLE1lLnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTp0ZS5TdG9wLHJlcXVlc3RTdGFydDpBLGFzeW5jRXZlbnRzUmVzcG9uc2U6YX19KSxiKHt0eXBlOnRlLlByb3BlcnRpZXMscHJvcGVydGllc09iamVjdDp7c3RvcFJlYXNvbjoiUHVzaCBQYXlsb2FkIFRpbWVvdXQifSxwcm9wZXJ0eVR5cGU6e3R5cGU6InRyYWNrIn19KSkpfSwxMDApO3RyeXt5aWVsZCBQcm9taXNlLmFsbChbaCxfXSksciYmcGVyZm9ybWFuY2Uubm93KCktQTw9a3QmJihjb25zb2xlLndhcm4oYHB1c2hQYXlsb2FkIHN1Y2NlZWRlZCBhZnRlciAjJHtyfSBmYWlsdXJlcywgcmVzZXR0aW5nIHN0b3Agc3dpdGNoLmApLHI9MCl9ZmluYWxseXtBPTAsY2xlYXJJbnRlcnZhbChrKX1NZS5wb3N0TWVzc2FnZSh7cmVzcG9uc2U6YX0pfSksdj1nPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHt1c2VyT2JqZWN0OkUsdXNlcklkZW50aWZpZXI6Qyxzb3VyY2U6d309Zzt3PT09InNlZ21lbnQiP3UoIlNlZ21lbnQgSWRlbnRpZnkiLG1lKEQoe3VzZXJJZGVudGlmaWVyOkN9LEUpKSk6dSgiSWRlbnRpZnkiLG1lKEQoe3VzZXJJZGVudGlmaWVyOkN9LEUpKSkseWllbGQgZS5pZGVudGlmeVNlc3Npb24oe3Nlc3Npb25fc2VjdXJlX2lkOm4sdXNlcl9pZGVudGlmaWVyOkMsdXNlcl9vYmplY3Q6WHQoRSwidXNlciIpfSk7Y29uc3QgUj13PT09InNlZ21lbnQiP3c6ImRlZmF1bHQiO2MubG9nKGBJZGVudGlmeSAoJHtDfSwgc291cmNlOiAke1J9KSB3LyBvYmo6ICR7bWUoRSl9IEAgJHt0fWApfSksYj1nPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHtwcm9wZXJ0aWVzT2JqZWN0OkUscHJvcGVydHlUeXBlOkN9PWc7bGV0IHc7KEM9PW51bGw/dm9pZCAwOkMudHlwZSk9PT0ic2Vzc2lvbiI/KHc9IlNlc3Npb24iLHlpZWxkIGUuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOm4scHJvcGVydGllc19vYmplY3Q6WHQoRSwic2Vzc2lvbiIpfSkpOihDPT1udWxsP3ZvaWQgMDpDLnNvdXJjZSk9PT0ic2VnbWVudCI/dz0iU2VnbWVudCI6dz0iVHJhY2siLHchPT0iU2Vzc2lvbiImJnUodyxtZShFKSksYy5sb2coYEFkZGluZyAke3d9IFByb3BlcnRpZXMgdG8gc2Vzc2lvbiAoJHtufSkgdy8gb2JqOiAke0pTT04uc3RyaW5naWZ5KEUpfSBAICR7dH1gKX0pLG09Zz0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Zi5wdXNoKC4uLmcubWV0cmljcy5tYXAoRT0+KHtuYW1lOkUubmFtZSx2YWx1ZTpFLnZhbHVlLHNlc3Npb25fc2VjdXJlX2lkOm4sY2F0ZWdvcnk6RS5jYXRlZ29yeSxncm91cDpFLmdyb3VwLHRpbWVzdGFtcDpFLnRpbWVzdGFtcC50b0lTT1N0cmluZygpLHRhZ3M6RS50YWdzfSkpKX0pLE49Zz0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3R7dGltZXN0YW1wOkUsdmVyYmF0aW06Qyx1c2VyRW1haWw6dyx1c2VyTmFtZTpSfT1nO3lpZWxkIGUuYWRkU2Vzc2lvbkZlZWRiYWNrKHtzZXNzaW9uX3NlY3VyZV9pZDpuLHRpbWVzdGFtcDpFLHZlcmJhdGltOkMsdXNlcl9lbWFpbDp3LHVzZXJfbmFtZTpSfSl9KTtNZS5vbm1lc3NhZ2U9ZnVuY3Rpb24oZyl7cmV0dXJuIFEodGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKGcuZGF0YS5tZXNzYWdlLnR5cGU9PT10ZS5Jbml0aWFsaXplKXt0PWcuZGF0YS5tZXNzYWdlLmJhY2tlbmQsbj1nLmRhdGEubWVzc2FnZS5zZXNzaW9uU2VjdXJlSUQscz1nLmRhdGEubWVzc2FnZS5kZWJ1ZyxvPWcuZGF0YS5tZXNzYWdlLnJlY29yZGluZ1N0YXJ0VGltZSxjLmRlYnVnPXMsZT1tcihuZXcgWW4odCx7aGVhZGVyczp7fX0pLCRyKCkpO3JldHVybn1pZihkKCkpdHJ5e2cuZGF0YS5tZXNzYWdlLnR5cGU9PT10ZS5Bc3luY0V2ZW50cz95aWVsZCB5KGcuZGF0YS5tZXNzYWdlKTpnLmRhdGEubWVzc2FnZS50eXBlPT09dGUuSWRlbnRpZnk/eWllbGQgdihnLmRhdGEubWVzc2FnZSk6Zy5kYXRhLm1lc3NhZ2UudHlwZT09PXRlLlByb3BlcnRpZXM/eWllbGQgYihnLmRhdGEubWVzc2FnZSk6Zy5kYXRhLm1lc3NhZ2UudHlwZT09PXRlLk1ldHJpY3M/eWllbGQgbShnLmRhdGEubWVzc2FnZSk6Zy5kYXRhLm1lc3NhZ2UudHlwZT09PXRlLkZlZWRiYWNrJiYoeWllbGQgTihnLmRhdGEubWVzc2FnZSkpLGk9MH1jYXRjaChFKXtzJiZjb25zb2xlLmVycm9yKEUpLGkrPTF9fSl9fX0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpZ2hsaWdodC1jbGllbnQtd29ya2VyLThaZ0xJRTFCLmpzLm1hcAo=",$X=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),Fb=typeof self!="undefined"&&self.Blob&&new Blob([$X(Ub)],{type:"text/javascript;charset=utf-8"});function Db(r){let e;try{if(e=Fb&&(self.URL||self.webkitURL).createObjectURL(Fb),!e)throw"";const t=new Worker(e,{name:r==null?void 0:r.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch(t){return new Worker("data:text/javascript;base64,"+Ub,{name:r==null?void 0:r.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}var Ce=(r=>(r[r.Initialize=0]="Initialize",r[r.AsyncEvents=1]="AsyncEvents",r[r.Identify=2]="Identify",r[r.Properties=3]="Properties",r[r.Metrics=4]="Metrics",r[r.Feedback=5]="Feedback",r[r.CustomEvent=6]="CustomEvent",r[r.Stop=7]="Stop",r))(Ce||{});function qX(r){return"regexValue"in r}function ek(r){return"matchValue"in r}function tk(r){const e=Math.trunc(r);return e===1?!0:e===0?!1:Math.floor(Math.random()*e)===0}class Yb{constructor(e=tk){v(this,"regexCache",new Map);v(this,"config");this.sampler=e}setConfig(e){this.config=e}isSamplingEnabled(){var e,t,n,i;return!!((t=(e=this.config)==null?void 0:e.logs)!=null&&t.length||(i=(n=this.config)==null?void 0:n.spans)!=null&&i.length)}shouldSample(e){var t,n;return e.name===Iy?this.sampleLog((t=this.config)==null?void 0:t.logs,e):this.sampleSpan((n=this.config)==null?void 0:n.spans,e)}matchesValue(e,t){if(!e)return!1;if(ek(e))return e.matchValue===t;if(qX(e)){const n=e.regexValue;if(n===null)return!1;this.regexCache.has(n)||this.regexCache.set(n,new RegExp(n));const i=this.regexCache.get(n);if(typeof t=="string")return i.test(t)}return!1}matchesAttributes(e,t){if(e)for(const n of e){let i=!1;for(const s of Object.keys(t))if(this.matchesValue(n.key,s)){const o=t[s];if(this.matchesValue(n.attribute,o)){i=!0;break}}if(!i)return!1}return!0}matchEvent(e,t){return!(e.name&&!this.matchesValue(e.name,t.name)||e.attributes&&(!t.attributes||!this.matchesAttributes(e.attributes,t.attributes)))}matchesEvents(e,t){if(e)for(const n of e){let i=!1;for(const s of t)if(this.matchEvent(n,s)){i=!0;break}if(!i)return!1}return!0}matchesSpanConfig(e,t){return!(e.name&&!this.matchesValue(e.name,t.name)||!this.matchesAttributes(e.attributes,t.attributes)||!this.matchesEvents(e.events,t.events))}matchesLogConfig(e,t){if(e.severityText){const n=t[Ly];if(typeof n=="string"&&!this.matchesValue(e.severityText,n))return!1}if(e.message){const n=t[Oy];if(typeof n=="string"&&!this.matchesValue(e.message,n))return!1}return!!this.matchesAttributes(e.attributes,t)}sampleSpan(e,t){if(e){for(const n of e)if(this.matchesSpanConfig(n,t))return{sample:this.sampler(n.samplingRatio),attributes:{[Cy]:n.samplingRatio}}}return{sample:!0}}sampleLog(e,t){if(e){for(const n of e)if(this.matchesLogConfig(n,t.attributes))return{sample:this.sampler(n.samplingRatio),attributes:{[Cy]:n.samplingRatio}}}return{sample:!0}}}const Ei=(r,e)=>{console.warn(`Highlight Warning: (${r}): `,{output:e})};class Yu{constructor(e,t){v(this,"options");v(this,"isRunningOnHighlight");v(this,"organizationID");v(this,"graphqlSDK");v(this,"events");v(this,"sessionData");v(this,"ready");v(this,"manualStopped");v(this,"state");v(this,"logger");v(this,"enableSegmentIntegration");v(this,"privacySetting");v(this,"enableCanvasRecording");v(this,"enablePerformanceRecording");v(this,"samplingStrategy");v(this,"inlineImages");v(this,"inlineVideos");v(this,"inlineStylesheet");v(this,"debugOptions");v(this,"listeners");v(this,"firstloadVersion");v(this,"environment");v(this,"sessionShortcut");v(this,"appVersion");v(this,"serviceName");v(this,"_worker");v(this,"_optionsInternal");v(this,"_backendUrl");v(this,"_recordingStartTime");v(this,"_isOnLocalHost");v(this,"_onToggleFeedbackFormVisibility");v(this,"_firstLoadListeners");v(this,"_isCrossOriginIframe");v(this,"_eventBytesSinceSnapshot");v(this,"_lastSnapshotTime");v(this,"_lastVisibilityChangeTime");v(this,"pushPayloadTimerId");v(this,"hasSessionUnloaded");v(this,"hasPushedData");v(this,"reloaded");v(this,"_hasPreviouslyInitialized");v(this,"_recordStop");v(this,"_gauges",new Map);v(this,"_counters",new Map);v(this,"_histograms",new Map);v(this,"_up_down_counters",new Map);v(this,"_integrations",[]);var i,s,o,l,a;e.sessionSecureID||(e.sessionSecureID=ct()),this.options=e,typeof((i=this.options)==null?void 0:i.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(o=(s=this.options)==null?void 0:s.debug)!=null?o:{},this.logger=new hu(this.debugOptions.clientInteractions),e.storageMode&&(this.logger.log(`initializing in ${e.storageMode} session mode`),eg(e.storageMode)),uo(!!(e!=null&&e.sessionCookie)),this._worker=new Db,this._worker.onmessage=c=>{var u,d,h;((u=c.data.response)==null?void 0:u.type)===Ce.AsyncEvents?(this._eventBytesSinceSnapshot+=c.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${c.data.response.id} size ${c.data.response.eventsSize} bytes, compression ratio ${c.data.response.eventsSize/c.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((d=c.data.response)==null?void 0:d.type)===Ce.CustomEvent?this.addCustomEvent(c.data.response.tag,c.data.response.payload):((h=c.data.response)==null?void 0:h.type)===Ce.Stop&&(Ei("Stopping recording due to worker failure",c.data.response),this.stopRecording(!1))};let n=At();if(this.reloaded=!1,!((l=this.sessionData)!=null&&l.sessionSecureID)&&(n!=null&&n.sessionSecureID))this.sessionData=n,this.options.sessionSecureID=n.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const c of Object.values(Se))on(c);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=t||new Ut(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(c){this._isCrossOriginIframe=(a=this.options.recordCrossOriginIframe)!=null?a:!0}this._initMembers(this.options)}static create(e){return new Yu(e)}_reset(n){return J(this,arguments,function*({forceNew:e,sessionKey:t}){this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0);let i,s;if(!e)try{i=Ve(Se.USER_IDENTIFIER);const o=Ve(Se.USER_OBJECT);o&&(s=JSON.parse(o))}catch(o){}for(const o of Object.values(Se))on(o);this.sessionData.sessionSecureID=t?ct(`${this.organizationID}-${t}`):ct(),this.sessionData.sessionKey=t,this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this.stopRecording(),this._firstLoadListeners=new Ut(this.options),yield this.initialize(),i&&s&&this.identify(i,s)})}_initMembers(e){var s,o,l,a,c,u,d,h,f,m;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=(s=e.privacySetting)!=null?s:"default",this.enableCanvasRecording=(o=e.enableCanvasRecording)!=null?o:!1,this.enablePerformanceRecording=(l=e.enablePerformanceRecording)!=null?l:!0,this.inlineImages=(a=e.inlineImages)!=null?a:this._isOnLocalHost,this.inlineVideos=(c=e.inlineVideos)!=null?c:this._isOnLocalHost,this.inlineStylesheet=(u=e.inlineStylesheet)!=null?u:this._isOnLocalHost,this.samplingStrategy=S({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:pp()},(d=e.samplingStrategy)!=null?d:{canvas:2}),this._backendUrl=(h=e==null?void 0:e.backendUrl)!=null?h:"https://pub.highlight.io",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const t=new qo(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=wl(t,uu()),this.environment=(f=e.environment)!=null?f:"production",this.appVersion=e.appVersion,this.serviceName=(m=e.serviceName)!=null?m:"",typeof e.organizationID=="string"?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const p=e,{firstloadVersion:n}=p,i=He(p,["firstloadVersion"]);this._optionsInternal=i,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime()}identify(e,t={},n){if(!e||e===""){console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t});return}this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,nt(Se.USER_IDENTIFIER,e.toString()),nt(Se.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:Ce.Identify,userIdentifier:e,userObject:t,source:n}});for(const i of this._integrations)i.identify(this.sessionData.sessionSecureID,e,t,n)}log(e,t,n){this._firstLoadListeners.messages.push(_p(t,vp,e,n))}pushCustomError(e,t){return this.consumeCustomError(new Error(e),void 0,t)}consumeCustomError(e,t,n){let i={};if(n)try{i=S(S({},JSON.parse(n)),i)}catch(s){}return this.consumeError(e,{message:t,payload:i})}consumeError(e,{message:t,payload:n,source:i,type:s}){var c,u,d,h;e.cause&&(n=P(S({},n),{"exception.cause":e.cause}));let o=t?t+":"+e.message:e.message;s==="React.ErrorBoundary"&&(o="ErrorBoundary: "+o);const l=Fn(e),a={event:o,type:s!=null?s:"custom",url:window.location.href,source:i!=null?i:"",lineNumber:(c=l[0])!=null&&c.lineNumber?(u=l[0])==null?void 0:u.lineNumber:0,columnNumber:(d=l[0])!=null&&d.columnNumber?(h=l[0])==null?void 0:h.columnNumber:0,stackTrace:l,timestamp:new Date().toISOString(),payload:JSON.stringify(n),id:Ps()};this._firstLoadListeners.errors.push(a);for(const f of this._integrations)f.error(this.sessionData.sessionSecureID,a)}addProperties(e={},t){const n=S({},e);Object.entries(n).forEach(([i,s])=>{try{structuredClone(s)}catch(o){delete n[i]}}),this._worker.postMessage({message:{type:Ce.Properties,propertiesObject:n,propertyType:t}});for(const i of this._integrations)i.track(this.sessionData.sessionSecureID,S({sessionSecureID:this.sessionData.sessionSecureID,propertyType:t},e))}initialize(e){return J(this,null,function*(){var t,n,i,s,o,l,a,c,u,d,h,f,m,p,g,y,T,E,C,R,N,V,Z,w,L;if(navigator!=null&&navigator.webdriver&&!window.Cypress||(t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Googlebot")||(n=navigator==null?void 0:navigator.userAgent)!=null&&n.includes("AdsBot")){(i=this._firstLoadListeners)==null||i.stopListening();return}try{if(e!=null&&e.forceNew){yield this._reset(e);return}if(e!=null&&e.sessionKey&&(e==null?void 0:e.sessionKey)!==this.sessionData.sessionKey){yield this._reset(P(S({},e),{forceNew:!0}));return}const k=new Yb;Zy({backendUrl:(o=(s=this.options)==null?void 0:s.backendUrl)!=null?o:"https://pub.highlight.io",otlpEndpoint:(a=(l=this.options)==null?void 0:l.otlpEndpoint)!=null?a:"https://otel.highlight.io",projectId:(c=this.options)==null?void 0:c.organizationID,sessionSecureId:(u=this.options)==null?void 0:u.sessionSecureID,environment:(h=(d=this.options)==null?void 0:d.environment)!=null?h:"production",networkRecordingOptions:typeof((f=this.options)==null?void 0:f.networkRecording)=="object"?this.options.networkRecording:void 0,tracingOrigins:(m=this.options)==null?void 0:m.tracingOrigins,serviceName:(g=(p=this.options)==null?void 0:p.serviceName)!=null?g:"highlight-browser",instrumentations:(T=(y=this.options)==null?void 0:y.otel)==null?void 0:T.instrumentations,eventNames:(C=(E=this.options)==null?void 0:E.otel)==null?void 0:C.eventNames,getIntegrations:()=>[...this._integrations]},k),this.logger.log("Initializing...",e,this.sessionData,this.options),this.sessionData=(R=At(this.sessionData.sessionSecureID))!=null?R:this.sessionData,(N=this.sessionData)!=null&&N.sessionStartTime?this._recordingStartTime=(V=this.sessionData)==null?void 0:V.sessionStartTime:(this._recordingStartTime=new Date().getTime(),this.sessionData.sessionStartTime=this._recordingStartTime),qt(""),it(this.sessionData);let A=Ve(ui.CLIENT_ID);A||(A=ct(),nt(ui.CLIENT_ID,A));let $;this.options.disableSessionRecording||this.options.disableNetworkRecording!==void 0||typeof this.options.networkRecording=="boolean"?$=!1:$=((Z=this.options.networkRecording)==null?void 0:Z.recordHeadersAndBody)||!1;let b=[];if(typeof this.options.networkRecording=="object"&&((w=this.options.networkRecording.destinationDomains)!=null&&w.length)&&(b=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const Y=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:$,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:A,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,session_key:this.sessionData.sessionKey,client_id:A,network_recording_domains:b,disable_session_recording:this.options.disableSessionRecording});if(Y.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${Y.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=Y.initializeSession.secure_id,this.sessionData.projectID=parseInt(((L=Y==null?void 0:Y.initializeSession)==null?void 0:L.project_id)||"0"),k.setConfig(Y.initializeSession.sampling),!this.sessionData.projectID||!this.sessionData.sessionSecureID){console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData);return}}this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Ce.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}});for(const Y of this._integrations)Y.init(this.sessionData.sessionSecureID);if(this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||Ut.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},so)),this.options.disableSessionRecording){this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",this.manualStopped=!1;return}const{getDeviceDetails:_}=Cb();_&&this.recordGauge({name:je.DeviceMemory,value:_().deviceMemory,category:ye.Device,group:window.location.href});const x=(Y,ne)=>{ne&&this.logger.log("received isCheckout emit",{event:Y}),this.events.push(Y)};x.bind(this);const U=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[D,M]=Ay(this.privacySetting);this._recordStop=rt({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:x,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:D,maskInputOptions:M,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:Y=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,collectFonts:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[qe()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Ei}:void 0}),U||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this.sessionData.sessionKey&&this.addProperties({sessionKey:this.sessionData.sessionKey},{type:"session"}),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(k){this._isOnLocalHost&&(console.error(k),Ei("initializeSession",k))}})}_visibilityHandler(e){return J(this,null,function*(){if(this.manualStopped){this.logger.log("Ignoring visibility event due to manual stop.");return}new Date().getTime()-this._lastVisibilityChangeTime<$m||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return J(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(e=>{const t=n=>{if(n.data.highlight===Xo){const i=n.data;this.logger.log("highlight got window message ",i),this.sessionData.projectID=i.projectID,this.sessionData.sessionSecureID=i.sessionSecureID,window.parent.postMessage({highlight:ko},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(e=>{var t;(t=e.contentWindow)==null||t.postMessage({highlight:Xo,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},so),window.addEventListener("message",e=>{e.data.highlight===ko&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var n;try{const i=this;this.enableSegmentIntegration&&this.listeners.push(qy(o=>{if(o.type==="track"){const l={};l["segment-event"]=o.event,i.addProperties(l,{type:"track",source:"segment"})}else if(o.type==="identify"){const l=o.userId.replace(/^"(.*)"$/,"$1");i.identify(l,o.traits,"segment")}})),this.listeners.push(Wy(o=>{this.reloaded?(this.addCustomEvent("Reload",o),this.reloaded=!1,i.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",o)})),this.listeners.push(Ru(o=>{this.addCustomEvent("Viewport",o),this.submitViewportMetrics(o)})),this.listeners.push(By((o,l)=>{let a=null,c=null;if(l&&l.target){const u=l.target;a=bu(u),c=u.textContent,c&&c.length>2e3&&(c=c.substring(0,2e3))}this.addCustomEvent("Click",{clickTarget:o,clickTextContent:c,clickSelector:a})})),this.listeners.push(Ky(o=>{o&&this.addCustomEvent("Focus",o)})),this.listeners.push(Eb(o=>{const{name:l,value:a}=o;this.recordGauge({name:l,value:a,group:window.location.href,category:ye.WebVital})})),this.listeners.push(wb(o=>{const l=[];o.saveData!==void 0&&l.push({name:"saveData",value:o.saveData.toString()}),o.effectiveType!==void 0&&l.push({name:"effectiveType",value:o.effectiveType.toString()}),o.type!==void 0&&l.push({name:"type",value:o.type.toString()}),Object.entries(o).forEach(([a,c])=>{mp(c)&&this.recordGauge({name:a,value:c,category:ye.Performance,group:window.location.href,tags:l})})},this._recordingStartTime)),this.sessionShortcut&&tb(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push($y(o=>{this.addCustomEvent("Performance",ht(o)),Object.entries(o).filter(([l])=>l!=="relativeTimestamp").forEach(([l,a])=>a&&this.recordGauge({name:l,value:a,category:ye.Performance,group:window.location.href}))},this._recordingStartTime)),this.listeners.push(zy(o=>{this.addCustomEvent("Jank",ht(o)),this.recordGauge({name:"Jank",value:o.jankAmount,category:ye.WebVital,group:o.querySelector})},this._recordingStartTime))),this._hasPreviouslyInitialized||((n=window.electron)!=null&&n.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:o})=>{this._visibilityHandler(!o)}),this.logger.log("Set up Electron highlight.run events.")):(jy(o=>this._visibilityHandler(o)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const s=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",s),this.listeners.push(()=>window.removeEventListener("beforeunload",s))}catch(i){this._isOnLocalHost&&(console.error(i),Ei("initializeSession _setupWindowListeners",i))}const e=()=>{this.addCustomEvent("Page Unload",""),qt(this.sessionData.sessionSecureID),it(this.sessionData)};if(window.addEventListener("beforeunload",e),this.listeners.push(()=>window.removeEventListener("beforeunload",e)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const i=()=>{this.addCustomEvent("Page Unload",""),qt(this.sessionData.sessionSecureID),it(this.sessionData)};window.addEventListener("pagehide",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i))}}submitViewportMetrics({height:e,width:t,availHeight:n,availWidth:i}){this.recordGauge({name:je.ViewportHeight,value:e,category:ye.Device,group:window.location.href}),this.recordGauge({name:je.ViewportWidth,value:t,category:ye.Device,group:window.location.href}),this.recordGauge({name:je.ScreenHeight,value:n,category:ye.Device,group:window.location.href}),this.recordGauge({name:je.ScreenWidth,value:i,category:ye.Device,group:window.location.href}),this.recordGauge({name:je.ViewportArea,value:e*t,category:ye.Device,group:window.location.href})}recordGauge(e){var i;const t=Ke.getMeter(rr);let n=this._gauges.get(e.name);n||(n=t.createGauge(e.name),this._gauges.set(e.name,n)),n.record(e.value,P(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>P(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}));for(const s of this._integrations)s.recordGauge(this.sessionData.sessionSecureID,e)}recordCount(e){var i;const t=Ke.getMeter(rr);let n=this._counters.get(e.name);n||(n=t.createCounter(e.name),this._counters.set(e.name,n)),n.add(e.value,P(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>P(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}recordIncr(e){this.recordCount(P(S({},e),{value:1}))}recordHistogram(e){var i;const t=Ke.getMeter(rr);let n=this._histograms.get(e.name);n||(n=t.createHistogram(e.name),this._histograms.set(e.name,n)),n.record(e.value,P(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>P(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}recordUpDownCounter(e){var i;const t=Ke.getMeter(rr);let n=this._up_down_counters.get(e.name);n||(n=t.createUpDownCounter(e.name),this._up_down_counters.set(e.name,n)),n.add(e.value,P(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>P(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}stopRecording(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(t=>t()),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const e=new Date().getTime(),{projectID:t,sessionSecureID:n}=this.sessionData,i=(e-this._recordingStartTime)/1e3;return`https://${ci}/${t}/sessions/${n}?ts=${i}`}getCurrentSessionURL(){const e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${ci}/${e}/sessions/${t}`:null}snapshot(e){return J(this,null,function*(){yield rt.snapshotCanvas(e)})}addSessionFeedback({timestamp:e,verbatim:t,user_email:n,user_name:i}){var s;this._worker.postMessage({message:{type:Ce.Feedback,verbatim:t,timestamp:e,userName:i||this.sessionData.userIdentifier,userEmail:n||((s=this.sessionData.userObject)==null?void 0:s.name)}})}_save(){return J(this,null,function*(){var e;try{this.state==="Recording"&&this.listeners&&!this.sessionData.sessionKey&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>Qm&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({}));let t;((e=this.options)==null?void 0:e.sendMode)==="local"&&(t=n=>J(this,null,function*(){let i=new Blob([JSON.stringify({query:Ko(El),variables:n})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:i}),0})),yield this._sendPayload({sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now(),it(this.sessionData)}catch(t){this._isOnLocalHost&&(console.error(t),Ei("_save",t))}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},jm))})}addCustomEvent(e,t){if(this.state==="NotRecording"){let n;const i=()=>{clearInterval(n),this.state==="Recording"&&this.events.length>0?Xs(e,t):n=setTimeout(i,500)};n=setTimeout(i,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Xs(e,t)}_sendPayload(t){return J(this,arguments,function*({sendFn:e}){const n=Ut.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),i=Ut.getRecordedWebSocketEvents(this._firstLoadListeners),s=[...this.events],o=[...this._firstLoadListeners.messages],l=[...this._firstLoadListeners.errors],{bytes:a,time:c}=this.enableCanvasRecording?oo.canvas:oo.normal;this._eventBytesSinceSnapshot>=a&&new Date().getTime()-this._lastSnapshotTime>=c&&this.takeFullSnapshot(),this.logger.log(`Sending: ${s.length} events, ${o.length} messages, ${n.length} network resources, ${l.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const u=new Date().getTime(),d=Rb();if(e){const h={session_secure_id:this.sessionData.sessionSecureID,payload_id:u.toString(),events:{events:s},messages:ht({messages:o}),resources:JSON.stringify({resources:n}),web_socket_events:JSON.stringify({webSocketEvents:i}),errors:l,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded,highlight_logs:d||void 0},{compressedBase64:f}=yield Mb(h);yield e({session_secure_id:this.sessionData.sessionSecureID,payload_id:new Date().getTime().toString(),data:f})}else this._worker.postMessage({message:{type:Ce.AsyncEvents,id:u,events:s,messages:o,errors:l,resourcesString:JSON.stringify({resources:n}),webSocketEventsString:JSON.stringify({webSocketEvents:i}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:d}});it(this.sessionData),Ut.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(s.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(o.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(l.length),Ib(d)})}takeFullSnapshot(){if(!this._recordStop){this.logger.log("skipping full snapshot as rrweb is not running");return}this.logger.log("taking full snapshot",{bytesSinceSnapshot:this._eventBytesSinceSnapshot,lastSnapshotTime:this._lastSnapshotTime}),rt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}registerLD(e){this._integrations.length||this._integrations.push(new wo(e))}}const Jb=({apiKey:r})=>{(function(e,t){var n=e.amplitude||{_q:[],_iq:{}},i=t.createElement("script");i.type="text/javascript",i.integrity="sha384-+EO59vL/X7v6VE2s6/F4HxfHlK0nDUVWKVg8K9oUlvffAeeaShVBmbORTC2D3UF+",i.crossOrigin="anonymous",i.async=!0,i.src="https://cdn.amplitude.com/libs/amplitude-8.17.0-min.gz.js",i.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK"),amplitude.getInstance().init(r)};var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s);function o(p,g){p.prototype[g]=function(){return this._q.push([g].concat(Array.prototype.slice.call(arguments,0))),this}}for(var l=function(){return this._q=[],this},a=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],c=0;c<a.length;c++)o(l,a[c]);n.Identify=l;for(var u=function(){return this._q=[],this},d=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],h=0;h<d.length;h++)o(u,d[h]);n.Revenue=u;var f=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function m(p){function g(T){p[T]=function(){p._q.push([T].concat(Array.prototype.slice.call(arguments,0)))}}for(var y=0;y<f.length;y++)g(f[y])}m(n),n.getInstance=function(p){return p=(!p||p.length===0?"$default_instance":p).toLowerCase(),Object.prototype.hasOwnProperty.call(n._iq,p)||(n._iq[p]={_q:[]},m(n._iq[p])),n._iq[p]},e.amplitude=n})(window,document)},Hb=({projectToken:r})=>{if(window.mixpanel)return;(function(t,n){if(!n.__SV){var i,s;window.mixpanel=n,n._i=[],n.init=function(o,l,a){function c(h,f){var m=f.split(".");m.length==2&&(h=h[m[0]],f=m[1]),h[f]=function(){h.push([f].concat(Array.prototype.slice.call(arguments,0)))}}var u=n;for(typeof a!="undefined"?u=n[a]=[]:a="mixpanel",u.people=u.people||[],u.toString=function(h){var f="mixpanel";return a!=="mixpanel"&&(f+="."+a),h||(f+=" (stub)"),f},u.people.toString=function(){return u.toString(1)+".people (stub)"},i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),s=0;s<i.length;s++)c(u,i[s]);var d="set set_once union unset remove delete".split(" ");u.get_group=function(){function h(g){f[g]=function(){call2_args=arguments,call2=[g].concat(Array.prototype.slice.call(call2_args,0)),u.push([m,call2])}}for(var f={},m=["get_group"].concat(Array.prototype.slice.call(arguments,0)),p=0;p<d.length;p++)h(d[p]);return f},n._i.push([o,l,a])},n.__SV=1.2}})(document,window.mixpanel||[]);const e=document.createElement("script");e.src=rk,document.head.appendChild(e),e.addEventListener("load",()=>{var t;(t=window.mixpanel)==null||t.init(r)})},rk="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",nk=()=>{var r,e;typeof chrome!="undefined"&&((r=chrome==null?void 0:chrome.runtime)!=null&&r.onMessage)&&((e=chrome==null?void 0:chrome.runtime)==null||e.onMessage.addListener((t,n,i)=>{const s=t.action;switch(console.log(`[highlight] received '${s}' event from extension.`),s){case"init":{ae.init(1,{debug:!0}),ae.getSessionURL().then(o=>{i({url:o})});break}case"stop":{ae.stop(),i({success:!0});break}}return!0}))};function ik(r){var e;r.on&&((e=r.webContents)!=null&&e.send)&&(r.on("focus",()=>{r.webContents.send("highlight.run",{visible:!0})}),r.on("blur",()=>{r.webContents.send("highlight.run",{visible:!1})}),r.on("close",()=>{r.webContents.send("highlight.run",{visible:!1})}))}const sk=({next:r,payload:e})=>{if(typeof window!="undefined"&&typeof document!="undefined"&&"H"in window){if(e.obj.type==="track"){const t=e.obj.event,n=e.obj.properties;window.H.track(t,n)}else if(e.obj.type==="identify"){const t=e.obj.userId;if(t!=null&&t.length){const n=e.obj.traits;window.H.identify(t,n)}}}r(e)},Bb=()=>{if(typeof window!="undefined"){if(typeof window._highlightFetchPatch!="undefined")return;window._originalFetch=window.fetch,window._fetchProxy=(r,e)=>window._originalFetch(r,e),window._highlightFetchPatch=(r,e)=>window._fetchProxy.call(window||global,r,e),window.fetch=window._highlightFetchPatch}},Kb=()=>null,zb=()=>{if(typeof window!="undefined"){if(typeof window._highlightWebSocketRequestCallback!="undefined")return;window._highlightWebSocketRequestCallback=Kb,window._highlightWebSocketEventCallback=Kb;const r=new Proxy(window.WebSocket,{construct(e,t){const[,n]=Mc(),i=new e(...t),s=u=>{window._highlightWebSocketRequestCallback({socketId:n,initiatorType:"websocket",type:"open",name:i.url,startTimeAbs:performance.timeOrigin+u.timeStamp})},o=u=>{window._highlightWebSocketRequestCallback({socketId:n,initiatorType:"websocket",type:"close",name:i.url,responseEndAbs:performance.timeOrigin+u.timeStamp}),i.removeEventListener("open",s),i.removeEventListener("error",a),i.removeEventListener("message",l),i.removeEventListener("close",o)},l=u=>{const{data:d}=u,h=typeof d=="string"?u.data:void 0;let f;typeof d=="string"?f=d.length:d instanceof Blob?f=d.size:f=d.byteLength||0,window._highlightWebSocketEventCallback({socketId:n,type:"received",name:i.url,timeStamp:performance.timeOrigin+u.timeStamp,size:f,message:h})},a=u=>{window._highlightWebSocketEventCallback({socketId:n,type:"error",name:i.url,timeStamp:performance.timeOrigin+u.timeStamp,size:0})};i.addEventListener("open",s),i.addEventListener("error",a),i.addEventListener("message",l),i.addEventListener("close",o);const c=new Proxy(i.send,{apply:function(u,d,h){const f=h[0],m=typeof f=="string"?f:void 0;let p;typeof f=="string"?p=f.length:f instanceof Blob?p=f.size:p=f.byteLength||0,window._highlightWebSocketEventCallback({socketId:n,type:"sent",name:i.url,timeStamp:performance.timeOrigin+performance.now(),size:p,message:m}),u.apply(d,h)}});return i.send=c,i}});window.WebSocket=r}},Ao=()=>{const r={end:()=>{},spanContext:()=>({traceId:"",spanId:"",traceFlags:0}),setAttribute:(e,t)=>r,setAttributes:e=>r,addEvent:(e,t,n)=>r,addLinks:e=>r,setStatus:e=>r,recordException:()=>{},addLink:()=>r,updateName:()=>r,isRecording:()=>!1};return r},ok="exception",ak=function(r,e,t){if(!r)return;const n=S({},t);typeof e=="string"?n[Rc]=e:e&&(e.code?n[Ic]=e.code.toString():e.name&&(n[Ic]=e.name),e.message&&(n[Rc]=e.message),e.stack&&(n[oZ]=e.stack)),n[Ic]||n[Rc]?r.addEvent(ok,n):kt("otel","recordException","warn",`Failed to record an exception ${e}`)};class lk{constructor(e){v(this,"organizationID");v(this,"_options");v(this,"_integrations",[]);v(this,"_gauges",new Map);v(this,"_counters",new Map);v(this,"_histograms",new Map);v(this,"_up_down_counters",new Map);v(this,"sampler",new Yb);v(this,"_started",!1);v(this,"providers");v(this,"graphqlSDK");this._options=e,this.organizationID=e.projectId}start(){return J(this,null,function*(){var t,n,i,s,o,l,a,c,u,d,h,f,m,p,g,y;if(this._started)return;this._started=!0,this.providers=Zy({backendUrl:(n=(t=this._options)==null?void 0:t.backendUrl)!=null?n:"https://pub.observability.app.launchdarkly.com",otlpEndpoint:(o=(s=(i=this._options)==null?void 0:i.otel)==null?void 0:s.otlpEndpoint)!=null?o:"https://otel.observability.app.launchdarkly.com",projectId:this._options.projectId,sessionSecureId:this._options.sessionSecureId,environment:(a=(l=this._options)==null?void 0:l.environment)!=null?a:"production",networkRecordingOptions:typeof((c=this._options)==null?void 0:c.networkRecording)=="object"?this._options.networkRecording:void 0,tracingOrigins:(u=this._options)==null?void 0:u.tracingOrigins,serviceName:(h=(d=this._options)==null?void 0:d.serviceName)!=null?h:"browser",instrumentations:(m=(f=this._options)==null?void 0:f.otel)==null?void 0:m.instrumentations,eventNames:(g=(p=this._options)==null?void 0:p.otel)==null?void 0:g.eventNames,getIntegrations:()=>this._integrations},this.sampler);const e=new qo((y=this._options.backendUrl)!=null?y:"https://pub.observability.app.launchdarkly.com",{headers:{}});this.graphqlSDK=wl(e,uu()),yield this.configureSampling(),this.setupListeners()})}stop(){return J(this,null,function*(){var e,t,n,i;this._started&&(this._started=!1,yield Promise.all([(t=(e=this.providers)==null?void 0:e.tracerProvider)==null?void 0:t.shutdown(),(i=(n=this.providers)==null?void 0:n.meterProvider)==null?void 0:i.shutdown()]))})}configureSampling(){return J(this,null,function*(){try{const e=yield this.graphqlSDK.GetSamplingConfig({organization_verbose_id:`${this.organizationID}`});this.sampler.setConfig(e.sampling)}catch(e){Ge("sampling","warn",`LaunchDarkly Observability: Failed to configure sampling: ${e}`)}})}_recordLog(e,t,n,i){this.startSpan(Iy,s=>{const o=typeof e=="string"?e:ht(e),l=i?ht(i.map(a=>a.toString())):void 0;if(s==null||s.addEvent("log",S({[Ly]:t,[Oy]:o,"code.stacktrace":l},n)),this._options.reportConsoleErrors&&t==="error"){s==null||s.recordException(new Error(o)),s==null||s.setStatus({code:Ds.ERROR,message:o});const a=new Error(o);i&&(a.stack=l),this.recordError(a)}})}_recordErrorMessage(e,t){this.startSpan("highlight.exception",n=>{var i;ak(n,(i=e.error)!=null?i:new Error(e.event),{[F1]:e.id}),n==null||n.setAttributes(S({event:e.event,type:e.type,url:e.url,source:e.source,lineNumber:e.lineNumber,columnNumber:e.columnNumber},t))});for(const n of this._integrations)n.error(Wt(),e)}recordError(e,t,n,i,s){var c,u,d,h;e instanceof Error&&e.cause&&(n=P(S({},n),{"exception.cause":JSON.stringify(e.cause)}));let o=t?t+":"+e.message:e.message;s==="React.ErrorBoundary"&&(o="ErrorBoundary: "+o);const l=Fn(e),a={error:e,event:o,type:s!=null?s:"custom",url:window.location.href,source:i!=null?i:"",lineNumber:(c=l[0])!=null&&c.lineNumber?(u=l[0])==null?void 0:u.lineNumber:0,columnNumber:(d=l[0])!=null&&d.columnNumber?(h=l[0])==null?void 0:h.columnNumber:0,stackTrace:l,timestamp:new Date().toISOString(),id:Ps()};this._recordErrorMessage(a,n)}recordCount(e){const t=Ke.getMeter(rr);let n=this._counters.get(e.name);n||(n=t.createCounter(e.name),this._counters.set(e.name,n)),n.add(e.value,P(S({},e.attributes),{"highlight.session_id":Wt()}))}recordGauge(e){var s,o,l;const t=Ke.getMeter(rr);let n=this._gauges.get(e.name);n||(n=t.createGauge(e.name),this._gauges.set(e.name,n)),n.record(e.value,P(S({},e.attributes),{"highlight.session_id":Wt()}));const i={name:e.name,value:e.value,category:(s=e.attributes)==null?void 0:s.category,group:(l=(o=e.attributes)==null?void 0:o.group)==null?void 0:l.toString(),tags:e.attributes?Object.entries(e.attributes).map(([a,c])=>{var u;return{name:a!=null?a:"",value:(u=c==null?void 0:c.toString())!=null?u:""}}):[]};for(const a of this._integrations)a.recordGauge(Wt(),i)}recordIncr(e){this.recordCount(P(S({},e),{value:1}))}recordHistogram(e){const t=Ke.getMeter(rr);let n=this._histograms.get(e.name);n||(n=t.createHistogram(e.name),this._histograms.set(e.name,n)),n.record(e.value,P(S({},e.attributes),{"highlight.session_id":Wt()}))}recordUpDownCounter(e){const t=Ke.getMeter(rr);let n=this._up_down_counters.get(e.name);n||(n=t.createUpDownCounter(e.name),this._up_down_counters.set(e.name,n)),n.add(e.value,P(S({},e.attributes),{"highlight.session_id":Wt()}))}startSpan(e,t,n,i){const s=Io();if(!s){const l=Ao();return i===void 0&&n===void 0?t(l):i===void 0?n(l):i(l)}const o=(l,a)=>{const c=a(l);return c instanceof Promise?c.finally(()=>l.end()):(l.end(),c)};return i===void 0&&n===void 0?s.startActiveSpan(e,l=>o(l,t)):i===void 0?s.startActiveSpan(e,t,l=>o(l,n)):s.startActiveSpan(e,t,n,l=>o(l,i))}startManualSpan(e,t,n,i){const s=Io();if(!s){const o=Ao();return i===void 0&&n===void 0?t(o):i===void 0?n(o):i(o)}return i===void 0&&n===void 0?s.startActiveSpan(e,t):i===void 0?s.startActiveSpan(e,t,n):s.startActiveSpan(e,t,n,i)}register(e,t){this._integrations.push(new wo(e,t))}getHooks(e){return this._integrations.flatMap(t=>{var n,i;return(i=(n=t.getHooks)==null?void 0:n.call(t,e))!=null?i:[]})}submitViewportMetrics({height:e,width:t,availHeight:n,availWidth:i}){this.recordGauge({name:je.ViewportHeight,value:e,attributes:{category:ye.Device,group:window.location.href}}),this.recordGauge({name:je.ViewportWidth,value:t,attributes:{category:ye.Device,group:window.location.href}}),this.recordGauge({name:je.ScreenHeight,value:n,attributes:{category:ye.Device,group:window.location.href}}),this.recordGauge({name:je.ScreenWidth,value:i,attributes:{category:ye.Device,group:window.location.href}}),this.recordGauge({name:je.ViewportArea,value:e*t,attributes:{category:ye.Device,group:window.location.href}})}setupListeners(){var t;this._options.disableConsoleRecording||Sp(n=>{var i;this._recordLog((i=n.value)==null?void 0:i.join(" "),n.type,n.attributes?JSON.parse(n.attributes):{},n.trace)},{level:(t=this._options.consoleMethodsToRecord)!=null?t:[...Rl],logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}}),this._options.enablePerformanceRecording!==!1&&($y(n=>{Object.entries(n).filter(([i])=>i!=="relativeTimestamp").forEach(([i,s])=>s&&this.recordGauge({name:i,value:s,attributes:{category:ye.Performance,group:window.location.href}}))},0),zy(n=>{this.recordGauge({name:"Jank",value:n.jankAmount,attributes:{category:ye.WebVital,group:n.querySelector}})},0)),Tp(n=>{var o;if(Gl.includes(n.event)||Vl.some(l=>n.event.includes(l)))return;const i=new Error(n.event);i.stack=ht(n.stackTrace.map(l=>l.toString()));let s={};try{n.payload&&(s=JSON.parse(n.payload))}catch(l){}this._recordErrorMessage(P(S({},n),{error:(o=n.error)!=null?o:i}),s)},{enablePromisePatch:!!this._options.enablePromisePatch}),Eb(n=>{const{name:i,value:s}=n;this.recordGauge({name:i,value:s,attributes:{group:window.location.href,category:ye.WebVital}})}),Ru(n=>{this.submitViewportMetrics(n)}),wb(n=>{const i={category:ye.Performance,group:window.location.href};n.saveData!==void 0&&(i.saveData=n.saveData.toString()),n.effectiveType!==void 0&&(i.effectiveType=n.effectiveType.toString()),n.type!==void 0&&(i.type=n.type.toString()),Object.entries(n).filter(([s])=>s!=="relativeTimestamp").forEach(([s,o])=>{mp(o)&&this.recordGauge({name:s,value:o,attributes:i})})},new Date().getTime());const{getDeviceDetails:e}=Cb();e&&this.recordGauge({name:je.DeviceMemory,value:e().deviceMemory,attributes:{category:ye.Device,group:window.location.href}})}recordLog(e,t,n){return this._recordLog(e,t,n)}}class jb extends fu{start(){return this._sdk.start()}stop(){return this._sdk.stop()}recordGauge(e){return this._bufferCall("recordGauge",[e])}recordCount(e){return this._bufferCall("recordCount",[e])}recordIncr(e){return this._bufferCall("recordIncr",[e])}recordHistogram(e){return this._bufferCall("recordHistogram",[e])}recordUpDownCounter(e){return this._bufferCall("recordUpDownCounter",[e])}startSpan(e,t,n,i){return this._bufferCall("startSpan",[e,t,n,i])}startManualSpan(e,t,n,i){return this._bufferCall("startManualSpan",[e,t,n,i])}register(e,t){return this._bufferCall("register",[e,t])}recordLog(e,t,n){return this._bufferCall("recordLog",[e,t,n])}recordError(e,t,n,i,s){return this._bufferCall("recordError",[e,t,n,i,s])}}W.LDObserve=void 0,typeof globalThis!="undefined"?globalThis.LDObserve?W.LDObserve=globalThis.LDObserve:(W.LDObserve=new jb,globalThis.LDObserve=W.LDObserve):W.LDObserve=new jb;const ck=Object.freeze(Object.defineProperty({__proto__:null,get LDObserve(){return W.LDObserve}},Symbol.toStringTag,{value:"Module"}));class Qb{constructor(e){v(this,"sessionSecureID");try{e!=null&&e.storageMode&&eg(e==null?void 0:e.storageMode),uo(!!(e!=null&&e.sessionCookie)),e!=null&&e.sessionCookie?rg():uo(!1)}catch(t){Ge("Error initializing @launchdarkly observability plugin","error",t)}}configureSession(e,t){try{const n=Wt();let i=At(n);i!=null&&i.sessionSecureID?this.sessionSecureID=i.sessionSecureID:(t!=null&&t.sessionKey?this.sessionSecureID=ct(`${e}-${t.sessionKey}`):this.sessionSecureID=ct(),qt(this.sessionSecureID),it({sessionSecureID:this.sessionSecureID,sessionKey:t==null?void 0:t.sessionKey,projectID:0,sessionStartTime:Date.now(),lastPushTime:Date.now()}))}catch(n){Ge("Error configuring session in @launchdarkly observability plugin","error",n)}}}class uk extends Qb{constructor(t){super(t);v(this,"observe");v(this,"options");this.options=t}initialize(t,n){try{if(typeof window=="undefined"||typeof document=="undefined"){console.warn("@launchdarkly/observability is not initializing because it is not supported in this environment.");return}if(!t){console.warn("@launchdarkly/observability is not initializing because the SDK credential is undefined.");return}this.configureSession(t,n),this.observe=new lk(P(S({},n),{projectId:t,sessionSecureId:this.sessionSecureID})),n!=null&&n.manualStart||this.observe.start(),W.LDObserve.load(this.observe)}catch(i){Ge("Error initializing @launchdarkly/observability SDK","error",i)}}getMetadata(){return{name:"@launchdarkly/observability"}}register(t,n){var i;(i=this.observe)==null||i.register(t,n)}getHooks(t){var i,s,o,l;const n=S(S({[km]:t.sdk.name,[Wm]:t.sdk.version,[py]:t.clientSideId,[mu]:"LaunchDarkly"},(i=t.application)!=null&&i.id?{[Sy]:t.application.id}:{}),(s=t.application)!=null&&s.version?{[_y]:t.application.version}:{});return this.initialize((l=(o=t.sdkKey)!=null?o:t.mobileKey)!=null?l:t.clientSideId,this.options),[{getMetadata:()=>({name:"@launchdarkly/observability/hooks"}),afterIdentify:(a,c,u)=>{var d,h,f,m,p,g,y,T;for(const E of(f=(h=(d=this.observe)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=E.afterIdentify)==null||m.call(E,a,c,u);if(u.status==="completed"){const E=P(S({},mi(a.context)),{key:(y=(g=(p=this.options)==null?void 0:p.contextFriendlyName)==null?void 0:g.call(p,a.context))!=null?y:Ir(a.context),timeout:a.timeout,canonicalKey:Ir(a.context),[A1]:u.status});(T=this.observe)==null||T.recordLog("LD.identify","info",S(S({},n),E))}return c},afterEvaluation:(a,c,u)=>{var f,m,p,g,y;for(const T of(p=(m=(f=this.observe)==null?void 0:f.getHooks)==null?void 0:m.call(f,t))!=null?p:[])(g=T.afterEvaluation)==null||g.call(T,a,c,u);const d=S({[my]:a.flagKey,[by]:JSON.stringify(u.value)},u.variationIndex?{[vy]:u.variationIndex}:{});if(u.reason)for(const T in Eo){const E=T,C=u.reason[E];C&&(d[Eo[E]]=C)}a.context&&(d[gy]=JSON.stringify(mi(a.context)),d[yy]=Ir(a.context));const h=S(S({},n),d);return(y=this.observe)==null||y.startSpan(pu,T=>{T&&T.addEvent(xe,h)}),c},afterTrack:a=>{var c,u,d,h,f;for(const m of(d=(u=(c=this.observe)==null?void 0:c.getHooks)==null?void 0:u.call(c,t))!=null?d:[])(h=m.afterTrack)==null||h.call(m,a);(f=this.observe)==null||f.recordLog("LD.track","info",S(P(S({},n),{key:a.key,value:a.metricValue}),typeof a.data=="object"?a.data:{}))}}]}}class dk{constructor(e){v(this,"options");v(this,"isRunningOnHighlight");v(this,"organizationID");v(this,"graphqlSDK");v(this,"events");v(this,"sessionData");v(this,"ready");v(this,"manualStopped");v(this,"state");v(this,"logger");v(this,"enableSegmentIntegration");v(this,"privacySetting");v(this,"enableCanvasRecording");v(this,"samplingStrategy");v(this,"inlineImages");v(this,"inlineVideos");v(this,"inlineStylesheet");v(this,"debugOptions");v(this,"listeners");v(this,"firstloadVersion");v(this,"environment");v(this,"sessionShortcut");v(this,"appVersion");v(this,"serviceName");v(this,"_worker");v(this,"_optionsInternal");v(this,"_backendUrl");v(this,"_recordingStartTime");v(this,"_isOnLocalHost");v(this,"_onToggleFeedbackFormVisibility");v(this,"_isCrossOriginIframe");v(this,"_eventBytesSinceSnapshot");v(this,"_lastSnapshotTime");v(this,"_lastVisibilityChangeTime");v(this,"pushPayloadTimerId");v(this,"hasSessionUnloaded");v(this,"hasPushedData");v(this,"reloaded");v(this,"_hasPreviouslyInitialized");v(this,"_recordStop");v(this,"_integrations",[]);var n,i,s,o,l;this.options=e,typeof((n=this.options)==null?void 0:n.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(s=(i=this.options)==null?void 0:i.debug)!=null?s:{},this.logger=new hu(this.debugOptions.clientInteractions),this._worker=new Db,this._worker.onmessage=a=>{var c,u,d;((c=a.data.response)==null?void 0:c.type)===Ce.AsyncEvents?(this._eventBytesSinceSnapshot+=a.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${a.data.response.id} size ${a.data.response.eventsSize} bytes, compression ratio ${a.data.response.eventsSize/a.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((u=a.data.response)==null?void 0:u.type)===Ce.CustomEvent?this.addCustomEvent(a.data.response.tag,a.data.response.payload):((d=a.data.response)==null?void 0:d.type)===Ce.Stop&&(Ge("worker.onmessage","warn","Stopping recording due to worker failure",a.data.response),this.stop(!1))};let t=At();if(this.reloaded=!1,!((o=this.sessionData)!=null&&o.sessionSecureID)&&(t!=null&&t.sessionSecureID))this.sessionData=t,this.options.sessionSecureID=t.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const a of Object.values(Se))on(a);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1;try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(a){this._isCrossOriginIframe=(l=this.options.recordCrossOriginIframe)!=null?l:!0}this._initMembers(this.options)}_reset(n){return J(this,arguments,function*({forceNew:e,sessionKey:t}){this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0);let i,s;if(!e)try{i=Ve(Se.USER_IDENTIFIER);const o=Ve(Se.USER_OBJECT);o&&(s=JSON.parse(o))}catch(o){}for(const o of Object.values(Se))on(o);this.sessionData.sessionSecureID=t?ct(`${this.organizationID}-${t}`):ct(),this.sessionData.sessionKey=t,this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this.stop(),yield this.start(),i&&s&&this.identify(i,s)})}_initMembers(e){var s,o,l,a,c,u,d,h,f;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=(s=e.privacySetting)!=null?s:"default",this.enableCanvasRecording=(o=e.enableCanvasRecording)!=null?o:!1,this.inlineImages=(l=e.inlineImages)!=null?l:this._isOnLocalHost,this.inlineVideos=(a=e.inlineVideos)!=null?a:this._isOnLocalHost,this.inlineStylesheet=(c=e.inlineStylesheet)!=null?c:this._isOnLocalHost,this.samplingStrategy=S({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:pp()},(u=e.samplingStrategy)!=null?u:{canvas:2}),this._backendUrl=(d=e==null?void 0:e.backendUrl)!=null?d:"https://pub.observability.app.launchdarkly.com",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const t=new qo(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=wl(t,uu()),this.environment=(h=e.environment)!=null?h:"production",this.appVersion=e.appVersion,this.serviceName=(f=e.serviceName)!=null?f:"browser",typeof e.organizationID=="string"?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const m=e,{firstloadVersion:n}=m,i=He(m,["firstloadVersion"]);this._optionsInternal=i,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime()}identify(e,t={},n){if(!e||e===""){Ge("identify","warn","Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t});return}this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,nt(Se.USER_IDENTIFIER,e.toString()),nt(Se.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:Ce.Identify,userIdentifier:e,userObject:t,source:n}})}track(e,t){this.addProperties(P(S({},t),{event:e}))}addProperties(e={},t){const n=S({},e);Object.entries(n).forEach(([i,s])=>{try{structuredClone(s)}catch(o){delete n[i]}}),this._worker.postMessage({message:{type:Ce.Properties,propertiesObject:n,propertyType:t}})}start(e){return J(this,null,function*(){var t,n,i,s,o,l,a,c;if(!((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Googlebot")||(n=navigator==null?void 0:navigator.userAgent)!=null&&n.includes("AdsBot")))try{if(e!=null&&e.forceNew){yield this._reset(e);return}if(e!=null&&e.sessionKey&&(e==null?void 0:e.sessionKey)!==this.sessionData.sessionKey){yield this._reset(P(S({},e),{forceNew:!0}));return}this.logger.log("Initializing...",e,this.sessionData,this.options),this.sessionData=(i=At(this.sessionData.sessionSecureID))!=null?i:this.sessionData,(s=this.sessionData)!=null&&s.sessionStartTime?this._recordingStartTime=(o=this.sessionData)==null?void 0:o.sessionStartTime:(this._recordingStartTime=new Date().getTime(),this.sessionData.sessionStartTime=this._recordingStartTime);let u=Ve(ui.CLIENT_ID);u||(u=ct(),nt(ui.CLIENT_ID,u));let d;this.options.disableSessionRecording||this.options.disableNetworkRecording!==void 0||typeof this.options.networkRecording=="boolean"?d=!1:d=((l=this.options.networkRecording)==null?void 0:l.recordHeadersAndBody)||!1;let h=[];if(typeof this.options.networkRecording=="object"&&((a=this.options.networkRecording.destinationDomains)!=null&&a.length)&&(h=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const y=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:d,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:u,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,session_key:this.sessionData.sessionKey,client_id:u,network_recording_domains:h,disable_session_recording:this.options.disableSessionRecording});if(y.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${y.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=y.initializeSession.secure_id,this.sessionData.projectID=parseInt(((c=y==null?void 0:y.initializeSession)==null?void 0:c.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID){console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData);return}}qt(""),it(this.sessionData),this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Ce.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}});for(const y of this._integrations)y.init(this.sessionData.sessionSecureID);if(this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},so)),this.options.disableSessionRecording){this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",this.manualStopped=!1;return}const f=(y,T)=>{T&&this.logger.log("received isCheckout emit",{event:y}),this.events.push(y)};f.bind(this);const m=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[p,g]=Ay(this.privacySetting);this._recordStop=rt({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:f,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:p,maskInputOptions:g,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:y=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,collectFonts:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[qe()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Ge.bind("RecordSDK","warn")}:void 0}),m||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this.sessionData.sessionKey&&this.addProperties({sessionKey:this.sessionData.sessionKey},{type:"session"}),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(u){Ge("initializeSession _setupWindowListeners","warn",u)}})}_visibilityHandler(e){return J(this,null,function*(){if(this.manualStopped){this.logger.log("Ignoring visibility event due to manual stop.");return}new Date().getTime()-this._lastVisibilityChangeTime<$m||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stop()):(this.options.disableBackgroundRecording&&(yield this.start()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return J(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(e=>{const t=n=>{if(n.data.highlight===Xo){const i=n.data;this.logger.log("highlight got window message ",i),this.sessionData.projectID=i.projectID,this.sessionData.sessionSecureID=i.sessionSecureID,window.parent.postMessage({highlight:ko},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(e=>{var t;(t=e.contentWindow)==null||t.postMessage({highlight:Xo,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},so),window.addEventListener("message",e=>{e.data.highlight===ko&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var n;try{const i=this;this.enableSegmentIntegration&&this.listeners.push(qy(o=>{if(o.type==="track"){const l={};l["segment-event"]=o.event,i.addProperties(l,{type:"track",source:"segment"})}else if(o.type==="identify"){const l=o.userId.replace(/^"(.*)"$/,"$1");i.identify(l,o.traits,"segment")}})),this.listeners.push(Wy(o=>{this.reloaded?(this.addCustomEvent("Reload",o),this.reloaded=!1,i.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",o)})),this.listeners.push(Ru(o=>{this.addCustomEvent("Viewport",o)})),this.listeners.push(By((o,l)=>{let a=null,c=null;if(l&&l.target){const u=l.target;a=bu(u),c=u.textContent,c&&c.length>2e3&&(c=c.substring(0,2e3))}this.addCustomEvent("Click",{clickTarget:o,clickTextContent:c,clickSelector:a})})),this.listeners.push(Ky(o=>{o&&this.addCustomEvent("Focus",o)})),this.sessionShortcut&&tb(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this._hasPreviouslyInitialized||((n=window.electron)!=null&&n.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:o})=>{this._visibilityHandler(!o)}),this.logger.log("Set up Electron highlight.run events.")):(jy(o=>this._visibilityHandler(o)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const s=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",s),this.listeners.push(()=>window.removeEventListener("beforeunload",s))}catch(i){Ge("initializeSession _setupWindowListeners","warn",i)}const e=()=>{this.addCustomEvent("Page Unload",""),qt(this.sessionData.sessionSecureID),it(this.sessionData)};if(window.addEventListener("beforeunload",e),this.listeners.push(()=>window.removeEventListener("beforeunload",e)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const i=()=>{this.addCustomEvent("Page Unload",""),qt(this.sessionData.sessionSecureID),it(this.sessionData)};window.addEventListener("pagehide",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i))}}stop(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(t=>t()),this.listeners=[]}getCurrentSessionURLWithTimestamp(){const e=new Date().getTime(),{projectID:t,sessionSecureID:n}=this.sessionData,i=(e-this._recordingStartTime)/1e3;return`https://${ci}/${t}/sessions/${n}?ts=${i}`}getCurrentSessionURL(){const e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${ci}/${e}/sessions/${t}`:null}snapshot(e){return J(this,null,function*(){yield rt.snapshotCanvas(e)})}addSessionFeedback({timestamp:e,verbatim:t,user_email:n,user_name:i}){var s;this._worker.postMessage({message:{type:Ce.Feedback,verbatim:t,timestamp:e,userName:i||this.sessionData.userIdentifier,userEmail:n||((s=this.sessionData.userObject)==null?void 0:s.name)}})}_save(){return J(this,null,function*(){var e;try{this.state==="Recording"&&this.listeners&&!this.sessionData.sessionKey&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>Qm&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({}));let t;((e=this.options)==null?void 0:e.sendMode)==="local"&&(t=n=>J(this,null,function*(){let i=new Blob([JSON.stringify({query:Ko(El),variables:n})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:i}),0})),yield this._sendPayload({sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now(),it(this.sessionData)}catch(t){Ge("_save","warn",t)}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},jm))})}addCustomEvent(e,t){if(this.state==="NotRecording"){let n;const i=()=>{clearInterval(n),this.state==="Recording"&&this.events.length>0?Xs(e,t):n=setTimeout(i,500)};n=setTimeout(i,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Xs(e,t)}_sendPayload(t){return J(this,arguments,function*({sendFn:e}){const n=[...this.events],{bytes:i,time:s}=this.enableCanvasRecording?oo.canvas:oo.normal;this._eventBytesSinceSnapshot>=i&&new Date().getTime()-this._lastSnapshotTime>=s&&this.takeFullSnapshot(),this.logger.log(`Sending: ${n.length} events, 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const o=new Date().getTime(),l=Rb();if(e){const a={session_secure_id:this.sessionData.sessionSecureID,payload_id:o.toString(),events:{events:n},messages:ht({messages:[]}),resources:JSON.stringify({resources:[]}),web_socket_events:JSON.stringify({webSocketEvents:[]}),errors:[],is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded,highlight_logs:l||void 0},{compressedBase64:c}=yield Mb(a);yield e({session_secure_id:this.sessionData.sessionSecureID,payload_id:o.toString(),data:c})}else this._worker.postMessage({message:{type:Ce.AsyncEvents,id:o,events:n,messages:[],errors:[],resourcesString:JSON.stringify({resources:[]}),webSocketEventsString:JSON.stringify({webSocketEvents:[]}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:l}});it(this.sessionData),this.events=this.events.slice(n.length),Ib(l)})}takeFullSnapshot(){if(!this._recordStop){this.logger.log("skipping full snapshot as rrweb is not running");return}this.logger.log("taking full snapshot",{bytesSinceSnapshot:this._eventBytesSinceSnapshot,lastSnapshotTime:this._lastSnapshotTime}),rt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}register(e,t){this._integrations.push(new wo(e,t))}getHooks(e){return this._integrations.flatMap(t=>{var n,i;return(i=(n=t.getHooks)==null?void 0:n.call(t,e))!=null?i:[]})}getRecordingState(){var e;return(e=this==null?void 0:this.state)!=null?e:"NotRecording"}getSession(){const e=this.sessionData.sessionSecureID,t=At(e);if(!t)return null;const n=`${this.getFrontendUrl()}/sessions/${e}`;if(!n||!(t==null?void 0:t.sessionStartTime))return null;const s=new Date().getTime();let o;try{o=new URL(n)}catch(c){return Ge("identify","warn",`failed to construct session url from ${n}`,c),null}const l=new URL(o),a=(s-this._recordingStartTime)/1e3;return l.searchParams.set("ts",a.toString()),{url:o.toString(),urlWithTimestamp:l.toString(),sessionSecureID:e}}getFrontendUrl(){var t,n;const e=this._backendUrl.match(UN);if(e&&((t=e==null?void 0:e.groups)!=null&&t.domain)){const i=(n=e.groups.domain)!=null?n:"";return`https://${PN[i]}${MN}`}return AN}}class $b extends fu{getSession(){return this._isLoaded?this._bufferCall("getSession",[]):null}start(e){return J(this,null,function*(){return this._sdk.start(e)})}stop(){return this._sdk.stop()}getRecordingState(){return this._isLoaded?this._bufferCall("getRecordingState",[]):"NotRecording"}snapshot(e){return this._isLoaded?this._bufferCall("snapshot",[e]):Promise.resolve(void 0)}register(e,t){return this._bufferCall("register",[e,t])}}W.LDRecord=void 0,typeof globalThis!="undefined"?globalThis.LDRecord?W.LDRecord=globalThis.LDRecord:(W.LDRecord=new $b,globalThis.LDRecord=W.LDRecord):W.LDRecord=new $b;class hk extends Qb{constructor(t){super(t);v(this,"record");v(this,"options");this.options=t}initialize(t,n){var i,s,o,l,a,c,u,d,h;try{if(typeof window=="undefined"||typeof document=="undefined"){console.warn("@launchdarkly/session-replay is not initializing because it is not supported in this environment.");return}if(typeof Worker=="undefined"){console.warn("@launchdarkly/session-replay is not initializing because Worker is not supported.");return}if(!t){console.warn("@launchdarkly/session-replay is not initializing because the SDK credential is undefined.");return}this.configureSession(t,n);const f=P(S({},n),{organizationID:t,firstloadVersion:gu,environment:(n==null?void 0:n.environment)||"production",appVersion:n==null?void 0:n.version,sessionSecureID:this.sessionSecureID,privacySetting:(i=n==null?void 0:n.privacySetting)!=null?i:"strict"});this.record=new dk(f),n!=null&&n.manualStart||this.record.start(),W.LDRecord.load(this.record),!((o=(s=n==null?void 0:n.integrations)==null?void 0:s.mixpanel)!=null&&o.disabled)&&((a=(l=n==null?void 0:n.integrations)==null?void 0:l.mixpanel)!=null&&a.projectToken)&&Hb(n.integrations.mixpanel),!((u=(c=n==null?void 0:n.integrations)==null?void 0:c.amplitude)!=null&&u.disabled)&&((h=(d=n==null?void 0:n.integrations)==null?void 0:d.amplitude)!=null&&h.apiKey)&&Jb(n.integrations.amplitude)}catch(f){Ge("Error initializing @launchdarkly/session-replay SDK","error",f)}}getMetadata(){return{name:"@launchdarkly/session-replay"}}register(t,n){var i;(i=this.record)==null||i.register(t,n)}getHooks(t){var i,s,o,l;const n=S(S({[km]:t.sdk.name,[Wm]:t.sdk.version,[py]:t.clientSideId,[mu]:"LaunchDarkly"},(i=t.application)!=null&&i.id?{[Sy]:t.application.id}:{}),(s=t.application)!=null&&s.version?{[_y]:t.application.version}:{});return this.initialize((l=(o=t.sdkKey)!=null?o:t.mobileKey)!=null?l:t.clientSideId,this.options),[{getMetadata:()=>({name:"@launchdarkly/session-replay/hooks"}),afterIdentify:(a,c,u)=>{var d,h,f,m,p,g,y,T;for(const E of(f=(h=(d=this.record)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=E.afterIdentify)==null||m.call(E,a,c,u);if(u.status==="completed"){const E=P(S({},mi(a.context)),{key:(y=(g=(p=this.options)==null?void 0:p.contextFriendlyName)==null?void 0:g.call(p,a.context))!=null?y:Ir(a.context),canonicalKey:Ir(a.context)});(T=this.record)==null||T.identify(E.key,S(S({},n),E),"LaunchDarkly")}return c},afterEvaluation:(a,c,u)=>{var d,h,f,m;for(const p of(f=(h=(d=this.record)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=p.afterEvaluation)==null||m.call(p,a,c,u);return c},afterTrack:a=>{var c,u,d,h,f;for(const m of(d=(u=(c=this.record)==null?void 0:c.getHooks)==null?void 0:u.call(c,t))!=null?d:[])(h=m.afterTrack)==null||h.call(m,a);(f=this.record)==null||f.track(a.key,{data:a.data,value:a.metricValue})}}]}}var qb=(r=>(r.Device="Device",r.WebVital="WebVital",r.Frontend="Frontend",r.Backend="Backend",r))(qb||{});const Ye=(r,e)=>{console.warn(`highlight.run warning: (${r}): `,e)},fk=200;let wi=[],Po,B,Ri,ev=[],Ju=!1;const ae={options:void 0,init:(r,e)=>{var t,n,i,s,o,l,a,c;try{if(ae.options=e,typeof window=="undefined"||typeof document=="undefined")return;if(!r){console.info("Highlight is not initializing because projectID was passed undefined.");return}e!=null&&e.sessionCookie?rg():uo(!1);const u=At();let d=ct();if(e!=null&&e.sessionKey?d=ct(`${r}-${e.sessionKey}`):u!=null&&u.sessionSecureID&&(d=u.sessionSecureID),Ju)return{sessionSecureID:d};Ju=!0,Bb(),zb();const h=P(S({},e),{organizationID:r,firstloadVersion:gu,environment:(e==null?void 0:e.environment)||"production",appVersion:e==null?void 0:e.version,sessionSecureID:d});return B=B!=null?B:new Yu(h,Ri),e!=null&&e.manualStart||B.initialize(),Ri=new Ut(h),e!=null&&e.manualStart||Ri.startListening(),!((n=(t=e==null?void 0:e.integrations)==null?void 0:t.mixpanel)!=null&&n.disabled)&&((s=(i=e==null?void 0:e.integrations)==null?void 0:i.mixpanel)!=null&&s.projectToken)&&Hb(e.integrations.mixpanel),!((l=(o=e==null?void 0:e.integrations)==null?void 0:o.amplitude)!=null&&l.disabled)&&((c=(a=e==null?void 0:e.integrations)==null?void 0:a.amplitude)!=null&&c.apiKey)&&Jb(e.integrations.amplitude),{sessionSecureID:d}}catch(u){Ye("init",u)}},snapshot:r=>J(this,null,function*(){try{if(B&&B.ready)return yield B.snapshot(r)}catch(e){Ye("snapshot",e)}}),addSessionFeedback:({verbatim:r,userName:e,userEmail:t,timestampOverride:n})=>{try{ae.onHighlightReady(()=>B.addSessionFeedback({verbatim:r,timestamp:n||new Date().toISOString(),user_email:t,user_name:e}))}catch(i){Ye("error",i)}},consumeError:(r,e,t)=>{try{ae.onHighlightReady(()=>B.consumeCustomError(r,e,JSON.stringify(t)))}catch(n){Ye("error",n)}},consume:(r,e)=>{try{ae.onHighlightReady(()=>B.consumeError(r,e))}catch(t){Ye("error",t)}},error:(r,e)=>{try{ae.onHighlightReady(()=>B.pushCustomError(r,JSON.stringify(e)))}catch(t){Ye("error",t)}},track:(r,e={})=>{var t,n,i,s,o,l,a,c,u,d,h;try{ae.onHighlightReady(()=>{B.addProperties(P(S({},e),{event:r})),B.log("H.track","INFO",P(S({},e!=null?e:{}),{event:r}))});const f=B==null?void 0:B.getCurrentSessionURL();(i=(n=(t=ae.options)==null?void 0:t.integrations)==null?void 0:n.mixpanel)!=null&&i.disabled||(s=window.mixpanel)!=null&&s.track&&window.mixpanel.track(r,P(S({},e),{highlightSessionURL:f})),(a=(l=(o=ae.options)==null?void 0:o.integrations)==null?void 0:l.amplitude)!=null&&a.disabled||(c=window.amplitude)!=null&&c.getInstance&&window.amplitude.getInstance().logEvent(r,P(S({},e),{highlightSessionURL:f})),(h=(d=(u=ae.options)==null?void 0:u.integrations)==null?void 0:d.intercom)!=null&&h.disabled||window.Intercom&&window.Intercom("trackEvent",r,e)}catch(f){Ye("track",f)}},log:(r,e,t)=>{try{ae.onHighlightReady(()=>B.log(r,e,t!=null?t:{}))}catch(n){Ye("log",n)}},start:r=>{(B==null?void 0:B.state)==="Recording"&&!(r!=null&&r.forceNew)?r!=null&&r.silent||console.warn("Highlight is already recording. Please `H.stop()` the current session before starting a new one."):(Ri.startListening(),ae.onHighlightReady(()=>J(this,null,function*(){yield B.initialize(r)}),{waitForReady:!1}))},stop:r=>{(B==null?void 0:B.state)!=="Recording"?r!=null&&r.silent||console.warn("Highlight is already stopped. Please call `H.start()`."):ae.onHighlightReady(()=>B.stopRecording(!0))},identify:(r,e={},t)=>{var n,i,s,o,l,a,c,u;try{ae.onHighlightReady(()=>B.identify(r,e,t))}catch(d){Ye("identify",d)}if((s=(i=(n=ae.options)==null?void 0:n.integrations)==null?void 0:i.mixpanel)!=null&&s.disabled||(o=window.mixpanel)!=null&&o.identify&&(window.mixpanel.identify(typeof(e==null?void 0:e.email)=="string"?e==null?void 0:e.email:r),e&&(window.mixpanel.track("identify",e),window.mixpanel.people.set(e))),!((c=(a=(l=ae.options)==null?void 0:l.integrations)==null?void 0:a.amplitude)!=null&&c.disabled)&&(u=window.amplitude)!=null&&u.getInstance&&(window.amplitude.getInstance().setUserId(r),Object.keys(e).length>0)){const d=Object.keys(e).reduce((h,f)=>(h.set(f,e[f]),h),new window.amplitude.Identify);window.amplitude.getInstance().identify(d)}},metrics:r=>{try{for(const e of r)ae.recordMetric(e)}catch(e){Ye("metrics",e)}},recordMetric:r=>{try{ae.onHighlightReady(()=>{var e;B.recordGauge(P(S({},r),{tags:(e=r.tags)!=null?e:[],group:window.location.href,category:"Frontend"}))})}catch(e){Ye("recordMetric",e)}},recordCount:r=>{try{ae.onHighlightReady(()=>{B.recordCount(r)})}catch(e){Ye("recordCount",e)}},recordIncr:r=>{try{ae.onHighlightReady(()=>{B.recordIncr(r)})}catch(e){Ye("recordIncr",e)}},recordHistogram:r=>{try{ae.onHighlightReady(()=>{B.recordHistogram(r)})}catch(e){Ye("recordHistogram",e)}},recordUpDownCounter:r=>{try{ae.onHighlightReady(()=>{B.recordUpDownCounter(r)})}catch(e){Ye("recordUpDownCounter",e)}},startSpan:(r,e,t,n)=>{const i=Io();if(!i){const o=Ao();return n===void 0&&t===void 0?e(o):n===void 0?t(o):n(o)}const s=(o,l)=>{const a=l(o);return a instanceof Promise?a.finally(()=>o.end()):(o.end(),a)};return n===void 0&&t===void 0?i.startActiveSpan(r,o=>s(o,e)):n===void 0?i.startActiveSpan(r,e,o=>s(o,t)):i.startActiveSpan(r,e,t,o=>s(o,n))},startManualSpan:(r,e,t,n)=>{const i=Io();if(!i){const s=Ao();return n===void 0&&t===void 0?e(s):n===void 0?t(s):n(s)}return n===void 0&&t===void 0?i.startActiveSpan(r,e):n===void 0?i.startActiveSpan(r,e,t):i.startActiveSpan(r,e,t,n)},getSessionURL:()=>new Promise((r,e)=>{ae.onHighlightReady(()=>{const t=B.sessionData.sessionSecureID,n=At(t);n?r(`https://${ci}/${n.projectID}/sessions/${t}`):e(new Error(`Unable to get session URL: ${t}`))})}),getSessionDetails:()=>new Promise((r,e)=>{ae.onHighlightReady(()=>J(this,null,function*(){try{const t=yield ae.getSessionURL();if(!t)throw new Error("Could not get session URL");const n=B.sessionData.sessionSecureID,i=At(n),s=i==null?void 0:i.sessionStartTime;if(!s)throw new Error("Could not get session start timestamp");const o=new Date().getTime(),l=new URL(t),a=new URL(t);a.searchParams.set("ts",((o-s)/1e3).toString()),r({url:l.toString(),urlWithTimestamp:a.toString(),sessionSecureID:n})}catch(t){e(t)}}))}),getRecordingState:()=>{var r;return(r=B==null?void 0:B.state)!=null?r:"NotRecording"},onHighlightReady:(r,e)=>{if(B&&B.ready){r();return}if(wi.push({options:e,func:r}),Po!==void 0)return;const t=()=>{wi=wi.filter(i=>{var s;return!B||((s=i.options)==null?void 0:s.waitForReady)!==!1&&!B.ready?!0:(i.func(),!1)}),Po=void 0,wi.length>0&&(Po=setTimeout(t,fk))};t()},registerLD(r){ev.length||(ae.onHighlightReady(()=>{B.registerLD(r)}),P1(this,r,ae.options),ev.push(new wo(r)))}};typeof window!="undefined"&&(window.H=ae),nk(),Bb(),zb();const pk={reset:()=>{Ju=!1,B=void 0,wi=[],Po=void 0,Ri=void 0},setHighlightObj:r=>{B=r}};W.GenerateSecureID=ct,W.H=ae,W.HighlightSegmentMiddleware=sk,W.MetricCategory=qb,W.Observe=uk,W.Record=hk,W.__testing=pk,W.configureElectronHighlight=ik,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
